[{"title":"Prisma","url":"/2025/04/28/Prisma/","content":"Prisma å‘½ä»¤è¡Œç›¸å…³æ•°æ®åº“è¿ç§»\nåˆ›å»ºå¹¶åº”ç”¨æ–°çš„è¿ç§»ï¼š\nnpx prisma migrate dev --name add_timestamps\n\næ ¹æ® schema.prisma çš„æ›´æ”¹ç”Ÿæˆè¿ç§»æ–‡ä»¶ï¼Œå¹¶åº”ç”¨åˆ°æ•°æ®åº“ã€‚\n--name æŒ‡å®šè¿ç§»çš„åç§°ã€‚\n\n\né‡ç½®å¹¶é‡æ–°åº”ç”¨æ‰€æœ‰è¿ç§»ï¼š\nnpx prisma migrate reset\n\né‡ç½®æ•°æ®åº“å¹¶é‡æ–°åº”ç”¨æ‰€æœ‰è¿ç§»ï¼Œé€‚ç”¨äºå¼€å‘ç¯å¢ƒã€‚\n\n\nç”Ÿæˆè¿ç§»æ–‡ä»¶ä½†ä¸åº”ç”¨ï¼š\nnpx prisma migrate dev --create-only\n\nç”Ÿæˆè¿ç§»æ–‡ä»¶ä½†ä¸åº”ç”¨åˆ°æ•°æ®åº“ï¼Œå¯ä»¥æ‰‹åŠ¨ä¿®æ”¹è¿ç§»æ–‡ä»¶åå†åº”ç”¨ã€‚\n\n\nåº”ç”¨æœªåº”ç”¨çš„è¿ç§»ï¼š\nnpx prisma migrate deploy\n\nå°†æœªåº”ç”¨çš„è¿ç§»åº”ç”¨åˆ°ç”Ÿäº§ç¯å¢ƒã€‚\n\n\næŸ¥çœ‹è¿ç§»çŠ¶æ€ï¼š\nnpx prisma migrate status\n\næŸ¥çœ‹å½“å‰æ•°æ®åº“çš„è¿ç§»çŠ¶æ€ã€‚\n\n\nå›æ»šè¿ç§»çŠ¶ä½“;\nnpx prisma migrate resolve --rolled-back &lt;migration_name&gt;\n\n\næ•°æ®åº“æ“ä½œ\nç”Ÿæˆ Prisma å®¢æˆ·ç«¯ï¼š\nnpx prisma generate\n\næ ¹æ® schema.prisma ç”Ÿæˆ Prisma å®¢æˆ·ç«¯ä»£ç ã€‚\n\n\næ¨é€ schema åˆ°æ•°æ®åº“ï¼ˆä¸ç”Ÿæˆè¿ç§»ï¼‰ï¼š\nnpx prisma db push\n\nå°† schema.prisma çš„æ›´æ”¹ç›´æ¥åº”ç”¨åˆ°æ•°æ®åº“ï¼Œä¸ç”Ÿæˆè¿ç§»æ–‡ä»¶ã€‚\n\n\næŸ¥çœ‹æ•°æ®åº“æ•°æ®ï¼š\nnpx prisma studio\n\nå¯åŠ¨ Prisma Studioï¼Œä¸€ä¸ªå¯è§†åŒ–å·¥å…·ï¼Œç”¨äºæŸ¥çœ‹å’Œæ“ä½œæ•°æ®åº“æ•°æ®ã€‚\n\n\n\n\næ•°æ®æ“ä½œ\næ‰§è¡Œç§å­è„šæœ¬ï¼š\nnpx prisma db seed\n\nè¿è¡Œ prisma/seed.ts æˆ– prisma/seed.js è„šæœ¬ï¼Œç”¨äºå¡«å……æ•°æ®åº“åˆå§‹æ•°æ®ã€‚\n\n\nè¿è¡Œè‡ªå®šä¹‰è„šæœ¬ï¼š\nnpx prisma execute --file ./scripts/my-script.ts\n\næ‰§è¡Œè‡ªå®šä¹‰çš„ TypeScript æˆ– JavaScript è„šæœ¬ã€‚\n\n\n\n\nå…¶ä»–å¸¸ç”¨å‘½ä»¤\nåˆå§‹åŒ– Prismaï¼š\nnpx prisma init\n\nåˆå§‹åŒ– Prismaï¼Œç”Ÿæˆ prisma/schema.prisma å’Œ .env æ–‡ä»¶ã€‚\n\n\næ ¼å¼åŒ– schema.prismaï¼š\nnpx prisma format\n\næ ¼å¼åŒ– schema.prisma æ–‡ä»¶ï¼Œä½¿å…¶æ›´æ˜“è¯»ã€‚\n\n\næ£€æŸ¥ Prisma ç‰ˆæœ¬ï¼š\nnpx prisma --version\n\næŸ¥çœ‹å½“å‰å®‰è£…çš„ Prisma ç‰ˆæœ¬ã€‚\n\n\næ¸…ç†æœªä½¿ç”¨çš„è¿ç§»æ–‡ä»¶ï¼š\nnpx prisma migrate resolve --applied &quot;20231010123456_add_timestamps&quot;\n\næ ‡è®°è¿ç§»æ–‡ä»¶ä¸ºå·²åº”ç”¨ï¼Œç”¨äºä¿®å¤è¿ç§»çŠ¶æ€ä¸ä¸€è‡´çš„é—®é¢˜ã€‚\n\n\n\n\nè¯­è¨€ç‰¹æ€§Prisma ä¸­çš„å…³ç³»å®šä¹‰éœ€è¦åŒå‘å£°æ˜\n\nåœ¨å¼•ç”¨è¡¨ä¸­è¿›è¡Œå¤–é”®çš„å£°æ˜\nmodel BorrowRecord &#123;\tbookId string \tbook       Book       @relation(fields: [bookId], references: [id])&#125;\n\n\nè¡¨ç¤ºå½“å‰è¡¨ä¸­çš„ bookIdå­—æ®µæ˜¯è¢«åº”ç”¨è¡¨ Book çš„å±æ€§ idçš„å¤–é”®.\n\n\nåŒæ—¶åœ¨è¢«å¼•ç”¨è¡¨ä¸­å®šä¹‰:\nmodel Book&#123;  id             String         @id  borrowRecords  BorrowRecord[] // æ·»åŠ åå‘å…³ç³»&#125;\n\n\nä½¿ç”¨TSäº¤äº’å®¢æˆ·ç«¯Prisma Client æ˜¯ä¸€ä¸ªç±»å‹å®‰å…¨çš„æ•°æ®åº“æŸ¥è¯¢å·¥å…·ï¼Œå®ƒæ ¹æ® schema.prisma æ–‡ä»¶ç”Ÿæˆ TypeScript ç±»å‹å®šä¹‰å’Œæ•°æ®åº“æ“ä½œ APIã€‚\nä»¥ä¸‹æ˜¯å…¶ä¸»è¦åŠŸèƒ½åŠä»£ç ç¤ºä¾‹ã€‚\n\n1. åˆå§‹åŒ– Prisma Clientåœ¨ä½¿ç”¨ Prisma Client ä¹‹å‰ï¼Œéœ€è¦åˆå§‹åŒ–ä¸€ä¸ª PrismaClient å®ä¾‹ã€‚\nimport &#123; PrismaClient &#125; from &#x27;@prisma/client&#x27;;const prisma = new PrismaClient();\n\n\n2. æŸ¥è¯¢æ•°æ®\næŸ¥è¯¢æ‰€æœ‰è®°å½•\n\nä½¿ç”¨ findMany æ–¹æ³•æŸ¥è¯¢è¡¨ä¸­çš„æ‰€æœ‰è®°å½•ã€‚\nasync function getAllUsers() &#123;  const users = await prisma.user.findMany();  console.log(&#x27;All users:&#x27;, users);&#125;getAllUsers();\n\n\næŸ¥è¯¢å•æ¡è®°å½•\n\nä½¿ç”¨ findUnique æ–¹æ³•æ ¹æ®å”¯ä¸€æ¡ä»¶æŸ¥è¯¢å•æ¡è®°å½•ã€‚\nasync function getUserById(id: number) &#123;  const user = await prisma.user.findUnique(&#123;    where: &#123; id &#125;,  &#125;);  console.log(&#x27;User:&#x27;, user);&#125;getUserById(1);\n\n\næ¡ä»¶æŸ¥è¯¢\n\nä½¿ç”¨ where æ¡ä»¶è¿‡æ»¤æŸ¥è¯¢ç»“æœã€‚\nasync function getUsersByName(name: string) &#123;  const users = await prisma.user.findMany(&#123;    where: &#123; name &#125;,  &#125;);  console.log(&#x27;Users with name:&#x27;, name, users);&#125;getUsersByName(&#x27;Alice&#x27;);\n\n\n3. åˆ›å»ºæ•°æ®ä½¿ç”¨ create æ–¹æ³•æ’å…¥æ–°æ•°æ®:\nasync function createUser(name: string, email: string) &#123;  const newUser = await prisma.user.create(&#123;    data: &#123;      name,      email,    &#125;,  &#125;);  console.log(&#x27;Created new user:&#x27;, newUser);&#125;createUser(&#x27;Bob&#x27;, &#x27;bob@example.com&#x27;);\n\n\n4. æ›´æ–°æ•°æ®ä½¿ç”¨ update æ–¹æ³•ä¿®æ”¹ç°æœ‰æ•°æ®ã€‚\nasync function updateUserEmail(id: number, newEmail: string) &#123;  const updatedUser = await prisma.user.update(&#123;    where: &#123; id &#125;,    data: &#123; email: newEmail &#125;,  &#125;);  console.log(&#x27;Updated user:&#x27;, updatedUser);&#125;updateUserEmail(1, &#x27;alice_new@example.com&#x27;);\n\n\n5. åˆ é™¤æ•°æ®ä½¿ç”¨ delete æ–¹æ³•åˆ é™¤æ•°æ®ã€‚\nasync function deleteUser(id: number) &#123;  const deletedUser = await prisma.user.delete(&#123;    where: &#123; id &#125;,  &#125;);  console.log(&#x27;Deleted user:&#x27;, deletedUser);&#125;deleteUser(1);\n\n\n6. å…³ç³»æŸ¥è¯¢\næŸ¥è¯¢å…³è”æ•°æ®\n\nä½¿ç”¨ include æŸ¥è¯¢å…³è”çš„æ¨¡å‹æ•°æ®ã€‚\nasync function getUserWithPosts(userId: number) &#123;  const userWithPosts = await prisma.user.findUnique(&#123;    where: &#123; id: userId &#125;,    include: &#123; posts: true &#125;, // å‡è®¾ User æ¨¡å‹ä¸ Post æ¨¡å‹æœ‰å…³è”  &#125;);  console.log(&#x27;User with posts:&#x27;, userWithPosts);&#125;getUserWithPosts(1);\n\n\nåµŒå¥—æŸ¥è¯¢\n\næ”¯æŒåµŒå¥—æŸ¥è¯¢å…³è”æ•°æ®ã€‚\nasync function getPostWithAuthor(postId: number) &#123;  const postWithAuthor = await prisma.post.findUnique(&#123;    where: &#123; id: postId &#125;,    include: &#123; author: true &#125;, // å‡è®¾ Post æ¨¡å‹ä¸ User æ¨¡å‹æœ‰å…³è”  &#125;);  console.log(&#x27;Post with author:&#x27;, postWithAuthor);&#125;getPostWithAuthor(1);\n\n\n7. åˆ†é¡µæŸ¥è¯¢ä½¿ç”¨ skip å’Œ take å®ç°åˆ†é¡µæŸ¥è¯¢ã€‚\nasync function getUsersPaginated(page: number, pageSize: number) &#123;  const users = await prisma.user.findMany(&#123;    skip: (page - 1) * pageSize,    take: pageSize,  &#125;);  console.log(&#x27;Paginated users:&#x27;, users);&#125;getUsersPaginated(1, 10); // æŸ¥è¯¢ç¬¬ 1 é¡µï¼Œæ¯é¡µ 10 æ¡è®°å½•\n\n\n8. æ’åºæŸ¥è¯¢ä½¿ç”¨ orderBy å¯¹æŸ¥è¯¢ç»“æœæ’åºã€‚\nasync function getUsersSortedByName() &#123;  const users = await prisma.user.findMany(&#123;    orderBy: &#123; name: &#x27;asc&#x27; &#125;, // æŒ‰ name å­—æ®µå‡åºæ’åº  &#125;);  console.log(&#x27;Sorted users:&#x27;, users);&#125;getUsersSortedByName();\n\n\n9. èšåˆæŸ¥è¯¢ä½¿ç”¨ countã€sumã€avg ç­‰èšåˆå‡½æ•°ã€‚\n\nç»Ÿè®¡è®°å½•æ•°\n\nasync function countUsers() &#123;  const userCount = await prisma.user.count();  console.log(&#x27;Total users:&#x27;, userCount);&#125;countUsers();\n\n\nè®¡ç®—å­—æ®µå¹³å‡å€¼\n\nasync function averageUserAge() &#123;  const avgAge = await prisma.user.aggregate(&#123;    _avg: &#123; age: true &#125;, // å‡è®¾ User æ¨¡å‹æœ‰ age å­—æ®µ  &#125;);  console.log(&#x27;Average user age:&#x27;, avgAge._avg.age);&#125;averageUserAge();\n\n\n10. äº‹åŠ¡æ“ä½œä½¿ç”¨ $transaction æ‰§è¡Œäº‹åŠ¡æ“ä½œã€‚\nasync function transferBalance(fromId: number, toId: number, amount: number) &#123;  await prisma.$transaction([    prisma.user.update(&#123;      where: &#123; id: fromId &#125;,      data: &#123; balance: &#123; decrement: amount &#125; &#125;, // å‡è®¾ User æ¨¡å‹æœ‰ balance å­—æ®µ    &#125;),    prisma.user.update(&#123;      where: &#123; id: toId &#125;,      data: &#123; balance: &#123; increment: amount &#125; &#125;,    &#125;),  ]);  console.log(&#x27;Balance transfer completed&#x27;);&#125;transferBalance(1, 2, 100);\n\n\n11. å…³é—­ Prisma Clientåœ¨ç¨‹åºç»“æŸæ—¶ï¼Œå…³é—­ Prisma Client ä»¥é‡Šæ”¾æ•°æ®åº“è¿æ¥ã€‚\nasync function main() &#123;  // æ•°æ®åº“æ“ä½œä»£ç &#125;main()  .catch(e =&gt; &#123;    console.error(e);  &#125;)  .finally(async () =&gt; &#123;    await prisma.$disconnect();  &#125;);\n\n\n","categories":["å‰åç«¯å¼€å‘"],"tags":["æ•°æ®åº“"]},{"title":"å€¦é¸Ÿ","url":"/2025/01/08/poets/bird/","content":"\n\næˆ‘ç›˜æ—‹çš„ç›®å…‰æ˜¯æ¼‚æ³Šä¸æ¯çš„å€¦é¸Ÿ\n\nè¶Šè¿‡äººæµ· å å…¥ä½ ä¹Œé»‘ç³ä»ä¸­çš„å¤œ\n\n\n\nä¸‹é™„æœ€åˆçš„ä¸‰èŠ‚è¯—, ä»¥åŠçµæ„Ÿæ¥æº.\n\n\n å®Œæ•´ä¸‰èŠ‚è¯—\n\næˆ‘ç›˜æ—‹çš„ç›®å…‰æ˜¯æ¼‚æ³Šä¸æ¯çš„å€¦é¸Ÿ \nè¶Šè¿‡äººæµ·ç»ˆäºè½å…¥ä½ ä¹Œé»‘ç³ä»ä¸­çš„å¤œ\n\nä½ æ¾„æ¾ˆçš„çœ¼çœ¸æ˜ ç…§ç€é—ªçƒæ˜ç­çš„æ™¨æ˜Ÿ\nä½ æ³›ç€çº¢æ™•çš„è„¸é¢Š ç•™ç€æœéœçƒ­åˆ‡äº²å»çš„å°è®°\n\næˆ‘ä»¬çš„ç›®å…‰è¿˜æ˜¯æ‚„ç„¶ç›¸é‡äº†\nä½ æ¸©å’Œçš„å‡è§†åˆè®©æˆ‘æƒ³èµ·é»æ˜çš„å¾®å…‰\næˆ‘æ¼†é»‘çš„ç¾½ç¿¼å¾®å¾®é¢¤åŠ¨ éšåç¼ç¼ç‡ƒçƒ§\näºæ˜¯ æˆ‘çš„ç›®å…‰è½½ç€ä½™çƒ¬ å†åº¦é£è¿œäº†\n\n\n\n\n ã€Œçµæ„Ÿã€Tagore's\n\n\nMy heart, the bird of the wilderness, \nhas found its sky in your eyes.\n\n(å‡ºè‡ªæ³°æˆˆå°”çš„å›­ä¸é›†)\n\n\n\n\n","categories":["éšç¬”"],"tags":["çŸ­è¯—"]},{"title":"æ™šéœ","url":"/2025/01/09/poets/%E6%99%9A%E9%9C%9E/","content":"\n\nç™½æ˜¼é£çº¢äº†å¥¹çš„è„¸é¢Š \nä»¥éšåŒ¿äºè¿œå±±ä¹‹åçš„å‡æœ›  \né»˜é»˜æœŸå¾…ç€  \næœˆè‰²çš„é™ä¸´  \n\n","categories":["éšç¬”"],"tags":["çŸ­è¯—","è‡ªç„¶"]},{"title":"CORS","url":"/2025/01/16/%E5%89%8D%E5%90%8E%E7%AB%AF/CORS/","content":"æ¦‚è¿°è·¨åŸŸèµ„æºå…±äº«ï¼ˆCross-Origin Resource Sharing, CORSï¼‰æ˜¯ç°ä»£Webåº”ç”¨ç¨‹åºä¸­çš„é‡è¦å®‰å…¨æœºåˆ¶ã€‚æœ¬æ–‡æ¡£æ—¨åœ¨æä¾›å…¨é¢çš„CORSé…ç½®æŒ‡å—ï¼Œæ¶µç›–ä»å¼€å‘ç¯å¢ƒåˆ°ç”Ÿäº§éƒ¨ç½²çš„å®Œæ•´å®æ–½æ–¹æ¡ˆã€‚\næŠ€æœ¯èƒŒæ™¯åŒæºç­–ç•¥åŸºç¡€åŒæºç­–ç•¥æ˜¯Webåº”ç”¨å®‰å…¨çš„åŸºçŸ³ï¼Œè¦æ±‚åè®®ï¼ˆProtocolï¼‰ã€åŸŸåï¼ˆDomainï¼‰å’Œç«¯å£ï¼ˆPortï¼‰ä¸‰è€…å‡ç›¸åŒã€‚ä»¥ä¸‹ä¸ºä¸åŒåœºæ™¯çš„ç¤ºä¾‹åˆ†æï¼š\nåŸºå‡†URLï¼šhttp://example.com/page.htmlè·¨åŸŸåœºæ™¯ï¼š- http://api.example.com/data     // å­åŸŸåå·®å¼‚- https://example.com/data        // åè®®å·®å¼‚- http://example.com:8080/data    // ç«¯å£å·®å¼‚\n\né…ç½®æ–¹æ¡ˆç¯å¢ƒå˜é‡é©±åŠ¨çš„CORSé…ç½®ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„ã€åŸºäºç¯å¢ƒå˜é‡çš„CORSé…ç½®ç¤ºä¾‹ã€‚è¿™ç§æ–¹æ¡ˆå…·æœ‰è‰¯å¥½çš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼š\nimport osfrom flask import Flaskfrom flask_cors import CORSapp = Flask(__name__)# ä»ç¯å¢ƒå˜é‡è·å–å‰ç«¯URLï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®åˆ™ä½¿ç”¨é»˜è®¤å€¼FRONTEND_URL = os.environ.get(&#x27;FRONTEND_URL&#x27;, &#x27;http://localhost:3000&#x27;)# CORSé…ç½®å®ç°CORS(app, resources=&#123;    r&quot;/api/*&quot;: &#123;        &quot;origins&quot;: FRONTEND_URL,        &quot;methods&quot;: [&quot;GET&quot;, &quot;POST&quot;, &quot;OPTIONS&quot;, &quot;PUT&quot;, &quot;DELETE&quot;],        &quot;allow_headers&quot;: [&quot;Content-Type&quot;, &quot;Authorization&quot;, &quot;X-Requested-With&quot;],        &quot;supports_credentials&quot;: True,        &quot;expose_headers&quot;: [&quot;Content-Disposition&quot;]    &#125;&#125;)\n\né…ç½®è¯¦è§£è®©æˆ‘ä»¬é€è¡Œåˆ†æè¿™ä¸ªé…ç½®ï¼š\n\nç¯å¢ƒå˜é‡è®¾ç½®\n\nFRONTEND_URL = os.environ.get(&#x27;FRONTEND_URL&#x27;, &#x27;http://localhost:3000&#x27;)\n\nä½¿ç”¨os.environ.get()è·å–ç¯å¢ƒå˜é‡\næä¾›é»˜è®¤å€¼&#39;http://localhost:3000&#39;ä½œä¸ºæœ¬åœ°å¼€å‘ç¯å¢ƒçš„é…ç½®\nå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡è½»æ¾åˆ‡æ¢ä¸åŒç¯å¢ƒçš„é…ç½®\n\n\nCORSé…ç½®å‚æ•°\n\n&quot;origins&quot;: FRONTEND_URL\n\nåŠ¨æ€è®¾ç½®å…è®¸çš„æºï¼ŒåŸºäºç¯å¢ƒå˜é‡\né¿å…äº†ç¡¬ç¼–ç çš„é—®é¢˜\næ”¯æŒä¸åŒéƒ¨ç½²ç¯å¢ƒçš„çµæ´»é…ç½®\n\n\nHTTPæ–¹æ³•é…ç½®\n\n&quot;methods&quot;: [&quot;GET&quot;, &quot;POST&quot;, &quot;OPTIONS&quot;, &quot;PUT&quot;, &quot;DELETE&quot;]\n\næ˜ç¡®å®šä¹‰å…è®¸çš„HTTPæ–¹æ³•\nåŒ…å«äº†RESTful APIæ‰€éœ€çš„å…¨éƒ¨æ–¹æ³•\nOPTIONSç”¨äºé¢„æ£€è¯·æ±‚ï¼ˆpreflight requestï¼‰\n\n\nè¯·æ±‚å¤´é…ç½®\n\n&quot;allow_headers&quot;: [&quot;Content-Type&quot;, &quot;Authorization&quot;, &quot;X-Requested-With&quot;]\n\nContent-Typeï¼šå…è®¸è®¾ç½®è¯·æ±‚çš„å†…å®¹ç±»å‹\nAuthorizationï¼šæ”¯æŒèº«ä»½éªŒè¯ä»¤ç‰Œ\nX-Requested-Withï¼šç”¨äºæ ‡è¯†AJAXè¯·æ±‚\n\n\nå‡­è¯æ”¯æŒ\n\n&quot;supports_credentials&quot;: True\n\nå…è®¸è·¨åŸŸè¯·æ±‚æºå¸¦å‡­è¯ï¼ˆå¦‚Cookieï¼‰\nå¯¹éœ€è¦èº«ä»½éªŒè¯çš„APIè‡³å…³é‡è¦\n\n\nå“åº”å¤´æš´éœ²\n\n&quot;expose_headers&quot;: [&quot;Content-Disposition&quot;]\n\nå…è®¸å®¢æˆ·ç«¯è®¿é—®Content-Dispositionå“åº”å¤´\né€šå¸¸ç”¨äºæ–‡ä»¶ä¸‹è½½åŠŸèƒ½\n\nç¯å¢ƒå˜é‡é…ç½®ç¤ºä¾‹# å¼€å‘ç¯å¢ƒexport FRONTEND_URL=http://localhost:3000# æµ‹è¯•ç¯å¢ƒexport FRONTEND_URL=http://test.example.com# ç”Ÿäº§ç¯å¢ƒexport FRONTEND_URL=https://www.example.com\n\næœ€ä½³å®è·µç¯å¢ƒå˜é‡ç®¡ç†å»ºè®®\nå¼€å‘ç¯å¢ƒ\n\n\nä½¿ç”¨.envæ–‡ä»¶ç®¡ç†æœ¬åœ°å¼€å‘ç¯å¢ƒå˜é‡\nå°†.envæ–‡ä»¶åŠ å…¥.gitignore\n\n\nç”Ÿäº§ç¯å¢ƒ\n\n\nä½¿ç”¨å®¹å™¨åŒ–éƒ¨ç½²æ—¶é€šè¿‡ç¯å¢ƒå˜é‡æ³¨å…¥\nä½¿ç”¨é…ç½®ç®¡ç†ç³»ç»Ÿç»Ÿä¸€ç®¡ç†ç¯å¢ƒå˜é‡\n\nå®‰å…¨æ€§è€ƒè™‘\né¿å…è¿‡äºå®½æ¾çš„é…ç½®\n\n# ä¸æ¨è&quot;origins&quot;: &quot;*&quot;  # æ¨è&quot;origins&quot;: FRONTEND_URL\n\n\nåˆç†è®¾ç½®å‡­è¯ç­–ç•¥\n\n\nä»…åœ¨å¿…è¦æ—¶å¯ç”¨supports_credentials\nç¡®ä¿å‰ç«¯é…ç½®åŒ¹é…ï¼ˆcredentials: &#39;include&#39;ï¼‰\n\né—®é¢˜æ’æŸ¥å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ\nCORSç­–ç•¥è¿è§„\n\nAccess to XMLHttpRequest at &#x27;http://api.example.com&#x27; from origin &#x27;http://example.com&#x27; has been blocked by CORS policy\nè§£å†³æ–¹æ¡ˆï¼š\n\næ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®è®¾ç½®\néªŒè¯å‰ç«¯è¯·æ±‚URLä¸é…ç½®æ˜¯å¦åŒ¹é…\nç¡®è®¤æ‰€æœ‰å¿…è¦çš„è¯·æ±‚å¤´éƒ½å·²é…ç½®\n\nå‚è€ƒæ–‡çŒ®\nW3C CORS Specification\nMDN Web Docs - Cross-Origin Resource Sharing\nFlask-CORS Official Documentation\n\n","categories":["å­¦ä¹ ç¬”è®°"],"tags":["å‰åç«¯äº¤äº’","ç½‘ç«™å¼€å‘"]},{"title":"å“åº”å¼è®¾è®¡","url":"/2025/01/20/%E5%89%8D%E5%90%8E%E7%AB%AF/%E5%93%8D%E5%BA%94%E5%BC%8F%E8%AE%BE%E8%AE%A1/","content":"æ‰€æœ‰çš„ img å…ƒç´ éƒ½åº”è¯¥æœ‰ä¸€ä¸ª alt å±æ€§ã€‚ alt å±æ€§çš„æ–‡æœ¬ï¼ˆå€¼ï¼‰æœ‰ä¸¤ä¸ªä½œç”¨:\n\nç¬¬ä¸€ä¸ªä½œç”¨æ˜¯è®©å±å¹•é˜…è¯»å™¨å¯ä»¥çŸ¥æ™“å›¾ç‰‡çš„å†…å®¹ï¼Œè¿™ä¼šå¯¹ç½‘é¡µçš„å¯è®¿é—®æ€§æœ‰å¾ˆå¤§æå‡ï¼›\nå¦ä¸€ä¸ªä½œç”¨æ˜¯å½“å›¾ç‰‡æ— æ³•åŠ è½½æ—¶ï¼Œé¡µé¢éœ€è¦æ˜¾ç¤ºçš„æ›¿ä»£æ–‡æœ¬ã€‚\n\n\n\næ³¨æ„åµŒå¥—çš„å½¢å¼.e.g\n&lt;p&gt;See more &lt;a href=&quot;https://freecatphotoapp.com&quot;&gt;cat photos&lt;/a&gt; in our gallery.&lt;/p&gt;\n\n\n\n\nè¦åœ¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€é“¾æ¥ï¼Œå¯ä»¥åœ¨é”šå…ƒç´ ï¼ˆaï¼‰ä¸­ä½¿ç”¨ target å±æ€§ã€‚\n&lt;p&gt;See more &lt;a href=&quot;https://freecatphotoapp.com&quot; target = &quot;_blank&quot;&gt;cat photos&lt;/a&gt; in our gallery.&lt;/p&gt;\n\n\n\né”šå…ƒç´ é™¤äº†èƒ½å°†æ–‡æœ¬è½¬åŒ–ä¸ºé“¾æ¥, è¿˜å¯ä»¥å°† å›¾ç‰‡ è½¬æ¢ä¸ºé“¾æ¥:\n&lt;a hreg = &quot;https://freecatphotoapp.com&quot;&gt;    &lt;img src=&quot;https://cdn.freecodecamp.org/curriculum/cat-photo-app/relaxing-cat.jpg&quot; alt=&quot;A cute orange cat lying on its back.&quot;&gt;&lt;/a&gt;\n\n\n\n\nsection å…ƒç´ ç”¨äºåœ¨æ–‡æ¡£ä¸­å®šä¹‰å„éƒ¨åˆ†ï¼Œå¦‚ç« èŠ‚ã€æ ‡é¢˜ã€é¡µè„šæˆ–æ–‡æ¡£çš„ä»»ä½•å…¶ä»–éƒ¨åˆ†ã€‚ å®ƒæ˜¯ä¸€ä¸ªå¯¹ SEO å’Œæ— éšœç¢ç‰¹æ€§æœ‰å¸®åŠ©çš„è¯­ä¹‰å…ƒç´ ã€‚\n\n\n\nåˆ—è¡¨:\n\næ— åºåˆ—è¡¨: ul;\næœ‰åºåˆ—è¡¨:ol;\nåˆ—è¡¨é¡¹: li;\n\n\n\n\nfigure å…ƒç´ ä»£è¡¨è‡ªåŒ…å«çš„å†…å®¹ï¼Œå…è®¸å°†å›¾åƒä¸æ ‡é¢˜ç›¸å…³è”;figcaption å…ƒç´ ç”¨äºæ·»åŠ æ ‡é¢˜ä»¥æè¿° figure å…ƒç´ ä¸­åŒ…å«çš„å›¾åƒã€‚\n&lt;figure&gt;  &lt;img src=&quot;image.jpg&quot; alt=&quot;A description of the image&quot;&gt;  &lt;figcaption&gt;A cute cat&lt;/figcaption&gt;&lt;/figure&gt;\n\n\n\n\n\nä½¿ç”¨ em ä½¿å¾—æ–‡å­—ä¸ºæ–œä½“;\nstrong åŠ æ·±æ–‡å­—;\n\n\n\n\nform å…ƒç´ ç”¨äºä»ç”¨æˆ·è·å–ä¿¡æ¯ï¼Œå¦‚å§“åã€ç”µå­é‚®ä»¶å’Œå…¶ä»–è¯¦ç»†ä¿¡æ¯ã€‚\n\nactionå±æ€§æŒ‡å®šè¡¨å•æ•°æ®å‘é€çš„ä½ç½®;\n\n&lt;form action=&quot;/submit-url&quot;&gt;&lt;/form&gt;\n\n\ninput å…è®¸é€šè¿‡å¤šç§æ–¹å¼ä»Webè¡¨å•ä¸­æ”¶é›†æ•°æ®:\n\nä¸imgä¸€æ ·ä¸ºç©ºå…ƒç´ â€”â€”ä¸éœ€è¦ç»“æŸæ ‡ç­¾;\nä½¿ç”¨ type å±æ€§åˆ›å»ºå¤šç§è¾“å…¥;\ntext : æ–‡æœ¬;\nradio: å¯ä»¥ä½¿ç”¨å•é€‰æŒ‰é’®;\ncheckbox: è¡¨å•ä½¿ç”¨ å¤é€‰æ¡†;\n\n\nä½¿ç”¨nameå±æ€§ä½¿å¾—åŒºåˆ†æäº¤çš„æ•°æ®;\nä»¤å¤šä¸ªå•é€‰æŒ‰é’®å…·æœ‰ ç›¸åŒ çš„name, ä½¿å¾—åœ¨é€‰ä¸­å…¶ä¸­ä¸€ä¸ªæŒ‰é’®æ—¶è‡ªåŠ¨å–æ¶ˆå¦å¤–çš„å•é€‰æŒ‰é’®;\nå½¢æˆname = valueå½¢å¼çš„å±æ€§å¯¹è¿›è¡Œæäº¤;\n\n\n\n&lt;label&gt;&lt;input id=&quot;indoor&quot; type=&quot;radio&quot; name = &quot;indoor-outdoor&quot;&gt; Indoor&lt;/label&gt;&lt;label&gt;&lt;input id=&quot;outdoor&quot; type=&quot;radio&quot; name = &#x27;indoor-outdoor&#x27;&gt; Outdoor&lt;/label&gt;\n\nplaceholder ä¸­ä¸º å ä½ç¬¦ æ–‡æœ¬, ç”¨äºæç¤ºè¾“å…¥æ¡†ä¸­è¾“å…¥çš„ä¿¡æ¯;\nrequiredå±æ€§å¯ä»¥é¿å…ç¼ºå°‘æ‰€éœ€ä¿¡æ¯æ—¶çš„æäº¤, æ— éœ€èµ‹å€¼, ç¡®ä¿ç©ºæ ¼å³å¯;\n\n&lt;input type=&quot;text&quot; name = &quot;catphotourl&quot;&gt;\n\n\n\n\nbutton ç”¨äºåˆ›å»ºå¯ç‚¹å‡»çš„æŒ‰é’®:\n\nå•å‡»æ²¡æœ‰ä»»ä½•å±æ€§çš„è¡¨å•æŒ‰é’®çš„é»˜è®¤è¡Œä¸ºä¼šå°†è¡¨å•æäº¤åˆ°è¡¨å•çš„ action å±æ€§ä¸­æŒ‡å®šçš„ä½ç½®;\nç”±äºinputå’Œbuttonä¸º å†…è” å…ƒç´ , å³ä½¿ç›¸éš”ä¹¦å†™ä¹Ÿä¼šæ˜¾ç¤ºåœ¨åŒè¡Œ:\ntypeçš„submitæ˜ç¡®äº†ä¸º å¯æäº¤æŒ‰é’®;\n\n&lt;button type = &quot;submit&quot;&gt;Submit&lt;/button&gt;\n\n\n\nlabel å…ƒç´ ç”¨äºå¸®åŠ©å°† input å…ƒç´ çš„æ–‡æœ¬ä¸ input å…ƒç´ æœ¬èº«å…³è”èµ·æ¥\n&lt;label&gt;&lt;input type=&quot;radio&quot;&gt; cat&lt;/label&gt;&lt;!-- ç‚¹å‡»å•è¯ &quot;cat&quot; ä¹Ÿå°†é€‰æ‹© radio æŒ‰é’®ã€‚ --&gt;\n\n\n\nidç”¨äºæ ‡è¯†ç‰¹å®šçš„HTMLå…ƒç´ \n\n\nfieldset å…ƒç´ ç”¨äºåœ¨ Web è¡¨å•ä¸­å°†ç›¸å…³çš„è¾“å…¥å’Œæ ‡ç­¾ç»„åˆåœ¨ä¸€èµ·:\n\nå—çº§å…ƒç´ ï¼Œè¿™æ„å‘³ç€å®ƒä»¬å‡ºç°åœ¨æ–°çš„ä¸€è¡Œä¸Šã€‚\nlegend å…ƒç´ å……å½“ fieldset å…ƒç´ ä¸­å†…å®¹çš„æ ‡é¢˜ã€‚\n\n&lt;fieldset&gt;        &lt;legend&gt; Is your cat an indoor or outdoor cat?&lt;/legend&gt;          &lt;label&gt;&lt;input id=&quot;indoor&quot; type=&quot;radio&quot; name=&quot;indoor-outdoor&quot; value=&quot;indoor&quot;&gt; Indoor&lt;/label&gt;          &lt;label&gt;&lt;input id=&quot;outdoor&quot; type=&quot;radio&quot; name=&quot;indoor-outdoor&quot; value=&quot;outdoor&quot;&gt; Outdoor&lt;/label&gt;&lt;/fieldset&gt;\n\n\n\nè¿˜å¯ä»¥ä½¿ç”¨forå±æ€§å°†æ–‡æœ¬ç›´æ¥åµŒå¥—åœ¨labelå½“ä¸­, åŒæ—¶è®¾ç½®inputçš„idä¸ä¸Šè¿°çš„forå±æ€§ç›¸åŒ, ä»è€Œå®ç°æ–‡æœ¬ä¸å…ƒç´ ç›¸å…³è”çš„æ•ˆæœ:\n&lt;input id=&quot;loving&quot; type=&quot;checkbox&quot;&gt; &lt;label for = &quot;loving&quot;&gt; Loving &lt;/label&gt;\n\n\n\né»˜è®¤é€‰ä¸­çš„æŒ‰é’®: checked\n&lt;input checked type=&quot;radio&quot; name=&quot;meal&quot; value=&quot;breakfast&quot;&gt; Breakfast\n\ncheckedå±æ€§æ— éœ€é¢å¤–èµ‹å€¼.\n\n\n\nfooterç´ ç”¨äºå®šä¹‰æ–‡æ¡£æˆ–ç« èŠ‚çš„é¡µè„š:\n\nè„šé€šå¸¸åŒ…å«æ–‡æ¡£ä½œè€…ä¿¡æ¯ã€ç‰ˆæƒæ•°æ®ã€ä½¿ç”¨æ¡æ¬¾é“¾æ¥ã€è”ç³»ä¿¡æ¯ç­‰.\n\n\n\nhead ç›¸å…³\n\nå­˜æ”¾ $\\underline{å…ƒæ•°æ®}$ ä¸ä¼šå®é™…æ˜¾ç¤ºåœ¨htmlä¸­çš„æ•°æ®;\ntitle å…ƒç´ å†³å®šäº†æµè§ˆå™¨åœ¨é¡µé¢çš„æ ‡é¢˜æ æˆ–é€‰é¡¹å¡ä¸­æ˜¾ç¤ºçš„å†…å®¹;\n&lt;link rel = &quot;stylesheet&quot; href = &quot;styles.css&quot;&gt; å°†CSSæ–‡ä»¶é“¾æ¥åˆ°å½“å‰çš„HTML\n\nelse:\n\n&lt;!DOCTYPE html: å£°æ˜æ»¡è¶³æœ€æ–°ç‰ˆæœ¬htmlç›¸å…³è®¾ç½®çš„è¦æ±‚;\nmetaæ˜¯ç©ºå…ƒç´ ; &lt;meta charset = &quot;utf-8&quot;&gt;;\n\n\n\né€‰æ‹©å™¨:\n\nidé€‰æ‹©å™¨\n\n#cat &#123;  width: 250px;&#125;\n\nclassé€‰æ‹©å™¨\n\n.class-name, .other-class &#123;  styles&#125;\n\nclassç±»ä¸­å…ƒç´ çš„é€‰æ‹©\n\n.item p&#123;  /* è®¾ç½®ä¸ºæ ·å¼è¿‘ä¼¼äºå†…è”--æ’åˆ—åœ¨åŒä¸€è¡Œ, åŒæ—¶å¯ä»¥è®¾ç½®å®½é«˜ã€è¾¹è· */  display: inline-block; &#125;\n\nä¼ªå…ƒç´ \n\n/* å·²è®¿é—®é“¾æ¥åè®¾ç½®ä¸ºç°è‰² */a:visited&#123;  color: grey;&#125;/* æ‚¬æµ®æ—¶çš„å˜è‰² */a:hover &#123;  color: brown;&#125;/* ç‚¹å‡»æ—¶çš„çŠ¶æ€è®¾ç½® */a:active&#123;  color: white;&#125;\n\n\nmargin-left : auto;margin-right: auto;\n\nä½¿å¾—æ™®é€šå…ƒç´ åœ¨çˆ¶çº§å…ƒç´ çš„ç©ºé—´å†… æ°´å¹³å±…ä¸­\n\n\n\narticleæ˜¯ä¸€ä¸ªè¯­ä¹‰åŒ–æ ‡ç­¾:\n\nç”¨äºè¡¨ç¤ºæ–‡æ¡£ã€é¡µé¢æˆ–åº”ç”¨ä¸­çš„ç‹¬ç«‹çš„ã€å®Œæ•´çš„å†…å®¹å•å…ƒ;\næ¸…æ™°åœ°è¡¨æ˜å†…å®¹çš„ç”¨é€”ï¼Œå¸®åŠ©å¼€å‘è€…å’Œæœç´¢å¼•æ“ç†è§£é¡µé¢ç»“æ„;\nå†…å®¹é€šå¸¸å¯ä»¥é€šè¿‡RSSè®¢é˜…ã€ç¤¾äº¤åª’ä½“åˆ†äº«ç­‰æ–¹å¼å•ç‹¬å‘å¸ƒ.\n\nä¸å…¶ä»–ç±»ä¼¼æ ‡ç­¾çš„åŒºåˆ«:\n\ndiv: ç²¹çš„å®¹å™¨ï¼Œæ²¡æœ‰è¯­ä¹‰ï¼Œå¸¸ç”¨äºå¸ƒå±€;\nsection: è¡¨ç¤ºæ–‡æ¡£ä¸­çš„ä¸€ä¸ªé€»è¾‘åŒºåŸŸï¼Œé€šå¸¸ç”¨äºåˆ†ç»„å†…å®¹ï¼Œä½†ä¸ä¸€å®šæ˜¯ç‹¬ç«‹çš„å†…å®¹å•å…ƒ;\narticle: ç¤ºä¸€ä¸ªå¯ä»¥ç‹¬ç«‹å­˜åœ¨çš„å†…å®¹å•å…ƒ.\n\n\n\n/* è®¾ç½®å¤‡ç”¨å­—ä½“ */h1, h2 &#123;  font-family: Impact, serif;&#125;\n\n\n","categories":["å­¦ä¹ ç¬”è®°"],"tags":["æ‚è®°"]},{"title":"è·¨ç»„ä»¶æ¸²æŸ“","url":"/2025/02/16/%E5%89%8D%E5%90%8E%E7%AB%AF/%E8%B7%A8%E7%BB%84%E4%BB%B6%E6%B8%B2%E6%9F%93/","content":"ä¸ºä»€ä¹ˆéœ€è¦è·¨ç»„ä»¶å®æ—¶æ¸²æŸ“ï¼Ÿåœ¨å¼€å‘ React åº”ç”¨æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°è¿™æ ·çš„åœºæ™¯ï¼šæŸä¸ªç»„ä»¶çš„çŠ¶æ€å˜åŒ–éœ€è¦å³æ—¶åæ˜ åœ¨å…¶ä»–ä¸ç›¸å…³çš„ç»„ä»¶ä¸­ã€‚ä¾‹å¦‚ï¼š\n\nç”¨æˆ·åœ¨ä¸€ä¸ªç»„ä»¶ä¸­ç¼–è¾‘å†…å®¹ï¼Œå…¶ä»–ç»„ä»¶éœ€è¦ç«‹å³çœ‹åˆ°æ›´æ–°\nå¤šä¸ªç»„ä»¶éœ€è¦å…±äº«åŒä¸€ä»½æ•°æ®\néœ€è¦é¿å…é€šè¿‡å±‚å±‚ç»„ä»¶ä¼ é€’ propsï¼ˆå³æ‰€è°“çš„ prop drillingï¼‰\n\nè¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨ React Context æ¥å®ç°è·¨ç»„ä»¶çš„å®æ—¶æ¸²æŸ“å°±æ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚\næœ€å°å®ç°ç¤ºä¾‹ä»¥ä¸‹æ˜¯å®ç°è·¨ç»„ä»¶å®æ—¶æ¸²æŸ“çš„æœ€ç®€ä»£ç ç»“æ„ï¼š\n// 1. å®šä¹‰ Context ç±»å‹interface SharedContextType &#123;  data: any;  updateData: (newData: any) =&gt; void;&#125;// 2. åˆ›å»º Contextconst SharedContext = createContext&lt;SharedContextType | undefined&gt;(undefined);// 3. åˆ›å»º Provider ç»„ä»¶export function SharedProvider(&#123; children &#125;: &#123; children: React.ReactNode &#125;) &#123;  const [data, setData] = useState&lt;any&gt;(null);  const updateData = useCallback((newData: any) =&gt; &#123;    setData(newData);  &#125;, []);  return (    &lt;SharedContext.Provider value=&#123;&#123; data, updateData &#125;&#125;&gt;      &#123;children&#125;    &lt;/SharedContext.Provider&gt;  );&#125;// 4. åˆ›å»ºè‡ªå®šä¹‰ Hookexport function useShared() &#123;  const context = useContext(SharedContext);  if (!context) &#123;    throw new Error(&#x27;useShared must be used within SharedProvider&#x27;);  &#125;  return context;&#125;\n\nå®é™…åº”ç”¨åˆ†æè®©æˆ‘ä»¬ä»¥ä¸€ä¸ªå®é™…çš„ Mermaid å›¾è¡¨ç”Ÿæˆå™¨é¡¹ç›®ä¸ºä¾‹ï¼Œåˆ†æå¦‚ä½•è¿ç”¨è¿™ä¸ªæ¨¡å¼ï¼š\n// 1. å®šä¹‰å…·ä½“çš„æ•°æ®ç»“æ„interface HistoryItem &#123;  id: string;  content: string;  mermaidCode: string;  timestamp: number;&#125;// 2. å®ç°å¸¦æœ‰æŒä¹…åŒ–çš„ Context Providerexport function HistoryProvider(&#123; children &#125;: &#123; children: React.ReactNode &#125;) &#123;  const [selectedHistory, setSelectedHistory] = useState&lt;HistoryItem | null&gt;(null);  const [historyList, setHistoryList] = useState&lt;HistoryItem[]&gt;([]);  // æ•°æ®æŒä¹…åŒ–  useEffect(() =&gt; &#123;    if (selectedHistory) &#123;      localStorage.setItem(&#x27;selectedHistory&#x27;, JSON.stringify(selectedHistory));    &#125;  &#125;, [selectedHistory]);  // å®æ—¶æ›´æ–°æ–¹æ³•  const addHistory = async (content: string, mermaidCode: string) =&gt; &#123;    const historyItem: HistoryItem = &#123;      id: Date.now().toString(),      content,      mermaidCode,      timestamp: Date.now()    &#125;;    setHistoryList(prev =&gt; [historyItem, ...prev]);  &#125;;  return (    &lt;HistoryContext.Provider      value=&#123;&#123;        selectedHistory,        setSelectedHistory,        addHistory,        historyList      &#125;&#125;    &gt;      &#123;children&#125;    &lt;/HistoryContext.Provider&gt;  );&#125;\n\nåœ¨è¿™ä¸ªå®é™…ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å‡ ä¸ªå…³é”®ç‚¹ï¼š\n\nçŠ¶æ€å®šä¹‰ï¼šä½¿ç”¨ TypeScript æ¥å£æ˜ç¡®å®šä¹‰äº†æ•°æ®ç»“æ„ï¼Œç¡®ä¿ç±»å‹å®‰å…¨\nçŠ¶æ€æŒä¹…åŒ–ï¼šé€šè¿‡ useEffect ç›‘å¬çŠ¶æ€å˜åŒ–å¹¶ä¿å­˜åˆ° localStorage\nå®æ—¶æ›´æ–°ï¼šé€šè¿‡ setHistoryList ç¡®ä¿çŠ¶æ€æ›´æ–°åæ‰€æœ‰ä½¿ç”¨è¯¥ Context çš„ç»„ä»¶éƒ½èƒ½å³æ—¶è·å¾—æ›´æ–°\n\nå½“ç»„ä»¶éœ€è¦ä½¿ç”¨è¿™äº›å…±äº«çŠ¶æ€æ—¶ï¼Œåªéœ€ï¼š\nfunction HistoryViewer() &#123;  const &#123; selectedHistory &#125; = useHistory();    return (    &lt;div&gt;      &#123;selectedHistory &amp;&amp; (        &lt;div&gt;&#123;selectedHistory.content&#125;&lt;/div&gt;      )&#125;    &lt;/div&gt;  );&#125;\n\nè¿™ç§æ¨¡å¼çš„ä¼˜åŠ¿åœ¨äºï¼š\n\né¿å…äº† props çš„å±‚å±‚ä¼ é€’\nå®ç°äº†ç»„ä»¶é—´çš„è§£è€¦\nç¡®ä¿äº†çŠ¶æ€æ›´æ–°çš„å®æ—¶æ€§\næä¾›äº†ç±»å‹å®‰å…¨çš„æ•°æ®è®¿é—®\n\nå‚è€ƒèµ„æ–™\nReact Context Documentation\nTypeScript Handbook\nReact Hooks API Reference\n\n","tags":["å‰ç«¯"]},{"title":"MAIC","url":"/2025/05/17/%E5%A5%87%E6%80%9D%E5%A6%99%E6%83%B3/MAIC/","content":"ä¸»é¢˜â€™CSSâ€™çš„è®¾è®¡AppThemeä¸ºäº†æ–¹ä¾¿ç»Ÿä¸€ç®¡ç†é¢œè‰²ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªä¸»é¢˜ç›¸å…³çš„ç»“æ„ä½“ï¼Œå¹¶è®¾ç½®ä¸»é¢˜ç›¸å…³çš„ç¯å¢ƒå˜é‡ï¼š\nimport SwiftUIstruct AppTheme &#123;    // é€šè¿‡ Assets.xcassets å®šä¹‰çš„é¢œè‰²    let primaryColor = Color(&quot;PrimaryColor&quot;)    let secondaryColor = Color(&quot;SecondaryColor&quot;)    // ç›´æ¥åœ¨ä»£ç ä¸­å®šä¹‰é¢œè‰²    let backgroundColor = Color(UIColor.systemGray6)    // å­—ä½“    let largeTitleFont = Font.system(size: 34, weight: .bold)    let bodyFont = Font.system(size: 17, weight: .regular)    // é—´è·    let paddingSmall: CGFloat = 8    let paddingMedium: CGFloat = 16    let paddingLarge: CGFloat = 24    // åœ†è§’    let cornerRadius: CGFloat = 12&#125;\n\n\næ³¨æ„ä¸èƒ½è®¾ç½®æ­¤å¤„çš„å˜é‡ä¸º staticï¼Œ å¦åˆ™æ— æ³•åœ¨å…¶ä»–æ–‡ä»¶ä¸­ä½¿ç”¨.\n\n\nåœ¨Assetsä¸­å®šä¹‰é¢œè‰²ï¼š\n\n\n\nå¯¼å…¥ä¸»æ–‡ä»¶åœ¨ä¸»æ–‡ä»¶ä¸­å¯¼å…¥ä¸»é¢˜ç›¸å…³çš„ç»“æ„ä½“ï¼Œå¹¶è®¾ç½®ç¯å¢ƒå˜é‡ï¼š\nimport SwiftUI@mainstruct MAICApp: App &#123;    var body: some Scene &#123;        WindowGroup &#123;            ContentView()                .environment(\\.appTheme, AppTheme()) // å°† AppTheme æ³¨å…¥åˆ°ç¯å¢ƒä¸­        &#125;    &#125;&#125;\n\nä½¿ç”¨ä¸»é¢˜åœ¨å…¶ä»–æ–‡ä»¶ä¸­ï¼Œå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡æ¥è®¿é—®ä¸»é¢˜ç›¸å…³çš„å˜é‡ï¼š\nimport SwiftUIstruct ContentView: View &#123;    @Environment(\\.appTheme) var appTheme: AppTheme // ä»ç¯å¢ƒä¸­è·å– AppTheme    &#125;\n\nè®¾ç½®åº•éƒ¨å¯¼èˆªæ åŸºç¡€çš„Tabè§†å›¾struct MainView: View &#123;    var body: some View &#123;        TabView&#123;            HomeView()                .tabItem &#123;                    Label(&quot;èŠ±å›­&quot;,systemImage: &quot;house.circle&quot;)                &#125;                      HealthView()                .tabItem &#123;                    Label(&quot;å¥åº·&quot;,systemImage: &quot;heart.circle&quot;)                &#125;                      MeditationView()                .tabItem&#123;Label(&quot;å†¥æƒ³&quot;,systemImage: &quot;figure.mind.and.body.circle&quot;)                &#125;                      SettingsView()                .tabItem&#123;                    Label(&quot;è®¾ç½®&quot;,systemImage: &quot;gear.circle&quot;)                &#125;                  &#125;    &#125;&#125;\n\n\nå¯¼å…¥å„ä¸ªå®šä¹‰å¥½çš„è§†å›¾ï¼›\nLabelè®¾ç½®å¯¼èˆªæ çš„æ–‡å­—ï¼›\nsystemImageè®¾ç½®å¯¼èˆªæ çš„å›¾æ ‡\n\nç„¶ååœ¨é¡¹ç›®å…¥å£ä¸­æŒ‡å®šè¿™ä¸ªè§†å›¾ï¼š\n@mainstruct MAICApp: App &#123;    var body: some Scene &#123;        WindowGroup &#123;            MainView()                .environment(\\.appTheme, AppTheme()) // å°† AppTheme æ³¨å…¥åˆ°ç¯å¢ƒä¸­        &#125;    &#125;&#125;\n\nè®¾ç½®è§¦æ„Ÿåé¦ˆä¸ºäº†åœ¨åˆ‡æ¢åº•éƒ¨å¯¼èˆªæ æ—¶ï¼Œæä¾›è§¦æ„Ÿåé¦ˆï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ªçŠ¶æ€å˜é‡ï¼Œè®°å½•å½“å‰çš„Tabï¼š\n@State private var selectedTab = 0var body: some View &#123;    TabView(selection: $selectedTab)&#123;        HomeView()                    .tabItem &#123;                        Label(&quot;èŠ±å›­&quot;,systemImage: &quot;house.circle&quot;)                    &#125;                    .tag(0)    ...    &#125;    .sensoryFeedback(.selection, trigger: selectedTab)\n\n\nselection æ˜¯ä¸€ç§æ ‡å‡†çš„ç³»ç»Ÿè§¦è§‰åé¦ˆï¼Œé€šå¸¸ç”¨äºè¡¨ç¤ºç”¨æˆ·åœ¨é€‰æ‹©å™¨ã€åˆ—è¡¨æˆ–å…¶ä»– UI å…ƒç´ ä¸­è¿›è¡Œäº†é€‰æ‹©æˆ–çŠ¶æ€æ”¹å˜\n\n","categories":["å¼€å‘è®°å½•"],"tags":["swift"]},{"title":"ğœğ¡ğšğ­ğ’ğğ‹","url":"/2025/05/08/%E5%A5%87%E6%80%9D%E5%A6%99%E6%83%B3/chatSQL/","content":"\n  Website\n  Github Repo\n\n\n  \n\n\nä»€ä¹ˆæ˜¯chatSQL:\nchatSQL æ˜¯ä¸€ä¸ªäº¤äº’å¼ SQL å­¦ä¹ å¹³å°ï¼Œé€šè¿‡äººå·¥æ™ºèƒ½æŠ€æœ¯ç”Ÿæˆä¸ªæ€§åŒ–çš„ SQL ç»ƒä¹ é¢˜ï¼Œå¸®åŠ©ç”¨æˆ·ä»å…¥é—¨åˆ°ç²¾é€š SQL æŸ¥è¯¢è¯­è¨€ã€‚å¹³å°ç»“åˆäº†ç›´è§‚çš„æ•°æ®åº“å¯è§†åŒ–å·¥å…·ã€æ™ºèƒ½ä»£ç ç¼–è¾‘å™¨å’Œå³æ—¶åé¦ˆç³»ç»Ÿï¼Œä¸ºç”¨æˆ·æä¾›æ²‰æµ¸å¼å­¦ä¹ ä½“éªŒã€‚æ— è®ºæ‚¨æ˜¯ SQL åˆå­¦è€…è¿˜æ˜¯å¸Œæœ›æå‡æŸ¥è¯¢æŠ€èƒ½çš„å¼€å‘è€…ï¼ŒchatSQL éƒ½èƒ½æ ¹æ®æ‚¨çš„æ°´å¹³å®šåˆ¶é€‚åˆçš„å­¦ä¹ å†…å®¹ï¼Œè®© SQL å­¦ä¹ å˜å¾—æ›´åŠ é«˜æ•ˆå’Œæœ‰è¶£ã€‚\näº§ç”ŸèƒŒæ™¯åœ¨åˆå­¦sqlçš„æ—¶å€™, æ€»è§‰å¾—åœ¨çº¸ä¸Šè°ˆå…µçš„æ„Ÿè§‰ä¸å¤ªåˆ‡å®, æ€»æ˜¯ä¸çŸ¥é“è‡ªå·±èƒ¡ä¹±å†™çš„sqlè¯­å¥æ˜¯å¦æ­£ç¡®. å¶ç„¶çš„æœºä¼šçœ‹åˆ°äº†ä¸€ä¸ªåœ¨çº¿çš„è‡ªå­¦sqlç½‘ç«™, æä¾›äº†æ•°æ®åº“ç»“æ„,å…ƒç»„ä¿¡æ¯ä»¥åŠsqlç¼–è¾‘å¹³å°, ä¾›ç”¨æˆ·å®æ—¶æŸ¥è¯¢:\n\nç„¶è€Œè¯¥ç½‘ç«™çš„ä¹ é¢˜å†…å®¹å¯¹å…è´¹ç”¨æˆ·ååˆ†æœ‰é™, ä¸è¶³ä»¥sqlå­¦ä¹ è€…åå¤çš„ç»ƒä¹ . äºæ˜¯æˆ‘æƒ³åˆ°, ä¸ºä»€ä¹ˆä¸è‡ªå·±åšä¸€ä¸ªå‘¢? \nsqlé¢˜ç›®çš„ç”Ÿæˆgeminiå…è´¹çš„api + difyä¸Šå…è´¹çš„å·¥ä½œæµ &#x3D; æ— ç©·æ— å°½çš„sqlé¢˜ç›®~\nç”±äºæœ‰è¿‡difyå¹³å°ä¸Šæ­å»ºå·¥ä½œæµçš„ç»éªŒ, æˆ‘è¿˜æ˜¯é€‰æ‹©ç”¨difyæ¥é’ˆå¯¹ç”¨æˆ·çš„éœ€æ±‚ç”Ÿæˆä¸åŒéš¾åº¦å’Œç±»å‹çš„sqlé¢˜ç›®. \nschemaçš„å¯è§†åŒ–åœ¨å†™æ•°æ®åº“ä½œä¸šçš„æ—¶å€™, æ„å¤–å‘ç°äº†chartDBè¿™ä¸ªç½‘ç«™, å…¶ä¸­çš„æ•°æ®åº“ç»“æ„çš„å¯è§†åŒ–ååˆ†ä¼˜é›….ç»è¿‡å¯¹å…¶æºç çš„â€æ¢æµ‹â€, æˆ‘æŒ–æ˜åˆ°äº†xyflowè¿™ä¸ªç»„ä»¶åº“.\nåŒæ—¶, æˆ‘å†³å®šç›´æ¥ç”¨MUIç»„ä»¶åº“ä¸­çš„è¡¨æ ¼ä½œä¸ºæ•°æ®åº“å…ƒç»„çš„å±•ç¤º, è®©å…ƒç»„çš„ä¿¡æ¯æ›´åŠ ç›´è§‚.\nsqlè¯­å¥çš„æ‰§è¡Œè¿™éƒ¨åˆ†å¯è°“æ˜¯é¡¹ç›®ä¸­æœ€éš¾å®ç°çš„ä»»åŠ¡äº†.\nå…¶å®ä¸€å¼€å§‹å¹¶æ²¡æœ‰ç«‹åˆ»å¼€å§‹åšchatSQL, å°±æ˜¯å› ä¸ºæˆ‘æ²¡æœ‰ç°æˆçš„åœ¨è™šæ‹Ÿ&#x2F;å®é™…æ•°æ®åº“ä¸­æ‰§è¡Œsqlè¯­å¥çš„æ–¹æ³•. \nç„¶è€Œ, æŸå¤©æµè§ˆæ•°æ®åº“æ•™æçš„æ—¶å€™, æ„å¤–å‘ç°äº†å®˜ç½‘ä¸Šå­˜åœ¨ä¸€ä¸ªå‰ç«¯æ‰§è¡Œsqlè¯­å¥æŸ¥è¯¢çš„demo! å‘ç°å«åšsql.jsçš„åº“ä¼¼ä¹å°±å¯æ‰®æ¼”åœ¨å‰ç«¯çš„sqlå¼•æ“è§’è‰². å› æ­¤, æˆ‘è§‰å¾—ä¸‡äº‹ä¿±å¤‡äº†! å¼€å§‹è®¾è®¡å‰åç«¯çš„å­—æ®µ, å¸ƒå±€æ’ç‰ˆ, ç„¶åå®ç°åŸºç¡€çš„UIâ€¦\nç„¶è€Œç„¶è€Œ, å½“æˆ‘å‡†å¤‡å¼€å§‹åšsqlå¼•æ“çš„æ—¶å€™, å‘ç°sql.jsç«Ÿç„¶ä¸reacté«˜ç‰ˆæœ¬æ¡†æ¶å’Œä¸€äº›ä¾èµ–ä¸å…¼å®¹! ç„¶è€Œæˆ‘åªå‰©ä¸‹sqlå¼•æ“çš„æ‰§è¡Œéƒ¨åˆ†äº†â€¦ ä¹Ÿä¸å¥½å°±æ­¤æ”¾å¼ƒ. é‚£ä¹ˆå°±å€ŸåŠ©augmentçš„åŠ›é‡è‡ªå·±å†™ä¸€ä¸ªå§~\n\né¦–å…ˆ, ä»monaco editorå…¥æ‰‹, å»ºç«‹ä¸€ä¸ªç±»ä¼¼äºvscodeé£æ ¼çš„ä»£ç ç¼–è¾‘åŒº;\nç„¶å, åˆ©ç”¨node-sql-parseråº“, æˆ‘ä»¬å°†æ ‡å‡†çš„sqlè¯­å¥ä¼ å…¥ç»™è§£æç»„ä»¶, è·å¾—astè¯­æ³•æ ‘;\næœ€å, æˆ‘ä»¬ç¼–å†™è‡ªå·±çš„sqlæ‰§è¡Œå¼•æ“, åˆ©ç”¨astè¯­æ³•æ ‘æ‰§è¡Œsqlè¯­å¥.\n\n\nä¸‹é¢åŸºæœ¬æ˜¯é¡¹ç›®ä»“åº“ä¸­READMEçš„éƒ¨åˆ†.\n\nâœ¨ ç‰¹æ€§\nğŸ¤– AI ç”Ÿæˆç»ƒä¹ ï¼šæä¾›ä¸¤ç§æ–¹å¼çš„ä¹ é¢˜æ¥æº\n\né€šè¿‡é¢„è®¾çš„æ•™ç¨‹, å¾ªåºæ¸è¿›åœ°ç»ƒä¹ select, join, èšåˆæ“ä½œä¸åµŒå¥—å­æŸ¥è¯¢ç­‰çŸ¥è¯†ç‚¹.\nä¸difyå·¥ä½œæµäº¤äº’, è¾“å…¥éš¾åº¦,æ ‡ç­¾ä¸æè¿°è‡ªåŠ¨ç”Ÿæˆ SQL ç»ƒä¹ é¢˜.\n\n\nğŸ“Š æ•°æ®åº“ç»“æ„å¯è§†åŒ–ï¼šç›´è§‚å±•ç¤ºè¡¨å…³ç³»å’Œå­—æ®µä¿¡æ¯, å¤–æ£€çº¦æŸç­‰ä¿¡æ¯ä¸€ç›®äº†ç„¶;\n\nâŒ¨ï¸ Monacoç¼–è¾‘å™¨ä¸schemaçš„è¡¥å…¨æ•´åˆï¼š\n\næ”¯æŒsqlè¯­æ³•é«˜äº®å’Œæ‚¬æµ®çš„è¯­æ³•æç¤º\né’ˆå¯¹å½“å‰schemaä¿¡æ¯æä¾›tabçš„è‡ªåŠ¨è¡¥å…¨\n\n\nğŸ“ å³æ—¶ç»“æœéªŒè¯ï¼šå®æ—¶éªŒè¯æŸ¥è¯¢ç»“æœ\n\nç”±æ„å»ºäºå‰ç«¯çš„sqlå¼•æ“0å»¶è¿Ÿåœ°å¤„ç†sqlæŸ¥è¯¢ç»“æœ.\næ”¯æŒå°†æŸ¥è¯¢ç»“æœä¸æœŸæœ›ç»“æœè¿›è¡Œæ¯”è¾ƒ, è¯„ä»·æŸ¥è¯¢ç»“æœæ˜¯å¦æ­£ç¡®.\n\n\n\nğŸ–¥ ç•Œé¢é¢„è§ˆåˆå§‹åŒ–ç•Œé¢\n\nç‚¹å‡»ä¾§è¾¹æ ä¸­çš„â€œåˆå§‹åŒ–æ•™ç¨‹â€, å¯ä»¥åŒé¢„è®¾çš„æ•°æ®åº“è¡¨ç»“æ„è¿›è¡Œäº¤äº’;\nç‚¹å‡»ä¾§è¾¹æ ä¸­çš„â€œå¸®åŠ©â€, å¯ä»¥æŸ¥çœ‹åŸºæœ¬çš„æ“ä½œæ¼”ç¤º.\n\næ•°æ®åº“ç»“æ„å¯è§†åŒ–\n\né»˜è®¤æ˜¾ç¤ºæ•°æ®åº“ç»“æ„çš„å¯è§†åŒ–è§†å›¾;\nå¯åœ¨å·¦ä¸‹è§’åˆ‡æ¢å…ƒç»„è§†å›¾.\n\nSQL ç¼–è¾‘å™¨æ¼”ç¤º\n\nå¯¹åº”å¿«æ·é”®:\n\ncommand+enter : æ‰§è¡ŒæŸ¥è¯¢\ncommand+j: æ£€æµ‹æŸ¥è¯¢ç»“æœæ˜¯å¦åŒ¹é…;\ncommand+k: æœç´¢å†å²è®°å½•.\n\nğŸ›  æŠ€æœ¯æ ˆ\n  \n  \n  \n  \n  \n  \n  \n\n\n\næ¡†æ¶: Next.js 15.3.0\nUI ç»„ä»¶:\nAnt Design 5.24.6\nMaterial-UI 7.0.2\n\n\nç¼–è¾‘å™¨: Monaco Editor\næµç¨‹å›¾:\nXY Flow (@xyflow&#x2F;react)\nç”¨äºæ•°æ®åº“è¡¨å…³ç³»å¯è§†åŒ–\næ”¯æŒè‡ªå®šä¹‰èŠ‚ç‚¹å’Œè¾¹çš„æ ·å¼\næä¾›å›¾è¡¨äº¤äº’æ“ä½œ\nåŸºäº D3.js çš„ç¼©æ”¾å’Œæ‹–æ‹½åŠŸèƒ½\n\n\nAI é›†æˆ: Dify.ai\nç±»å‹æ£€æŸ¥: TypeScript\n\nğŸš€ å¿«é€Ÿå¼€å§‹\nå¾—ç›Šäºé¢„åˆ¶è¯¾æ•™ç¨‹ç³»åˆ—çš„å®Œå–„, æ‚¨å¯ä»¥ç›´æ¥cloneä»“åº“å, é€šè¿‡npm installå®‰è£…ä¾èµ–, npm run devå¯åŠ¨å‰ç«¯å³å¯è¿›è¡ŒåŸºæœ¬æ•™ç¨‹çš„å­¦ä¹ , è€Œæ— éœ€é…ç½®difyå·¥ä½œæµ. ğŸ˜Œ\n\nå‰ç½®è¦æ±‚\nNode.js 18.0 æˆ–æ›´é«˜ç‰ˆæœ¬\nnpm åŒ…ç®¡ç†å™¨\nDify.ai è´¦å·å’Œ API å¯†é’¥\n\nå®‰è£…æ­¥éª¤\nå…‹éš†ä»“åº“\n\ngit clone https://github.com/ffy6511/chatSQL.gitcd chatSQL/chat-sql\n\n\nå®‰è£…ä¾èµ–\n\nnpm install\n\n\né…ç½®ç¯å¢ƒå˜é‡\n\ntouch .env\n\nç¼–è¾‘ .env æ–‡ä»¶å¹¶æ·»åŠ ä½ çš„ Dify API å¯†é’¥ï¼š\nNEXT_PUBLIC_DIFY_API_KEY=your_api_key_here\n\n\nå¯åŠ¨å¼€å‘æœåŠ¡å™¨\n\nnpm run dev\n\n\næ›´æ–°gitæ—¥å¿—: å¦‚æœæ‚¨å¸Œæœ›æ›´æ–°è‡ªå·±çš„â€æ›´æ–°æ—¥å¿—â€ç•Œé¢, è¯·æ‰§è¡Œ\n\nnpm run generate-git\nDify å·¥ä½œæµé…ç½®\nåœ¨ Dify å¹³å° åˆ›å»ºæ–°åº”ç”¨ï¼ˆé€‰æ‹©å·¥ä½œæµï¼‰\nå¯¼å…¥å·¥ä½œæµé…ç½®ï¼š\nä»é¡¹ç›®ä¸­ä¸‹è½½ public/chatSQL.yml æ–‡ä»¶\nåœ¨ Dify å¹³å°ä¸­å¯¼å…¥è¯¥é…ç½®æ–‡ä»¶\n\n\n\nè·å– API å¯†é’¥å¹¶åœ¨ä¸ªäººè®¾ç½®ä¸­é…ç½®ï¼ˆå·¥ä½œæµé»˜è®¤ä½¿ç”¨ Geminiï¼Œå¯æ ¹æ®éœ€è¦ä¿®æ”¹ï¼‰\n\nğŸ¤ è´¡çŒ®æ¬¢è¿æäº¤ Pull Request å’Œ Issueï¼\n\né‡è¦æ›´æ–°25-04-30\nfeat: åœ¨ä¸»é¡µçš„ä¾§è¾¹æ å¢åŠ äº†â€åˆå§‹åŒ–æ•™ç¨‹â€åŠŸèƒ½, æä¾›ä¸åŒéš¾åº¦çš„æ•™ç¨‹ç³»åˆ—;\n\nfeat: å¢åŠ åˆ†äº«é“¾æ¥, å¯ä»¥å¯¼å‡ºå½“å‰çš„å†å²è®°å½•, é€šè¿‡ç²˜è´´åœ°å€åœ¨ä¸åŒè®¾å¤‡ä¹‹é—´å…±äº«(notice: å¯èƒ½è¦†ç›–å½“å‰å·²æœ‰çš„è®°å½•)\n\n\n25-05-11\nfeat: åœ¨â€åˆå§‹åŒ–æ•™ç¨‹â€ä¸­å¢åŠ äº†æ•™æDatabase System Conceptsä¸­schema, æ ¹æ®25æ˜¥å¤DBçš„PPTçš„å­—æ®µè¦æ±‚åœ¨å®˜ç½‘åŸºç¡€ä¸Šè°ƒæ•´å¾—åˆ°.\n\nfeat: ä¼˜åŒ–äº†ä»£ç ç¼–è¾‘çš„ä½“éªŒ(æ ¹æ®ä¸Šä¸‹æ–‡ä¿®æ”¹è¡¥è¶³çš„å»ºè®®)\n\nstyle: å¢åŠ äº†loadingçš„åŠ¨ç”», ä¼˜åŒ–æ›´æ–°æ—¥å¿—çš„é¡µé¢\n\n\n","categories":["å‰åç«¯å¼€å‘"],"tags":["å¥‡æ€å¦™æƒ³"]},{"title":"makefile","url":"/2025/02/12/%E5%85%B6%E4%BB%96/makefile/","content":"ç¼–è¯‘åŸºæœ¬æ¦‚å¿µé»˜è®¤ç›®æ ‡\nMakefileå½“ä¸­çš„ç¬¬ä¸€ä¸ªç›®æ ‡ä¼šæˆä¸ºé»˜è®¤ç›®æ ‡;\nä¸æŒ‡å®šå‚æ•°çš„makeå‘½ä»¤ä¼šæ‰§è¡Œé»˜è®¤ç›®æ ‡;\né€šå¸¸ä½¿ç”¨allçš„ä¼ªç›®æ ‡ä½œä¸ºé»˜è®¤ç›®æ ‡.\n\nä¼ªç›®æ ‡å½“æˆ‘ä»¬éœ€è¦æ‰§è¡Œæ¸…ç†å·¥ä½œã€è¿è¡Œæµ‹è¯•ç­‰æ“ä½œæ—¶, æˆ‘ä»¬ä¸å¸Œæœ›ä¸å®é™…æ–‡ä»¶åå‘ç”Ÿå†²çª, æ­¤æ—¶å°±éœ€è¦ç”¨åˆ° ä¼ªç›®æ ‡.\nè¯­æ³•\n.PHONY: ç›®æ ‡åç›®æ ‡å:    å‘½ä»¤\n\nä½¿ç”¨ç¤ºä¾‹\n# æƒ…æ™¯ï¼šéœ€è¦æ¸…ç†ç¼–è¯‘äº§ç”Ÿçš„ .o æ–‡ä»¶å’Œå¯æ‰§è¡Œæ–‡ä»¶.PHONY: cleanclean:    rm -f *.o program# æƒ…æ™¯ï¼šéœ€è¦è¿è¡Œæµ‹è¯•.PHONY: testtest:    ./run_tests.sh# ä½¿ç”¨æ–¹æ³•ï¼š# make clean  # æ¸…ç†æ–‡ä»¶# make test   # è¿è¡Œæµ‹è¯•\n\nå…¶ä¸­-fè¡¨ç¤ºå¼ºåˆ¶åˆ é™¤, å…¶ä»–çš„å‚æ•°å¦‚-rè¡¨ç¤ºé€’å½’åˆ é™¤ç›®å½•, -rfè¡¨ç¤ºå¼ºåˆ¶é€’å½’åˆ é™¤ç›®å½•.\n\nå¤šé‡æ„å»ºæˆ‘ä»¬è¿˜å¯ä»¥åˆ©ç”¨ä¼ªç›®æ ‡ä½¿å¾—é»˜è®¤ç›®æ ‡å…·æœ‰å¤šä¸ªå¯¹è±¡:\n.PHONY: all debug release clean# é»˜è®¤ç›®æ ‡åŒ…å«å¸¸ç”¨çš„æ„å»ºç±»å‹all: debug release# è°ƒè¯•ç‰ˆæœ¬debug: main.c    @echo &quot;æ„å»ºè°ƒè¯•ç‰ˆæœ¬...&quot;    gcc -g main.c -o debug-program# å‘å¸ƒç‰ˆæœ¬release: main.c    @echo &quot;æ„å»ºå‘å¸ƒç‰ˆæœ¬...&quot;    gcc -O2 main.c -o release-programclean:    rm -f debug-program release-program# ä½¿ç”¨ï¼š# make          # æ„å»ºè°ƒè¯•ç‰ˆå’Œå‘å¸ƒç‰ˆ# make debug    # åªæ„å»ºè°ƒè¯•ç‰ˆ# make release  # åªæ„å»ºå‘å¸ƒç‰ˆ# make clean    # æ¸…ç†\n\nå¤šç›®æ ‡e.g: \nbigoutput littleoutput : text.g    generate text.g -$(subst output,,$@) &gt; $@\n\nè§£æbigoutput littleoutput : text.g    generate text.g -$(subst output,,$@) &gt; $@\n\n\nbigoutput littleoutput - ä¸¤ä¸ªç›®æ ‡æ–‡ä»¶\ntext.g - ä¾èµ–æ–‡ä»¶\n$(subst output,,$@) -å˜é‡å±•å¼€ï¼š\n$@ æ˜¯è‡ªåŠ¨å˜é‡ï¼Œè¡¨ç¤ºå½“å‰ç›®æ ‡å\nsubst æ˜¯æ›¿æ¢å‡½æ•°ï¼Œæ ¼å¼ä¸º $(subst from,to,text)\næ­¤å¤„å°†ç›®æ ‡åä¸­çš„ â€œoutputâ€ æ›¿æ¢ä¸ºç©º\n\n\n\nå½“è§„åˆ™æ‰§è¡Œæ—¶ï¼š\n\nå¯¹äº bigoutput ç›®æ ‡ï¼š\n\n$@ å±•å¼€ä¸º bigoutput\n$(subst output,,$@) ç»“æœä¸º big\næœ€ç»ˆå‘½ä»¤å˜ä¸ºï¼šgenerate text.g -big &gt; bigoutput\n\n\nå¯¹äº littleoutput ç›®æ ‡ï¼š\n\n$@ å±•å¼€ä¸º littleoutput\n$(subst output,,$@) ç»“æœä¸º little\næœ€ç»ˆå‘½ä»¤å˜ä¸ºï¼šgenerate text.g -little &gt; littleoutput\n\n\n\n\n\nå› æ­¤, ä¸Šè¿°çš„å¤šç›®æ ‡è§„åˆ™ç­‰ä»·äº:\nbigoutput : text.g    generate text.g -big &gt; bigoutputlittleoutput : text.g    generate text.g -little &gt; littleoutput\n\nè§„åˆ™è¯­æ³•å¤šç›®æ ‡è§„åˆ™ï¼ˆMultiple Targetsï¼‰æ˜¯ Makefile ä¸­çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼š\n\nåŸºæœ¬è¯­æ³•ï¼š\ntarget1 target2 : prerequisites    commands\n\nç‰¹ç‚¹ï¼š\n\nå¤šä¸ªç›®æ ‡å…±äº«ç›¸åŒçš„ä¾èµ–å…³ç³»\nå‘½ä»¤ä¼šå¯¹æ¯ä¸ªç›®æ ‡åˆ†åˆ«æ‰§è¡Œä¸€æ¬¡\nå¯ä»¥ä½¿ç”¨ $@ å¼•ç”¨å½“å‰æ­£åœ¨æ„å»ºçš„ç›®æ ‡\n\n\nä½¿ç”¨åœºæ™¯ï¼š\n\nç”Ÿæˆç›¸ä¼¼ä½†ç•¥æœ‰ä¸åŒçš„æ–‡ä»¶\nå¤šä¸ªç›®æ ‡éœ€è¦ç±»ä¼¼çš„æ„å»ºè¿‡ç¨‹\nå‡å°‘é‡å¤ä»£ç \n\n\nç¤ºä¾‹ï¼š\n# ç”Ÿæˆä¸åŒå¤§å°çš„å›¾ç‰‡big.jpg small.jpg : original.jpg    convert original.jpg -resize $* &gt; $@# ç”Ÿæˆä¸åŒæ ¼å¼çš„æ–‡æ¡£manual.pdf manual.html : manual.txt    pandoc manual.txt -o $@\n\nä¼˜åŠ¿ï¼š\n\nä»£ç æ›´ç®€æ´\næ˜“äºç»´æŠ¤\né¿å…é‡å¤è§„åˆ™\næ›´å¥½çš„è§„åˆ™ç»„ç»‡\n\n\næ³¨æ„äº‹é¡¹ï¼š\n\nå‘½ä»¤å¯¹æ¯ä¸ªç›®æ ‡éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡\néœ€è¦åˆç†ä½¿ç”¨è‡ªåŠ¨å˜é‡ï¼ˆå¦‚ $@ï¼‰æ¥åŒºåˆ†ä¸åŒç›®æ ‡\nç¡®ä¿å‘½ä»¤å¯¹æ‰€æœ‰ç›®æ ‡éƒ½é€‚ç”¨\n\n\n\né™æ€æ¨¡å¼å¥½çš„ï¼Œè®©æˆ‘ä»è¿™å‡ ä¸ªè§’åº¦æ¥ä»‹ç» Makefile ä¸­çš„é™æ€æ¨¡å¼è§„åˆ™ã€‚\n1. å¼•å…¥èƒŒæ™¯åœ¨ Makefile ä¸­ï¼Œå½“æˆ‘ä»¬éœ€è¦å°†å¤šä¸ªæºæ–‡ä»¶ç¼–è¯‘æˆå¯¹åº”çš„ç›®æ ‡æ–‡ä»¶æ—¶ï¼Œå¦‚æœæŒ‰ç…§æ™®é€šçš„è§„åˆ™å†™æ³•ï¼Œå¾€å¾€éœ€è¦ä¸ºæ¯ä¸ªæ–‡ä»¶éƒ½å†™ä¸€æ¡è§„åˆ™ï¼š\nfoo.o : foo.c    $(CC) -c $(CFLAGS) foo.c -o foo.obar.o : bar.c    $(CC) -c $(CFLAGS) bar.c -o bar.otest.o : test.c    $(CC) -c $(CFLAGS) test.c -o test.o\n\nè¿™ç§å†™æ³•å­˜åœ¨æ˜æ˜¾é—®é¢˜ï¼š\n\nè§„åˆ™é‡å¤ï¼Œç»´æŠ¤å›°éš¾\nå½“æ–°å¢æºæ–‡ä»¶æ—¶éœ€è¦æ‰‹åŠ¨æ·»åŠ è§„åˆ™\nä»£ç å†—é•¿ï¼Œä¸å¤Ÿä¼˜é›…\n\nè™½ç„¶å¯ä»¥ä½¿ç”¨å¤šç›®æ ‡è§„åˆ™ï¼Œä½†åœ¨å¤„ç†æºæ–‡ä»¶å’Œç›®æ ‡æ–‡ä»¶çš„å¯¹åº”å…³ç³»æ—¶ä»ç„¶ä¸å¤Ÿçµæ´»ã€‚è¿™å°±æ˜¯å¼•å…¥é™æ€æ¨¡å¼è§„åˆ™çš„åŸå› ã€‚\n2. åŸºæœ¬è¯­æ³•é™æ€æ¨¡å¼è§„åˆ™çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š\ntargets ...: target-pattern: prereq-pattern    commands\n\nå…¶ä¸­ï¼š\n\ntargets: è¦ç”Ÿæˆçš„ç›®æ ‡æ–‡ä»¶åˆ—è¡¨\ntarget-pattern: ç›®æ ‡çš„æ¨¡å¼ï¼Œé€šå¸¸åŒ…å« % é€šé…ç¬¦\nprereq-pattern: ä¾èµ–çš„æ¨¡å¼ï¼Œé€šå¸¸ä¹ŸåŒ…å« % é€šé…ç¬¦\ncommands: æ„å»ºå‘½ä»¤\n\n% åœ¨ target-pattern ä¸­åŒ¹é…çš„å†…å®¹ï¼Œä¼šåœ¨ prereq-pattern ä¸­ä½œä¸ºç›¸åŒçš„æ›¿æ¢å†…å®¹ã€‚\n3. ç»¼åˆç¤ºä¾‹è®©æˆ‘ä»¬é€šè¿‡å‡ ä¸ªé€æ¸å¤æ‚çš„ä¾‹å­æ¥è¯´æ˜é™æ€æ¨¡å¼çš„ä½¿ç”¨ï¼š\nåŸºç¡€ç¤ºä¾‹ï¼šç¼–è¯‘ C æ–‡ä»¶objects = foo.o bar.o test.o$(objects): %.o: %.c    $(CC) -c $(CFLAGS) $&lt; -o $@\n\nå¤æ‚ç¤ºä¾‹ï¼šå¤šç§æºæ–‡ä»¶å¤„ç†# å®šä¹‰æºæ–‡ä»¶å’Œç›®æ ‡æ–‡ä»¶cpp_sources := $(wildcard *.cpp)c_sources := $(wildcard *.c)cpp_objects := $(cpp_sources:.cpp=.o)c_objects := $(c_sources:.c=.o)all_objects := $(cpp_objects) $(c_objects)# C++ æºæ–‡ä»¶çš„ç¼–è¯‘è§„åˆ™$(cpp_objects): %.o: %.cpp    $(CXX) -c $(CXXFLAGS) $&lt; -o $@# C æºæ–‡ä»¶çš„ç¼–è¯‘è§„åˆ™$(c_objects): %.o: %.c    $(CC) -c $(CFLAGS) $&lt; -o $@# ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶program: $(all_objects)    $(CXX) $^ -o $@\n\n$(cpp_sources:.cpp=.o)æ˜¯ä¸€ç§æ¨¡å¼æ›¿æ¢, ä¼šå°†cpp_sourcesä¸­çš„æ‰€æœ‰.cppæ–‡ä»¶æ›¿æ¢ä¸º.oæ–‡ä»¶;\nå³$(varname:pattern1=pattern2) ä¼šå°†varnameä¸­çš„æ‰€æœ‰pattern1æ›¿æ¢ä¸ºpattern2;\n\n\n\næ›´å¤æ‚çš„ç¤ºä¾‹ï¼šå¤šç›®å½•å¤„ç†# ç›®å½•ç»“æ„SRCDIR = srcOBJDIR = obj# æºæ–‡ä»¶å’Œç›®æ ‡æ–‡ä»¶SOURCES = $(wildcard $(SRCDIR)/*.c)OBJECTS = $(SOURCES:$(SRCDIR)/%.c=$(OBJDIR)/%.o)# ç¡®ä¿ç›®æ ‡ç›®å½•å­˜åœ¨$(OBJDIR):    mkdir -p $@# é™æ€æ¨¡å¼è§„åˆ™$(OBJECTS): $(OBJDIR)/%.o: $(SRCDIR)/%.c | $(OBJDIR)    $(CC) -c $(CFLAGS) $&lt; -o $@# æœ€ç»ˆç›®æ ‡program: $(OBJECTS)    $(CC) $^ -o $@\n\ntodo\n\nè¿™ä¸ªå¤æ‚ç¤ºä¾‹å±•ç°äº† Makefile åœ¨å¤„ç†ç°ä»£é¡¹ç›®æ—¶çš„å¤šä¸ªé«˜çº§ç‰¹æ€§ã€‚åœ¨æ–‡ä»¶ç»„ç»‡æ–¹é¢ï¼Œç¤ºä¾‹å®ç°äº†è·¨ç›®å½•çš„æ–‡ä»¶å¤„ç†èƒ½åŠ›ï¼Œé€šè¿‡å°†æºæ–‡ä»¶å’Œç›®æ ‡æ–‡ä»¶åˆ†åˆ«ç»„ç»‡åœ¨ä¸åŒçš„ç›®å½•ï¼ˆå¦‚ src å’Œ objï¼‰ä¸­ï¼Œä½“ç°äº†é¡¹ç›®ç»“æ„çš„æ¸…æ™°æ€§å’Œæ¨¡å—åŒ–ã€‚Makefile èƒ½å¤Ÿæ™ºèƒ½åœ°åœ¨è¿™äº›ç›®å½•é—´è¿›è¡Œæ–‡ä»¶æ“ä½œï¼Œä¿æŒé¡¹ç›®çš„æ•´æ´æœ‰åºã€‚\nåœ¨ç›®å½•ç®¡ç†æ–¹é¢ï¼Œç¤ºä¾‹å¼•å…¥äº†è‡ªåŠ¨åˆ›å»ºç›®æ ‡ç›®å½•çš„æœºåˆ¶ã€‚é€šè¿‡ä½¿ç”¨æ¡ä»¶ä¾èµ–ï¼ˆç”¨ | åˆ†éš”ç¬¦æ ‡è¯†ï¼‰ï¼Œç¡®ä¿åœ¨ç¼–è¯‘è¿‡ç¨‹å¼€å§‹å‰ç›®æ ‡ç›®å½•å·²ç»å­˜åœ¨ã€‚è¿™ç§æ–¹å¼ä¼˜é›…åœ°è§£å†³äº†ç›®å½•åˆ›å»ºçš„æ—¶åºé—®é¢˜ï¼Œé¿å…äº†å› ç›®å½•ä¸å­˜åœ¨è€Œå¯¼è‡´çš„ç¼–è¯‘å¤±è´¥ã€‚ç‰¹åˆ«æ˜¯å½“å¤šä¸ªç›®æ ‡æ–‡ä»¶åŒæ—¶éœ€è¦æŸä¸ªç›®å½•æ—¶ï¼Œæ¡ä»¶ä¾èµ–èƒ½å¤Ÿç¡®ä¿ç›®å½•åˆ›å»ºæ“ä½œåªæ‰§è¡Œä¸€æ¬¡ï¼Œæé«˜äº†æ„å»ºæ•ˆç‡ã€‚\nåœ¨æ–‡ä»¶åå¤„ç†æ–¹é¢ï¼Œç¤ºä¾‹å±•ç¤ºäº†å¤æ‚çš„æ–‡ä»¶åè½¬æ¢æŠ€å·§ã€‚é€šè¿‡å·§å¦™è¿ç”¨ Make çš„æ¨¡å¼æ›¿æ¢åŠŸèƒ½ï¼Œå®ç°äº†ä»æºæ–‡ä»¶åˆ°ç›®æ ‡æ–‡ä»¶çš„è·¯å¾„å’Œæ‰©å±•åè½¬æ¢ã€‚ä¾‹å¦‚ï¼Œå°† src/main.c è½¬æ¢ä¸º obj/main.oï¼Œè¿™ç§è½¬æ¢ä¸ä»…å¤„ç†äº†æ–‡ä»¶æ‰©å±•åçš„å˜åŒ–ï¼Œè¿˜åŒæ—¶å¤„ç†äº†ç›®å½•è·¯å¾„çš„å˜åŒ–ã€‚è¿™ç§çµæ´»çš„æ–‡ä»¶åå¤„ç†æœºåˆ¶ï¼Œä½¿å¾— Makefile èƒ½å¤Ÿé€‚åº”æ›´å¤æ‚çš„é¡¹ç›®ç»“æ„å’Œæ„å»ºéœ€æ±‚ï¼ŒåŒæ—¶ä¿æŒäº†è§„åˆ™çš„ç®€æ´æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚\n\nåŸºæœ¬è§„åˆ™target ... : prerequisites ...    recipe    ...    ...\ntarget: ç›®æ ‡æ–‡ä»¶ | å¯æ‰§è¡Œæ–‡ä»¶ | æ ‡ç­¾;prerequisites: ä¾èµ–æ–‡ä»¶ | target;recipe: å¯¹åº”targetæ‰€éœ€çš„å‘½ä»¤(ä»¥Tapç¼©è¿›å¼€å¤´).\n\n\næ‰§è¡Œrecipeå‘½ä»¤çš„æ¡ä»¶:\n\nprerequisitesä¸­å­˜åœ¨æ–‡ä»¶çš„æ—¥æœŸæ—©äºtargetçš„æ—¥æœŸ;\ntargetçš„æ–‡ä»¶ä¸å­˜åœ¨.\n\nä½¿ç”¨å˜é‡# å®šä¹‰å˜é‡: ç±»ä¼¼äºCçš„å®å®šä¹‰objects = main.o display.o# ä½¿ç”¨å˜é‡edit: $(objects)    cc -o edit $(objects)\n\nå¿…é¡»ä½¿ç”¨Tabç¼©è¿›;\né‡‡å–$(variable)çš„å½¢å¼å¼•ç”¨å˜é‡, å°†ä¼šå±•å¼€ä¸ºå˜é‡çš„å€¼;\ncc -o edit å£°æ˜é‡‡ç”¨Cè¯­è¨€ç¼–è¯‘å™¨åŒæ—¶æŒ‡å®šè¾“å‡ºæ–‡ä»¶åä¸ºedit.\n\nMakeçš„è‡ªåŠ¨æ¨å¯¼è‡ªåŠ¨æ¨å¯¼è§„åˆ™\næ–‡ä»¶å…³è”ï¼š\n\nå½“makeçœ‹åˆ°.oæ–‡ä»¶æ—¶ï¼Œä¼šè‡ªåŠ¨å°†å¯¹åº”çš„.cæ–‡ä»¶åŠ å…¥ä¾èµ–å…³ç³»\nä¾‹å¦‚ï¼šå‘ç°whatever.oæ—¶ï¼Œä¼šè‡ªåŠ¨å…³è”whatever.cä½œä¸ºä¾èµ–æ–‡ä»¶\n\n\nå‘½ä»¤æ¨å¯¼ï¼š\n\nè‡ªåŠ¨æ¨å¯¼ç¼–è¯‘å‘½ä»¤ï¼Œå¦‚cc -c whatever.c\næ— éœ€åœ¨æ¯ä¸ª.oæ–‡ä»¶åéƒ½æ‰‹åŠ¨å†™ç¼–è¯‘å‘½ä»¤\n\n\n\nç¤ºä¾‹ç»“æ„\nä¾èµ–å…³ç³»ï¼š\n\n# è‡ªåŠ¨æ¨å¯¼ä¹‹å‰main.o : main.c defs.h    cc -c main.c# è‡ªåŠ¨æ¨å¯¼ä¸‹çš„ç®€åŒ–ä¹¦å†™main.o : defs.h\n\n\næ¸…ç†ç›®æ ‡ï¼š\n\n.PHONY : cleanclean :    rm edit $(objects)\n\n\n.PHONYè¡¨ç¤ºcleanæ˜¯ä¼ªç›®æ ‡æ–‡ä»¶;\nè¿™ç§è‡ªåŠ¨æ¨å¯¼æ–¹å¼å¤§å¤§ç®€åŒ–äº†Makefileçš„ç¼–å†™;\ncleanæ€»æ˜¯æ”¾åœ¨æ–‡ä»¶çš„æœ«å°¾.\n\nmakeå‘½ä»¤åœ¨é»˜è®¤æƒ…å†µä¸‹ä¼šåœ¨å½“å‰ç›®å½•ä¸‹ä¾æ¬¡å¯»æ‰¾æ–‡ä»¶åä¸ºGNUmakefile,makefile,Makefileçš„æ–‡ä»¶.\n\næ¨èä½¿ç”¨Makefileä½œä¸ºæ–‡ä»¶å;\nä¹Ÿå¯ä»¥ä½¿ç”¨-fæˆ–è€…-fileå‚æ•°æ¥æŒ‡å®šç‰¹å®šçš„Makefileæ–‡ä»¶.\n\nmake -f Make.Linux\n\n\n\n\nincludeå‘½ä»¤# ä½¿ç”¨includeå‘½ä»¤å¯ä»¥å°†å…¶ä»–MakefileåŒ…å«è¿›æ¥include &lt;file-name&gt;\n\nincludeå‘½ä»¤å‰å¯ä»¥å­˜åœ¨ç©ºå­—ç¬¦, ä½†æ˜¯ä¸èƒ½ä¸ºTabç¼©è¿›;\nincludeä¸æ–‡ä»¶ä¹‹é—´å¯ä»¥å­˜åœ¨å¤šä¸ªç©ºæ ¼.\n\nç›´æ¥æŒ‡å®šæ–‡ä»¶# æœ€åŸºæœ¬çš„includeç”¨æ³•æ˜¯ç›´æ¥æŒ‡å®šæ–‡ä»¶åinclude config.mkinclude ./build/rules.mk# åŒæ—¶åŒ…å«å¤šä¸ªæ–‡ä»¶include config.mk rules.mk tests.mk\n\nä½¿ç”¨é€šé…ç¬¦ *# * åŒ¹é…ä»»æ„å­—ç¬¦ä¸²include *.mk              # åŒ…å«å½“å‰ç›®å½•ä¸‹æ‰€æœ‰.mkæ–‡ä»¶include src/*.mk         # åŒ…å«srcç›®å½•ä¸‹çš„æ‰€æœ‰.mkæ–‡ä»¶include **/build/*.mk    # åŒ…å«ä»»æ„å­ç›®å½•ä¸­buildç›®å½•ä¸‹çš„æ‰€æœ‰.mkæ–‡ä»¶\n\næˆ‘ä»¬åŒæ ·å¯ä»¥åœ¨å˜é‡ä¸­ä½¿ç”¨é€šé…ç¬¦ *:\n# ä½¿ç”¨æ—¶å±•å¼€objects = *.o# å®šä¹‰æ—¶å±•å¼€(é™¤éé‡æ–°èµ‹å€¼, å¦åˆ™ä¿æŒå®šä¹‰æ—¶çš„å±•å¼€çŠ¶æ€)objects := $(wildcard *.o)\n\ne.g:\n$(patsubst %.c,%.o,$(wildcard *.c))\n\npatsubstæ˜¯ä¸€ä¸ªå‡½æ•°, ç”¨äºæ¨¡å¼æ›¿æ¢;\nè¯­æ³•ä¸ºpatsubst &lt;pattern&gt;,&lt;replacement&gt;,&lt;text&gt;;\næ­¤å¤„è¡¨ç¤ºåˆ©ç”¨é€šé…ç¬¦, å°†æ‰€æœ‰çš„.cæ–‡ä»¶åç§°æ›¿æ¢ä¸º.oæ–‡ä»¶.\n\nä½¿ç”¨å•å­—ç¬¦é€šé…ç¬¦# ? åŒ¹é…å•ä¸ªå­—ç¬¦include test?.mk         # åŒ¹é…test1.mk, testA.mkç­‰include rule_?.mk        # åŒ¹é…rule_1.mk, rule_2.mkç­‰include config???.mk     # åŒ¹é…configåå¸¦ä¸‰ä¸ªå­—ç¬¦çš„.mkæ–‡ä»¶\n\nä½¿ç”¨ç›®å½•è·¯å¾„# å¯ä»¥æŒ‡å®šä¸åŒçš„ç›®å½•è·¯å¾„include ./configs/*.mk    # å½“å‰ç›®å½•ä¸‹çš„configså­ç›®å½•include ../shared/*.mk    # ä¸Šçº§ç›®å½•çš„sharedå­ç›®å½•include /usr/local/include/make/*.mk  # ç»å¯¹è·¯å¾„\n\nä½¿ç”¨å­—ç¬¦é›†[]# [] ç”¨äºåŒ¹é…å­—ç¬¦é›†ä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦include make[123].mk     # åŒ¹é…make1.mk, make2.mk, make3.mkinclude test[a-z].mk     # åŒ¹é…testa.mkåˆ°testz.mkinclude config[0-9].mk   # åŒ¹é…config0.mkåˆ°config9.mk\n\né”™è¯¯å¤„ç†# é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœincludeçš„æ–‡ä»¶ä¸å­˜åœ¨ï¼Œmakeä¼šæŠ¥é”™# ä½¿ç”¨-includeæˆ–sincludeå¯ä»¥å¿½ç•¥æ–‡ä»¶ä¸å­˜åœ¨çš„é”™è¯¯-include optional.mk     # å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œç»§ç»­æ‰§è¡Œä¸æŠ¥é”™sinclude optional.mk     # ä¸-includeå®Œå…¨ç›¸åŒ# å¤šä¸ªå¯é€‰æ–‡ä»¶-include config/*.mk     # å¦‚æœconfigç›®å½•ä¸‹æœ‰ä»»ä½•.mkæ–‡ä»¶ä¸å­˜åœ¨ï¼Œç»§ç»­æ‰§è¡Œ\n\nç»„åˆä½¿ç”¨ç¤ºä¾‹# å¯ä»¥ç»„åˆä½¿ç”¨å¤šç§æ¨¡å¼include config.mk \\        rules/*.mk \\        test[0-9].mk \\        ./build/**/*.mk# ä½¿ç”¨å˜é‡INCLUDE_DIR = ./includesinclude $(INCLUDE_DIR)/*.mk# æ¡ä»¶åŒ…å«ifdef CUSTOM_RULES    include $(CUSTOM_RULES)endif\n\nmakeçš„å·¥ä½œæ–¹å¼\nè¯»å–æ‰€æœ‰çš„Makefile;\nè¯»å–includeæ¶‰åŠçš„Makefileæ–‡ä»¶;\nåˆå§‹åŒ–æ–‡ä»¶å½“ä¸­çš„å˜é‡;\næ¨å¯¼éšå¼è§„åˆ™å¹¶åˆ†ææ‰€æœ‰è§„åˆ™;\nä¸ºç›®æ ‡æ–‡ä»¶åˆ›å»ºä¾èµ–å…³ç³»é“¾;\næ ¹æ®ä¾èµ–å…³ç³», å†³å®šéœ€è¦é‡æ–°ç”Ÿæˆçš„æ–‡ä»¶;\næ‰§è¡Œç”Ÿæˆå‘½ä»¤.\n\næ–‡ä»¶æœå¯»VPATHé»˜è®¤æƒ…å†µä¸‹, makeä¼šåœ¨å½“å‰ç›®å½•å’Œæ‰€æœ‰å­ç›®å½•ä¸‹å¯»æ‰¾ä¾èµ–æ–‡ä»¶å’Œç›®æ ‡æ–‡ä»¶.ä¸ºäº†èƒ½å¤Ÿåœ¨è¾ƒå¤§å·¥ç¨‹ä¸­æ‰©å¤§makeçš„æœç´¢èŒƒå›´, æˆ‘ä»¬å¯ä»¥é€šè¿‡ç‰¹æ®Šå˜é‡VPATHæ¥æŒ‡å®šæœç´¢è·¯å¾„.\nVPATH = src:../headers\n\nä¸åŒçš„ç›®å½•ä¹‹é—´ç”±:åˆ†éš”, ä¸Šè¿°å®šä¹‰æŒ‡å®šäº†é¢å¤–çš„srcä»¥åŠ../headersç›®å½•;\nå½“å‰ç›®å½•çš„ä¼˜å…ˆçº§æœ€é«˜, åœ¨å½“å‰ç›®å½•ä¸‹æ— æ³•æ‰¾åˆ°ç›¸å…³æ–‡ä»¶æ—¶å°†ä¼šä»æŒ‡å®šçš„ç›®å½•ä¸­ä»å·¦åˆ°å³ç»§ç»­å¯»æ‰¾.\n\nvpathä¸Šè¿°çš„VPATHæŒ‡å®šäº†å…¨å±€æ–‡ä»¶çš„æœç´¢è·¯å¾„, è€Œvpathå…è®¸ä¸ºä¸åŒç±»å‹çš„æ–‡ä»¶æŒ‡å®šä¸åŒçš„æœç´¢è·¯å¾„.\nè¯­æ³•\n# 1. ä¸ºæŒ‡å®šæ¨¡å¼çš„æ–‡ä»¶è®¾ç½®æœç´¢è·¯å¾„vpath pattern directory1:directory2# 2. æ¸…é™¤æŒ‡å®šæ¨¡å¼çš„æœç´¢è·¯å¾„vpath pattern# 3. æ¸…é™¤æ‰€æœ‰å·²è®¾ç½®çš„ vpathvpath\n\nç‰¹ç‚¹\n\nå¯ä»¥ä¸ºä¸åŒç±»å‹çš„æ–‡ä»¶æŒ‡å®šä¸åŒçš„æœç´¢è·¯å¾„;\næ”¯æŒä½¿ç”¨ % é€šé…ç¬¦åŒ¹é…æ–‡ä»¶å;\nå¯ä»¥æœ‰å¤šæ¡ vpath æŒ‡ä»¤, ä¸”é’ˆå¯¹ç›¸åŒæ¨¡å¼çš„å‘½ä»¤å°†ä¼šèµ·åˆ°é™„åŠ è€Œéè¦†ç›–çš„ä½œç”¨.\n\ne.g.\n# å®šä¹‰ç¼–è¯‘å™¨CC = gccvpath %.h includevpath %.c srcvpath %.o buildvpath %.a libprogram: main.o utils.o    $(CC) -o program main.o utils.o -L. -lmylibmain.o: main.c project.h    $(CC) -c main.cutils.o: utils.c utils.h    $(CC) -c utils.c\n\n\nvpathçš„æŒ‡ä»¤å¿…é¡»éƒ½å†™åœ¨Makefileå½“ä¸­, åœ¨Makeè§£æMakefileæ–‡ä»¶æ—¶è¢«å¤„ç†, ä¾‹å¦‚:\n# å¦‚æœéœ€è¦æ¸…ç† .o æ–‡ä»¶çš„æœç´¢è·¯å¾„å¹¶é‡æ–°è®¾ç½®clean-paths:\t# æ¸…é™¤ .o æ–‡ä»¶çš„æœç´¢è·¯å¾„\tvpath %.o\t# è®¾ç½®æ–°çš„æœç´¢è·¯å¾„\tvpath %.o new/build# å¦‚æœéœ€è¦å®Œå…¨é‡ç½®æ‰€æœ‰æœç´¢è·¯å¾„reset-paths:\t# æ¸…é™¤æ‰€æœ‰ vpath è®¾ç½®\tvpath\t# é‡æ–°è®¾ç½®æ‰€éœ€çš„æœç´¢è·¯å¾„\tvpath %.h include\tvpath %.c src\tvpath %.o build\nåœ¨ç»ˆç«¯ä¸­å¯¹åº”çš„æŒ‡ä»¤:\n$ make              # ä½¿ç”¨é»˜è®¤æœç´¢è·¯å¾„ç¼–è¯‘$ make clean-paths  # æ‰§è¡Œæœç´¢è·¯å¾„æ¸…ç†å’Œé‡è®¾$ make reset-paths  # é‡ç½®æ‰€æœ‰æœç´¢è·¯å¾„\n\n\nä¼˜å…ˆçº§: å½“å‰ç›®å½• &gt; vpath &gt; VPATH. \n"},{"title":"pip-tools","url":"/2025/01/15/%E5%85%B6%E4%BB%96/pip-tools/","content":"\nåœ¨ Python é¡¹ç›®å¼€å‘ä¸­ï¼Œä¾èµ–ç®¡ç†æ˜¯ä¸€ä¸ªå¸¸è§ä½†æ£˜æ‰‹çš„é—®é¢˜ã€‚ç‰¹åˆ«æ˜¯åœ¨å›¢é˜Ÿåä½œæ—¶ï¼Œä¸åŒæˆå‘˜çš„ç¯å¢ƒå¯èƒ½å­˜åœ¨ç»†å¾®å·®å¼‚ï¼Œå¯¼è‡´â€åœ¨æˆ‘è¿™é‡Œèƒ½è¿è¡Œâ€çš„ç»å…¸é—®é¢˜ã€‚é’ˆå¯¹ä¸Šè¿°é—®é¢˜, æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å¦‚ä½•ä½¿ç”¨ pip-toolsï¼Œå®ç°ç²¾ç¡®çš„ä¾èµ–ç‰ˆæœ¬æ§åˆ¶ã€‚\nä¸ºä»€ä¹ˆéœ€è¦ pip-toolsï¼Ÿä¼ ç»Ÿçš„ä¾èµ–ç®¡ç†æ–¹å¼å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š\n\nrequirements.txt æ‰‹åŠ¨ç»´æŠ¤å®¹æ˜“å‡ºé”™\né—´æ¥ä¾èµ–ç‰ˆæœ¬éš¾ä»¥æ§åˆ¶\nå›¢é˜Ÿæˆå‘˜ç¯å¢ƒä¸ä¸€è‡´\nä¾èµ–æ›´æ–°æµç¨‹ç¹ç\n\npip-tools é€šè¿‡ä»¥ä¸‹ç‰¹æ€§è§£å†³è¿™äº›é—®é¢˜ï¼š\n\nè‡ªåŠ¨ç”Ÿæˆå®Œæ•´çš„ä¾èµ–å…³ç³»\né”å®šæ‰€æœ‰ä¾èµ–çš„å…·ä½“ç‰ˆæœ¬\næ”¯æŒå¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒåˆ†ç¦»\næä¾›ç®€å•çš„ä¾èµ–æ›´æ–°æœºåˆ¶\n\nç¯å¢ƒå‡†å¤‡1. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒé¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ Python è™šæ‹Ÿç¯å¢ƒï¼š\n# å®‰è£… virtualenvï¼ˆå¦‚æœè¿˜æ²¡æœ‰å®‰è£…ï¼‰pip install virtualenv# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒvirtualenv venv# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ# Linux/macOS:source venv/bin/activate# Windows:.\\venv\\Scripts\\activate\n\n2. é¡¹ç›®ç»“æ„æ¨èçš„é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š\nmy_project/â”œâ”€â”€ venv/â”œâ”€â”€ requirements.inâ”œâ”€â”€ requirements.txtâ”œâ”€â”€ requirements-dev.in   # å¯é€‰ï¼šå¼€å‘ç¯å¢ƒä¾èµ–â”œâ”€â”€ requirements-dev.txt  # å¯é€‰ï¼šå¼€å‘ç¯å¢ƒä¾èµ–é”å®šæ–‡ä»¶â””â”€â”€ src/\n\npip-tools çš„å®‰è£…ä¸ä½¿ç”¨1. å®‰è£… pip-toolspip install pip-tools\n\n2. åˆ›å»ºä¾èµ–æ–‡ä»¶åˆ›å»º requirements.in æ–‡ä»¶ï¼Œåˆ—å‡ºç›´æ¥ä¾èµ–ï¼š\n# requirements.inflaskpython-dotenvopenaimarkdown-it-pyfairy-doc[cpu]\n\næ³¨æ„, æ­¤å¤„ä¸åŒçš„ä¾èµ–åŒ…å¿…é¡»åˆ†è¡Œå‘ˆç°.\n\n3. ç”Ÿæˆé”å®šæ–‡ä»¶# ç”Ÿæˆ requirements.txtpip-compile requirements.in# å¦‚æœæœ‰å¼€å‘ä¾èµ–pip-compile requirements-dev.in\n\nç”Ÿæˆçš„ requirements.txt ç¤ºä¾‹ï¼š\n## This file is autogenerated by pip-compile# To update, run:##    pip-compile requirements.in#flask==2.3.3  --hash=sha256:...python-dotenv==1.0.0  --hash=sha256:...openai==0.27.8  --hash=sha256:...markdown-it-py==3.0.0  --hash=sha256:...fairy-doc[cpu]==1.2.0  --hash=sha256:...\n\n4. å®‰è£…ä¾èµ–# å®‰è£…æ‰€æœ‰ä¾èµ–pip-sync requirements.txt# å¦‚æœåŒæ—¶éœ€è¦å¼€å‘ä¾èµ–pip-sync requirements.txt requirements-dev.txt\n\næœ€ä½³å®è·µ1. ç‰ˆæœ¬æ§åˆ¶# requirements.inflask&gt;=2.0.0,&lt;3.0.0  # æŒ‡å®šç‰ˆæœ¬èŒƒå›´python-dotenv~=1.0.0  # å…è®¸è¡¥ä¸ç‰ˆæœ¬æ›´æ–°openai==0.27.8       # é”å®šå…·ä½“ç‰ˆæœ¬\n\n2. ä¾èµ–åˆ†ç»„# requirements-dev.in-r requirements.in    # åŒ…å«åŸºç¡€ä¾èµ–pytest               # æµ‹è¯•æ¡†æ¶black                # ä»£ç æ ¼å¼åŒ–flake8               # ä»£ç æ£€æŸ¥\n\n3. æ›´æ–°ä¾èµ–# æ›´æ–°å•ä¸ªåŒ…pip-compile --upgrade-package flask requirements.in# æ›´æ–°æ‰€æœ‰åŒ…pip-compile --upgrade requirements.in\n\nå¸¸è§é—®é¢˜è§£å†³1. ä¾èµ–å†²çªå¦‚æœé‡åˆ°ä¾èµ–å†²çªï¼Œå¯ä»¥ï¼š\n\næ£€æŸ¥ requirements.in ä¸­çš„ç‰ˆæœ¬çº¦æŸ\nä½¿ç”¨ pip-compile --verbose æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯\nè€ƒè™‘é™çº§æŸäº›åŒ…çš„ç‰ˆæœ¬\n\n2. Hash ä¸åŒ¹é…å¦‚æœå‡ºç° hash ä¸åŒ¹é…ï¼š\npip-compile --generate-hashes requirements.in\n\n3. ç¯å¢ƒä¸ä¸€è‡´ç¡®ä¿å›¢é˜Ÿæˆå‘˜ï¼š\n\nä½¿ç”¨ç›¸åŒçš„ Python ç‰ˆæœ¬\nä¸¥æ ¼æ‰§è¡Œ pip-sync\nä¸è¦æ‰‹åŠ¨ pip install\n\né«˜çº§ç”¨æ³•1. è‡ªå®šä¹‰è¾“å‡ºæ ¼å¼# ç”Ÿæˆå¸¦æ³¨é‡Šçš„ä¾èµ–æ–‡ä»¶pip-compile --annotate requirements.in# ç”Ÿæˆå¸¦ hashes çš„ä¾èµ–æ–‡ä»¶pip-compile --generate-hashes requirements.in\n\n2. å¤šç¯å¢ƒé…ç½®# å¼€å‘ç¯å¢ƒpip-compile requirements-dev.in# ç”Ÿäº§ç¯å¢ƒpip-compile requirements.in --output-file requirements-prod.txt\n\n3. ä¾èµ–æ›´æ–°ç­–ç•¥# åªæ›´æ–°å®‰å…¨ç›¸å…³çš„åŒ…pip-compile --upgrade-package flask --upgrade-package &quot;requests&gt;=2.31.0&quot;# ä¿æŒç°æœ‰ç‰ˆæœ¬pip-compile --no-upgrade requirements.in\n\nç»“è¯­é€šè¿‡ä½¿ç”¨ pip-toolsï¼Œæˆ‘ä»¬å¯ä»¥ï¼š\n\nå®ç°ç²¾ç¡®çš„ä¾èµ–ç‰ˆæœ¬æ§åˆ¶\nç®€åŒ–ä¾èµ–ç®¡ç†æµç¨‹\nç¡®ä¿å›¢é˜Ÿç¯å¢ƒä¸€è‡´æ€§\næé«˜é¡¹ç›®çš„å¯ç»´æŠ¤æ€§\n\nå¸Œæœ›è¿™ç¯‡æŒ‡å—èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç®¡ç† Python é¡¹ç›®çš„ä¾èµ–ï¼\nå‚è€ƒèµ„æ–™\npip-tools å®˜æ–¹æ–‡æ¡£\nPython Packaging User Guide\nPEP 508 â€“ Dependency specification for Python Software Packages\n\n","categories":["é€šç”¨æŠ€èƒ½"],"tags":["python","ç¯å¢ƒé…ç½®"]},{"title":"React ä¸»é¢˜åˆ‡æ¢","url":"/2025/01/23/%E5%85%B6%E4%BB%96/themechange/","content":"$\\underline{ä¸»é¢˜åˆ‡æ¢}$  å³é€šè¿‡ç‚¹å‡»æŸä¸ªç»„ä»¶æ¥åˆ‡æ¢èƒŒæ™¯ä¸æ–‡å­—çš„é¢œè‰²ç­‰ CSS å±æ€§ã€‚è¿™è¦æ±‚æˆ‘ä»¬çš„ç»„ä»¶èƒ½å¤Ÿæ§åˆ¶æŸä¸ªâ€ç¯å¢ƒå˜é‡â€, ä¸”index.cssä¸­çš„ CSS åº”éšè¿™ä¸ªâ€ç¯å¢ƒå˜é‡â€è€Œæ”¹å˜ã€‚\nè¦å®ç°è¿™ä¸ªéœ€æ±‚,æˆ‘ä»¬éœ€è¦è§£å†³ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š\n\nå¦‚ä½•å®šä¹‰å’Œç®¡ç†è¿™ä¸ªâ€ç¯å¢ƒå˜é‡â€ï¼Ÿ\nç»„ä»¶å¦‚ä½•æ§åˆ¶è¿™ä¸ªå˜é‡ï¼Ÿ\nCSS å¦‚ä½•å“åº”å˜é‡çš„å˜åŒ–ï¼Ÿ\n\nè¿™äº›é—®é¢˜çš„è§£å†³æ–¹æ¡ˆæ¶‰åŠåˆ°å‡ ä¸ªé‡è¦çš„åŸºç¡€æ¦‚å¿µ,è®©æˆ‘ä»¬é€ä¸€äº†è§£ã€‚\nåŸºç¡€çŸ¥è¯†Context çš„åˆ›å»ºå’Œä½¿ç”¨Context æä¾›äº†ä¸€ç§åœ¨ç»„ä»¶æ ‘ä¸­å…±äº«æ•°æ®çš„æ–¹å¼,æ— éœ€æ‰‹åŠ¨åœ¨æ¯ä¸€å±‚ä¼ é€’ propsã€‚\n// åˆ›å»º Contextconst ThemeContext = createContext&lt;ThemeType | undefined&gt;(undefined);// æä¾› Contextconst ThemeProvider = (&#123; children &#125;) =&gt; &#123;  const [theme, setTheme] = useState(&#x27;light&#x27;);    return (    &lt;ThemeContext.Provider value=&#123;&#123; theme, setTheme &#125;&#125;&gt;      &#123;children&#125;    &lt;/ThemeContext.Provider&gt;  );&#125;;// ä½¿ç”¨ Contextconst ChildComponent = () =&gt; &#123;  const &#123; theme &#125; = useContext(ThemeContext);  return &lt;div&gt;Current theme: &#123;theme&#125;&lt;/div&gt;;&#125;;\nå› æ­¤, æˆ‘ä»¬å¯ä»¥åœ¨src/context/ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªThemeContextæ¥å®šä¹‰å’Œç®¡ç†ç›¸å…³ä¸Šä¸‹æ–‡.\n\nåœ¨å…¶ä¸­åˆ©ç”¨useStateå®šä¹‰ä¸»é¢˜åè½¬çš„å‡½æ•°;\nåœ¨ç‚¹å‡»æŒ‰é’®ç»„ä»¶ä¸­ä½¿ç”¨ä¸Šè¿°çš„å‡½æ•°,\n\nCSS å˜é‡CSS å˜é‡(ä¹Ÿç§°ä¸ºè‡ªå®šä¹‰å±æ€§)å…è®¸æˆ‘ä»¬å®šä¹‰å¯é‡ç”¨çš„å€¼ï¼š\n/* å®šä¹‰å˜é‡ */:root &#123;  --primary-color: #007bff;&#125;/* ä½¿ç”¨å˜é‡ */.button &#123;  background-color: var(--primary-color);&#125;\n\nä¸ºäº†åŒºåˆ†CSSçš„å˜é‡ä¸å¸¸é‡, --xx-yçš„å‘½åæ ¼å¼æ˜¯CSSå˜é‡çš„è§„èŒƒ;\né€šè¿‡var(&lt;c--xx-y&gt;)çš„å½¢å¼ä½¿ç”¨CSSå˜é‡.\n\nHTML data-* å±æ€§document.documentElement.setAttribute(&#39;data-theme&#39;, theme) çš„ä½œç”¨æ˜¯åœ¨ HTML æ ¹å…ƒç´ ä¸Šè®¾ç½®ä¸€ä¸ªè‡ªå®šä¹‰æ•°æ®å±æ€§ï¼š\n// JavaScript è®¾ç½®document.documentElement.setAttribute(&#x27;data-theme&#x27;, &#x27;dark&#x27;);// ç»“æœçš„ HTML&lt;html data-theme=&quot;dark&quot;&gt;  ...&lt;/html&gt;// å¯¹åº”çš„ CSS[data-theme=&#x27;dark&#x27;] &#123;  --bg-color: #141414;&#125;\n\nä¸»é¢˜åˆ‡æ¢å®ç°ä¸»é¢˜å˜é‡è®¾è®¡é¦–å…ˆè®¾è®¡ä¸»é¢˜ç›¸å…³çš„ CSS å˜é‡ï¼š\n:root &#123;  /* Light theme variables */  --bg-color: #ffffff;  --text-color: #000000;  --sidebar-bg: #f0f2f5;  --border-color: #e5e2e2;  --shadow-color: rgba(0, 0, 0, 0.1);&#125;[data-theme=&#x27;dark&#x27;] &#123;  --bg-color: #141414;  --text-color: #ffffff;  --sidebar-bg: #1f1f1f;  --border-color: #434343;  --shadow-color: rgba(0, 0, 0, 0.3);&#125;\n\nå¯æ ¹æ®å®é™…éœ€è¦å¢å‡CSSå˜é‡.\n\nä¸»é¢˜çŠ¶æ€ç®¡ç†åˆ›å»ºä¸»é¢˜ Context è¿›è¡ŒçŠ¶æ€ç®¡ç†ï¼š\nimport React, &#123; createContext, useState, useContext, useEffect &#125; from &#x27;react&#x27;;type Theme = &#x27;light&#x27; | &#x27;dark&#x27;;interface ThemeContextType &#123;  theme: Theme;  toggleTheme: () =&gt; void;&#125;const ThemeContext = createContext&lt;ThemeContextType | undefined&gt;(undefined);export const ThemeProvider: React.FC&lt;&#123; children: React.ReactNode &#125;&gt; = (&#123; children &#125;) =&gt; &#123;  const [theme, setTheme] = useState&lt;Theme&gt;(() =&gt; &#123;    const savedTheme = localStorage.getItem(&#x27;theme&#x27;);    return (savedTheme as Theme) || &#x27;light&#x27;;  &#125;);  useEffect(() =&gt; &#123;    document.documentElement.setAttribute(&#x27;data-theme&#x27;, theme);    localStorage.setItem(&#x27;theme&#x27;, theme);  &#125;, [theme]);  const toggleTheme = () =&gt; &#123;    setTheme(prev =&gt; prev === &#x27;light&#x27; ? &#x27;dark&#x27; : &#x27;light&#x27;);  &#125;;  return (    &lt;ThemeContext.Provider value=&#123;&#123; theme, toggleTheme &#125;&#125;&gt;      &#123;children&#125;    &lt;/ThemeContext.Provider&gt;  );&#125;;export const useTheme = () =&gt; &#123;  const context = useContext(ThemeContext);  if (context === undefined) &#123;    throw new Error(&#x27;useTheme must be used within a ThemeProvider&#x27;);  &#125;  return context;&#125;;\n\n\n\nåœ¨è®¾ç½®ä¸Šä¸‹æ–‡ç»„ä»¶ä¹‹å, æˆ‘ä»¬éœ€è¦æ˜ç¡®å…¶ä½œç”¨çš„èŒƒå›´. æˆ‘ä»¬å¸Œæœ›ä¸»é¢˜å˜è‰²éœ€è¦åœ¨å…¨å±€èŒƒå›´å†…ç”Ÿæ•ˆ, ä»¥reactæ¡†æ¶ä¸ºä¾‹:\n&lt;!-- App.tsx --&gt;import &#123; ThemeProvider &#125; from &#x27;./context/ThemeContext&#x27;;function App()&#123;    ...    return (        &lt;ThemeProvider&gt;            &lt;div className = &quot;App&quot;&gt;                ...            &lt;/div&gt;        &lt;/ThemeProvider&gt;    )&#125;\nä¸»é¢˜åˆ‡æ¢ç»„ä»¶å®ç°ä¸»é¢˜åˆ‡æ¢æŒ‰é’®ï¼š\nimport React from &#x27;react&#x27;;import &#123; Tooltip &#125; from &#x27;antd&#x27;;import &#123; useTheme &#125; from &#x27;../context/ThemeContext&#x27;;import &#123; BsSun, BsMoonStars &#125; from &#x27;react-icons/bs&#x27;;import styles from &#x27;./ThemeToggle.module.css&#x27;;const ThemeToggle: React.FC = () =&gt; &#123;  const &#123; theme, toggleTheme &#125; = useTheme();  return (    &lt;Tooltip title=&#123;theme === &#x27;light&#x27; ? &#x27;åˆ‡æ¢åˆ°æš—è‰²æ¨¡å¼&#x27; : &#x27;åˆ‡æ¢åˆ°äº®è‰²æ¨¡å¼&#x27;&#125; placement=&quot;right&quot;&gt;      &lt;button         className=&#123;styles.themeToggle&#125;         onClick=&#123;toggleTheme&#125;        aria-label=&quot;Toggle theme&quot;      &gt;        &#123;theme === &#x27;light&#x27; ? &lt;BsMoonStars /&gt; : &lt;BsSun /&gt;&#125;      &lt;/button&gt;    &lt;/Tooltip&gt;  );&#125;;export default ThemeToggle;\n\næ­¤å¤„ä½¿ç”¨antdçš„Tooltip, ç”¨äºåœ¨é¼ æ ‡æ‚¬æµ®æŒ‰é’®ç»„ä»¶æ—¶æ˜¾ç¤ºæ–‡å­—æç¤º;\naria-label=&quot;Toggle theme&quot; åœ¨&lt;button&gt;å†…è®¾ç½®è¿™ä¸ªå±æ€§ä¸æ˜¯å¿…è¦çš„, ä½†æ˜¯å¯ä»¥å¸®åŠ©å±å¹•é˜…è¯»å™¨è¯»å‡º â€œToggle themeâ€œ.\n\nç»„ä»¶æ ·å¼åº”ç”¨åœ¨ç»„ä»¶å†…éƒ¨ä½¿ç”¨CSSå˜é‡çš„æ–¹å¼å·²ç»åœ¨ CSSå˜é‡ ä¸­ä»‹ç», åœ¨æ­¤ç»™å‡ºç¤ºä¾‹:\n.sidebar_container &#123;    background-color: var(--sidebar-bg);    color: var(--text-color);&#125;.icon_button &#123;    color: var(--text-color);    background-color: transparent;&#125;.icon_button:hover &#123;    background-color: var(--sidebar-hover-color);&#125;\n\n\n\nå¦‚æœæŸä¸ªCSSä¸éœ€è¦ä½œä¸ºå˜é‡è¿›è¡Œç»Ÿä¸€ç®¡ç†, å¯ä»¥ç›´æ¥ä½¿ç”¨ å±æ€§é€‰æ‹©å™¨ è¿›è¡Œå•ç‹¬è®¾ç½®:\n[data-theme=&#x27;dark&#x27;] .icon_example&#123;  --bg-color: #141414;&#125;\n\næ€»ç»“ä¸å‚è€ƒé€šè¿‡ä»¥ä¸Šå®ç°,æˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªå®Œæ•´çš„ä¸»é¢˜åˆ‡æ¢ç³»ç»Ÿã€‚å…³é”®ç‚¹åŒ…æ‹¬ï¼š\n\nä½¿ç”¨ CSS å˜é‡ç®¡ç†ä¸»é¢˜æ ·å¼\né€šè¿‡ Context API å®ç°çŠ¶æ€ç®¡ç†\nåˆ©ç”¨ data-theme å±æ€§åˆ‡æ¢ä¸»é¢˜\næœ¬åœ°å­˜å‚¨ä¿æŒä¸»é¢˜æŒä¹…åŒ–\n\nå‚è€ƒ ğŸ”—\nReact Context API\nCSS Custom Properties\nHTML data-* Attributes\n\n"},{"title":"åª’ä½“æŸ¥è¯¢","url":"/2025/01/08/%E5%85%B6%E4%BB%96/%E5%AA%92%E4%BD%93%E6%9F%A5%E8%AF%A2/","content":"\nåª’ä½“æŸ¥è¯¢å…¥é—¨æŒ‡å—ä½¿ç”¨ç¼–ç¨‹æ–¹æ³•æµ‹è¯•åª’ä½“æŸ¥è¯¢\n\nåª’ä½“æŸ¥è¯¢å…¥é—¨å¯¹äºå‰ç«¯, å¦‚æœæˆ‘ä»¬æƒ³å®ç°å“åº”å¼çš„è®¾è®¡, é‚£ä¹ˆåª’ä½“æŸ¥è¯¢æ˜¯å¿…ä¸å¯å°‘çš„å·¥å…·. åª’ä½“æŸ¥è¯¢å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ ¹æ®ä¸åŒçš„è®¾å¤‡å’Œå±å¹•å°ºå¯¸, è°ƒæ•´æˆ‘ä»¬çš„ç½‘é¡µçš„å¸ƒå±€å’Œæ ·å¼.\nåª’ä½“æŸ¥è¯¢çš„èŒƒå¼:\n@media media-type and (media-feature) &#123;    /*css rules*/&#125;\n\n\nåª’ä½“ç±»å‹ç”¨äºå£°æ˜cssæ–‡ä»¶è¢«ç”¨ä½œä»€ä¹ˆç±»å‹çš„åª’ä½“;\nåª’ä½“è¡¨è¾¾å¼ç”¨äºæŒ‡å®šåª’ä½“ç‰¹å¾, åªæœ‰æ»¡è¶³åª’ä½“ç‰¹å¾çš„æ¡ä»¶ä¸‹, æ‰ä¼šåº”ç”¨cssè§„åˆ™;\né€šè¿‡æµ‹è¯•ä¸”ç¬¦åˆåª’ä½“ç±»å‹çš„æƒ…å†µä¸‹åº”ç”¨å†…éƒ¨çš„CSSæ ·å¼.\n\n\nmedia-type: all, print, screen, speech.\nåª’ä½“ç‰¹å¾å±å¹•å°ºå¯¸ä½¿ç”¨min,maxåœ¨ä¸€å®šçš„æ•°å€¼èŒƒå›´å†…å¯ç”¨å½“å‰çš„CSSæ ·å¼.\n\nå¦‚æœå»æ‰å‰ç¼€, å°†ä»…åœ¨æ°å¥½ä¸ºå½“å‰æ•°å€¼ä¸­å¯ç”¨.\n\n/* å¯ç”¨å®½åº¦å¤§äºæˆ–ç­‰äº600pxçš„å±å¹• */@media screen and (max-width: 600px)&#123;    ...&#125;/* å¯ç”¨å®½åº¦å°äºæˆ–ç­‰äº600pxçš„å±å¹• */@media screen and (min-width: 600px)&#123;    ...&#125;/* çª—å£æ°å¥½ç­‰äº600pxæ—¶ */@media screen and (width: 600px) &#123;    ...&#125;\n\næœå‘orientationå¯ä»¥æ£€æµ‹è®¾å¤‡çš„æ–¹å‘, å¦‚ç«–å±æˆ–æ¨ªå±.\n@media screen and (orientation: portrait) &#123;    /* ç«–æ”¾æ—¶çš„CSSæ ·å¼ */&#125;@media screen and (orientation: landscape) &#123;    /* æ¨ªå±æ—¶çš„CSSæ ·å¼ */&#125;\n\næ›´å¤æ‚çš„åª’ä½“æŸ¥è¯¢\nandå®ç°ä¸é€»è¾‘:\n\n@media screen and (min-width: 400px) and (orientation: landscape) &#123;  body &#123;    color: blue;  &#125;&#125;\n\n\n,å®ç°æˆ–é€»è¾‘:\n\n@media (min-width: 768px) and (orientation: landscape), (max-width: 480px) &#123;  /*   (å±å¹•å®½åº¦å¤§äºç­‰äº 768px ä¸”å±å¹•æ–¹å‘ä¸ºæ¨ªå‘) æˆ– (å±å¹•å®½åº¦å°äºç­‰äº 480px)  */&#125;\n\nä¸Cä¸­çš„&amp;å’Œ|ç±»ä¼¼, ä¸çš„ä¼˜å…ˆçº§æ›´é«˜, å…ˆå°†andçš„æ¡ä»¶è¿›è¡Œåˆ¤æ–­, ç„¶åè§†ä½œæ•´ä½“.\n\n\nnotå®ç°éé€»è¾‘:\n\n@media not all and (orientation: landscape) &#123;/* éå…¨éƒ¨å±å¹•ä¸”å±å¹•æ–¹å‘ä¸ºæ¨ªå‘ */&#125;\n\n\nnotå®ç° åè½¬æŸ¥è¯¢:\nä¸æœ€è¿‘çš„andç»„åˆæ‰€ç»‘å®š, æ³¨æ„ä¼˜å…ˆçº§\n\n\n\n@media not screen and (color), print and (color) &#123; ... &#125;\n,å°†åª’ä½“æŸ¥è¯¢çš„è¡¨è¾¾å¼åˆ†ä¸ºäº†å‰åä¸¤çº§, å› æ­¤ä¸Šè¿°çš„åª’ä½“æŸ¥è¯¢ç­‰ä»·äº:\n@media (not (screen and (color))), print and (color) &#123; ... &#125;\n\n\n\nåˆ©ç”¨æŸ¥è¯¢ç»“æœæ‰©å±•è®¾è®¡ä¸Šè¿°åœ¨CSSä¸­åˆ©ç”¨@mediaå¯ä»¥å®ç°å“åº”å¼çš„è®¾è®¡, å¦‚æœæˆ‘ä»¬å¸Œæœ›åœ¨js&#x2F;tsä¸­ä½¿ç”¨åª’ä½“æŸ¥è¯¢çš„ç»“æœå‘¢? åˆ©ç”¨åª’ä½“æŸ¥è¯¢åˆ—è¡¨è¿›è¡Œè®¾è®¡å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®ç°æ›´åŠ è‡ªç”±çš„è®¾è®¡.\n\nä½¿ç”¨window.matchMedia()æ–¹æ³•å­˜æ”¾åª’ä½“æŸ¥è¯¢ç»“æœ:\n\n// æ£€æµ‹è®¾å¤‡çš„æ—‹è½¬æ–¹å‘æ˜¯å¦ä¸ºçºµå‘var mediaQueryList = window.matchMedia(&quot;(orientation: portrait)&quot;);\n\n\næ£€æŸ¥å±æ€§matchesè·å–å¯¹åº”çš„æŸ¥è¯¢ç»“æœ:\n\nif (mediaQueryList.matches) &#123;  /* è®¾å¤‡çš„æ—‹è½¬æ–¹å‘ä¸ºçºµå‘ portrait */&#125; else &#123;  /* è®¾å¤‡çš„æ—‹è½¬æ–¹å‘ä¸æ˜¯çºµå‘ï¼Œä¹Ÿå°±æ˜¯æ¨ªå‘ landscape */&#125;\n\n\né€šè¿‡addListener()æ–¹æ³•æ³¨å†Œç›‘å¬å™¨, æŒç»­ç›‘å¬æŸ¥è¯¢åˆ—è¡¨çš„ç»“æœ\n\n// å®šä¹‰åª’ä½“æŸ¥è¯¢å­—ç¬¦ä¸²const mediaQueryString: string = &quot;(orientation: portrait)&quot;;// åˆ›å»ºæŸ¥è¯¢åˆ—è¡¨const mediaQueryList: MediaQueryList = window.matchMedia(mediaQueryString);// å®šä¹‰å›è°ƒå‡½æ•°ï¼Œä½¿ç”¨ MediaQueryListEvent ç±»å‹function handleOrientationChange(event: MediaQueryListEvent): void &#123;  if (event.matches) &#123;    // åª’ä½“æŸ¥è¯¢åŒ¹é…ï¼ˆç«–å±ï¼‰    console.log(&quot;Orientation changed to portrait&quot;);    // åœ¨è¿™é‡Œæ‰§è¡Œç«–å±æ—¶çš„é€»è¾‘  &#125; else &#123;    // åª’ä½“æŸ¥è¯¢ä¸åŒ¹é…ï¼ˆæ¨ªå±ï¼‰    console.log(&quot;Orientation changed to landscape&quot;);    // åœ¨è¿™é‡Œæ‰§è¡Œæ¨ªå±æ—¶çš„é€»è¾‘  &#125;&#125;// å…ˆè¿è¡Œä¸€æ¬¡å›è°ƒå‡½æ•°ï¼Œä¼ å…¥ MediaQueryList å¯¹è±¡handleOrientationChange(&#123;    matches: mediaQueryList.matches,    media: mediaQueryList.media,    type: &#x27;change&#x27;,&#125; as MediaQueryListEvent);// ä¸ºæŸ¥è¯¢åˆ—è¡¨æ³¨å†Œç›‘å¬å™¨ï¼ŒåŒæ—¶å°†å›è°ƒå‡½æ•°ä¼ ç»™ç›‘å¬å™¨mediaQueryList.addEventListener(&#x27;change&#x27;, handleOrientationChange);// (å¯é€‰) åœ¨ç»„ä»¶å¸è½½æ—¶æˆ–ä¸å†éœ€è¦ç›‘å¬æ—¶ï¼Œç§»é™¤äº‹ä»¶ç›‘å¬å™¨// mediaQueryList.removeEventListener(&#x27;change&#x27;, handleOrientationChange);\n\n","categories":["å­¦ä¹ ç¬”è®°"],"tags":["å‰ç«¯","CSS"]},{"title":"SSHéš§é“","url":"/2025/01/17/%E6%9C%8D%E5%8A%A1%E5%99%A8/SSH%E9%9A%A7%E9%81%93/","content":"åœ¨è¿›è¡ŒæœåŠ¡å™¨è¿ç»´æ—¶ï¼Œç»å¸¸ä¼šé‡åˆ°éœ€è¦ä»£ç†æ¥è®¿é—®æŸäº›èµ„æºçš„æƒ…å†µã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•é€šè¿‡ SSH éš§é“ï¼Œè®©è¿œç¨‹æœåŠ¡å™¨å…±äº«ä½¿ç”¨æœ¬åœ°ç”µè„‘çš„ä»£ç†ï¼Œå®ç°ä¼˜é›…çš„ç§‘å­¦ä¸Šç½‘è§£å†³æ–¹æ¡ˆã€‚\nèƒŒæ™¯é€šå¸¸æˆ‘ä»¬åœ¨æœ¬åœ°ç”µè„‘ä¸Šéƒ½é…ç½®äº†ä»£ç†è½¯ä»¶ï¼ˆå¦‚ Clashï¼‰ï¼Œä½†è¿œç¨‹æœåŠ¡å™¨å¾€å¾€æ²¡æœ‰ä»£ç†ã€‚å¦‚ä½•è®©è¿œç¨‹æœåŠ¡å™¨ä¹Ÿèƒ½ä½¿ç”¨ä¸Šæˆ‘ä»¬æœ¬åœ°çš„ä»£ç†å‘¢ï¼Ÿè¿™å°±éœ€è¦ç”¨åˆ° SSH çš„ç«¯å£è½¬å‘åŠŸèƒ½ã€‚\nåŸç†è§£é‡ŠSSH éš§é“æŠ€æœ¯å…è®¸æˆ‘ä»¬å°†æœ¬åœ°ç«¯å£è½¬å‘åˆ°è¿œç¨‹æœåŠ¡å™¨ã€‚é€šè¿‡å»ºç«‹ä¸€ä¸ªåŠ å¯†çš„é€šé“ï¼Œè¿œç¨‹æœåŠ¡å™¨å¯ä»¥é€šè¿‡è¿™ä¸ªé€šé“è®¿é—®æœ¬åœ°ç”µè„‘çš„ä»£ç†æœåŠ¡ã€‚\n[è¿œç¨‹æœåŠ¡å™¨] &lt;--- SSHéš§é“ ---&gt; [æœ¬åœ°ç”µè„‘] &lt;--- ä»£ç† ---&gt; [äº’è”ç½‘]\n\nå…·ä½“æ­¥éª¤1. å‰ææ¡ä»¶\næœ¬åœ°ç”µè„‘å·²å®‰è£…å¹¶è¿è¡Œä»£ç†è½¯ä»¶ï¼ˆå¦‚ Clashï¼Œé»˜è®¤ç«¯å£ 7890ï¼‰\nèƒ½å¤Ÿé€šè¿‡ SSH è¿æ¥åˆ°è¿œç¨‹æœåŠ¡å™¨\nç¡®ä¿æœ¬åœ°ä»£ç†è½¯ä»¶æ­£å¸¸å·¥ä½œ\n\n2. å»ºç«‹ SSH éš§é“åœ¨æœ¬åœ°ç”µè„‘çš„ç»ˆç«¯ä¸­æ‰§è¡Œï¼š\nssh -R 7890:127.0.0.1:7890 -o ServerAliveInterval=60 -o ServerAliveCountMax=3 ç”¨æˆ·å@æœåŠ¡å™¨IP\n\nå‚æ•°è¯´æ˜ï¼š\n\n-R 7890:127.0.0.1:7890ï¼šå°†è¿œç¨‹æœåŠ¡å™¨çš„ 7890 ç«¯å£è½¬å‘åˆ°æœ¬åœ°çš„ 7890 ç«¯å£\n-o ServerAliveInterval=60ï¼šæ¯ 60 ç§’å‘é€ä¸€æ¬¡å¿ƒè·³åŒ…\n-o ServerAliveCountMax=3ï¼šæœ€å¤šå…è®¸ä¸¢å¤± 3 æ¬¡å¿ƒè·³åŒ…\n\n\n\nç„¶åæ ¹æ®æç¤ºè¾“å…¥æœåŠ¡å™¨ç”¨æˆ·çš„å¯†ç :\n3. é…ç½®æœåŠ¡å™¨ä»£ç†åœ¨æœåŠ¡å™¨ç»ˆç«¯ä¸­æ‰§è¡Œï¼š\nexport https_proxy=http://127.0.0.1:7890 http_proxy=http://127.0.0.1:7890 all_proxy=socks5://127.0.0.1:7890\n\n4. éªŒè¯ä»£ç†æ˜¯å¦ç”Ÿæ•ˆåœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š\ncurl -v https://github.com\n\nå¦‚æœèƒ½å¤Ÿæ­£å¸¸è®¿é—®ï¼Œè¯´æ˜ä»£ç†é…ç½®æˆåŠŸã€‚\næŒä¹…åŒ–é…ç½®å¦‚æœæƒ³è®©ä»£ç†è®¾ç½®æŒä¹…ç”Ÿæ•ˆï¼Œå¯ä»¥å°†ä»£ç†é…ç½®å‘½ä»¤æ·»åŠ åˆ° Shell çš„é…ç½®æ–‡ä»¶ä¸­ï¼š\n# ç¼–è¾‘ ~/.bashrc æˆ– ~/.zshrcecho &#x27;export https_proxy=http://127.0.0.1:7890 http_proxy=http://127.0.0.1:7890 all_proxy=socks5://127.0.0.1:7890&#x27; &gt;&gt; ~/.bashrc# é‡æ–°åŠ è½½é…ç½®source ~/.bashrc\n\næ³¨æ„äº‹é¡¹\nå®‰å…¨æ€§è€ƒè™‘ï¼šSSH éš§é“æ˜¯åŠ å¯†çš„ï¼Œç›¸å¯¹å®‰å…¨\nè¿æ¥ç»´æŠ¤ï¼šä¿æŒ SSH è¿æ¥ä¸æ–­å¼€ï¼Œå¦åˆ™ä»£ç†ä¼šå¤±æ•ˆ\nå¸¦å®½é™åˆ¶ï¼šä»£ç†æµé‡ä¼šç»è¿‡ä½ çš„æœ¬åœ°ç”µè„‘ï¼Œæ³¨æ„å¸¦å®½å ç”¨\nä¸´æ—¶ä½¿ç”¨ï¼šè¿™ç§æ–¹æ³•é€‚åˆä¸´æ—¶ä½¿ç”¨ï¼Œé•¿æœŸä½¿ç”¨å»ºè®®ç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šé…ç½®ä»£ç†\n\nå¸¸è§é—®é¢˜æ’æŸ¥\néš§é“æ— æ³•å»ºç«‹\n\næ£€æŸ¥æœ¬åœ°ä»£ç†æ˜¯å¦æ­£å¸¸è¿è¡Œ\nç¡®è®¤ç«¯å£å·æ˜¯å¦æ­£ç¡®\næ£€æŸ¥æœåŠ¡å™¨é˜²ç«å¢™è®¾ç½®\n\n\nä»£ç†å¤±æ•ˆ\n\nSSH è¿æ¥æ˜¯å¦æ–­å¼€\næœ¬åœ°ä»£ç†è½¯ä»¶æ˜¯å¦æ­£å¸¸è¿è¡Œ\nç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®è®¾ç½®\n\n\n\nClashè®¾ç½®åœ¨é»˜è®¤çš„ä»£ç†è®¾ç½®åŸºç¡€ä¸Šè¿›è¡Œäº†å¦‚ä¸‹ä¿®æ”¹, ä½†æ˜¯ä¸ç¡®ä¿è¿™æ˜¯æ­£å¸¸è®¿é—®çš„å¿…é¡»æ“ä½œ:ä»¥macçš„ClashX Proä¸ºä¾‹, åœ¨æ›´å¤šè®¾ç½®ä¸­\nç»“è®ºé€šè¿‡ SSH éš§é“å…±äº«æœ¬åœ°ä»£ç†æ˜¯ä¸€ä¸ªç®€å•è€Œä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼Œç‰¹åˆ«é€‚åˆä¸´æ—¶éœ€è¦ä»£ç†è®¿é—®çš„åœºæ™¯ã€‚å®ƒä¸éœ€è¦åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…é¢å¤–çš„è½¯ä»¶ï¼Œé…ç½®ç®€å•ï¼Œå®‰å…¨å¯é ã€‚\n","categories":["é€šç”¨æŠ€èƒ½"],"tags":["ssh","æœåŠ¡å™¨"]},{"title":"Tmux","url":"/2025/01/17/%E6%9C%8D%E5%8A%A1%E5%99%A8/Tmux/","content":"\nåœ¨åˆ©ç”¨SSHè¿æ¥è¿œç«¯æœåŠ¡å™¨å¹¶éœ€è¦é•¿æœŸè¿è¡Œç¨‹åº?  ä½¿ç”¨Tmuxèµ‹äºˆè¿›ç¨‹ä»¥ã€Œä¸æ­»é¸Ÿçš„åŠ æŠ¤ã€â€”â€” é€€å‡ºç»ˆç«¯çª—å£åä¾æ—§åœ¨åå°è¿è¡Œ~\n\nä»€ä¹ˆæ˜¯ Tmuxï¼ŸTmuxï¼ˆTerminal Multiplexerï¼‰æ˜¯ä¸€ä¸ªç»ˆç«¯å¤ç”¨å™¨ï¼Œå®ƒå…è®¸ç”¨æˆ·åœ¨å•ä¸ªç»ˆç«¯çª—å£ä¸­è¿è¡Œå’Œç®¡ç†å¤šä¸ªç»ˆç«¯ä¼šè¯ã€‚ä½œä¸ºä¸€ä¸ªå¼ºå¤§çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œtmux ç‰¹åˆ«é€‚åˆéœ€è¦é•¿æ—¶é—´è¿è¡Œç¨‹åºæˆ–éœ€è¦åŒæ—¶ç®¡ç†å¤šä¸ªç»ˆç«¯çª—å£çš„åœºæ™¯ã€‚\nä¸ºä»€ä¹ˆéœ€è¦ Tmuxï¼Ÿåœ¨ä»¥ä¸‹åœºæ™¯ä¸­ï¼Œtmux ç‰¹åˆ«æœ‰ç”¨ï¼š\n\nè¿œç¨‹æœåŠ¡å™¨ç®¡ç†\n\nSSH è¿æ¥æ„å¤–æ–­å¼€æ—¶ï¼Œtmux ä¼šè¯ä»ç„¶ä¿æŒè¿è¡Œ\nå¯ä»¥éšæ—¶é‡æ–°è¿æ¥åˆ°ä¹‹å‰çš„å·¥ä½œç¯å¢ƒ\n\n\nå¤šä»»åŠ¡ç®¡ç†\n\nåœ¨åŒä¸€ä¸ªç»ˆç«¯çª—å£ä¸­åŒæ—¶è¿è¡Œå¤šä¸ªç¨‹åº\næ–¹ä¾¿åœ°åœ¨ä¸åŒä»»åŠ¡ä¹‹é—´åˆ‡æ¢\n\n\nç»“å¯¹ç¼–ç¨‹\n\nå¤šäººå¯ä»¥åŒæ—¶è¿æ¥åˆ°åŒä¸€ä¸ª tmux ä¼šè¯\nå®æ—¶æŸ¥çœ‹å’Œåä½œç¼–è¾‘\n\n\n\nåŸºæœ¬æ¦‚å¿µtmux é‡‡ç”¨ä¸‰å±‚æ¶æ„ï¼š\n\nä¼šè¯ï¼ˆSessionï¼‰ï¼šæœ€é¡¶å±‚çš„æ¦‚å¿µï¼ŒåŒ…å«å¤šä¸ªçª—å£\nçª—å£ï¼ˆWindowï¼‰ï¼šç±»ä¼¼äºæµè§ˆå™¨çš„æ ‡ç­¾é¡µ\nçª—æ ¼ï¼ˆPaneï¼‰ï¼šçª—å£å†…çš„åˆ†å‰²åŒºåŸŸ\n\nå¸¸ç”¨æ“ä½œæŒ‡å—1. å®‰è£…ä¸åŒç³»ç»Ÿçš„å®‰è£…å‘½ä»¤ï¼š\n# MacOSbrew install tmux# Ubuntu/Debiansudo apt install tmux# CentOS/RHELsudo yum install tmux\n\n2. ä¼šè¯ç®¡ç†å¯åŠ¨æ–°ä¼šè¯# åˆ›å»ºé»˜è®¤ä¼šè¯tmux# åˆ›å»ºå‘½åä¼šè¯tmux new -s session_name\n\nä¼šè¯æ“ä½œ# æ–­å¼€å½“å‰ä¼šè¯Ctrl+b d# åˆ—å‡ºæ‰€æœ‰ä¼šè¯tmux ls# è¿æ¥åˆ°æŒ‡å®šä¼šè¯tmux attach -t session_name# å…³é—­æŒ‡å®šä¼šè¯tmux kill-session -t session_name\n\n3. çª—å£ç®¡ç†æ‰€æœ‰å‘½ä»¤éƒ½éœ€è¦å…ˆæŒ‰å‰ç¼€é”® Ctrl+bï¼š\n\nc: åˆ›å»ºæ–°çª—å£\n&amp;: å…³é—­å½“å‰çª—å£\np: åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªçª—å£\nn: åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªçª—å£\næ•°å­—é”®: åˆ‡æ¢åˆ°æŒ‡å®šç¼–å·çš„çª—å£\n\n4. çª—æ ¼æ“ä½œåŒæ ·éœ€è¦å…ˆæŒ‰å‰ç¼€é”® Ctrl+bï¼š\n\n%: å‚ç›´åˆ†å‰²çª—æ ¼\n&quot;: æ°´å¹³åˆ†å‰²çª—æ ¼\næ–¹å‘é”®: åœ¨çª—æ ¼ä¹‹é—´ç§»åŠ¨\nx: å…³é—­å½“å‰çª—æ ¼\nz: æœ€å¤§åŒ–&#x2F;è¿˜åŸå½“å‰çª—æ ¼\n\nè¿›é˜¶æŠ€å·§1. è‡ªå®šä¹‰é…ç½®åˆ›å»º ~/.tmux.conf æ–‡ä»¶æ¥è‡ªå®šä¹‰ tmux é…ç½®ï¼š\n# ä¿®æ”¹å‰ç¼€é”®ä¸º Ctrl+aset -g prefix C-aunbind C-bbind C-a send-prefix# å¼€å¯é¼ æ ‡æ”¯æŒset -g mouse on# è®¾ç½®çª—å£ç¼–å·ä» 1 å¼€å§‹set -g base-index 1\n\n2. å¤åˆ¶æ¨¡å¼\næŒ‰ Ctrl+b [ è¿›å…¥å¤åˆ¶æ¨¡å¼\nä½¿ç”¨æ–¹å‘é”®ç§»åŠ¨å…‰æ ‡\næŒ‰ Space å¼€å§‹é€‰æ‹©\næŒ‰ Enter å¤åˆ¶é€‰ä¸­å†…å®¹\næŒ‰ Ctrl+b ] ç²˜è´´\n\n\ntmux æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ç»ˆç«¯ç®¡ç†å·¥å…·ï¼ŒæŒæ¡å®ƒå¯ä»¥æ˜¾è‘—æé«˜å‘½ä»¤è¡Œå·¥ä½œæ•ˆç‡ã€‚ä»åŸºæœ¬çš„ä¼šè¯ç®¡ç†åˆ°é«˜çº§çš„è‡ªå®šä¹‰é…ç½®ï¼Œtmux éƒ½æä¾›äº†çµæ´»è€Œå¼ºå¤§çš„åŠŸèƒ½ã€‚éšç€ä½¿ç”¨ç»éªŒçš„ç§¯ç´¯ï¼Œä½ ä¼šå‘ç°å®ƒæ˜¯å¼€å‘å·¥ä½œä¸­ä¸å¯æˆ–ç¼ºçš„å·¥å…·ä¹‹ä¸€ã€‚\nå‚è€ƒèµ„æº\nTmux å®˜æ–¹æ–‡æ¡£\nTmux é€ŸæŸ¥è¡¨\nAwesome Tmux\n\n","categories":["é€šç”¨æŠ€èƒ½"],"tags":["æœåŠ¡å™¨","å¤šä¼šè¯ç®¡ç†"]},{"title":"cssç¬”è®°","url":"/2025/01/08/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/css%E7%AC%94%E8%AE%B0/","content":"\nåœ¨çº¿ç¼–è¾‘å¹³å°\n\nä¼ªå…ƒç´ ä½¿ç”¨ä¼ªå…ƒç´ beforeå’Œafterå¯ä»¥ä¸ºå…ƒç´ æ·»åŠ å†…å®¹.\n&lt;div class=&quot;author&quot;&gt;å¾…æŠ‰&lt;/div&gt;&lt;style&gt;.author:before &#123;  content: &quot;Author: &quot;;  font-weight: bold; /* åŠ ç²—å­—ä½“ */  color: blue; /* æ–‡æœ¬é¢œè‰²ä¸ºè“è‰² */&#125;.author:after &#123;  content: &quot; âœï¸&quot;;  font-size: 1.2em; /* è°ƒæ•´å›¾æ ‡å¤§å° */  margin-left: 5px; /* æ·»åŠ å·¦è¾¹è· */&#125;&lt;/style&gt;\n\n\n:nth-childå¯ç”¨äºå¯¹åºåˆ—ä¸­ä¸åŒçš„å…ƒç´ è¿›è¡Œæœ‰åºçš„æ ·å¼è®¾è®¡:\n&lt;div class=&quot;index-card&quot;&gt;å†…å®¹1&lt;/div&gt;&lt;div class=&quot;index-card&quot;&gt;å†…å®¹2&lt;/div&gt;&lt;div class=&quot;index-card&quot;&gt;å†…å®¹3&lt;/div&gt;&lt;div class=&quot;index-card&quot;&gt;å†…å®¹4&lt;/div&gt;&lt;style&gt;.index-card:nth-child(odd) &#123;  flex-direction: row-reverse;&#125;&lt;/style&gt;\n\né€‰æ‹©æ‰€æœ‰ç±»åä¸º â€œindex-cardâ€ çš„å…ƒç´ ;\nrow-reverse ä¼šè®© flex å®¹å™¨ä¸­çš„é¡¹ç›®ä»å³åˆ°å·¦æ’åˆ—;\nåŒç†, evené€‰æ‹©å¶æ•°ä½ç½®çš„å…ƒç´ ; 3n+1ç­‰å‡½æ•°è¡¨è¾¾å¼ä¹Ÿå¯ä»¥èµ·ä½œç”¨.\n\n\n\nåŸºæœ¬çš„å…ƒç´ å±æ€§å¸ƒå±€å±æ€§\nmargin: æ§åˆ¶å…ƒç´ çš„å¤–è¾¹è·;\npadding: æ§åˆ¶å…ƒç´ çš„å†…è¾¹è·;\n\næ–‡æœ¬å±æ€§\nfont-size: æ§åˆ¶å­—ä½“å¤§å°;\nfont-weight: æ§åˆ¶å­—ä½“ç²—ç»†;\ntext-align: æ§åˆ¶æ–‡æœ¬çš„å¯¹é½æ–¹å¼;\ntext-decoration: æ§åˆ¶æ–‡æœ¬çš„è£…é¥°;\nline-height: æ§åˆ¶è¡Œé«˜;\nletter-spacing: æ§åˆ¶å­—ç¬¦é—´è·;\ntext-transform: æ§åˆ¶æ–‡æœ¬çš„å¤§å°å†™;\n\nè¾¹æ¡†å±æ€§\nborder: e.g. border: 1px solid red; ç®€å†™å±æ€§;\nborder-radius: æ§åˆ¶å…ƒç´ çš„åœ†è§’;\nborder-style: solid, dashed, dottedâ€¦\n\nå…¶ä»–\noverflow: visible, hidden, scroll, auto;\nopacity: æ§åˆ¶å…ƒç´ çš„é€æ˜åº¦;\ncursor: pointer, default, move, not-allowedâ€¦\n\nåŠ¨æ„Ÿé­”æ³•hoveræ•ˆæœé€šè¿‡ä¸ºclassè®¾ç½®:hoverä¼ªç±»ï¼Œå¯ä»¥ä¸ºå…ƒç´ æ·»åŠ é¼ æ ‡æ‚¬åœæ—¶çš„æ•ˆæœã€‚\n.my-element:hover &#123;  background-color: green;  color: red;  transform: scale(1.1);  font-size:20px;&#125;\n\nç©ºæ ¼å°†ä¸ä¼šè¢«å¿½ç•¥, éœ€è¦ç¡®ä¿ç±»åä¸:hoverä¹‹é—´ä¸å­˜åœ¨ç©ºæ ¼;\n\nå…¶ä»–çš„ä¸€äº›å¸¸ç”¨çš„ä¼ªç±»:\na:hover &#123;      color: red;    &#125;    button:active &#123;      background-color: green;    &#125;    input:focus &#123;      border-color: blue;    &#125;    a:visited &#123;      color: purple;    &#125;    p:first-child &#123;      font-weight: bold;    &#125;    p:last-child &#123;      font-style: italic;    &#125;    li:nth-child(2) &#123;      color: red;    &#125;    p:only-child &#123;      color: green;    &#125;    div:empty &#123;      background-color: yellow;    &#125;\n\nFlex&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;  &lt;meta charset=&quot;UTF-8&quot;&gt;  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;  &lt;style&gt;    /* å®šä¹‰Flexå®¹å™¨ */    .container &#123;      display: flex; /* å°†å®¹å™¨è®¾ç½®ä¸ºFlexboxå®¹å™¨ */            /* flex-direction: å®šä¹‰ä¸»è½´æ–¹å‘ */      /* row: æ°´å¹³ä»å·¦åˆ°å³ï¼ˆé»˜è®¤ï¼‰ */      /* row-reverse: æ°´å¹³ä»å³åˆ°å·¦ */      /* column: å‚ç›´ä»ä¸Šåˆ°ä¸‹ */      /* column-reverse: å‚ç›´ä»ä¸‹åˆ°ä¸Š */      flex-direction: row; /* å¯ä»¥æ”¹ä¸ºrow-reverse, column, column-reverse */      /* flex-wrap: å®šä¹‰æ˜¯å¦æ¢è¡Œ */      /* nowrap: ä¸æ¢è¡Œï¼ˆé»˜è®¤ï¼‰ */      /* wrap: æ¢è¡Œ */      /* wrap-reverse: åå‘æ¢è¡Œ */      flex-wrap: wrap; /* å¯ä»¥æ”¹ä¸ºnowrap, wrap-reverse */      /* flex-flow: flex-direction å’Œ flex-wrap çš„ç®€å†™ */      /* flex-flow: &lt;flex-direction&gt; &lt;flex-wrap&gt;; */      flex-flow: row wrap; /* å¯ä»¥æ”¹ä¸ºcolumn nowrapç­‰ç»„åˆ */      /* justify-content: å®šä¹‰åœ¨ä¸»è½´ä¸Šçš„å¯¹é½æ–¹å¼ */      /* flex-start: èµ·å§‹å¯¹é½ï¼ˆé»˜è®¤ï¼‰ */      /* flex-end: æœ«ç«¯å¯¹é½ */      /* center: å±…ä¸­å¯¹é½ */      /* space-between: ä¸¤ç«¯å¯¹é½ï¼Œé¡¹ç›®ä¹‹é—´é—´éš”ç›¸ç­‰ */      /* space-around: é¡¹ç›®ä¹‹é—´é—´éš”ç›¸ç­‰ï¼Œé¡¹ç›®ä¸¤è¾¹æœ‰åŠä¸ªé—´éš” */      /* space-evenly: é¡¹ç›®ä¹‹é—´é—´éš”ç›¸ç­‰ï¼Œé¡¹ç›®ä¸¤è¾¹æœ‰å®Œæ•´é—´éš” */      justify-content: space-between; /* å¯ä»¥æ”¹ä¸ºflex-start, flex-end, center, space-around, space-evenly */      /* align-items: å®šä¹‰åœ¨äº¤å‰è½´ä¸Šçš„å¯¹é½æ–¹å¼ */      /* stretch: æ‹‰ä¼¸é€‚åº”å®¹å™¨ï¼ˆé»˜è®¤ï¼‰ */      /* flex-start: äº¤å‰è½´èµ·å§‹å¯¹é½ */      /* flex-end: äº¤å‰è½´æœ«ç«¯å¯¹é½ */      /* center: äº¤å‰è½´å±…ä¸­å¯¹é½ */      /* baseline: é¡¹ç›®åŸºçº¿å¯¹é½ */      align-items: center; /* å¯ä»¥æ”¹ä¸ºflex-start, flex-end, stretch, baseline */      /* align-content: å®šä¹‰å¤šè¡Œçš„å†…å®¹åœ¨äº¤å‰è½´ä¸Šçš„å¯¹é½æ–¹å¼ï¼ˆé€‚ç”¨äºå¤šè¡Œæ—¶ï¼‰ */      /* stretch: æ‹‰ä¼¸é€‚åº”å®¹å™¨ï¼ˆé»˜è®¤ï¼‰ */      /* flex-start: äº¤å‰è½´èµ·å§‹å¯¹é½ */      /* flex-end: äº¤å‰è½´æœ«ç«¯å¯¹é½ */      /* center: äº¤å‰è½´å±…ä¸­å¯¹é½ */      /* space-between: å¤šè¡Œä¸¤ç«¯å¯¹é½ï¼Œè¡Œä¹‹é—´é—´éš”ç›¸ç­‰ */      /* space-around: å¤šè¡Œä¹‹é—´é—´éš”ç›¸ç­‰ï¼Œè¡Œä¸¤è¾¹æœ‰åŠä¸ªé—´éš” */      align-content: space-between; /* å¯ä»¥æ”¹ä¸ºflex-start, flex-end, center, space-around */            height: 100vh; /* è®¾ç½®å®¹å™¨é«˜åº¦ */      background-color: #f0f0f0; /* è®¾ç½®å®¹å™¨èƒŒæ™¯é¢œè‰² */    &#125;        /* å®šä¹‰Flexé¡¹ç›® */    .item &#123;      flex: 1; /* è®¾ç½®é¡¹ç›®çš„flexå±æ€§ï¼Œé¡¹ç›®å¹³åˆ†ç©ºé—´ */      padding: 20px; /* è®¾ç½®é¡¹ç›®å†…è¾¹è· */      background-color: lightblue; /* è®¾ç½®é¡¹ç›®èƒŒæ™¯é¢œè‰² */      margin: 10px; /* è®¾ç½®é¡¹ç›®å¤–è¾¹è· */      text-align: center; /* è®¾ç½®é¡¹ç›®æ–‡æœ¬å±…ä¸­ */      flex-grow: 1;/*å°è¯•å‘flexå®¹å™¨æ‰©å±•ç©ºé—´*/    &#125;  &lt;/style&gt;&lt;/head&gt;&lt;body&gt;  &lt;div class=&quot;container&quot;&gt;    &lt;div class=&quot;item&quot;&gt;Item 1&lt;/div&gt;    &lt;div class=&quot;item&quot;&gt;Item 2&lt;/div&gt;    &lt;div class=&quot;item&quot;&gt;Item 3&lt;/div&gt;  &lt;/div&gt;&lt;/body&gt;&lt;/html&gt;\n\n","categories":["å­¦ä¹ ç¬”è®°"],"tags":["å‰ç«¯","CSS"]},{"title":"åè®®åˆ‡æ¢ä¸è®¤è¯é…ç½®","url":"/2025/01/18/%E6%9C%8D%E5%8A%A1%E5%99%A8/%E8%AE%A4%E8%AF%81%E9%85%8D%E7%BD%AE/","content":"èƒŒæ™¯ä»‹ç»åœ¨ä½¿ç”¨ Git è¿›è¡Œç‰ˆæœ¬æ§åˆ¶æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åœ¨ SSH å’Œ HTTPS ä¸¤ç§åè®®ä¹‹é—´è¿›è¡Œåˆ‡æ¢ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»è¿™ä¸¤ç§è®¤è¯æ–¹å¼çš„ç‰¹ç‚¹ã€è½¬æ¢æ–¹æ³•ä»¥åŠç›¸å…³çš„å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆã€‚\nè®¤è¯æœºåˆ¶è§£æåŒå±‚è®¤è¯æ¶æ„\næœåŠ¡å™¨å±‚è®¤è¯\n\nç”¨äºéªŒè¯ç”¨æˆ·å¯¹æœåŠ¡å™¨çš„è®¿é—®æƒé™\né€šå¸¸é€šè¿‡ SSH å¯†é’¥æˆ–å¯†ç å®Œæˆ\n\n\nä»“åº“å±‚è®¤è¯\n\néªŒè¯ç”¨æˆ·å¯¹ç‰¹å®š Git ä»“åº“çš„æ“ä½œæƒé™\nç‹¬ç«‹äºæœåŠ¡å™¨è®¤è¯ç³»ç»Ÿ\nç¡®ä¿ä»£ç å®‰å…¨æ€§å’Œæäº¤è€…èº«ä»½\n\n\n\nSSH vs HTTPS\nSSH åè®®\n\nä¼˜åŠ¿ï¼š\næ›´å®‰å…¨ï¼Œä½¿ç”¨å¯†é’¥å¯¹è¿›è¡ŒåŠ å¯†\né…ç½®ä¸€æ¬¡å¯æ°¸ä¹…ä½¿ç”¨\nå¯ä»¥é¿å…æ¯æ¬¡è¾“å…¥å¯†ç \n\n\nåŠ£åŠ¿ï¼š\nå¯èƒ½è¢«é˜²ç«å¢™é˜»æ­¢ï¼ˆ22ç«¯å£ï¼‰\nåœ¨æŸäº›ä¼ä¸šç½‘ç»œä¸­å¯èƒ½æ— æ³•ä½¿ç”¨\né…ç½®ç›¸å¯¹å¤æ‚\n\n\n\n\nHTTPS åè®®\n\nä¼˜åŠ¿ï¼š\nå‡ ä¹æ€»æ˜¯å¯ç”¨ï¼ˆ443ç«¯å£ï¼‰\nç©¿é€é˜²ç«å¢™èƒ½åŠ›å¼º\né…ç½®ç®€å•\n\n\nåŠ£åŠ¿ï¼š\néœ€è¦ç®¡ç†å‡­è¯\nå¯èƒ½éœ€è¦é¢‘ç¹è¾“å…¥è®¤è¯ä¿¡æ¯\n\n\n\n\n\nè¿æ¥é—®é¢˜åˆ†æSSH è¶…æ—¶é—®é¢˜è§£æSSH è¿æ¥å¯èƒ½å‡ºç°è¶…æ—¶çš„åŸå› ï¼š\n\nç½‘ç»œé™åˆ¶\n\nä¼ä¸šé˜²ç«å¢™å¯èƒ½ä¼šé˜»æ­¢æˆ–é™åˆ¶ SSH è¿æ¥\næŸäº›ç½‘ç»œç¯å¢ƒä¼šå®šæœŸåˆ‡æ–­é•¿æ—¶é—´çš„ SSH è¿æ¥\n\n\nä»£ç†å½±å“\n\nSSH ä¸ä¼šè‡ªåŠ¨ä½¿ç”¨ç³»ç»Ÿä»£ç†\néœ€è¦é¢å¤–é…ç½® SSH çš„ä»£ç†è®¾ç½®\n\n\né˜²ç«å¢™ç­–ç•¥\n\n22 ç«¯å£ç»å¸¸è¢«å°é”\næŸäº›åœ°åŒºå¯èƒ½é™åˆ¶ SSH åè®®\n\n\n\nHTTPS è¿æ¥ä¼˜åŠ¿\næ ‡å‡† Web ç«¯å£\n\nä½¿ç”¨ 443 ç«¯å£ï¼Œå‡ ä¹æ€»æ˜¯å¼€æ”¾çš„\nä¸æ™®é€šç½‘é¡µæµè§ˆä½¿ç”¨ç›¸åŒçš„ç«¯å£\n\n\nä»£ç†å…¼å®¹\n\nè‡ªåŠ¨ä½¿ç”¨ç³»ç»Ÿä»£ç†è®¾ç½®\næ›´å¥½çš„ç½‘ç»œå…¼å®¹æ€§\n\n\nè¿æ¥ç‰¹æ€§\n\néæŒä¹…è¿æ¥ï¼Œæ¯æ¬¡è¯·æ±‚ç‹¬ç«‹\nä¸å—é•¿è¿æ¥é™åˆ¶å½±å“\n\n\n\nåè®®è½¬æ¢å®è·µåœ¨å°è¯•ç›´æ¥git pushæ—¶æ˜¾ç¤º:é€šè¿‡æ‰§è¡Œå‘½ä»¤git remote -væŸ¥çœ‹å½“å‰è¿œç¨‹ä»“åº“çš„åœ°å€:\n\ngit@çš„å‰ç¼€æ ¼å¼è¯´æ˜æ˜¯é€šè¿‡sshçš„æ–¹å¼, æˆ‘ä»¬å°è¯•ä¿®æ”¹ä¸ºhttpsçš„åè®®æ¥è§£å†³è¶…æ—¶é—®é¢˜.\n\næ›´æ–°ä»“åº“çš„URL:\ngit remote set-url origin https://github.com/ç”¨æˆ·å/ä»“åº“å.git\ne.g.:\n\nåœ¨æ›´æ–°ä¹‹åæ‰§è¡Œget remote -v, æ£€æŸ¥å‘ç°å·²ç»è½¬æ¢ä¸ºHTTPS.\n\né…ç½®å‡­è¯ç®¡ç†æ­¤æ—¶ä¾æ—§æ— æ³•ç›´æ¥git push, å› ä¸ºä»“åº“å±‚è®¤è¯çš„å¯†ç éªŒè¯æ–¹å¼å·²ç»ä¸å—githubæ”¯æŒ, å¦‚æœå°è¯•é€šè¿‡ç”¨æˆ·å-å¯†ç çš„æ–¹å¼éªŒè¯, å°†ä¼šå¤±è´¥:\nå› æ­¤æˆ‘ä»¬éœ€è¦é€šè¿‡ ä¸ªäººè®¿é—®ä»¤ç‰Œ(PAT) çš„æ–¹å¼æ¥é‰´æƒ.\n\né…ç½®å‡­è¯ç®¡ç†:\n\n# æ°¸ä¹…å­˜å‚¨å‡­è¯git config --global credential.helper store# æˆ–ä¸´æ—¶ç¼“å­˜ï¼ˆå¦‚15åˆ†é’Ÿï¼‰git config --global credential.helper &#x27;cache --timeout=900&#x27;\n\nå¦‚æœä¸å¸Œæœ›å½±å“å…¶ä»–ä»“åº“, å»é™¤--globalå³å¯.\n\n\nè·å–PAT:\nè®¿é—® GitHub Settings;\nä¸‹æ»‘åˆ°åº•éƒ¨,è¿›å…¥ Developer settings;\né€‰æ‹© Personal access tokens â†’ Tokens (classic);\nåœ¨å³ä¸Šè§’é€‰æ‹©ç”Ÿæˆæ–°çš„access token;\nç”Ÿæˆæ–°ä»¤ç‰Œå¹¶è®¾ç½®é€‚å½“çš„æƒé™èŒƒå›´ (è‡³å°‘å‹¾é€‰repo).\nåœ¨ç”ŸæˆPATä¹‹åç«‹å³å¤åˆ¶å¹¶ä¿å­˜.\n\n\n\n\n\né€šè¿‡PATé‰´æƒæ­¤æ—¶, æˆ‘ä»¬å¯ä»¥git pushç„¶ååˆ©ç”¨PATæ¥é‰´æƒ:\ngit pushUsername: &lt;GitHubç”¨æˆ·å&gt;Password: &lt;ä¸ªäººè®¿é—®ä»¤ç‰Œ&gt;\ne.g.\nå®‰å…¨ç›¸å…³å»ºè®®å‡­è¯ç®¡ç†\nå‡­è¯å­˜å‚¨ä½ç½®\n\nLinux&#x2F;Mac: ~/.git-credentials\nWindows: %USERPROFILE%\\.git-credentials\n\n\nå®‰å…¨å»ºè®®\n\nå®šæœŸæ›´æ–°è®¿é—®ä»¤ç‰Œ\nåœ¨å…±äº«ç¯å¢ƒä½¿ç”¨ä¸´æ—¶ç¼“å­˜\nåŠæ—¶æ¸…ç†å‡­è¯ç¼“å­˜\n\n\n\næ•…éšœæ’é™¤# åˆ é™¤å…¨å±€å‡­è¯é…ç½®git config --global --unset credential.helper# åˆ é™¤å‡­è¯æ–‡ä»¶rm ~/.git-credentials  # Linux/Macdel &quot;%USERPROFILE%\\.git-credentials&quot;  # Windows\n","categories":["é€šç”¨æŠ€èƒ½"],"tags":["æœåŠ¡å™¨","PAT"]},{"title":"Swiftå­¦ä¹ æ‘˜è®°","url":"/2025/04/17/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/swift/","content":"åˆè§é»˜è®¤æƒ…å†µä¸‹ï¼Œå‡½æ•°ä½¿ç”¨å®ƒä»¬çš„å‚æ•°åç§°ä½œä¸ºå®ƒä»¬å‚æ•°çš„æ ‡ç­¾ï¼Œåœ¨å‚æ•°åç§°å‰å¯ä»¥è‡ªå®šä¹‰å‚æ•°æ ‡ç­¾ï¼Œæˆ–è€…ä½¿ç”¨ _ è¡¨ç¤ºä¸ä½¿ç”¨å‚æ•°æ ‡ç­¾:\nfunc greet(_ person: String, on day: String) -&gt; String &#123;    return &quot;Hello \\(person), today is \\(day).&quot;&#125;greet(&quot;John&quot;, on: &quot;Wednesday&quot;)\n\n\nå‚æ•°æ ‡ç­¾æŒ‡çš„æ˜¯è°ƒç”¨æ—¶å€™çš„åç§°, å‚æ•°åæŒ‡çš„æ˜¯å‡½æ•°å†…éƒ¨.\n\nå‡½æ•°æ˜¯ç¬¬ä¸€ç­‰ç±»å‹ï¼Œè¿™æ„å‘³ç€å‡½æ•°å¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ã€‚\nfunc makeIncrementer() -&gt; ((Int) -&gt; Int) &#123;    func addOne(number: Int) -&gt; Int &#123;        return 1 + number    &#125;    return addOne&#125;var increment = makeIncrementer()increment(7)\n\nå‡½æ•°ä¹Ÿå¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„è¾“å…¥å‚æ•°:\nfunc hasAnyMatches(list: [Int], condition: (Int) -&gt; Bool) -&gt; Bool &#123;    for item in list &#123;        if condition(item) &#123;            return true        &#125;    &#125;    return false&#125;func lessThanTen(number: Int) -&gt; Bool &#123;    return number &lt; 10&#125;var numbers = [20, 19, 7, 12]hasAnyMatches(list: numbers, condition: lessThanTen)\n\nå¯ä»¥é€šè¿‡å‚æ•°ä½ç½®è€Œä¸æ˜¯å‚æ•°åå­—æ¥å¼•ç”¨å‚æ•°â€”â€”è¿™ä¸ªæ–¹æ³•åœ¨éå¸¸çŸ­çš„é—­åŒ…ä¸­éå¸¸æœ‰ç”¨ã€‚\nlet sortedNumbers = numbers.sorted &#123; $0 &gt; $1 &#125;print(sortedNumbers)\n\nactorä¸ classç±»ä¼¼, ä½†æ˜¯å¯ä»¥åºåˆ—åŒ–è®¿é—®, ä¿æŠ¤å…±äº«ã€å¯å˜çš„æ•°æ®.\nå¯¹è±¡å’Œç±»æ„é€ ä¸ææ„ä½¿ç”¨ self.æ›¿ä»£ this-&gt;, ä½¿ç”¨  init å’Œ  deinitåˆ†åˆ«å£°æ˜æ„é€ å’Œææ„å‡½æ•°:\nclass NamedShape &#123;    var numberOfSides: Int = 0    var name: String    init(name: String) &#123;        self.name = name    &#125;    func simpleDescription() -&gt; String &#123;        return &quot;A shape with \\(numberOfSides) sides.&quot;    &#125;&#125;\n\nå­ç±»å¦‚æœè¦é‡å†™çˆ¶ç±»çš„æ–¹æ³•çš„è¯ï¼Œéœ€è¦ç”¨ override æ ‡è®°:\nclass Square: NamedShape &#123;    var sideLength: Double    init(sideLength: Double, name: String) &#123;        self.sideLength = sideLength        super.init(name: name)        numberOfSides = 4    &#125;    func area() -&gt;  Double &#123;        return sideLength * sideLength    &#125;    override func simpleDescription() -&gt; String &#123;        return &quot;A square with sides of length \\(sideLength).&quot;    &#125;&#125;let test = Square(sideLength: 5.2, name: &quot;my test square&quot;)test.area()test.simpleDescription()\n\n\n\nä½¿ç”¨ :classNameçš„æ–¹æ³•å£°æ˜çˆ¶ç±».\nsuper.init æ˜¯ç”¨æ¥è°ƒç”¨çˆ¶ç±»ï¼ˆè¶…ç±»ï¼‰çš„åˆå§‹åŒ–æ–¹æ³•çš„ã€‚å½“åˆ›å»ºä¸€ä¸ªå­ç±»çš„å®ä¾‹æ—¶ï¼Œå­ç±»å¯èƒ½éœ€è¦åˆå§‹åŒ–ä¸€äº›è‡ªå·±çš„å±æ€§ï¼ŒåŒæ—¶è¿˜éœ€è¦ç¡®ä¿çˆ¶ç±»çš„å±æ€§ä¹Ÿè¢«æ­£ç¡®åˆå§‹åŒ–ã€‚è¿™æ—¶å°±éœ€è¦ä½¿ç”¨ super.init æ¥è°ƒç”¨çˆ¶ç±»çš„åˆå§‹åŒ–æ–¹æ³•ï¼Œå®Œæˆçˆ¶ç±»çš„åˆå§‹åŒ–è¿‡ç¨‹\nä¸¥æ ¼çš„é¡ºåºè¦æ±‚: å­ç±»å¿…é¡»å…ˆåˆå§‹åŒ–è‡ªå·±çš„å±æ€§ï¼Œç„¶åè°ƒç”¨ super.initï¼Œæœ€åæ‰èƒ½è®¿é—®æˆ–ä¿®æ”¹ç»§æ‰¿æ¥çš„å±æ€§ã€‚\n\n\nè®¡ç®—å±æ€§æ™®é€šçš„è®¡ç®—å±æ€§åœ¨å±æ€§å†…éƒ¨ä½¿ç”¨ &#123;&#125;å¹¶åŠ ä¸Š return, å¯ä»¥è®©è®¿é—®è¿™ä¸ªå±æ€§çš„æ—¶å€™, è¿”å›å€¼ç”±ç»“æ„ä½“çš„å…¶ä»–å±æ€§è®¡ç®—å¾—åˆ°.\nstruct Temperature &#123;  var celsius: Double  var fahrenheit: Double&#123;    return celsius *1.8 + 32  &#125;    init(celsius: Double)&#123;    self.celsius = celsius  &#125;&#125;\n\n\n\næ­¤æ—¶å®ä¾‹åŒ–ä¸€ä¸ªç»“æ„ä½“å°±åªéœ€è¦ç»™å‡ºä¸€ä¸ªå±æ€§çš„å€¼.\nselfåœ¨ä¸Šè¿°çš„Swiftä»£ç ä¸­æ˜¯ä¸å¯æˆ–ç¼ºçš„, å› ä¸ºå½¢å‚å’Œå†…éƒ¨å±æ€§çš„åç§°ç›¸åŒ.\n\n\nä½¿ç”¨ getter å’Œ setter çš„è®¡ç®—å±æ€§:class EquilateralTriangle: NamedShape &#123;    var sideLength: Double = 0.0    init(sideLength: Double, name: String) &#123;        self.sideLength = sideLength        super.init(name: name)        numberOfSides = 3    &#125;    var perimeter: Double &#123;      // æ ¹æ®å­˜å‚¨å±æ€§è¿›è¡Œè®¡ç®—        get &#123;            return 3.0 * sideLength        &#125;      // è®¾ç½®å±æ€§        set &#123;            sideLength = newValue / 3.0        &#125;    &#125;    override func simpleDescription() -&gt; String &#123;        return &quot;An equilateral triangle with sides of length \\(sideLength).&quot;    &#125;&#125;var triangle = EquilateralTriangle(sideLength: 3.1, name: &quot;a triangle&quot;)print(triangle.perimeter)triangle.perimeter = 9.9print(triangle.sideLength)\n\nè®¡ç®—å±æ€§åŒæ ·æ˜¯ä¸€ä¸ªå±æ€§, ä½†æ˜¯æ ¹æ®è°ƒç”¨æ–¹å¼çš„ä¸åŒ, æœ‰è¿”å›å’Œè®¾ç½®ä¸¤ç§æ–¹å¼.\ntriangle.perimeter = 9.9print(triangle.perimeter)\n\nMutatingé»˜è®¤æƒ…å†µä¸‹, ç»“æ„ä½“ä¸­çš„æ–¹æ³•ä¸èƒ½ç›´æ¥ä¿®æ”¹ç»“æ„ä½“çš„å±æ€§. éœ€è¦æ˜¾å¼å£°æ˜ä¸º mutating:\nstruct User&#123;  let username:String  var isVisible:Bool = true  var friends: [string] = []    mutating func addFriend(username: String)&#123;    friends.append(username)  &#125;&#125;\n\nå±æ€§ç›‘è§†å™¨ä½¿ç”¨ willSet å’Œ didSetã€‚å†™å…¥çš„ä»£ç ä¼šåœ¨å±æ€§å€¼å‘ç”Ÿæ”¹å˜æ—¶è°ƒç”¨ï¼Œä½†ä¸åŒ…å«æ„é€ å™¨ä¸­å‘ç”Ÿå€¼æ”¹å˜çš„æƒ…å†µ:\n\nåˆ†åˆ«å¯ä»¥ä½¿ç”¨ newValueä¸ oldValueæ¥è¡¨ç¤ºå±æ€§å°†è¦æ”¹å˜çš„å€¼ä»¥åŠæ”¹å˜ä¹‹å‰çš„å€¼.\n\ne.g. ç¡®ä¿ä¸‰è§’å½¢çš„è¾¹é•¿æ€»æ˜¯å’Œæ­£æ–¹å½¢çš„è¾¹é•¿ç›¸åŒã€‚\nclass TriangleAndSquare &#123;    var triangle: EquilateralTriangle &#123;        willSet &#123;            square.sideLength = newValue.sideLength        &#125;    &#125;    var square: Square &#123;        willSet &#123;            triangle.sideLength = newValue.sideLength        &#125;    &#125;    init(size: Double, name: String) &#123;        square = Square(sideLength: size, name: name)        triangle = EquilateralTriangle(sideLength: size, name: name)    &#125;&#125;var triangleAndSquare = TriangleAndSquare(size: 10, name: &quot;another test shape&quot;)print(triangleAndSquare.square.sideLength)print(triangleAndSquare.triangle.sideLength)triangleAndSquare.square = Square(sideLength: 50, name: &quot;larger square&quot;)print(triangleAndSquare.triangle.sideLength)\n\næšä¸¾enum Rank: Int &#123;    case ace = 1    case two, three, four, five, six, seven, eight, nine, ten    case jack, queen, king    func simpleDescription() -&gt; String &#123;        switch self &#123;        case .ace:            return &quot;ace&quot;        case .jack:            return &quot;jack&quot;        case .queen:            return &quot;queen&quot;        case .king:            return &quot;king&quot;        default:            return String(self.rawValue)        &#125;    &#125;&#125;let ace = Rank.acelet aceRawValue = ace.rawValue\n\n\nå¦‚æœæ²¡æœ‰è®¾ç½®ç¬¬ä¸€ä¸ªæˆå‘˜çš„åˆå§‹å€¼, é»˜è®¤ä» 0 å¼€å§‹;\nç¼ºçœå€¼æŒ‰ç…§é€’å¢å¤„ç†;\ncaseä¹‹å¤–å¯ä»¥è®¾ç½®æ–¹æ³•.\n\nä½¿ç”¨ init?(rawValue:) åˆå§‹åŒ–æ„é€ å™¨æ¥ä»åŸå§‹å€¼åˆ›å»ºä¸€ä¸ªæšä¸¾å®ä¾‹:\nif let convertedRank = Rankï¼ˆrawValue:3ï¼‰ï½›\tlet threeDescription = convertedRank.simpleDescriptionï¼ˆï¼‰ï½\n\n\n\nif letè¡¨ç¤ºå¯é€‰ç»‘å®š, å®‰å…¨åœ°è§£åŒ…å¯é€‰å€¼\n\n\nè§£åŒ…\nif letè§£åŒ…\n\nif let A = B &#123;  ...&#125;\n\nå¦‚æœ Bä¸æ˜¯ nil, å°±å°†å…¶èµ‹å€¼ç»™A, ç„¶åæ‰§è¡Œ &#123;&#125;å†…éƒ¨çš„è¯­å¥.\n\n??\n\nvar score : Int ?  = nilprint(score ?? default_score)// æˆç»©scoreä¸æ˜¯nil, å°±å°†å…¶æ‰“å°, å¦åˆ™è¾“å‡ºé»˜è®¤çš„æˆç»©\n\nå¯¹å­—å…¸è¿›è¡Œç´¢å¼•:\n// scoresæ˜¯ä¸€ä¸ªIntæ•°ç»„for ( major, scores) in all_scores &#123;  for score in scores&#123;    ...  &#125;&#125;// å¦‚æœkeyæ²¡æœ‰ä½¿ç”¨, å¯ä»¥ç›´æ¥å¿½ç•¥for( _, socres) in all_scores&#123;  ...&#125;\n\nswiftæ”¯æŒå¯¹å­—å…¸è¿›è¡Œæ›´æ–°æˆ–è€…ç§»é™¤çš„æ—¶å€™, è¿”å›å¹¶ä½¿ç”¨å°±å€¼:\nif let oldValue = scores.updateValue(100, forKey:&quot;fad&quot;)&#123;  print(..)&#125;else&#123;  ...&#125;if let oldValue = scores.removeValue(forKey: &quot;fad&quot;)&#123;  print(&quot;fad&#x27;s old value was \\(oldValue)&quot;)&#125;\n\n\n@IBActionè¡¨ç¤ºç»„ä»¶äº¤äº’å’Œä»£ç ç›¸ç»‘å®š(å…è®¸åœ¨äº¤äº’çš„æ—¶å€™æ‰§è¡Œå¤–éƒ¨å®šä¹‰çš„å‡½æ•°);\n@IBOutletè¡¨ç¤ºå…è®¸ä»£ç çš„å“åº”æ”¹å˜ç»„ä»¶æœ¬èº«çš„çŠ¶æ€(å­—ä½“ã€å¤§å°ç­‰).\n\n\n\næ¦‚å¿µé—­åŒ…é—­åŒ…æŒ‡çš„æ˜¯å¯ä»¥åœ¨ç‰¹å®šä½ç½®è¿è¡Œçš„ã€ä¸éœ€è¦åç§°çš„å‡½æ•°.\nscene.setOnStartHandlerï½› // é—­åŒ…çš„ä¸»ä½“ï½\n\n\ntoggle()å¯ä»¥è‡ªåŠ¨åˆ‡æ¢å˜é‡çš„å¸ƒå°”å€¼.\nButton(&quot;Press Me&quot;) &#123;    isOn.toggle()&#125;\n\nçŠ¶æ€å±æ€§\nä½¿ç”¨ @Stateåœ¨è§†å›¾ä¹‹å¤–å®šä¹‰;\nå½“çŠ¶æ€å±æ€§çš„å€¼å‘ç”Ÿæ”¹å˜æ—¶, ä¼šè‡ªåŠ¨æ›´æ–°è§†å›¾ä¸­ç›¸å…³çš„éƒ¨åˆ†.\nå¯¹äºçŠ¶æ€å¯¹è±¡, ä½¿ç”¨ @StateObjectæ¥å£°æ˜.\n\nç»‘å®šç”± @Bindingå£°æ˜å°†å±æ€§è¿æ¥åˆ°å…¶ä»–åœ°æ–¹, å…è®¸å­è§†å›¾å¯¹å±æ€§çš„ä¿®æ”¹å¹¶åŒæ­¥.\nåœ¨å±æ€§çš„å‰é¢å¢åŠ  $ï¼Œè¡¨æ˜ä¼šåŒæ­¥ä¿®æ”¹å¯ä¿¡æº.\nå­—ç¬¦ä¸²æ’å€¼åœ¨è¾ƒé•¿å­—ç¬¦ä¸²ä¸­ä½¿ç”¨å¸¸é‡ã€å˜é‡æˆ–ä»£ç è¡¨è¾¾å¼ï¼Œä½¿å®ƒä»¬æ›¿æ¢ä¸ºå…¶å½“å‰å€¼ä»¥æ±‚å‡ºå­—ç¬¦ä¸²çš„å€¼ã€‚\nä¾‹å¦‚ï¼Œåœ¨å­—ç¬¦ä¸²â€Katy ate a \\ï¼ˆfruitï¼‰.â€ä¸­ï¼Œå¦‚æœfruit æ˜¯å¸¦æœ‰å€¼ â€œpeachâ€çš„å˜é‡ï¼Œé‚£ä¹ˆåœ¨æ±‚å­—ç¬¦ä¸²çš„å€¼æ—¶ï¼Œ\\ï¼ˆfruitï¼‰ç”±â€peachâ€æ›¿æ¢ï¼Œå˜ä¸º â€œKaty ate a peach.â€ã€‚\nå…¶ä»–è‡ªåŠ¨çš„åŠ¨ç”»æ•ˆæœå½“çŠ¶æ€å±æ€§å‘ç”Ÿæ”¹å˜æ—¶, æˆ‘ä»¬å¸Œæœ›å¯¹åº”æ§åˆ¶çš„è§†å›¾å…ƒç´ çš„å˜åŒ–å…·æœ‰åŠ¨ç”»æ•ˆæœ, é‚£ä¹ˆå¯ä»¥æŒ‡å®š: e.g.\nCircle()    .frame(maxHeight: 200)    .foregroundColor( isOn ? .purple : .mint     .shadow(color:isOn ? .indigo : .orange , radius: 20)    .scaleEffect(isOn ? 1: 0.75)    .animation( .default, value: isOn)\n\n\nå…¶ä¸­çš„ valueï¼š isOnè¡¨ç¤ºè¿½è¸ªçš„çŠ¶æ€å±æ€§.\n\nåœ¨ä¸€ä¸ªè§†å›¾ä¸­åˆ›å»ºçŠ¶æ€å¯¹è±¡,  ç„¶ååœ¨ appä¸­å£°æ˜ä¸ºç¯å¢ƒå˜é‡å¹¶åœ¨å­è§†å›¾ä¸­ä½¿ç”¨.\nè®¾è®¡åŸåˆ™principle\n\néœ€è¦é•¿æŒ‰è¿›è¡Œäº¤äº’çš„ç»„ä»¶, åœ¨è½»è§¦æ—¶ICONæ”¾å¤§æˆ–è€…ç¼©å°\n\nå®˜æ–¹æ‰‹å†Œå­¦ä¹ è®°å½•åŸºç¡€çŸ¥è¯†\nSwift ä½¿ç”¨å­—ç¬¦ä¸²æ’å€¼å°†å¸¸é‡æˆ–å˜é‡çš„åç§°ä½œä¸ºå ä½ç¬¦åŒ…å«åœ¨è¾ƒé•¿çš„å­—ç¬¦ä¸²ä¸­ï¼Œå¹¶æç¤º Swift å°†å…¶æ›¿æ¢ä¸ºè¯¥å¸¸é‡æˆ–å˜é‡çš„å½“å‰å€¼ã€‚å°†åç§°åŒ…åœ¨æ‹¬å·ä¸­ï¼Œå¹¶åœ¨å·¦æ‹¬å·å‰ç”¨åæ–œæ è¿›è¡Œè½¬ä¹‰ï¼š\nprint(&quot;The current value of friendlyWelcome is \\(friendlyWelcome)&quot;)// æ‰“å° &quot;The current value of friendlyWelcome is Bonjourï¼&quot;\nä¸å¿…ä½¿ç”¨ ;, ä½†æ˜¯å¦‚æœæƒ³åœ¨ä¸€è¡Œä¸­ç¼–å†™å¤šä¸ªç‹¬ç«‹è¯­å¥ï¼Œåˆ™å¿…é¡»ä½¿ç”¨åˆ†å·ï¼š\nlet cat = &quot;ğŸ±&quot;; print(cat)// æ‰“å° &quot;ğŸ±&quot;\næ•´æ•°è¾¹ç•Œ: ä½¿ç”¨ min, maxè¿›è¡Œè®¿é—®\nlet minValue = UInt8.min  // minValue ç­‰äº 0ï¼Œç±»å‹ä¸º UInt8let maxValue = UInt8.max  // maxValue ç­‰äº 255ï¼Œç±»å‹ä¸º UInt8\nç±»å‹åˆ«å: typealias\ntypealias AudioSample = UInt16var maxAmplitudeFound = AudioSample.min// maxAmplitudeFound ç°åœ¨ä¸º 0\n\nå…ƒç»„\nä½œç”¨: å¤šä¸ªå€¼ç»„åˆæˆä¸€ä¸ªå¤åˆå€¼\n\nlet http404Error = (404, &quot;Not Found&quot;)// http404Error çš„ç±»å‹ä¸ºï¼ˆIntï¼ŒStringï¼‰ï¼Œä¸”ç­‰äºï¼ˆ404ï¼Œ&quot;Not Found&quot;ï¼‰\n\nå¦‚æœåªéœ€è¦å…ƒç»„çš„éƒ¨åˆ†å€¼ï¼Œåˆ™åœ¨åˆ†è§£å…ƒç»„æ—¶ä½¿ç”¨ä¸‹åˆ’çº¿ (_) å¿½ç•¥ä¸éœ€è¦çš„éƒ¨åˆ†\n\nåˆ†è§£å…ƒç»„\nlet (statusCode, statusMessage) = http404Errorprint(&quot;The status code is \\(statusCode)&quot;)// æ‰“å° &quot;The status code is 404&quot;print(&quot;The status message is \\(statusMessage)&quot;)// æ‰“å° &quot;The status message is Not Found&quot;\nå¯ä»¥åœ¨å®šä¹‰å…ƒç»„æ—¶ä¸ºå…ƒç»„ä¸­çš„å„ä¸ªå…ƒç´ å‘½åï¼š\nlet http200Status = (statusCode: 200, description: &quot;OK&quot;)\n\nç„¶åå¯ä»¥ä½¿ç”¨å…ƒç´ åè®¿é—®:\nprint(&quot;The status code is \\(http200Status.statusCode)&quot;)// æ‰“å° &quot;The status code is 200&quot;print(&quot;The status message is \\(http200Status.description)&quot;)// æ‰“å° &quot;The status message is OK&quot;\nä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ä»é›¶å¼€å§‹çš„ç´¢å¼•æ¥è®¿é—®, e.g. http200Status.0\n\n\n\n\n&lt;u&gt;å¯é€‰&lt;/u&gt;: å­˜å‚¨è¿™ç§ç±»å‹çš„å€¼æˆ–è€… nil.\n\næä¾›åå¤‡å€¼: ??\nlet name: String? = nillet greeting = &quot;Hello, &quot; + (name ?? &quot;friend&quot;) + &quot;!&quot;print(greeting)// æ‰“å° &quot;Hello, friend!&quot;\n\n\nå¦‚æœ ?? ä¹‹å‰çš„å€¼ä¸æ˜¯ nil, å°±ä¼šæ­£å¸¸è§£åŒ…, å¦åˆ™é€‰æ‹©åå¤‡å€¼;\nä½¿ç”¨ () åŒ…è£¹.\n\n\n&lt;u&gt;éšå¼è§£åŒ…å¯é€‰&lt;/u&gt;: å®‰å…¨å‡å®šä¸€ç›´éƒ½æœ‰å€¼æ—¶ä½¿ç”¨\nlet possibleString: String? = &quot;An optional string.&quot;let forcedString: String = possibleString! // éœ€è¦æ˜¾å¼è§£åŒ…let assumedString: String! = &quot;An implicitly unwrapped optional string.&quot;let implicitString: String = assumedString // éšå¼è§£åŒ…\n\n\né”™è¯¯å¤„ç†å‡½æ•°åœ¨å£°æ˜ä¸­åŒ…å« throws å…³é”®å­—ï¼Œè¡¨ç¤ºå®ƒå¯ä»¥æŠ›å‡ºé”™è¯¯ã€‚è°ƒç”¨å¯ä»¥æŠ›å‡ºé”™è¯¯çš„å‡½æ•°æ—¶ï¼Œè¦åœ¨è¡¨è¾¾å¼å‰åŠ ä¸Š try å…³é”®å­—.\nSwift ä¼šè‡ªåŠ¨å°†é”™è¯¯ä¼ æ’­åˆ°å½“å‰ä½œç”¨åŸŸä¹‹å¤–ï¼Œç›´åˆ°å®ƒä»¬è¢« catch å­å¥å¤„ç†ä¸ºæ­¢ã€‚\ndo &#123;    try canThrowAnError()    // æ— é”™è¯¯çš„æƒ…å†µ&#125; catch &#123;    // æŠ›å‡ºé”™è¯¯çš„æƒ…å†µ&#125;\n\n\nç»†èŠ‚éƒ¨åˆ†åœ¨åé¢è¡¥å……\n\næ–­è¨€å’Œå…ˆå†³æ¡ä»¶ä½¿ç”¨æ–­è¨€è¿›è¡Œè°ƒè¯•let age = -3assert(age &gt;= 0, &quot;A person&#x27;s age can&#x27;t be less than zero.&quot;)// è¯¥æ–­è¨€å¤±è´¥çš„åŸå› æ˜¯ -3 å¹¶ä¸ &gt;= 0ã€‚\n\næ–­è¨€çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯é¢„æœŸçš„ã€æ­£ç¡®çš„ç»“æœ, å¦‚æœä¸æ»¡è¶³æ¡ä»¶å°±ä¼šæ˜¾ç¤ºæŠ¥é”™. ä½†æ˜¯ä¸ä¼šé˜»æ­¢ç¨‹åºç»§ç»­è¿è¡Œ.\nå¼ºåˆ¶æ‰§è¡Œå…ˆå†³æ¡ä»¶å½“æ¡ä»¶æœ‰å¯èƒ½ä¸ºå‡ï¼Œä½†å¿…é¡»ä¸ºçœŸæ‰èƒ½ç»§ç»­æ‰§è¡Œä»£ç æ—¶ï¼Œè¯·ä½¿ç”¨å…ˆå†³æ¡ä»¶.\nå‘è¯¥å‡½æ•°ä¼ é€’ä¸€ä¸ªè®¡ç®—ç»“æœä¸º true æˆ– false çš„è¡¨è¾¾å¼ï¼Œä»¥åŠä¸€æ¡åœ¨æ¡ä»¶ç»“æœä¸º false æ—¶æ˜¾ç¤ºçš„ä¿¡æ¯:\n// åœ¨ä¸‹æ ‡çš„å®ç°ä¸­...precondition(index &gt; 0, &quot;Index must be greater than zero.&quot;)\n\n\nè¿ç®—ç¬¦åŸºæœ¬è¿ç®—ç¬¦\nä¸ C å’Œ Objective-C ä¸­çš„èµ‹å€¼è¿ç®—ç¬¦ä¸åŒï¼ŒSwift ä¸­çš„èµ‹å€¼è¿ç®—ç¬¦æœ¬èº«ä¸è¿”å›å€¼ã€‚ä»¥ä¸‹è¯­å¥æ— æ•ˆï¼š\nif x = y &#123; // è¿™æ˜¯æ— æ•ˆçš„ï¼Œå› ä¸º x = y ä¸è¿”å›å€¼ã€‚&#125;\n\n\nå¯ä»¥é˜²æ­¢ä¸å°å¿ƒä½¿ç”¨èµ‹å€¼è¿ç®—ç¬¦ï¼ˆ&#x3D;ï¼‰ è€Œéç­‰äºè¿ç®—ç¬¦ï¼ˆ&#x3D;&#x3D;ï¼‰.\n\n\nåŸºæœ¬çš„å››åˆ™è¿ç®—ä¸å…è®¸å€¼çš„æº¢å‡º.\n\n\n\n[!NOTE]\nåœ¨ Swift ä¸­å¯¹è´Ÿæ•°çš„å¤„ç†ä¸æ¨¡è¿ç®—ç¬¦æœ‰æ‰€ä¸åŒ:\nä¸ºäº†ç¡®å®š a % b çš„ç­”æ¡ˆï¼Œ% è¿ç®—ç¬¦è®¡ç®—ä»¥ä¸‹ç­‰å¼å¹¶è¿”å› ä½™æ•° ä½œä¸ºè¾“å‡ºï¼š\na` = (`b` x `æŸä¸ªä¹˜æ•°`) + `ä½™æ•°\n\nå…¶ä¸­ æŸä¸ªä¹˜æ•° æ˜¯ b åœ¨ a ä¸­èƒ½å®¹çº³çš„æœ€å¤§å€æ•°ã€‚\n9 % 4    // ç­‰äº 1-9 % 4   // ç­‰äº -1\n\næ•°å€¼çš„æ­£è´Ÿå·å¯ä»¥ä½¿ç”¨å‰ç¼€ - åˆ‡æ¢ï¼Œç§°ä¸º&lt;u&gt;ä¸€å…ƒè´Ÿå·è¿ç®—ç¬¦&lt;/u&gt;.\n\nä¸­é—´æ²¡æœ‰ä»»ä½•ç©ºæ ¼.\nlet three = 3let minusThree = -three       // minusThree ç­‰äº -3\n\n\n\nå…ƒç»„çš„è®¡ç®—\nå‰æ: å¦‚æœä¸¤ä¸ªå…ƒç»„å…·æœ‰ç›¸åŒçš„ç±»å‹å’Œç›¸åŒæ•°é‡çš„å€¼ï¼Œåˆ™å¯ä»¥æ¯”è¾ƒå®ƒä»¬.\nè§„åˆ™:\nå…ƒç»„æ˜¯ä»å·¦åˆ°å³é€ä¸ªå€¼è¿›è¡Œæ¯”è¾ƒçš„ï¼Œç›´åˆ°æ¯”è¾ƒå‘ç°ä¸¤ä¸ªä¸ç›¸ç­‰çš„å€¼ä¸ºæ­¢ã€‚\nè¿™ä¸¤ä¸ªå€¼å°†è¿›è¡Œæ¯”è¾ƒï¼Œå¹¶ä¸”è¯¥æ¯”è¾ƒçš„ç»“æœå†³å®šäº†æ•´ä¸ªå…ƒç»„æ¯”è¾ƒçš„ç»“æœã€‚\nå¦‚æœæ‰€æœ‰å…ƒç´ éƒ½ç›¸ç­‰ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå…ƒç»„æœ¬èº«å°±ç›¸ç­‰ã€‚\n\n\n\n\n[!NOTE]\nåªæœ‰å½“ç»™å®šçš„è¿ç®—ç¬¦å¯ä»¥åº”ç”¨äºå„è‡ªå…ƒç»„ä¸­çš„æ¯ä¸ªå€¼æ—¶ï¼Œå…ƒç»„æ‰èƒ½ä¸è¯¥è¿ç®—ç¬¦è¿›è¡Œæ¯”è¾ƒ.\n\n(&quot;blue&quot;, false) &lt; (&quot;purple&quot;, true)  // é”™è¯¯ï¼Œå› ä¸º &lt; ä¸èƒ½æ¯”è¾ƒå¸ƒå°”å€¼\n\nç©ºåˆå¹¶è¿ç®—ç¬¦a ?? bçš„ç»“æœä¸ä¸‹é¢çš„è¿ç®—ç›¸åŒ:\na != nil ? a! : b\n\nåŒºé—´è¿ç®—\né—­åŒºé—´è¿ç®—ç¬¦ï¼ˆa...bï¼‰å®šä¹‰äº†ä¸€ä¸ªä» a åˆ° b çš„èŒƒå›´ï¼ŒåŒ…æ‹¬ a å’Œ b çš„å€¼ã€‚a çš„å€¼ä¸èƒ½å¤§äº b;\n\nåœ¨éœ€è¦ä½¿ç”¨æ‰€æœ‰å€¼çš„æƒ…å†µä¸‹å¾ˆæœ‰ç”¨\n\ne.g.\nfor index in 1...5 &#123;    print(&quot;\\(index) ä¹˜ä»¥ 5 ç­‰äº \\(index * 5)&quot;) &#125;\n\n\nåŠå¼€åŒºé—´è¿ç®—ç¬¦ï¼ˆa..&lt;bï¼‰å®šä¹‰äº†ä¸€ä¸ªä» a åˆ° b ä½†ä¸åŒ…æ‹¬ b çš„èŒƒå›´.\n\nå¯¹äºå¤„ç†ä»åŸºæ•° 0 å¼€å§‹çš„åˆ—è¡¨ï¼ˆå¦‚æ•°ç»„ï¼‰æ—¶ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºå®ƒå¯ä»¥è®¡æ•°åˆ°åˆ—è¡¨é•¿åº¦ï¼ˆä½†ä¸åŒ…æ‹¬åˆ—è¡¨é•¿åº¦ï¼‰.\n\ne.g.\nlet names = [&quot;Anna&quot;, &quot;Alex&quot;, &quot;Brian&quot;, &quot;Jack&quot;] let count = names.countfor i in 0..&lt;count &#123;    print(&quot;ç¬¬ \\(i + 1) ä¸ªäººå« \\(names[i])&quot;)&#125;\n\n\né—­åŒºé—´è¿ç®—ç¬¦æœ‰ä¸€ç§æ›¿ä»£å½¢å¼ï¼Œç”¨äºä¸€ç›´å»¶ä¼¸åˆ°å°½å¯èƒ½è¿œçš„åŒºé—´ â€”â€” ä¾‹å¦‚ï¼Œä¸€ä¸ªåŒ…å«ä»ç´¢å¼• 2 åˆ°æ•°ç»„æœ«å°¾æ‰€æœ‰å…ƒç´ çš„åŒºé—´ã€‚\nfor name in names[2...] &#123; print(name) &#125;// Brian// Jack\nåŠå¼€åŒºé—´è¿ç®—ç¬¦ä¹Ÿæœ‰ä¸€ç§åªå†™æœ€åä¸€ä¸ªå€¼çš„å•ä¾§å½¢å¼\nfor name in names[..&lt;2] &#123; print(name) &#125;// Anna// Alex\n\né€»è¾‘è¿ç®—\n[!NOTE]\nSwift é€»è¾‘è¿ç®—ç¬¦ &amp;&amp; å’Œ || éµå¾ª&lt;u&gt;ä»å·¦åˆ°å³&lt;/u&gt;çš„ç»“åˆé¡ºåºï¼Œè¿™æ„å‘³ç€å¸¦æœ‰å¤šä¸ªé€»è¾‘è¿ç®—ç¬¦çš„å¤åˆè¡¨è¾¾å¼ä¼šé¦–å…ˆè¯„ä¼°æœ€å·¦è¾¹çš„å­è¡¨è¾¾å¼.\n\næ§åˆ¶æµåè®®\nå¦‚æœç±»éœ€è¦ç»§æ‰¿, éœ€è¦å°†çˆ¶ç±»å†™åœ¨æ‰€æœ‰çš„åè®®ä¹‹å‰\nä¸èƒ½åœ¨åè®®å®šä¹‰ä¸­ä¸ºæ–¹æ³•å‚æ•°æŒ‡å®šé»˜è®¤å€¼ã€‚\nåè®®ä¹Ÿå¯ä»¥è¦æ±‚éµå¾ªåè®®çš„ç±»å‹ &lt;u&gt;å®ç°æŒ‡å®šçš„æ„é€ å™¨&lt;/u&gt;, å’Œåè®®å†…éƒ¨çš„æ–¹æ³•ä¸€æ ·, ä¸éœ€è¦å†™èŠ±æ‹¬å·å’Œæ„é€ æœŸçš„å®ä½“\nå¦‚æœæ˜¯ç±», å¿…é¡»åœ¨æ„é€ å‡½æ•°çš„å¼€å¤´åŠ ä¸Š requiredä¿®é¥°ç¬¦. è¿™æ˜¯ä¸ºäº†ç¡®ä¿æ‰€æœ‰ç»§æ‰¿çš„å­ç±»ä¹Ÿæä¾›è¿™ä¸ªæ„é€ å‡½æ•°çš„å®ç°, ä»è€Œç¡®ä¿éµå®ˆåè®®;\nä½†æ˜¯å¦‚æœä¸€ä¸ªç±»è¢«å£°æ˜ä¸ºäº† final, ä¹Ÿå°±æ˜¯æ— æ³•è¢«ç»§æ‰¿, é‚£ä¹ˆå°±ä¸éœ€è¦ requiredçš„å£°æ˜\n\n\n\nåè®®çš„åŸºæœ¬ç”¨æ³•åè®®å¯ä»¥è§„å®šå±æ€§ç±»å‹ä»¥åŠå±æ€§è¢«æ“ä½œçš„æƒé™, é€šå¸¸å’Œç±»ã€ç»“æ„ä½“å’Œæšä¸¾è¿›è¡Œç»‘å®š, ä½œä¸ºä¸€ç§å¼ºåˆ¶çš„çº¦æŸ.\nprotocol Tax&#123;  var national: Double &#123; get &#125;   var individual: Double&#123; set get&#125;&#125;\n\nåŒæ ·å¯ä»¥åœ¨åè®®ä¸­ä½¿ç”¨ mutating æ¥å£°æ˜ä¸€ä¸ªæ”¹å˜è‡ªèº«å±æ€§çš„æ–¹æ³•:\nprotocol Tax&#123;  var national: Double &#123; get &#125;   var individual: Double&#123; set get&#125;    mutating func changeTax(newValue: Double)&#125;\n\n\néœ€è¦æ³¨æ„çš„æ˜¯, ç»“æ„ä½“å†…éƒ¨çš„æ–¹æ³•å¦‚æœè¦ä¿®æ”¹è‡ªèº«å±æ€§, ä¹Ÿéœ€è¦å£°æ˜ mutating, ä½†æ˜¯ç±»åˆ™ä¸éœ€è¦é¢å¤–çš„å£°æ˜.\nstruct Taxas: Tax&#123;   var national: Double  var individual: Double  mutating func changeTax(newValue: Double)&#123;    national = newValue  &#125;&#125;\n\nè¡¥å……åè®®\nä½¿ç”¨ , è¿æ¥ä¸åŒçš„åè®®\n\nextensionå¯ä»¥ä¸ºåè®®çš„å‡½æ•°è®¾ç½®é»˜è®¤æ–¹æ³•, å°±ä¸éœ€è¦ç»§ç»­åœ¨æ¯ä¸€ä¸ªç±»ã€ç»“æ„ä½“æˆ–æšä¸¾ä¸­é‡æ–°å®šä¹‰\n\nåŒæ ·å¯ä»¥è¡¥å……æ•°æ®ç±»å‹\nextension Int &#123;  var abs: Int &#123;    get &#123;      if self &gt;= 0 &#123;        return self      &#125;else&#123;        return -self      &#125;    &#125;  &#125;&#125;print((-3).abs);// 3\n\n\n\næœ‰æ¡ä»¶åœ°éµå¾ªåè®®è®© Array ç±»å‹åªè¦åœ¨å­˜å‚¨éµå¾ª TextRepresentable åè®®çš„å…ƒç´ æ—¶ï¼Œå°±éµå¾ª TextRepresentable åè®®:\nextension Array: TextRepresentable where Element: TextRepresentable &#123;    var textualDescription: String &#123;        let itemsAsText = self.map &#123; $0.textualDescription &#125;        return &quot;[&quot; + itemsAsText.joined(separator: &quot;, &quot;) + &quot;]&quot;    &#125;&#125;let myDice = [d6, d12]print(myDice.textualDescription)// æ‰“å° &quot;[A 6-sided dice, A 12-sided dice]&quot;\n\næ‰©å±•é‡Œå£°æ˜åè®®éµå¾ªå½“ä¸€ä¸ªç±»å‹å·²ç»éµå¾ªäº†æŸä¸ªåè®®ä¸­çš„æ‰€æœ‰è¦æ±‚ï¼Œå´è¿˜æ²¡æœ‰å£°æ˜éµå¾ªè¯¥åè®®æ—¶ï¼Œå¯ä»¥é€šè¿‡ç©ºçš„æ‰©å±•æ¥è®©å®ƒéµå¾ªè¯¥åè®®:\nstruct Hamster &#123;    var name: String    var textualDescription: String &#123;        return &quot;A hamster named \\(name)&quot;    &#125;&#125;extension Hamster: TextRepresentable &#123;&#125;\n\nError handlingç³»ç»Ÿæä¾›äº† Erroråè®®ç”¨äºé”™è¯¯å¤„ç†, ä¸»åŠ¨ç»™äºˆé”™è¯¯çš„æ•æ‰æƒ…å†µ.\nä½¿ç”¨æ–¹æ³•:\n\nå®šä¹‰éµå¾ªç›¸å…³åè®®çš„æšä¸¾ç±»å‹, ä½œä¸ºé”™è¯¯çš„ç±»å‹;\nå®šä¹‰å¯èƒ½æŠ›å‡ºé”™è¯¯çš„å‡½æ•°;\nä½¿ç”¨ do...catchå—æ¥ç»“æ„åŒ–åœ°å¤„ç†é”™è¯¯.\n\ne.g.\n// å®šä¹‰ä¸€ä¸ªé”™è¯¯ç±»å‹ï¼Œéµå¾ª Error åè®®enum PasswordError: Error &#123;    case tooShort    case tooWeak&#125;// ä¸€ä¸ªå‡½æ•°ï¼Œå¯èƒ½æŠ›å‡ºé”™è¯¯func validate(password: String) throws &#123;    if password.count &lt; 6 &#123;        throw PasswordError.tooShort    &#125;    if password == &quot;123456&quot; &#123;        throw PasswordError.tooWeak    &#125;&#125;// ä½¿ç”¨ do-catch æ•æ‰é”™è¯¯do &#123;    try validate(password: &quot;123456&quot;)    print(&quot;å¯†ç éªŒè¯é€šè¿‡ âœ…&quot;)&#125; catch PasswordError.tooShort &#123;    print(&quot;âŒ å¯†ç å¤ªçŸ­ï¼Œè¯·è‡³å°‘ä½¿ç”¨ 6 ä¸ªå­—ç¬¦&quot;)&#125; catch PasswordError.tooWeak &#123;    print(&quot;âŒ å¯†ç å¤ªå¼±ï¼Œä¸èƒ½ä½¿ç”¨ç®€å•çš„åºåˆ—&quot;)&#125; catch &#123;    print(&quot;âŒ å‘ç”ŸæœªçŸ¥é”™è¯¯ï¼š\\(error)&quot;)&#125;\n\n\n\nthrowsï¼šåœ¨å‡½æ•°å£°æ˜ä¸­æ ‡æ³¨è¯¥å‡½æ•°ä¼šæŠ›å‡ºé”™è¯¯;\ntryï¼šåœ¨è°ƒç”¨å¯èƒ½æŠ›å‡ºé”™è¯¯çš„å‡½æ•°æ—¶ä½¿ç”¨.\n\n\nå…¶ä»–çš„åè®®CaseIterableç”¨äºè·å–æšä¸¾çš„å±æ€§ä¸ªæ•°, ä»è€Œè¿›è¡Œéå†.\nenum Status:CaseIterable&#123;    case low,middle,high        mutating func change()&#123;        switch self&#123;        case .high:            self = .low        case .low:            self = .middle        case .middle:            self = .high        &#125;    &#125;      func ptr()&#123;        print(&quot;Current Status is \\(self)&quot;)    &#125;&#125;var status = Status.lowfor _ in 0..&lt;Status.allCases.count&#123;    status.ptr()    status.change()&#125;\n\n\nfor _ in 0..&lt; å½“ä¸­çš„ _è¡¨ç¤ºå¿½ç•¥éå†æ—¶å€™çš„å¾ªç¯å˜é‡çš„å€¼.\n\né—­åŒ…é—­åŒ…çš„ç®€åŒ–æ¨å¯¼ç›¸å½“äºåŒ¿åå‡½æ•°ä¸ lambda.  æ¥ä¸‹æ¥ä»æ™®é€šå‡½æ•°çš„å†™æ³•å¼€å§‹ç®€åŒ–:\n\næ™®é€šå‡½æ•°:\nfunc changeSign(op: Double) -&gt; Double &#123;    return -op&#125;var operation: (Double) -&gt; Doubleoperation = changeSignlet result = operation(4.0) // result = -4.0\nå°†å‡½æ•°çš„å®šä¹‰ä¸‹ç§»:\nvar operation: (Double) -&gt; Doubleoperation = (op:Double) -&gt; Double &#123; return -op&#125;let result  = operation(4.0)\nå°† ï½› æå‰ï¼Œå¹¶åœ¨åŸæ¥çš„ä½ç½®æ·»åŠ  in\nvar operation:(Double) -&gt; Doubleoperation = &#123;(op: Double) -&gt; Double  in return -op&#125;...\nç³»ç»Ÿå¯ä»¥æ¨æ–­ç±»å‹, æ‰€ä»¥æ ¹æ®è¾“å…¥çš„ç±»å‹ç®€åŒ–è¿”å›å€¼çš„ç±»å‹å®šä¹‰\nvar operation:(Double) -&gt; Doubleoperation = &#123;(op: Double)   in return -op&#125;...\nå¯ä»¥è¿›ä¸€æ­¥çœç•¥ä¼ å…¥çš„ç±»å‹\nvar operation:(Double) -&gt; Doubleoperation = &#123; (op) in return -op&#125;...\nçœç•¥è¿”å›çš„æ ‡è®° return:\nvar operation:(Double) -&gt; Doubleoperation = &#123; (op) in  -op&#125;...\n\næœ€å, æˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨ $0ç­‰æ›¿ä»£ä¼ å…¥çš„å‚æ•°, ä¹Ÿå°±æ˜¯çœç•¥äº†å‚æ•°çš„åç§°!\nvar operation:(Double) -&gt; Doubleoperation = &#123; -$0 &#125;...\n\né—­åŒ…çš„å¸¸è§ä½¿ç”¨e.g.\n\nTrailing Closureå½“é—­åŒ…æ˜¯å‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°æ—¶ï¼Œ\nlet result = applyTwice(3, operation: &#123; $0 * 2 &#125;)\n\nå¯ä»¥æ”¹å†™æˆ:\nlet result = applyTwice(3) &#123; $0 * 2 &#125; // result = 12\n\næ…•è¯¾å­¦ä¹ æ‚è®°something\nå»å®˜ç½‘å­¦ä¹ æ–°å‡ºç°çš„æŠ€æœ¯\n\ncodeML\n\n\nå‡½æ•°ä¹Ÿå¯ä»¥èµ‹å€¼ç»™å˜é‡\n\n\nçœç•¥å¤–éƒ¨å‚æ•°å\nå¤–éƒ¨å‚æ•°å: åœ¨å‡½æ•°è°ƒç”¨çš„æ—¶å€™ä½¿ç”¨, æé«˜å¯è¯»æ€§;\nå†…éƒ¨å‚æ•°å: åœ¨å‡½æ•°ä½“çš„å†…éƒ¨ä½¿ç”¨\n\nå¦‚æœå¦‚æ­¤å®šä¹‰:\nfunc greet(person name: String)&#123;  print(&quot;Hello , \\(name)&quot;)&#125;\n\né‚£ä¹ˆåœ¨è°ƒç”¨çš„æ—¶å€™å¿…é¡»æ˜¾ç¤ºå£°æ˜å¤–éƒ¨å‚æ•°å:\ngreet( person: &quot;Alice&quot;)\n\nå¦‚æœæˆ‘ä»¬å¸Œæœ›çœç•¥å¤–éƒ¨å‚æ•°å, å°±å¯ä»¥åœ¨å®šä¹‰å‡½æ•°çš„æ—¶å€™ç”¨ _æ¥ä»£æ›¿:\nfunc greet(_ name: String)&#123;  ...&#125;\n\né«˜é˜¶å‡½æ•°æˆ‘ä»¬å¯ä»¥è®©å‡½æ•°ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„è¾“å…¥å‚æ•°:\nfunc addTwoInts( _ a: Int, _ b: Int) -&gt; Int&#123;  return a+b&#125;var mathFunction = addTwoInts// é«˜é˜¶å‡½æ•°func printMathResultsï¼ˆ_ mathFunction: (Int, Intï¼‰-&gt; Int, _ a: Int, _ b: Int)&#123;  var result = mathFunction(a,b)  print(result)&#125;// è°ƒç”¨printMathResultsï¼ˆaddTwoIntsï¼Œ 3,5ï¼‰\n\n\næ³¨æ„å‡½æ•°ä½œä¸ºå‚æ•°çš„æ—¶å€™, ç±»å‹çš„å®šä¹‰å°±æ˜¯è¾“å…¥ç±»å‹å’Œè¿”å›ç±»å‹, ä¹Ÿæ˜¯ç”¨ , æ¥åˆ†éš”ä¸åŒçš„å‚æ•°.\n\n\nå†…ç½®çš„åº“AVFoudation: éŸ³é¢‘æ’­æ”¾\n\n\næšä¸¾å†…éƒ¨ä¹Ÿå¯ä»¥è®¾ç½®æ–¹æ³•;\n\nç»“æ„ä½“æœ¬èº«ä¸éœ€è¦æ„é€ å‡½æ•°(å› ä¸ºswiftå­˜åœ¨å¯¹äºç»“æ„ä½“çš„é»˜è®¤æ„é€ ) , ä½†æ˜¯å¦‚æœç»“æ„ä½“å†…éƒ¨çš„å±æ€§å­˜åœ¨è¿™æ ·çš„å±æ€§:\n\nå®ƒå¯èƒ½æ˜¯æšä¸¾å†…éƒ¨çš„æ–¹æ³•, è·Ÿæšä¸¾çš„å±æ€§æœ‰å…³, å¯èƒ½ä½¿ç”¨äº† switchæ¥æ ¹æ®æšä¸¾å±æ€§èµ‹å€¼.\n\nenum Type&#123;  case Cike  case ...  func blood()-&gt; Double&#123;    switch self&#123;      case .Cike: return 10      case .Fashi: return ...      ...    &#125;  &#125;&#125;struct Card &#123;  var country: Country  vat type: Type  var blood: Double  init (country: Country, type: Type)&#123;    self.country = country    self.type = type;    blood = type.blood  &#125;&#125;\nç»“æ„ä½“å’Œæšä¸¾å±äº &lt;u&gt;å€¼ç±»å‹&lt;/u&gt;, å¦‚æœèµ‹å€¼çš„æ—¶å€™è¿›è¡Œæ‹·è´æ“ä½œ;\n\nå¦‚æœç»“æ„ä½“å£°æ˜ä¸º let, å³ä½¿å±æ€§æ˜¯å˜é‡, é‚£ä¹ˆä¹Ÿæ— æ³•ä¿®æ”¹å†…éƒ¨çš„å±æ€§,\n\n\nç±»æ˜¯å¼•ç”¨ç±»å‹, èµ‹å€¼çš„æ—¶å€™ä½¿å¾—å·¦å€¼æŒ‡å‘äº†åŒæ ·çš„å†…å­˜åŒºåŸŸ, ä¹Ÿå°±æ˜¯ä¿¡æ¯ä¿æŒä¸€è‡´, æ›´æ”¹åŒæ­¥\n\nå¦‚æœæˆ‘ä»¬å°†ç±»å£°æ˜ä¸ºå¸¸é‡, ç›¸å½“äºcppçš„æŒ‡é’ˆå¸¸é‡, ä¹Ÿå°±æ˜¯è¯´ç±»å†…éƒ¨çš„å±æ€§å¯ä»¥æ›´æ”¹, ä½†æ˜¯æ— æ³•ä¿®æ”¹è¿™ä¸ªé‡æŒ‡å‘çš„å†…å­˜åŒºåŸŸ.\n\n\n\nè®¡ç®—å±æ€§è®¿é—®çš„æ—¶å€™åŠ¨æ€è®¡ç®—å¾—åˆ°.\nä¸‹é¢é€šè¿‡ä¸€ä¸ªçŸ©å½¢çš„ä¾‹å­æ¥è¯´æ˜:\nstruct Point &#123;  var x = 0.0  var y = 0.0&#125;struct Size&#123;  var width = 0.0  var height = 0.0&#125;struct Rect&#123;  var origin = Point()  var size = Size()  var center: Point&#123;    get&#123;      let centerX = origin.x + (size.width / 2)      let centerY = orgin.y + (size.height /2 )      return Point(x: centerX, y: centerY)    &#125;    set(newCenter)&#123;      origin.x = newCenter.x - (size.width / 2)      origin.y = newCenter.y - (size.height / 2)    &#125;  &#125;&#125;\n\nä¸Šè¿°å®Œæˆäº†ç»“æ„ä½“çš„è®¡ç®—å±æ€§çš„å®šä¹‰, å…¶ä¸­ getéƒ¨åˆ†ä¹Ÿå¯ä»¥ä¼˜åŒ–ä¸º:\nget&#123;\tPoint(x: origin.x + (size.width / 2),        y: orgin.y + (size.height /2 ) )&#125;\n\n\nè¿™æ˜¯å› ä¸º, å¦‚æœ get éƒ¨åˆ†åªå­˜åœ¨ä¸€ä¸ªè¡¨è¾¾å¼,  å°±ä¼šè‡ªåŠ¨å°†å…¶è¿”å›, ä¸éœ€è¦æ˜¾å¼å£°æ˜ returnå…³é”®å­—.\n\nç„¶åå¯ä»¥å¦‚æ­¤åº”ç”¨:\nvar currCenter = rectElement.centerrectElement.center = Point(x:20, y:50)\n\nsetæä¾›äº†è¯­æ³•ç³–, ä¹Ÿå°±æ˜¯å¯ä»¥ç›´æ¥è®¿é—®oldValue å’Œ  newValue, å› æ­¤æˆ‘ä»¬å¯ä»¥å¦‚æ­¤æ”¹å†™:\nset&#123;  origin.x = newValue.x - (size.width / 2)  origin.y = newValue.y - (size.height / 2)&#125;\n\n\n[!NOTE]\nå¯¹äºåªè¯»çš„è®¡ç®—å±æ€§, ç”±äºä¸å­˜åœ¨ set, æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨èŠ±æ‹¬å·å†…å®šä¹‰è¿”å›å†…å®¹.\n\n\n\nå£°æ˜ static , è¡¨ç¤ºè¿™ä¸ªå±æ€§æˆ–è€…æ–¹æ³•å±äºæ•´ä¸ªç±»å‹è€ŒéæŸä¸ªå®ä¾‹. æ­¤æ—¶ç›¸åº”çš„, æˆ‘ä»¬ä½¿ç”¨ &lt;tyepName&gt;.&lt;strtic attribute&gt;çš„æ–¹å¼æ¥è®¿é—®.\nå­é¢é‡æœ¬èº«æ˜¯ä¸å¯ä¿®æ”¹çš„, ä¸‹é¢çš„æ‹“å±•ä¸­, å¦‚æœå†™ä½œ  var someInt = 3.square()å°±ä¼šæŠ¥é”™\n\nextension Int&#123;    mutating func square()&#123;        self = self * self    &#125;&#125;var someInt = 3someInt.square()\n\n\næ§åˆ¶å™¨å­˜åœ¨5ç§çŠ¶æ€:\n\næœªåŠ è½½\nå°†è¦å‡ºç°\nå‡ºç°\nå°†è¦æ¶ˆå¤±\nå·²ç»æ¶ˆå¤±\n\nAPPçš„çŠ¶æ€:\n\n\nUiSceneDelegateç”¨äºå“åº”åŸºäº scene çš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶.\nå¯ä»¥ä½¿ç”¨å±æ€§çš„ didsetæ¥ä¾¿æ·åœ°æ£€æµ‹å˜åŒ–å¹¶å¿«é€Ÿä¿®æ”¹:\nvar score = 0&#123;  didSet&#123;    self.gameScoreLabel.text = &quot;Score: \\(score)&quot;  &#125;&#125;\n\n\nviewControlleræ˜¯æ–°çš„é¡µé¢;\nviewæ˜¯è§†å›¾, å¯ä»¥å åŠ åœ¨é¡µé¢ä¸Š.\nUIAlertControllerç»„ä»¶ç›¸å½“äºè­¦ç¤ºçš„å¼¹çª—ç»„ä»¶\n\nä½œå›¾å’Œç»˜ç”»CG\nCGFloatç”¨äºäºŒç»´åæ ‡ç³»ä¸­çš„åæ ‡æ•°æ®:\n\nlet coor_x = CGFloat(10.5)\n\n\nCGPoint(x: .. , y:...)\n\nCGSize åŒ…å«widthå’Œheightå±æ€§çš„ç»“æ„ä½“;\n\nCGRectåŒ…å«ç‚¹å’Œå°ºå¯¸çš„çŸ©å½¢\nstruct CGRect&#123;  var origin: CGPoint  var size: CGSize&#125;\n\n\nå…¶ä»–å±æ€§\n\ne.g.\nvar minX: CGPointvar midY: CGPointintersects(CGRect) -&gt; Bool // åˆ¤æ–­æ˜¯å¦å­˜åœ¨äº¤é›†contains(CGPoint) -&gt; Bool // æ˜¯å¦åŒ…å«ç‚¹.\n\n\n\næœ€å°å•å…ƒæ˜¯ Pointè€Œéåƒç´ ç‚¹.\nboundè¡¨ç¤ºè§†å›¾å†…éƒ¨å…è®¸ç»˜åˆ¶çš„åŒºåŸŸ:\nvar bounds: CGRect // ä¹Ÿå°±æ˜¯ä¸€ä¸ªçŸ©å½¢\n\nframe\tè§†å›¾åœ¨çˆ¶è§†å›¾ä¸­çš„ä½ç½®:\nvar frame: CGRect\n\nè‡ªå®šä¹‰è§†å›¾ç»˜åˆ¶è‡ªå®šä¹‰è§†å›¾é€šå¸¸é€šè¿‡åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ UIView å­ç±»ï¼Œå¹¶é‡å†™ draw(_:) æ–¹æ³•æ¥å®ç°.\nplayGroundä¸­çš„å®ä¾‹:\nimport UIKitimport PlaygroundSupportclass CustomView: UIView &#123;    override init(frame: CGRect) &#123;        super.init(frame: frame)        self.backgroundColor = .white // è®¾ç½®èƒŒæ™¯é¢œè‰²    &#125;    required init?(coder: NSCoder) &#123;        fatalError(&quot;init(coder:) has not been implemented&quot;)    &#125;    override func draw(_ rect: CGRect) &#123;        guard let context = UIGraphicsGetCurrentContext() else &#123; return &#125;        // ç»˜åˆ¶ä¸€ä¸ªåœ†å½¢        context.setFillColor(UIColor.blue.cgColor) // è®¾ç½®å¡«å……é¢œè‰²        context.fillEllipse(in: rect) // ç»˜åˆ¶å¡«å……çš„åœ†        // ç»˜åˆ¶ä¸€ä¸ªçŸ©å½¢        context.setStrokeColor(UIColor.black.withAlphaComponent(0.6).cgColor) // è®¾ç½®èƒ½è§åº¦        context.setLineWidth(5)        context.stroke(rect.insetBy(dx: 10, dy: 10)) // ç»˜åˆ¶çŸ©å½¢è¾¹æ¡†ï¼Œç•™å‡ºé—´è·    &#125;&#125;// åˆ›å»ºè‡ªå®šä¹‰è§†å›¾å®ä¾‹let customView = CustomView(frame: CGRect(x: 0, y: 0, width: 200, height: 200))// æ˜¾ç¤ºåœ¨ Playground çš„ live viewPlaygroundPage.current.liveView = customView\n\n\ntouchesBeganâ€“WWDC\nSCNVector3æ˜¯ä¸‰ç»´å‘é‡\nDispathchQueueè¡¨ç¤ºåˆ›å»ºä¸€ä¸ªå¼‚æ­¥çš„è¿›ç¨‹\n\nä¼ æ„Ÿå™¨\nåŠ é€Ÿåº¦çš„æ–¹å‘ä¼´éšæ‰‹æœºçš„å¤´éƒ¨æ—‹è½¬ä¿æŒä¸å˜;\nä»¥ g ä¸ºæè¿°å•ä½;\né¢å‘ä½¿ç”¨è€…çš„æ–¹å‘æ˜¯ z è½´.\n\n\né™€èºä»ª\nè®°å½•å¯¹åº”ç”¨ä¸‰ä¸ªè½´\nroll, pitch, yaw\n\n\n\nåŠ¨ç”»ç»“ç»³è®°äº‹\næ“ä½œæ¼”ç¤º.\n\næŒ‰ä½ ctrlå°†è§†å›¾ä¸­çš„ç»„ä»¶æ‹–æ”¾åˆ°ä»£ç ä¸­.\n\nå³ä¸‹è§’çš„å‡ ä¸ªåŠŸèƒ½:\n\nçº¦æŸ;\né€‰æ‹©è§†å›¾\n\n\nctrl + option + cmd + enter å¿«é€Ÿæ˜¾ç¤ºä»£ç åŒºåŸŸ\n\nç»„ä»¶ä½¿ç”¨\n\n50:00 å·¦å³ä»‹ç»äº†ä¸¤ç§ç±»å‹å’Œäº¤äº’\n\n\næŒ‰ä½ optionalç„¶å hover åœ¨ç±»ä¸Š, å¯ä»¥æ˜¾ç¤ºå¯¹åº”çš„åŸºç¡€æ“ä½œ.\n\nå¯é€‰å€¼çš„æœ¬è´¨æ˜¯æšä¸¾ç±»å‹!\nenum Optional&lt;T&gt;&#123;  case none  case some(&lt;T&gt;)&#125;\nç”»å›¾å’ŒåŠ¨ç”»\n\ncoreML\n\nåœ¨é¡¹ç›®ä¸­æ˜¾ç¤ºMdæ ¼å¼:\n/*:...*/\né€‰æ‹©åœ¨è¿è¡Œæ—¶éšè—å®é™…å­˜åœ¨çš„ä»£ç :\n//#-hidden-codeimport PlaygroundSupport...//#-end-hidden-code\n\nSwift UI\næ…•è¯¾çš„é“¾æ¥\nby now\nSixD: å¼€ç®±å³ç”¨çš„UIè®¾è®¡ç­‰.\næœ¯è¯­è¡¨\n\nAR\nhelpful links\nå®˜æ–¹æ–‡æ¡£\n\nåŠ¨ç”»ç¼©æ”¾å˜æ¢NavigationLink&#123;  BraceletEditor(bracelet)  .navigationTransitionStyle(  .zoom(  \tsourceID:bracelet.id,  \tin:braceletList  \t)  )&#125;label:&#123;  BraceletPreview(bracelet)&#125;.matchedTansitionSource(\tid:bracelet.id,  in:braceletList)\n\nSymbol 6åŠ¨ç”»\nä½¿ç”¨ æ™ƒåŠ¨ åœ¨å¤æ‚çš„UIä¸­æç¤ºå¯äº¤äº’æ€§.\næ—‹è½¬åŠ¨ç”»æ¥è¡¨ç¤ºæ­£åœ¨è¿›è¡Œçš„è¿›ç¨‹\n\nåŸºæœ¬è¯­æ³•ç£¨ç ‚æ•ˆæœVStack &#123;&#125;.frame(width: 200, height: 200).background(.ultraThinMaterial, in: RoundedRectangle(cornerRadius: 20, style: .continuous))\n\næœç´¢æ \nçŠ¶æ€ç®¡ç†:\n// å­˜å‚¨æœç´¢æ–‡æœ¬@State private var searchText = &quot;&quot;// å¯é€‰ï¼šè·Ÿè¸ªæœç´¢æ˜¯å¦å¤„äºæ´»åŠ¨çŠ¶æ€@State private var isSearching = false\næ•°æ®è¿‡æ»¤æ¨¡å¼\n// åŸºæœ¬è¿‡æ»¤è®¡ç®—å±æ€§æ¨¡æ¿var filteredItems: [ItemType] &#123;    if searchText.isEmpty &#123;        return originalItems    &#125; else &#123;        return originalItems.filter &#123; item in            // æ ¹æ®éœ€è¦è‡ªå®šä¹‰è¿‡æ»¤æ¡ä»¶            item.name.localizedCaseInsensitiveContains(searchText) ||            item.description.localizedCaseInsensitiveContains(searchText)        &#125;    &#125;&#125;// å¤„ç†åµŒå¥—æ•°æ®ç»“æ„çš„è¿‡æ»¤æ¨¡æ¿var filteredNestedItems: [ParentType] &#123;    if searchText.isEmpty &#123;        return originalParentItems    &#125; else &#123;        return originalParentItems.compactMap &#123; parent in            let matchedChildren = parent.children.filter &#123; child in                child.name.localizedCaseInsensitiveContains(searchText)            &#125;            if matchedChildren.isEmpty &#123;                return nil            &#125; else &#123;                // åˆ›å»ºåŒ…å«åŒ¹é…å­é¡¹çš„æ–°çˆ¶é¡¹                return ParentType(id: parent.id, name: parent.name, children: matchedChildren)            &#125;        &#125;    &#125;&#125;\næœç´¢UIä¸­çš„å®ç°:\nNavigationStack &#123;    List &#123;        // ä½¿ç”¨è¿‡æ»¤åçš„æ•°æ®æº        ForEach(filteredItems) &#123; item in            // åˆ—è¡¨é¡¹è§†å›¾        &#125;    &#125;    .navigationTitle(&quot;æ ‡é¢˜&quot;)    .searchable(text: $searchText, prompt: &quot;æœç´¢æç¤ºæ–‡å­—&quot;)    // å¯é€‰ï¼šæ·»åŠ æœç´¢å»ºè®®    .searchSuggestions &#123;        ForEach(suggestions, id: \\.self) &#123; suggestion in            Text(suggestion).searchCompletion(suggestion)        &#125;    &#125;&#125;\n\nå·¦å³é€‚åº”çš„å¤–è¾¹è·é€šè¿‡ HStackä¸  spaceå®ç°å¡ç‰‡çš„è‡ªé€‚åº”æ‰©å±•, åŒæ—¶åˆ©ç”¨ .frame(maxwidth:...)æ¥è®¾ç½®ä¸€ä¸ªæœ€å¤§çš„å¡ç‰‡å®½åº¦\nHStack&#123;    Spacer(minLength: 10)      Text(item.description)        .padding()        .background(Color(.systemGray6))        .overlay(            RoundedRectangle(cornerRadius: 10) // 10ä¸ºåœ†è§’åŠå¾„ï¼Œå¯è°ƒæ•´                .stroke(Color.gray, lineWidth: 1) // è¾¹æ¡†é¢œè‰²å’Œå®½åº¦        )        .clipShape(RoundedRectangle(cornerRadius: 10))    // ä¿è¯èƒŒæ™¯å’Œè¾¹æ¡†éƒ½åœ†è§’    .frame(maxWidth: 400) // æœ€å¤§å®½åº¦é™åˆ¶    Spacer(minLength: 10)&#125;\n\nSpacer(minLength: 10) è¡¨ç¤ºä¿è¯è‡ªå·±ä¸ä¼šå°äº minLength.\nä¸Šè¿°çš„ Spacerä¼šå‹ç¼©å¡ç‰‡çš„å†…å®¹, å¦‚æœå¸Œæœ›ç›´æ¥è®¾ç½®å¡ç‰‡åœ¨çˆ¶å®¹å™¨ä¸­çš„å·¦å³å¤–è¾¹è·, åº”è¯¥åœ¨å¡ç‰‡çš„å†…éƒ¨ä½¿ç”¨ padding:\nText(item.description)    .padding(.horizontal, 24) // å¡ç‰‡å†…å®¹å†…è¾¹è·    .padding(.vertical, 12)    .background(Color(.systemGray6))    .overlay(        RoundedRectangle(cornerRadius: 10)            .stroke(Color.gray, lineWidth: 2)    )    .clipShape(RoundedRectangle(cornerRadius: 10))    .padding(.horizontal, 20) // æ•´ä¸ªå¡ç‰‡è·ç¦»çˆ¶è§†å›¾å·¦å³20pt\n\nå…¨å±€ç»Ÿä¸€æ ·å¼@mainstruct MyApp: App &#123;    var body: some Scene &#123;        WindowGroup &#123;            ContentView()                .buttonStyle(ShadowButtonStyle(radius: 10))        &#125;    &#125;&#125;\n\nå‚æ•°æ ‡ç­¾å’Œå‚æ•°å\nå‚æ•°æ ‡ç­¾ç”¨äºå‡½æ•°è°ƒç”¨æ—¶;\nå‚æ•°åç”¨äºå‡½æ•°å†…éƒ¨çš„å‚æ•°åç§°.\n\ne.g.:\nfunc greet(person atName: String) &#123;    print(&quot;Hello, \\(atName)!&quot;)&#125;greet(person: &quot;Alice&quot;) // è¾“å‡ºï¼šHello, Alice!\n\nä¹Ÿå¯ä»¥ä½¿ç”¨ _æ¥çœç•¥è°ƒç”¨æ—¶çš„å‚æ•°æ ‡ç­¾:\nfunc greet(_ name: String) &#123;    print(&quot;Hello, \\(name)!&quot;)&#125;greet(&quot;Alice&quot;) // è¾“å‡ºï¼šHello, Alice!\n\nAlertswift UIä¸­çš„å¼¹çª—æç¤ºåŒæ ·é€šè¿‡æœ¬åœ°çš„ @Stateå˜é‡æ¥å®ç°:\n@State private var showingPaymentAlert = false....alert(&quot;Order confirmed&quot;, isPresented: $showingPaymentAlert) &#123;    // add buttons here&#125; message: &#123;    Text(&quot;Your total was \\(totalPrice) â€“ thank you!&quot;)&#125;\n\nè®¾ç½®æŒ‰é’®æ¥æ”¹å˜å¯è§çš„çŠ¶æ€:\nButton(&quot;Confirm order&quot;) &#123;    showingPaymentAlert.toggle()&#125;\n\nè‡ªå®šä¹‰ç»‘å®šæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ Binding ç±»å‹æ‰‹åŠ¨åˆ›å»ºç»‘å®šï¼Œè¯¥ç±»å‹å¯ä»¥æä¾›è‡ªå®šä¹‰ get å’Œ set é—­åŒ…ï¼Œä»¥ä¾¿åœ¨è¯»å–æˆ–å†™å…¥å€¼æ—¶è¿è¡Œã€‚\nForeachForEach(item.restrictions) &#123; restriction in    Text(restriction)&#125;\n\næ­¤æ—¶, è¦æ±‚ item.restrictions å…·æœ‰å¯å”¯ä¸€æ ‡è¯†çš„ id å­—æ®µ.\n\nå¦‚æœå†…å®¹æœ¬èº«å°±æ˜¯å”¯ä¸€æ ‡è¯†, æ¯”å¦‚è¯´éå†çš„å†…å®¹æ˜¯å­—ç¬¦ä¸²æ•°ç»„, é‚£ä¹ˆå¯ä»¥å¦‚æ­¤å£°æ˜:\nForEach(item.restrictions, id: \\.self) &#123; restriction in    Text(restriction)&#125;\n\nSpacer()ç”¨äºå¡«å……å‰©ä½™çš„ç©ºé—´\n\nä½¿ç”¨ offset(x:.., y:...)æ¥è°ƒèŠ‚ä½ç½®, å·¦ä¸Šè§’æ˜¯åŸç‚¹.\n\nç¯å¢ƒå˜é‡\nä½œç”¨: ç”¨äºå­˜å‚¨ç‹¬ç«‹äºè§†å›¾çš„ã€é•¿æœŸå­˜åœ¨çš„æ•°æ®;\n\ne.g.\n// App.swift@StateObject var order = Order()\n@StateObject å±æ€§åŒ…è£…å™¨è´Ÿè´£åœ¨&lt;u&gt;åº”ç”¨ç¨‹åºçš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­&lt;/u&gt;ä¿æŒå¯¹è±¡å¤„äºæ´»åŠ¨çŠ¶æ€ã€‚\n\néœ€è¦åœ¨åˆ›å»ºè§†å›¾ç»“æ„ä½“çš„æ—¶å€™ä¼ é€’:\nWindowGroup &#123;    ContentView()        .environmentObject(order)&#125;\nä¸ºäº†è®©swiftçŸ¥é“ä»€ä¹ˆæ—¶å€™æ›´æ–°è§†å›¾, å¸¸ç”¨çš„æ˜¯å£°æ˜ @Publishedå±æ€§åŒ…è£…å™¨â€”â€”è¶³ä»¥è®©å®ƒæ›´æ–°ä»»ä½•æ­£åœ¨ç›‘è§†æ›´æ”¹çš„ SwiftUI è§†å›¾.\n\nåŒæ—¶å£°æ˜å¯¹åº”çš„å¯¹è±¡éµå¾ªå¯è§‚æµ‹åè®®: ObservableObject.\n\n\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨ @EnvironmentObjectæ¥è®¿é—®ç¯å¢ƒä¸­çš„å…±äº«æ•°æ®, ä¹Ÿå°±æ˜¯ä¼ é€’ä¸Šä¸€æ­¥å·²ç»åœ¨çˆ¶è§†å›¾ä¸­åˆ›å»ºå’Œç®¡ç†çš„å¯¹è±¡.\ne.g.\nclass UserData: ObservableObject &#123;    @Published var name: String = &quot;John&quot;&#125;struct ContentView: View &#123;    @StateObject private var userData = UserData()    var body: some View &#123;        ChildView().environmentObject(userData)    &#125;&#125;struct ChildView: View &#123;    @EnvironmentObject var userData: UserData    var body: some View &#123;        Text(userData.name)    &#125;&#125;\n\nä½¿ç”¨ @Stateæ¥å£°æ˜ç®€å•çš„æœ¬åœ°å€¼â€”â€”æ¯”å¦‚æ•´æ•°å’Œå­—ç¬¦ä¸².\n\nå»ºè®®å°†å…¶å£°æ˜ä¸º private, e.g.\n@State private var paymentType = &quot;Cash&quot;\n\nèœå•è§†å›¾ä¸ºäº†å°†èœå•è§†å›¾å­˜æ”¾åœ¨ä¸€ä¸ªé€‰é¡¹å¡å½“ä¸­, æˆ‘ä»¬éœ€è¦æ–°å»ºä¸€ä¸ªè§†å›¾, ç”¨æ¥ä½œä¸ºå®¹å™¨:\nstruct MainView: View &#123;    var body: some View &#123;        TabView &#123;            ContentView()                .tabItem &#123;                    Label(&quot;Menu&quot;, systemImage: &quot;list.dash&quot;)                &#125;            OrderView()                .tabItem &#123;                    Label(&quot;Order&quot;, systemImage: &quot;square.and.pencil&quot;)                &#125;        &#125;    &#125;&#125;\n\n\né¡µé¢çº§åˆ«çš„åˆ‡æ¢.\n\nä½¿ç”¨æšä¸¾ä¸å­é¡µé¢çš„å†…å®¹åˆ†åŒº:\nimport SwiftUIstruct ContentView: View &#123;    enum Section &#123;        case cats        case dogs    &#125;    @State private var selectedTab = Section.cats    var body: some View &#123;        TabView(selection: $selectedTab) &#123;            Tab(&quot;Cats&quot;, systemImage: &quot;cat&quot;, value: .cats) &#123;                Button(&quot;Go to Dogs&quot;) &#123;                    selectedTab = .dogs                &#125;            &#125;                      Tab(&quot;Dogs&quot;, systemImage: &quot;dog&quot;, value: .dogs) &#123;                Button(&quot;Go to Cats&quot;) &#123;                    selectedTab = .cats                &#125;            &#125;        &#125;    &#125;&#125;\n\nåˆé€‚çš„ä¿®é¥°ç¬¦\nå›¾åƒè‡ªåŠ¨è°ƒèŠ‚å°ºå¯¸:\nImage(item.mainImage)    .resizable()    .scaledToFit()\n\nè®¾ç½®é˜´å½±.shadow(color: .black.opacity(0.2),         radius: 15, x: 0, y: 10)\n\nä¸ºæŒ‰é’®è®¾ç½®åŠ¨ç”»struct ContentView: View &#123;    @State private var showingWelcome = false    var body: some View &#123;        VStack &#123;            Toggle(&quot;Toggle label&quot;, isOn: $showingWelcome.animation())            if showingWelcome &#123;                Text(&quot;Hello World&quot;)            &#125;        &#125;    &#125;&#125;\n\nå¯ä»¥è¿›ä¸€æ­¥è®¾ç½®, æ¯”å¦‚å¼¹ç°§çš„æ¸å…¥æ¸å‡º:\nToggle(&quot;Toggle label&quot;, isOn: $showingWelcome.animation(.spring()))\n\nåŸºæœ¬æ“ä½œå¿«æ·é”®\nctrlæŒ‰ä½åç‚¹å‡»  VStackå¯ä»¥å¿«é€Ÿåœ°å°†å…¶æ·»åŠ åˆ° ZStackå½“ä¸­\né¢œè‰²çš„è®¾ç½®éœ€è¦é€šè¿‡ ZStackæ¥å®ç°.\n\n\noptionå¯ä»¥æ˜¾ç¤ºå½“å‰ç±»çš„ä»‹ç»\n\n\næ¨èèµ„æºï¼š\n\nRaywenderlich çš„ SwiftUI æ•™ç¨‹ï¼š Raywenderlich - SwiftUI Apprentice\nBig Mountain Studio çš„å…è´¹ç”µå­ä¹¦ï¼š SwiftUI Views Quick Start\n\n","categories":["å­¦ä¹ ç¬”è®°"],"tags":["swift","ç¼–ç¨‹è¯­è¨€"]},{"title":"è®¡ç®—æœºä½“ç³»ç»“æ„å¤ä¹ ","url":"/2025/06/21/%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/arch%E5%A4%8D%E4%B9%A0/","content":"\nä»»è¯¾è€å¸ˆï¼šä½•æ°´å…µ\n\nçŸ¥è¯†ç‚¹æ¢³ç†CH1å¯é æ€§\navailability = MTTF / MTBF\nFITï¼šfaliure in time = 1 / MTTF\n\nè®¡ç®—ç³»ç»Ÿæ•´ä½“çš„MTTFæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¼˜å…ˆè®¡ç®—FITï¼ˆå„ä¸ªç»„ä»¶çš„rateç›¸åŠ ï¼‰ï¼Œç„¶åæ±‚å€’æ•°\nMIPSmillions of instructions per second\nPerformanceperformanceæ˜¯æ‰§è¡Œæ—¶é—´çš„å€’æ•°\nä¸åŒçš„æ€§èƒ½æ¯”è¾ƒç­–ç•¥\n\n\nå‡ ä½•å¹³å‡å°±æ˜¯å°†å„ä¸ªç¨‹åºçš„æ‰§è¡Œæ—¶é—´ç›¸ä¹˜ç„¶åå¼€æ ¹å·ï¼Œä½œä¸ºå¹³å‡çš„æ‰§è¡Œæ—¶é—´ï¼›\ndepends on which machine is the referenceï¼šåœ¨ä¸æ¸…æ¥šåŠ æƒç®—æ³•ä¸­çš„æƒå€¼æƒ…å†µæ—¶ï¼Œé‡‡å–å‚ç…§çš„æ–¹æ³•è®¡ç®—å¹³å‡å€¼ï¼Œç±»ä¼¼äºåŠ æƒçš„æ•ˆæœï¼Œä½†æ˜¯ç»“æœä¸é€‰æ‹©çš„å‚ç…§å¯¹è±¡ç›¸å…³ï¼Œå› æ­¤è¯´ï½\n\nå‡ ä½•å¹³å‡ï¼š\n\n\næµæ°´çº¿ç›¸å…³å¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šå…è®¸ç»“æ„å†²çªï¼š\n\nä¸ºäº†å‡å°‘costå’Œå‡å°‘å•å…ƒçš„latency\n\nthroughputThe throughput of a CPU pipeline is the number of instructions completed per second\n\nCPUæµæ°´çº¿çš„ååé‡æŒ‡çš„å°±æ˜¯æ¯ç§’æ‰§è¡Œçš„æŒ‡ä»¤æ•°\n\nhow to stall\nè®¾è®¡stallæ§åˆ¶å•å…ƒï¼Œæ£€æµ‹æ˜¯å¦å­˜åœ¨å†²çªéœ€è¦stall\nå¦‚æœéœ€è¦stallï¼Œå°±disable writing PC and IF/ID latchï¼Œå¹¶ä¸”æ’å…¥ä¸€ä¸ªnopæŒ‡ä»¤åˆ°ID/EXï¼Œç¦æ­¢å†™å›å¯„å­˜å™¨å’Œå†™å…¥MEM\n\ndouble bumpå¦‚æœåœ¨ä¸€ä¸ªccå†…å…è®¸ write-then-readï¼Œå°±å¯ä»¥åªæ’å…¥ä¸¤æ¡nopï¼š\n\n\nè·³è½¬æŒ‡ä»¤âˆ† = ç›®æ ‡åœ°å€ - è·³è½¬æŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ï¼\n\nå› ä¸ºåœ¨å–å‡ºæŒ‡ä»¤åPC+4å°±ç”Ÿæ•ˆäº†ï¼›\nä¸æ±‡ç¼–æŒ‡ä»¤å…·æœ‰å¼‚æ›²åŒå·¥ä¹‹å¦™\n\n\n\nåŒæ—¶æ³¨æ„ï¼Œæ˜¯åœ¨MEMé˜¶æ®µè€ŒéEXé˜¶æ®µå†™å›PCå¯„å­˜å™¨ï¼Œåœ¨è·³è½¬æŒ‡ä»¤çš„WBé˜¶æ®µå¼€å§‹å–å€\n\næ€»å…±stalläº†3ä¸ªcc\n\nå¯¹åº”çš„ç®€å•é—®é¢˜ï¼š\n\n\nä¸ºäº†è§£å†³ä¸Šè¿°çš„stallæŸå¤±ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘åœ¨EXé˜¶æ®µå‰é€’ï¼Œæˆ–è€…åœ¨IDé˜¶æ®µå¢åŠ ç¡¬ä»¶å•å…ƒã€‚\nå¦å¤–çš„å¯è¡ŒåŠæ³•æ˜¯å»¶è¿Ÿæ§½æŠ€æœ¯ï¼š\n\nå› ä¸ºè·³è½¬æŒ‡ä»¤åœ¨IDé˜¶æ®µæ‰ç¡®å®šï¼Œæ­¤æ—¶IFå·²ç»å–å€äº†ã€‚æˆ‘ä»¬å°†ä¸€å®šä¼šæ‰§è¡Œçš„æŒ‡ä»¤ï¼ˆæ— è®ºè·³è½¬æ˜¯å¦å‘ç”Ÿï¼‰æ”¾ç½®åœ¨æ¡ä»¶è·³è½¬æŒ‡ä»¤çš„ä¸‹ä¸€æ¡ï¼Œé¿å…è¿™æ¡(ç»„)æŒ‡ä»¤çš„æµªè´¹\nå»¶è¿Ÿæ§½ä¸­çš„æŒ‡ä»¤åº”å½“ç”±ç¼–è¯‘å™¨é€‰æ‹©åˆé€‚çš„æŒ‡ä»¤(ç»„)\n\nç§»ä½å¯„å­˜å™¨ä¸ºäº†è§£å†³å†™ç«¯å£çš„å†²çªï¼Œç›´æ¥å¢åŠ å†™ç«¯å£æ˜¯ä¸ç»æµçš„ã€‚\næˆ‘ä»¬è€ƒè™‘ä¸€ç§æ£€æµ‹çŸ›ç›¾å¹¶å®ç°åºåˆ—åŒ–å†™æ“ä½œçš„æŠ€æœ¯â€”â€”ä½¿ç”¨ç§»ä½å¯„å­˜å™¨ï¼š\n\n\n\nåœ¨IDé˜¶æ®µåˆ†ææŒ‡ä»¤ä¹‹åï¼Œå¦‚æœä¸å·²ç»å‘å°„ï¼ˆæ­¤å¤„åº”è¯¥æŒ‡çš„æ˜¯åº”è¯¥å¼€å§‹æ‰§è¡Œï¼Ÿï¼‰çš„æŒ‡ä»¤å­˜åœ¨å†™ç«¯å£çš„å†²çªï¼ˆåˆ©ç”¨ç§»ä½å¯„å­˜å™¨åˆ¤æ–­ï¼‰ï¼Œå°±stallè¿™æ¡æŒ‡ä»¤\n\nå¦‚æœæŒ‡ä»¤éœ€è¦å†™å›ï¼Œåˆ©ç”¨ä¸€ä¸ªç§»ä½å¯„å­˜å™¨ï¼Œè®¾ç½®ä¸å½“å‰æŒ‡ä»¤å°†è¦å†™å›æ‰€éœ€çš„ccç›¸ç­‰çš„å€¼ï¼Œä½œä¸ºç§»ä½å¯„å­˜å™¨ä½æ•°çš„1.æ¯ä¸ªccå°†å¯¹åº”çš„ç§»ä½å¯„å­˜å™¨å³ç§»ã€‚\næ•°æ®å†²çª\nRAWï¼štrue dependanceï¼Œå› ä¸ºæ— æ³•é€šè¿‡å¯„å­˜å™¨é‡å‘½åæˆ–è€…æŒ‡ä»¤é‡æ’æ¥ä¼˜åŒ–\nWAWï¼šoutput dependance\nWARï¼šanti-dependanceï¼Œå› ä¸ºå’ŒRAWæ˜¯ç›¸åçš„\n\nCH2 å­˜å‚¨å™¨å±‚çº§block identification\nindex ç”¨äºé€‰ä¸­cacheçš„set / cache line\nindex bits = \n\n\noffsetï¼šç”¨äºé€‰æ‹©blockå†…éƒ¨çš„data\noffset size = \n\n\ntagï¼šç”¨äºæ¯”è¾ƒblockæ˜¯å¦åŒ¹é…\nbits: åœ°å€size - index size - offset size\n\n\n\nä¸€ä¸ªç®€å•çš„ç›´æ¥æ˜ å°„çš„è®¡ç®—ä¾‹å­ï¼š\n\n\n\nåœ°å€æ€»ä½æ•°å¯èƒ½ç”±memory sizeé—´æ¥ç»™å‡ºï¼še.g. Memory-size = 4G = ï¼Œ å¾—åˆ°ä¸€å…±æœ‰32ä½\n\nwrite strategyä¸€èˆ¬æ¥è¯´ï¼š\n\nå†™å›ç­–ç•¥ + write allocate\nå†™ç©¿ç­–ç•¥ + write aroundï¼šå‘ç”Ÿwrite missçš„æ—¶å€™ï¼Œåªä¼šå†™å…¥åˆ°å†…å­˜\n\nä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š\n\n\n\nå½“å‘ç”Ÿäº†read missçš„æ—¶å€™ï¼Œå°†mem[200]åŠ è½½åˆ°cacheï¼Œä¸‹ä¸€æ¬¡çš„å†™å°†å‘½ä¸­\n\nCache performanceMemory stall\n\n\n\n\n\nCPU Execution time = (CPU clock cycles + Memory stall cycles) x Clock cycle time\n\nå…¶ä¸­åè€…å¯ä»¥å¦‚æ­¤è®¡ç®—ï¼š \næ³¨æ„åˆ¤æ–­æ˜¯å¦éœ€è¦å°†dataå’Œins.çš„memåŒºåˆ†\n\nä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š\n\n\nAMAT\n\nAMATä¹Ÿå°±æ˜¯: Average memory access time.\næ‰€ä»¥å¯ä»¥ç”¨æ¥è®¡ç®— real CPI= Ideal CPI + Average stalls per instruction  , å…¶ä¸­åè€…æ ¹æ®:\n\nè®¡ç®—å¾—åˆ°,  ä¸” HitTimeä¸ºç†æƒ³çš„CPI, access timesæ˜¯æ¯æ¡æŒ‡ä»¤å¹³å‡è®¿é—®memoryçš„æ¬¡æ•° = MPI , e.g. æœ‰30%çš„æ•°æ®è®¿å­˜æŒ‡ä»¤, å¯¹åº”äº†1.3.ï¼ˆè€ƒè™‘æŒ‡ä»¤cacheçš„1 on unified cacheï¼‰\nä¸€ä¸ªç®€å•çš„ä¾‹å­â€”â€”AMATæŒ‰ç…§dataå’ŒinsåŠ æƒè®¡ç®—ï¼š\n\n\nè¡¥å……ï¼š\n\nMPI(memory reference per instruction)ï¼1.5 , ä¹Ÿå°±æ˜¯æŒ‡ä»¤å¯¹memçš„å¹³å‡è®¿é—®æ¬¡æ•°.\næ³¨æ„AMATçš„è®¡ç®—æ¶‰åŠäº†hit timeï¼Œunified cacheçš„hit timeå¯èƒ½æ¯”split cacheçš„å¤§\næ— ç‰¹åˆ«è¯´æ˜çš„æƒ…å†µä¸‹ï¼Œhit time = Ideal CPI\n\nSplit &amp; Unified\nmiss rateçš„è®¡ç®—ï¼š\n\n\n\n\nè¡¨æ ¼ä¸­ç»™å‡ºçš„æ•°æ®æ˜¯missç›¸å…³çš„ä¼°è®¡ï¼Œå®é™…ä¸Šçš„MPIå¯èƒ½ç”±é¢˜ç›®è¿›ä¸€æ­¥ç»™å‡ºï¼Œå› ä¸ºä¸åŒçš„ç¨‹åºå¯¹åº”çš„è®¿å­˜æ¯”ä¾‹å¯èƒ½ä¸åŒï¼Œæ ¹æ®å®é™…æƒ…å†µè®¡ç®—\n\nImprove cache performanceå‡å°‘hitæ—¶é—´ 4â€™\nsmall and simple caches\n\næ›´å°‘çš„ç¡¬ä»¶æ”¯æŒï¼›ç›´æ¥æ˜ å°„çš„é€Ÿåº¦æ›´å¿«\n\n\navoiding address translation\n\nä½¿ç”¨TLBä½œä¸ºpage tableçš„cacheï¼ŒVirtual indexed, Physically tagged\n\n\nway prediction\n\nåœ¨cacheä¸­é‡‡å–extra bitsé¢„æµ‹wayï¼Œå¦‚æœé¢„æµ‹æ­£ç¡®åªéœ€è¦1ccï¼›å¦åˆ™éœ€è¦é¢å¤–çš„ccæ”¹å˜é¢„æµ‹ä½\n\n\ntrace caches\n\ntraceï¼šåŠ¨æ€æŒ‡ä»¤åºåˆ—ï¼Œä¸»è¦ä¸º branchè®¾è®¡\nå°†branchåœ¨å†…çš„æŒ‡ä»¤æ‰“åŒ…æ”¾å…¥trace cacheï¼Œç”±äºå¤§éƒ¨åˆ†æ—¶é—´ï¼Œåˆ†æ”¯è·³è½¬åè¦æŒ‡ä»¤çš„æŒ‡ä»¤åºåˆ—æ˜¯ç›¸åŒçš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç›´æ¥ä»trace cacheä¸­å–ç”¨\n\n\n\nå¢åŠ cacheçš„bandwidth 3â€˜\npipelined cache access\né¡¾åæ€ä¹‰ï¼Œå°†cacheçš„è®¿é—®æµæ°´çº¿åŒ–\n\n\nmultibanked caches\nå°†cacheåˆ’åˆ†ä¸ºå‡ ä¸ªä¸åŒçš„åŒºåŸŸï¼Œä»è€Œå…è®¸åŒæ—¶çš„è®¿é—®\n\n\nnon-blocking caches\né’ˆå¯¹ hit under miss çš„æƒ…å†µè®¾è®¡ï¼Œå…è®¸CPUåœ¨missä¹‹åç»§ç»­æ‰§è¡ŒæŒ‡ä»¤ï¼Œé¿å…é™·å…¥é˜»å¡block\n\n\n\nå‡å°‘miss penalty 4â€™\nmultilevel caches\nå¤šçº§cacheå¸¦æ¥çš„æ¦‚å¿µï¼šlocal miss rateï¼ˆå½“å‰levelçš„ç¼ºå¤±ç‡ï¼‰ ä¸ global miss rateï¼ˆä¸ä¸Šå±‚çš„cacheç›¸å…³ï¼‰\n\n\ncritical word first\nåœ¨blockä¸­æ‰¾åˆ°éœ€è¦çš„wordåå°±å¿«é€Ÿå¯åŠ¨ï¼Œåç»­æŒ‡ä»¤çš„æ‰§è¡Œå’Œblockçš„å‰©ä½™å†…å®¹çš„æ¬è¿å¹¶è¡Œæ‰§è¡Œï¼Œå› æ­¤é€šå¸¸ç”¨äºblockçš„sizeè¾ƒå¤§çš„æƒ…å†µ\nåˆç§°ä¸º wrapped fetch ä¸ requested word first\n\n\nread miss prior to writes\nåœ¨å†™å›ç­–ç•¥ä¸‹, å¦‚æœå‘ç”Ÿäº† read miss, éœ€è¦ä»ä¸»å­˜ä¸­è¯»å–å¯¹åº”çš„å—å¹¶å†™å…¥ cache. å¯ä»¥ç›´æ¥å–å‡ºæ•°æ®å¹¶å¼€å§‹æ‰§è¡ŒæŒ‡ä»¤, å°†å¾…å†™çš„æ•°æ®æ”¾å…¥ buffer.\n\n\nmerging write buffers\nå¤šæ¬¡çš„å†™åˆå¹¶åˆ°ä¸€æ¬¡çš„æ“ä½œï¼Œ ç‰¹åˆ«æ˜¯å†™çš„åœ°å€æ˜¯ç›¸åŒçš„æ—¶å€™ï¼Œæ˜¾è‘—é™ä½äº†penalty\n\n\nvictim caches\nåœ¨ç›¸é‚»çš„cacheå±‚çº§ä¹‹é—´å¢è®¾ç‰ºç‰²ç¼“å­˜\nå‘ç”Ÿä¸€æ¬¡ missä¹‹åå¹¶ä¸ç›´æ¥å°†å…¶è¸¢å‡º cache, è€Œæ˜¯æ”¾å…¥~\n\n\n\né™ä½miss rate 4â€™\næ§åˆ¶å˜é‡åˆ†æ\n\n\nlarger block size\né™ä½äº†å¼ºåˆ¶miss rate\nä½†æ˜¯å¢å¤§äº†miss penaltyï¼Œä»¥åŠå‘ç”Ÿå†²çªmissçš„å¯èƒ½ï¼ˆblockçš„æ•°é‡å‡å°‘ï¼‰\n\n\nlarge cache size\nç»éªŒæ³•åˆ™: ç¿»å€çš„cacheå®¹é‡, å¸¦æ¥é™ä½25%çš„ç¼ºå¤±ç‡.\né™ä½äº†å®¹é‡miss\nä½†æ˜¯å¢å¤§äº†hit timeå’Œcost\n\n\nhigher associativity\nç»éªŒæ³•åˆ™: ä¸€ä¸ªå¤§å°ä¸ºNçš„ç›´æ¥æ˜ å°„ç¼“å­˜ , ä¸ä¸€ä¸ªå¤§å°ä¸ºN/2çš„2è·¯ç»„ç›¸è” ç¼“å­˜å…·æœ‰ç›¸åŒçš„æœªå‘½ä¸­ç‡.\n8-wayæ¯”è¾ƒç†æƒ³ã€‚æ›´å¤§çš„ç»„å…³è”åº¦å¯¼è‡´æ¯”è¾ƒæ—¶é—´çš„å¢åŠ ï¼Œä»è€Œå¯èƒ½å¯¼è‡´æ—¶é’Ÿå‘¨æœŸçš„å¢å¤§/å‘¨æœŸæ•°çš„å¢åŠ \n\n\ncompiler optimization\nåœ¨ä¸æ”¹å˜ç¡¬ä»¶çš„æƒ…å†µä¸‹, ä½¿ç”¨ç¼–è¯‘å™¨é‡æ’æŒ‡ä»¤çš„åºåˆ—\næ•°ç»„åˆå¹¶\nå¾ªç¯äº¤æ¢ï¼šæ”¹å˜å¾ªç¯çš„åµŒå¥—é¡ºåº\nå¾ªç¯èåˆ\nblockingç­–ç•¥\n\n\nway prediction and Pseudo-Associative Cache\nè·¯é¢„æµ‹çš„æŠ€æœ¯ä¸ä¹‹å‰æåˆ°çš„ç›¸åŒï¼Œç”¨ä¸€ä¸ªé¢„æµ‹ä½æ¥é¢„æµ‹\nä¼ªå…³è”ç¼“å­˜ï¼šdivide cacheï¼Œç„¶ååœ¨missä¹‹åæŸ¥çœ‹å½“å‰cacheçš„å‰©ä½™éƒ¨åˆ†\nå¦‚æœæ­¤æ—¶å‘½ä¸­ï¼Œç§°ä¸º pseudo-hitï¼Œæ—¶é—´ä»‹äºhit ä¸  miss penaltyä¹‹é—´\n\n\n\n\n\n3Cå›é¡¾ï¼š\n\nCompulsory: å†·å¯åŠ¨ï¼Œåˆç§°ä¸ºå¼ºåˆ¶miss;\nCapacity:  ç¼“å­˜çš„ç©ºé—´ä¸è¶³å¯¼è‡´çš„ miss. å‘ç”Ÿåœ¨å…¨å…³è”å½“ä¸­.\nConflictï¼ˆcollisionï¼‰:  set associative or direct mappedå½“ä¸­å‘ç”Ÿ.\n\n\nä¸»è¦å…³æ³¨å†²çªmisså’Œå¼ºåˆ¶missçš„ä¼˜åŒ–\n\né€šè¿‡æµæ°´çº¿é™ä½miss penaltyå’Œrate 2â€™\nhardware prefetching\nä½¿CPUé¢„å…ˆå–ç”¨ä¸€éƒ¨åˆ†çš„æ•°æ®åˆ°ç‰¹æ®Šçš„ç¼“å­˜å—å½“ä¸­, ä»è€Œé™ä½äº† å†·å¯åŠ¨çš„å½±å“.\né¢„å–çš„ç»“æœæ”¾å…¥ stream bufferï¼Œ\n\n\ncompiler prefetching\nç”±ç¼–è¯‘å™¨æ’å…¥prefetch ins.æ¥è·å–éœ€è¦çš„æ•°æ®\næ ¹æ®é¢„å–æ•°æ®å­˜æ”¾åˆ°å¯„å­˜å™¨è¿˜æ˜¯cacheï¼Œåˆ†ä¸ºbinding prefetch å’Œ non-binding prefetch\n\n\n\nCH3scoreboard\nçœ‹ä¸€çœ¼\n\n\n\næµæ°´çº¿çš„é˜¶æ®µ\nIF: å–æŒ‡ä»¤\nIS: ä»¥ä¸‹æ¡ä»¶åŒæ—¶æ»¡è¶³æ—¶å…è®¸å‘å°„ï¼š\nFUç©ºé—²â€”â€”é¿å…ç»“æ„å†²çªï¼›\næ­£åœ¨æ‰§è¡Œçš„æŒ‡ä»¤ï¼Œæ²¡æœ‰ä¸€æ¡è¦å†™å›çš„Rdä¸å½“å‰æŒ‡ä»¤ç›¸åŒâ€”â€”é¿å…äº†WAWå†²çª\n\n\nRO: ç›‘è§†æ•°æ®å†²çªï¼Œå½“ä¸”ä»…å½“ä¸¤ä¸ªæºå¯„å­˜å™¨éƒ½å‡†å¤‡å¥½äº†ï¼Œæ‰è¯»å–\nEX: åœ¨ä¸åŒçš„FUä¸­æ‰§è¡Œ(MEMæ¶µç›–åœ¨æ•´æ•°çš„FUå½“ä¸­)\nWBï¼šæ›´æ–°çŠ¶æ€è¡¨ä¹‹åçš„ä¸‹ä¸€ä¸ªccå¯ä»¥RO\n\nè¡¨çš„è®¾è®¡\næŒ‡ä»¤çŠ¶æ€è¡¨ Instruction Status Table\nè®°å½•æŒ‡ä»¤çš„çŠ¶æ€ï¼Œåœ¨å“ªä¸ªé˜¶æ®µ\n\n\nåŠŸèƒ½å•å…ƒçŠ¶æ€è¡¨ Functional Unit Status Table\nbusyï¼šFU æ˜¯å¦ç©ºé—²ï¼›opï¼šFU æ­£åœ¨æ‰§è¡Œä»€ä¹ˆæ“ä½œ\nVi, Vj, Vkï¼šFU çš„æ“ä½œæ•°å¯¹åº”ç€å“ªä¸ªå¯„å­˜å™¨\nQj, Qkï¼šFU çš„æ“ä½œæ•°å¦‚æœæ²¡å‡†å¤‡å¥½ï¼Œåº”è¯¥ä»å“ªä¸ª FU è¯»å–\nRj, Rkï¼šæ“ä½œæ•°æ˜¯å¦å‡†å¤‡å¥½ï¼Œå¦‚æœå‡†å¤‡å¥½äº†å°±å¡« yesï¼Œç„¶ååœ¨ROé˜¶æ®µè¯»å–ä¹‹åç«‹å³æ”¹ä¸º NO\nç‡å…ˆæ‰§è¡Œçš„æŒ‡ä»¤åœ¨WBçš„æ—¶å€™æ£€æŸ¥å†™å…¥çš„å¯„å­˜å™¨æ˜¯å¦åœ¨æŸä¸ªFUçš„ready-listä¸­ä¸º YESï¼Œè¡¨ç¤ºç­‰å¾…å¦ä¸€ä¸ªæ“ä½œæ•°å‡†å¤‡å¥½ä¹‹ååŒæ—¶è¯»å–ï¼ˆè¿˜æœªè¯»å–ï¼‰\n\n\n\n\nå¯„å­˜å™¨çŠ¶æ€è¡¨ Register Status Table\nå¦‚æœæŸä¸ªå¯„å­˜å™¨çš„å€¼æ­£åœ¨è¢«æŸä¸ª FU çš„æ“ä½œç”Ÿæˆï¼Œå¡«å…¥è¿™ä¸ªæ“ä½œFUçš„ç¼–å·\nç”Ÿæˆå¥½äº†ä¹‹åï¼Œå¡«å…¥å®é™…å€¼\n\n\n\næ˜¾å¼é‡å‘½åé€šè¿‡è®¾ç½®æ›´å¤šçš„ç‰©ç†å¯„å­˜å™¨, åŒæ—¶ç»´æŠ¤ä¸€ä¸ª free list.\n\næ¯ä¸€æ¡éœ€è¦å†™å¯„å­˜å™¨çš„ç›’æŒ‡ä»¤ï¼Œå‡åˆ†é…ä¸€ä¸ªæ–°çš„ç‰©ç†å¯„å­˜å™¨ï¼›\næ­¤æ—¶è¿˜éœ€è¦è®°å½•åŸæ¥çš„mapï¼ˆå¯¹åº”çš„ç‰©ç†å¯„å­˜å™¨ï¼‰ï¼Œè¿™æ˜¯ä¸ºäº†åœ¨å‘ç”Ÿä¸­æ–­/rollbackçš„æ—¶å€™å¯ä»¥å¤åŸä¹‹å‰çš„æ˜ å°„å…³ç³»ï¼›\n\n\nå½“å¯ä»¥å†™å›çš„æ—¶å€™ï¼Œå†å°†å¾—åˆ°çš„å€¼å†™å›åˆ°é€»è¾‘å¯„å­˜å™¨ï¼ŒåŒæ—¶å°†é”å®šçš„ç‰©ç†å¯„å­˜å™¨ free upï¼ˆåŠ å…¥åˆ°free listçš„æœ«å°¾ï¼‰\n\n\n\nåŠ å…¥æ˜¾å¼é‡å‘½åä¹‹åçš„è®¡åˆ†æ¿é˜¶æ®µåˆ†æï¼š\n\n\næ˜¾å¼é‡å‘½åæ¶ˆé™¤å†²çªçš„ç¤ºä¾‹ï¼š\n\n\nTomasolo\n\nç®—æ³•çš„æ€æƒ³\nScoreboard ç®—æ³•çš„æ§åˆ¶æƒå…¨éƒ¨åœ¨ Scoreboard çš„ä¸‰å¼ è¡¨ä¸­\nTomasulo ç®—æ³•å°† FU çš„æ§åˆ¶æƒäº¤ç»™ FU è‡ªå·±ï¼Œæ¯ä¸ª FU æœ‰è‡ªå·±çš„æŒ‡ä»¤ç¼“å­˜\n\n\n\n\nIF\nIS\nEX\nWB\n\n\n\nç¡¬ä»¶è®¾è®¡\næ¯ä¸ª FU æœ‰ä¸€ä¸ª bufferï¼Œå«åšä¿ç•™ç«™ï¼ˆreservation stationï¼‰\nbusyï¼šFU æ˜¯å¦ç©ºé—²ï¼›opï¼šFU æ­£åœ¨æ‰§è¡Œä»€ä¹ˆæ“ä½œ\nVj, Vkï¼šä¸¤ä¸ªæºå¯„å­˜å™¨å¯¹åº”çš„å¯„å­˜å™¨å€¼ï¼ˆæ³¨æ„æ˜¯å€¼ï¼‰\nQj, Qkï¼šä¸¤ä¸ªæºå¯„å­˜å™¨å¦‚æœæ²¡å‡†å¤‡å¥½ï¼Œåº”è¯¥ä»å“ªä¸ª FU è¯»å–\næ­¤å¤–è¿˜ä¼šè®°å½• FU &lt;u&gt;è·ç¦»å®Œæˆæ‰§è¡Œè¿™æ¡æŒ‡ä»¤çš„å‰©ä½™å‘¨æœŸæ•° &lt;/u&gt;\n\n\nå†…å­˜ä¹Ÿæœ‰è‡ªå·±çš„ä¿ç•™ç«™ï¼Œå«åš Load/Store Buffer\nbusyï¼šè¿™ä¸ªä½ç½®æ˜¯å¦æœ‰å†…å­˜è¯»å†™è¯·æ±‚\naddressï¼šè¯»å†™çš„åœ°å€\n\n\næœ‰ä¸€ä¸ª Register Status Tableï¼Œå’Œ Scoreboard ç®—æ³•ä¸­çš„ä¸€æ ·\næœ‰ä¸€ä¸ª Common Data Busï¼ˆCDBï¼‰ï¼Œè´Ÿè´£å°†ç»“æœå¹¿æ’­åˆ°æ‰€æœ‰çš„ä¿ç•™ç«™å’Œå¯„å­˜å™¨\nå°†éœ€è¦çš„æ•°æ®ä»æ€»çº¿ä¸Šç›´æ¥å–ç”¨, è€Œä¸ç”¨é€šè¿‡å¯„å­˜å™¨\nå› æ­¤ä¼ é€’çš„æ—¶å€™, ä¸ä»…ä¼ é€’å€¼, åŒæ—¶ä¼ é€’å¯¹åº”æ“ä½œçš„ç¼–å·\n\n\n\nå¸¦æŠ•æœºçš„å®ç°\n\nä¸ºäº†åœ¨é‡åˆ°åˆ†æ”¯æŒ‡ä»¤çš„æ—¶å€™é¿å…stallï¼Œæˆ‘ä»¬å¯ä»¥é‡‡å–æŠ•æœºçš„æ–¹å¼â€”â€”å‡è®¾åˆ†æ”¯æŒ‡ä»¤ä¸ä¼šè·³è½¬ï¼Œç»§ç»­æ‰§è¡Œä¹‹åçš„æŒ‡ä»¤\nä¸ºäº†å®ç°æŠ•æœºæœºåˆ¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§åœ¨é¢„æµ‹å¤±è´¥ä¹‹åå¯ä»¥rollbackçš„æœºåˆ¶â€”â€”æ–°å¢Reorder buffer i.e. ROB\nåœ¨ä¹‹å‰çš„æµç¨‹åŸºç¡€ä¸Šï¼Œå¢åŠ commité˜¶æ®µï¼Œè®©CDBçš„ç»“æœå…ˆå†™å…¥ROBï¼Œç„¶ååœ¨ROBä¸­å®ç°é¡ºåºæäº¤ï¼Œå¦‚æœå¤´éƒ¨æŒ‡ä»¤æ˜¯ï¼š\n\næ™®é€šæŒ‡ä»¤ï¼šå°†ç»“æœå†™å›åˆ°å¯„å­˜å™¨å’Œå†…å­˜ï¼Œç„¶åä»ROBä¸­åˆ é™¤\nåˆ†æ”¯æŒ‡ä»¤ï¼Œå¹¶ä¸”é¢„æµ‹ï¼š\næ­£ç¡®ï¼šå½“åšæ™®é€šæŒ‡ä»¤ï¼Œç»§ç»­æ‰§è¡Œ\né”™è¯¯ï¼šæ¸…ç©ºflushæ­¤æ—¶ROBä¸­çš„æ‰€æœ‰æŒ‡ä»¤\n\n\n\nNoticeï¼š\n\nISé˜¶æ®µéœ€è¦å°†æŒ‡ä»¤åŒæ—¶å†™åˆ°ROBä¸­ï¼Œå› æ­¤åªæœ‰å½“ä¿ç•™ç«™å’ŒROBéƒ½æœ‰ç©ºä½™çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥issue\nissueä¹‹åï¼Œå¯ä»¥ä»ROBå’Œå¯„å­˜å™¨ä¸­è¯»å–æ“ä½œæ•°åˆ°ä¿ç•™ç«™ä¸­\nå†…å­˜ä¸­çš„æ•°æ®ä¹Ÿå¯èƒ½å­˜åœ¨RAWçš„å†²çªï¼Œå› æ­¤åœ¨loadçš„æ—¶å€™ï¼Œéœ€è¦ä»ROBä¸­çš„storeçš„åœ°å€ç›¸æ¯”è¾ƒï¼š\n\n\n\n\nåªæœ‰å½“æˆ‘ä»¬æ˜ç¡®çŸ¥é“loadå¯¹åº”çš„å†…å­˜åœ°å€ä¸å…ˆå‰storeæŒ‡ä»¤çš„ç›®æ ‡åœ°å€ä¸å†²çªçš„æ—¶å€™ï¼Œæ‰æ‰§è¡Œloadï¼ˆå‘å†…å­˜å‘é€è¯·æ±‚ï¼‰ï¼Œå¦åˆ™stall\n\nMEMçš„RAWä¸è§£å†³å‚è€ƒçš„è§£å†³ï¼š\n\n\nå¯¹åº”çš„ä¾‹å­ï¼š\n\n\n\næ­¤å¤„å³ä¸‹è§’çš„åº”è¯¥æ˜¯load bufferï¼Ÿæ‰€ä»¥å®é™…å¡«å†™çš„ä¸æ˜¯å­˜åœ¨å†²çªçš„storeåœ°å€ï¼Œè€Œæ˜¯loadçš„åœ°å€ï¼›\nçŒœæµ‹æ˜¯è¿™æ ·çš„æµç¨‹ï¼šå¦‚æœloadå‰é¢çš„æŸä¸ªstoreçš„ç›®æ ‡åœ°å€è¿˜æ²¡æœ‰è®¡ç®—å®Œæ¯•ï¼Œå°±å°†loadçš„åœ°å€æ å¡«å…¥storeçš„ROBç¼–å·ï¼Œç„¶åstoreå®Œæˆçš„æ—¶å€™å¸¦ç€ROBç¼–å·åœ¨loadå†…éƒ¨æ£€æŸ¥ï¼ŒåŒæ—¶è®©storeçš„åœ°å€ä¸loadçš„å®é™…åœ°å€è¿›è¡Œæ¯”è¾ƒï¼Ÿ\næ‰€ä»¥ä¸Šå›¾ä¸­çš„â€œå¡«å…¥åˆ°loadå‚ç…§çš„è¡¨æ ¼ä¸­â€æœ‰é—®é¢˜\n\næ€»ç»“\n\n\nTomasuloä¹Ÿæ— æ³•è§£å†³RAWå†²çªï¼Œè¿™æ˜¯æ— æ³•è§£å†³çš„å†²çª\n\nåˆ†æ”¯é¢„æµ‹æŠ€æœ¯åˆ†æ”¯é¢„æµ‹è¡¨\nä¸€ä½é¢„æµ‹å™¨ï¼šåˆ†æ”¯å†å²è¡¨ï¼Œä½¿ç”¨PCçš„ä½ä½ä½œä¸ºç´¢å¼•ï¼Œ0é¢„æµ‹ä¸è·³è½¬ï¼Œ1é¢„æµ‹è·³è½¬\nä¸¤ä½é¢„æµ‹å™¨\nNä½é¢„æµ‹å™¨ï¼š\nä½¿ç”¨ æ¥é¢„æµ‹ä¸è·³è½¬\nä½¿ç”¨æ¥é¢„æµ‹è·³è½¬\nå¦‚æœè¦æ±‚è®¡ç®—å‡†ç¡®ç‡ï¼Œæ³¨æ„æ˜¯ç­‰åˆ°ç¨³å®šçš„æ—¶å€™å†è®¡ç®—ï¼ˆä¸€å¼€å§‹çš„åˆå§‹å€¼å¹¶ä¸é‡è¦ï¼‰\n\n\n\nç›¸å…³é¢„æµ‹å™¨å½“å‰åˆ†æ”¯æŒ‡ä»¤ä¾èµ–åˆ«çš„åˆ†æ”¯æŒ‡ä»¤çš„ç»“æœï¼š\n\n\nm,né¢„æµ‹å™¨\nmï¼šä½¿ç”¨mä½çš„ç§»ä½å¯„å­˜å™¨æ¥å‚¨å­˜mæ¡æŒ‡ä»¤æ˜¯å¦è·³è½¬çš„ç»“æœ\næ¯å½“å¾—åˆ°ä¸€æ¡æœ€è¿‘çš„æŒ‡ä»¤æ˜¯å¦è·³è½¬çš„æ—¶å€™ï¼Œå°±è¿›è¡Œç§»ä½å¹¶å¡«å……0è¡¨ç¤ºnot-taken æˆ–è€… 1è¡¨ç¤ºtaken\n\n\nnï¼š ä½¿ç”¨n-bitæ¥é¢„æµ‹å½“å‰æŒ‡ä»¤æ˜¯å¦è·³è½¬\nåˆ†æ”¯é¢„æµ‹ç¼“å†²åŒºï¼šä¸€ä¸ªè®°å½•åˆ†æ”¯è·³è½¬å†å²çš„bufferï¼Œä½¿ç”¨ä¸Šè¿°çš„m-bit global history + æŒ‡ä»¤çš„ä½ä½è¿›è¡Œindexï¼Œæ¯ä¸€è¡Œéƒ½å¯¹åº”äº†æŒ‡å®šåˆ†æ”¯æŒ‡ä»¤çš„é¢„æµ‹å™¨\n\n\n\né¢„æµ‹å™¨å¤§å°çš„è®¡ç®—å®é™…çš„ç¡¬ä»¶ç»„æˆï¼š\n\n\nå¯¹åº”çš„å¤§å°è®¡ç®—ï¼š\n\n\nå…¶ä»–é¢„æµ‹å™¨\nTournament predictorï¼šä¸ºäº†é¿å…PCä½ä½çš„ç›¸åŒå¹²æ‰°, é‡‡ç”¨ global å’Œ localä¸¤ä¸ªé¢„æµ‹å™¨ï¼Œä½†æ˜¯åŒºåˆ«äºä¸Šè¿°çš„é¢„æµ‹å™¨ï¼Œæ­¤å¤„äºŒè€…é‡‡å–æˆ–å¾—åˆ°å¯¹åº”çš„é¢„æµ‹å™¨\nTODOï¼šè¯¾ä»¶3.2çš„sizeè®¡ç®—\n\n\nGshareé¢„æµ‹å™¨ï¼šå°†PCä½ä½å’Œå†å²è®°å½•è¿›è¡Œå¼‚æˆ–, ä»è€Œè¿›è¡Œé€‰æ‹©\n\nBTBbranch target buffer ï½œ åˆ†æ”¯ç›®æ ‡ç¼“å†²åŒº\n\n\n\nè®°å½•åˆ†æ”¯æŒ‡ä»¤é¢„æµ‹çš„è·³è½¬åœ°å€\nåˆ©ç”¨æŒ‡ä»¤åœ°å€indexï¼Œå¦‚æœåœ¨BTBä¸­æ‰¾åˆ°äº†å°±å–å‡ºé¢„æµ‹åœ°å€å¹¶æ‰§è¡Œ\nif branch takenï¼Œç…§å¸¸æ‰§è¡Œï¼Œæ²¡æœ‰stall\nif not takenï¼Œå°†fetchçš„ins.æ¸…ç©ºï¼Œå¹¶ä¸”å°†é¢„æµ‹é”™è¯¯çš„entryä»BTBä¸­åˆ é™¤\n\n\nåŒç†ï¼Œå¦‚æœä¸€å¼€å§‹æ²¡æœ‰åœ¨BTBä¸­indexæ‰¾åˆ°å¯¹åº”æŒ‡ä»¤çš„entryï¼Œå¹¶ä¸”ç»“æœæ˜¾ç¤ºæŒ‡ä»¤éœ€è¦è·³è½¬ï¼Œå°±åœ¨BTBä¸­åŠ å…¥è¿™ä¸€å¯¹çš„entryç”¨äºä¹‹åçš„å¿«é€Ÿé¢„æµ‹\n\n\n\nIntegrated Instruction Fetch Unitséšç€CPIé™ä½ï¼Œå–å€å•å…ƒå¯èƒ½æˆä¸ºç“¶é¢ˆ\nå› æ­¤ï¼Œè€ƒè™‘å°†fetch unitä¸åˆ†æ”¯é¢„æµ‹å™¨ã€æŒ‡ä»¤é¢„å–å™¨ä»¥åŠæŒ‡ä»¤çš„bufferç›¸é›†æˆ\nReturn Address Predictorsé¢„æµ‹ç›®æ ‡åœ°å€åœ¨è¿è¡Œæ—¶å˜åŒ–çš„é—´æ¥è·³è½¬çš„æŠ€æœ¯ã€‚\nå°†è¿”å›åœ°å€è®°å½•åœ¨ç±»ä¼¼äºæ ˆçš„bufferä¸­ï¼Œé¿å…åˆ°å†…å­˜ä¸­å–è¿”å›åœ°å€ï¼ŒåŠ é€Ÿå‡½æ•°çš„è¿”å›\nåˆ†æ”¯é¢„æµ‹æŠ€æœ¯æ€»ç»“\n\n\nCH4  DLPFlynnæ ‡å‡†åˆ†ç±»\n\n\nLLPæ—¶çš„ä¾èµ–æ£€æŸ¥ï¼šå…³æ³¨æ˜¯å¦åœ¨åŒä¸€å±‚è¯»å–äº†å…¶ä»–å±‚å†™å…¥çš„ç»“æœ\nå¯ä»¥ä½¿ç”¨æœ¬å±‚ä¸­ä¸²è¡Œè®¡ç®—çš„ç»“æœ\n\n\nreductions\n\nRenameæ¥è§£é™¤ä¾èµ–\n\n\næ ¹æ®é¢˜ç›®æ‰¾åˆ°å¯¹åº”çš„ä¾èµ–ï¼Œç„¶åæ®æ­¤renameå¯„å­˜å™¨\n\n\nStrip Mining æ¡å¸¦æŒ–æ˜MVLæŒ‡çš„æ˜¯å‘é‡å¤„ç†å™¨ä¸­å¯„å­˜å™¨æœ€å¤šçš„å­—é•¿.\nå½“ç”¨æˆ·å®é™…çš„å¤„ç†é•¿åº¦è¶…è¿‡MVLæ—¶, è¿›è¡Œå–æ¨¡, é¦–å…ˆç”¨æ ‡é‡å¤„ç†ä½™æ•°, ç„¶åç”¨å‘é‡è®¡ç®—å‰©ä½™çš„éƒ¨åˆ†.\nä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š\n\n\nå‘é‡æœºçš„é—®é¢˜\néœ€è¦ set-up æ—¶é—´;\nå†…å­˜çš„è®¿é—®å¸¦å®½ä¼šå½±å“å‘é‡æœºçš„æ€§èƒ½\n\næå‡å‘é‡æœºçš„è¡¨ç°convoy:\n\nå¯ä»¥å¹¶è¡Œçš„å‘é‡è®¡ç®—æŒ‡ä»¤çš„é›†åˆ\nä¸å­˜åœ¨ç»“æ„å†²çª\nå¯ä»¥é€šè¿‡vector chainæ¥è§£å†³RAWå†²çª\n\nchime  ï¼šthe unit of time taken to execute one convey\nVector Chainingè§£å†³äº†RAWçš„å†²çª.\n\n\nå®é™…ç­‰ä»·äºæµæ°´çº¿çš„ forwarding. ä¸åŒçš„æ˜¯å‘é‡æœºæ˜¯å¯¹å‘é‡çš„æ‰“åŒ…è®¡ç®—.\nConditional Executionä¸ºäº†å¤„ç† if è¯­å¥çš„ä¼˜åŒ–.\nforï¼ˆI=0ï¼› I&lt;N; I++ï¼‰\tif ï¼ˆA[Iï¼½ï¼= Bï¼»Iï¼½ï¼‰ Aï¼»Iï¼½ -= Bï¼»I]ï¼›\n\n\n\nV0å°±æ˜¯å…¶ä¸­çš„æ ‡å¿—å¯„å­˜å™¨.\næ ¹æ®æ ‡å¿—ä½, é€‰æ‹©éœ€è¦çš„ä½è¿›è¡Œè®¡ç®—(å‹ç¼©), ç„¶åå°†å…¶æ‰©å±•æˆå®Œæ•´çš„å‘é‡.\n\n\nsparce matricesä¸ºäº†è§£å†³çŸ©é˜µä¹˜æ³•ä¸­å¤ªå¤š0çš„é—®é¢˜.\næ¶‰åŠåˆ° Vector Scatter/Gather çš„æ–¹æ³•, å®é™…å°±æ˜¯ä¸è¿ç»­çš„è®¿å­˜æ“ä½œ.\ngatherï¼šä»ä¸è¿ç»­çš„åœ°å€è¯»å–å¹¶åŠ è½½åˆ°ä¸€ä¸ªå‘é‡å¯„å­˜å™¨ä¸­\nfor (i=0; i&lt;N; i++)    A[i] = B[i] + C[D[i]]\n\n\nå¯¹åº”çš„æŒ‡ä»¤: (LVI)\n\nLV\t\t\tVD, RD        ; Load indices in D vectorLVI\tVC,(RC, VD)   ; Load indirect from RC baseLV \tVB, RB\t  ; Load B vectorADDV.D \tVA, VB, VC\t  ; Do addSV \tVA, RA\t  ; Store result\n\nscatterï¼šå°†ä¸€ä¸ªå‘é‡å¯„å­˜å™¨ä¸­çš„æ•°æ®å†™å…¥åˆ°ä¸è¿ç»­çš„åœ°å€ä¸­\nfor (i=0; i&lt;N; i++)    A[B[i]]++;\n\n\nå¯¹åº”çš„æŒ‡ä»¤:ï¼ˆSVIï¼‰\n\nLV \tVB, RB      ; Load indices in B vectorLVI \tVA,(RA, VB) ; Gather initial A valuesADDV \tVA, RA, 1\t; IncrementSVI \tVA,(RA, VB) ; Scatter incremented values\n\nMulti-lane ImplementationåŒä¸€ä¸ªå‘é‡æŒ‡ä»¤çš„ä¸åŒåˆ†é‡ï¼Œå¯ä»¥åœ¨ä¸åŒçš„laneä¸Šæ‰§è¡Œ\n\nä¸åŒçš„laneä¹‹é—´ä¸èƒ½å­˜åœ¨æ•°æ®å†²çª\n\nåœ¨å¤šä¸ªFUçš„æµæ°´çº¿ä¸­ä¼˜åŒ–:\n\n\nChain &amp; Multiple Laneå¯ä»¥å°†ä¸Šè¿°çš„æ€è·¯å’Œchainç›¸ç»“åˆ.\nå‘é‡æœºé€šè¿‡å±•å¼€, å‡å°‘äº†æ¡ä»¶åˆ¤æ–­ç­‰æŒ‡ä»¤æ¥å‡å°‘äº†æŒ‡ä»¤æ•°.\n\næ“ä½œæ•°æŒ‡çš„æ˜¯æ¶‰åŠçš„è¿ç®—ä¸ªæ•°(æ¯”å¦‚ä¸€æ¡å‘é‡è®¡ç®—æ¶‰åŠ512ä¸ªæ“ä½œæ•°, ä½†æ˜¯æŒ‡ä»¤æ•°æ˜¯1).\n\nç¼–è¯‘å™¨å’Œç”¨æˆ·å¯ä»¥äº’ç›¸æç¤ºæ•°ç»„æ˜¯å¦å¯ä»¥å‘é‡åŒ–.\nSIMD: single instruction multiple data\nGPUGraphical Processing Units.\né‡‡å– SIMT: Single Instruction Multiple Thread.\n\næ¯ä¸ªçº¿ç¨‹è´Ÿè´£ä¸€æ¡æŒ‡ä»¤çš„éƒ¨åˆ†è®¡ç®—.\n\nthread =&gt; block =&gt; grid\nä¸å‘é‡æœºçš„ä¸»è¦åŒºåˆ«\nä¸å­˜åœ¨æ ‡é‡å¤„ç†å™¨\nä½¿ç”¨å¤šçº¿ç¨‹è§£å†³å†…å­˜è®¿é—®çš„å»¶è¿Ÿ\nå‘é‡æœºé€šè¿‡bankæ‰©å¤§å†…å­˜è®¿é—®çš„å¸¦å®½\n\n\nå…·æœ‰å¾ˆå¤šçš„function units (ç±»ä¼¼äºå…·æœ‰å¾ˆå¤šå°çš„å¤„ç†å™¨.)\n\næœ¯è¯­warp\n\n32 threads ==&gt; warp / SIMD thread\nå¿…é¡»æ‰§è¡Œç›¸åŒçš„æŒ‡ä»¤.\nwarpä¹‹é—´ä¸å­˜åœ¨æ•°æ®ä¾èµ–.\n\n\n\nPTX\nå¯¹åº”çš„æœºå™¨æ±‡ç¼–.\npredicate register\nè°“è¯å¯„å­˜å™¨, ç±»ä¼¼äºå‘é‡æœºä¸­çš„æ ‡é‡å¯„å­˜å™¨.\nMEMå±‚æ¬¡\nprivate memory\nlocal memory: 1ä¸ªblockå†…éƒ¨å…±äº«\nGPU memory: å…¬å…±.\n\nå¾ªç¯çº§åˆ«çš„å¹¶è¡Œæœ‰çš„å¾ªç¯é—´çš„æ•°æ®ä¾èµ–å¯ä»¥è¢«æ¶ˆé™¤:\nfor (i=0; i&lt;100; i=i+1) {  A[i] = A[i] + B[i]; /* S1 */  B[i+1] = C[i] + D[i]; /* S2 */}\n\nå–å‡ºé¦–å°¾çš„ä¸¤æ¡æŒ‡ä»¤ï¼Œæ”¹å†™:\nA[0] = A[0] + B[0];for (i=0; i&lt;99; i=i+1) {  B[i+1] = C[i] + D[i];  A[i+1] = A[i+1] + B[i+1];}B[100] = C[99] + D[99];\n\nå¯»æ‰¾å¾ªç¯ä¾èµ–\n\nä¸åŒçš„è¿­ä»£ä¸­, å­˜åœ¨è¯»å–å’Œå­˜å‚¨çš„åœ°å€ç›¸åŒçš„æƒ…å†µ ==&gt; å­˜åœ¨å¾ªç¯ä¾èµ–.\n\nè®¡ç®—æ–¹å¼: If a dependency exists, GCD(c,a) must evenly divide (d-b)\né€šè¿‡æšä¸¾  æ¥åˆ¤æ–­æ˜¯å¦å­˜åœ¨å†²çªï¼Œæœ¬è´¨ä¸Šå°±æ˜¯å›¾ç¤ºçš„å…¬å¼æ˜¯å¦æˆç«‹\n\nå¯ä»¥é€šè¿‡å˜é‡çš„é‡å‘½åæ¥è§£å†³WAWç­‰å†²çª.\n\n\nCH5 TLPå…¶ä»–æ¦‚å¿µ\nNUMAåˆå«distributed shared-memory multiprocessor (DSM / DSP)\nUMAåˆè¢«å«åš symmetric multiprocessors (SMP)  or  centralized shared-memory multiprocessors\n\næ¦‚å¿µåŒºåˆ†\ncoherenceï¼šè§„å®šäº†é’ˆå¯¹åŒä¸€å†…å­˜åœ°å€è¯»å†™æ“ä½œçš„è¡Œä¸º\nconsistencyï¼šå®šä¹‰äº†æ¶‰åŠä¸åŒå†…å­˜åœ°å€è®¿é—®æ—¶çš„è¯»å†™é¡ºåºè¡Œä¸º\n\n\n\nç¡¬ä»¶åŸè¯­\nexch ç”¨äºå°†å¯„å­˜å™¨çš„å€¼ä¸å†…å­˜åœ°å€ä¸­çš„å€¼äº¤æ¢\nè¯¥æ“ä½œæ˜¯åŸå­æ€§çš„ï¼Œä¸€æ¬¡æ€§å®Œæˆè¯»å–æ—§å€¼å’Œå†™å…¥æ–°å€¼çš„æ“ä½œ\n\n\n\nlrä¸sc\nè¡¥å……è¿™éƒ¨åˆ†çš„æŒ‡ä»¤ä»‹ç»ï¼Œæ–¹ä¾¿åç»­ç›¸å…³æ±‡ç¼–çš„ç†è§£\n\nLoad-Reservedï¼ˆåŠ è½½ä¿ç•™ï¼‰\n\nåŠ è½½ä¹‹ååœ¨ç¡¬ä»¶å±‚é¢é¢„ç•™äº†è¿™ä¸ªå†…å­˜åœ°å€ï¼Œè¡¨ç¤ºæœ‰å‘å…¶å†™å…¥çš„æ„å›¾ï¼Œç”¨äºåç»­çš„scæŒ‡ä»¤æ˜¯å¦å…è®¸å†™å…¥\nlr ä¸ llä¹Ÿå°±æ˜¯ load linked æœ¬è´¨ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡åè€…æ˜¯MIPSæ¶æ„ä¸­çš„æŒ‡ä»¤åç§°ï¼Œéƒ½æ˜¯åŠ è½½å¹¶é¢„ç•™çš„åŸå­æŒ‡ä»¤\n\nStore-Conditionalï¼ˆæ¡ä»¶å­˜å‚¨ï¼‰\n\nå°è¯•å°†å€¼å†™å…¥åˆ°å†…å­˜åœ°å€ï¼›\nåªæœ‰åœ¨ä¹‹å‰å¯¹è¯¥åœ°å€æœ‰æˆåŠŸçš„lré¢„ç•™ ä¸” æœªè¢«å…¶ä»–å¤„ç†å™¨å¹²æ‰°çš„æƒ…å†µä¸‹ï¼Œæ‰èƒ½æˆåŠŸå†™å…¥\nå…·æœ‰è¿”å›å€¼ï¼š\nå¦‚æœå¤±è´¥ï¼šè¿”å›0\nå¦‚æœæˆåŠŸè¿”å›é0\n\n\n\n\n\nlrä¸scçš„åŸå­æ€§æ“ä½œåº”ç”¨\n\n\nNoteï¼šOnly Regitser-Register instruction can be insert between LL &amp; SC\n\nè‡ªæ—‹é”spin lockæŒ‡çš„æ˜¯ç¨‹åºé™·å…¥äº†ä¸æ–­å°è¯•è·å¾—lockçš„loop\nä¸€ä¸ªç®€å•çš„ç‰ˆæœ¬\nli R2, #1lockit: exch R2, 0(R1)bnez R2, lockit\n\n\nR1æ‰€å¯¹åº”çš„å†…å­˜åœ°å€ä¿å­˜äº†é”æ˜¯å¦ä¸ºç©ºé—²çš„ä¿¡æ¯ï¼Œ0 è¡¨ç¤º freeï¼Œ 1è¡¨ç¤ºè¢«å ç”¨\nä¸Šè¿°ç‰ˆæœ¬å°†1åŠ è½½åˆ°R2ï¼Œå¹¶ä¸æ–­å°è¯•å°†å®ƒçš„å€¼ä¸R1å¯¹åº”çš„å†…å­˜åœ°å€çš„å€¼äº¤æ¢\nå¦‚æœé”æ­£åœ¨è¢«å ç”¨ï¼ŒR2è¿˜æ˜¯1ï¼Œå› æ­¤ä¼šä¸æ–­é™·å…¥lockitçš„å¾ªç¯ï¼Œç›´åˆ°æŸæ¬¡çš„loopæˆåŠŸåŠ é”ï¼ˆR2è¢«äº¤æ¢ä¸º0ï¼‰ï¼Œç„¶åç»§ç»­æ‰§è¡Œ\n\nä¸Šè¿°çš„é—®é¢˜æ˜¯ï¼Œä¸æ–­å°è¯• exchæ¶‰åŠåˆ°äº†å¤šæ¬¡çš„è¯»å†™æ“ä½œï¼Œä¼šå¸¦æ¥æ€»çº¿ä¸Šçš„invalidateä¿¡å·çš„traffic\nå› æ­¤ï¼Œæˆ‘ä»¬è€ƒè™‘é‡‡å–ä¸‹é¢çš„ä¼˜åŒ–æ–¹æ¡ˆ\nä¼˜åŒ–çš„ç‰ˆæœ¬\nlockit: ld x2,0(x1)         ; load of lock        bnez x2,lockit      ; not available-spin        addi x2,R0,#1       ; load locked value        EXCH x2,0(x1)       ; swap        bnez x2,lockit      ; branch if lock wasnâ€™t 0\n\n\nç›¸æ¯”äºç®€å•ç‰ˆæœ¬çš„åå¤exchï¼Œä¼˜åŒ–ä¹‹åçš„loopé‡Œåªæ¶‰åŠåˆ°äº†è¯»æ“ä½œï¼Œå› æ­¤å¯¹ç¨‹åºçš„è¡¨ç°æ›´åŠ å‹å¥½\n\nä½¿ç”¨ exchçš„æŒ‡ä»¤ç”±äºè¯»å†™åˆä¸€ï¼Œæ“ä½œä¸çµæ´»ï¼Œæˆ‘ä»¬è€ƒè™‘å°†è¯»å†™åˆ©ç”¨åŒæ ·æ˜¯åŸå­æ€§æŒ‡ä»¤çš„ llå’Œ scæ¥åˆ†ç¦»ï¼Œå®ç°ç­‰ä»·çš„æ•ˆæœï¼š\né‡‡å–LLå’ŒSCå®ç°ï¼š\nlockit: lr x2,0(x1)         ; load reserved        bnez x2,lockit      ; not available-spin        addi x2,R0,#1       ; locked value        sc x2,0(x1)         ; store ï¼ˆæˆåŠŸå†™å…¥/åŠ é” è¿”å›0ï¼‰        bnez x2,lockit      ; branch if store fails\n\n\nå› ä¸ºlrã€scå’Œexchä¸€æ ·ï¼Œä¹Ÿæ˜¯åŸå­æ€§æ“ä½œï¼Œç¡®ä¿äº†â€œæ£€æŸ¥é”æ˜¯å¦å¯ä»¥ç”¨â€å’Œâ€œè®¾ç½®é”â€ä¸ä¼šè¢«å…¶ä»–çº¿ç¨‹æ‰“æ–­ï¼›\nä¸åŒçš„æ˜¯ï¼Œexché€šè¿‡äº¤æ¢ä¹‹åçš„å¯„å­˜å™¨å€¼æ¥åˆ¤æ–­æ˜¯å¦åŠ é”æˆåŠŸï¼Œè€Œscåˆ©ç”¨è‡ªèº«æ“ä½œçš„è¿”å›å€¼æ¥åˆ¤æ–­æ˜¯å¦æˆåŠŸåŠ é”\n\nè‡ªæ—‹é”çš„æ€§èƒ½åˆ†æ\n\n\nTODO\n\nSnoopyä¸¤ç§è½¬æ¢è§„åˆ™ï¼š\n\nä¸€å®šè¦è½¬æ¢æˆ S çŠ¶æ€å†readï¼ˆé™¤äº†è‡ªå·±readè‡ªå·±çš„hitï¼‰ï¼›\n\nä¸€å®šè¦è½¬æ¢æˆ E / M çŠ¶æ€å†write\n\nP1å†™å…¥Xçš„æ–°å€¼ä¹‹åï¼Œéœ€è¦ç¡®ä¿å…¶ä»–å¤„ç†å™¨çŸ¥é“å˜åŒ–ï¼Œåˆ†ä¸ºä¸¤ç§ç­–ç•¥ï¼š\n\nWrite Invalidateï¼šå°†å…¶ä»–Pçš„å‰¯æœ¬ç½®ä¸ºæ— æ•ˆï¼ˆæ­é…å†™ç©¿é€ï¼‰\nä½†æ˜¯ä¹Ÿé€‚åˆå†™å›ç­–ç•¥æ­é…ï¼Œæ³¨æ„dirtyä½çš„ä½¿ç”¨\n\n\nWrite Broadcastï¼šå°†å…¶ä»–çš„å‰¯æœ¬ç›´æ¥å†™å…¥æ–°å€¼ï¼ˆæ­é…å†™å›ç­–ç•¥ï¼‰\n\n\n\nä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼›\n\n\n\næ³¨æ„æ­¤æ—¶busä¿¡å·çš„æ¡¥æ¢ä½œç”¨ï¼š\nå‘ç”Ÿäº†read missä¹‹åï¼Œé¦–å…ˆå°†P2çš„å¯¹åº”cache lineè®¾ç½®ä¸ºshareçŠ¶æ€ï¼ˆæ­¤æ—¶è¿˜ä¸çŸ¥é“å€¼ï¼‰\næ€»çº¿ä¿¡å·ä¼ åˆ°P1ä¹‹åï¼ŒP1çš„å¯¹åº”çŠ¶æ€ä¿®æ”¹ä¸ºshareï¼Œå¹¶ä¸”å‘èµ·äº†write backçš„ä¿¡å·ï¼Œå°†A1çš„å€¼å†™å…¥mem\nä¹‹åï¼Œæ€»çº¿ä¿¡å·read dataè®©P2è¯»å–äº†memä¸­çš„å€¼ï¼Œå®Œæˆäº† P2ï¼šread A1çš„æ“ä½œ\n\n\n\næ¯ä¸€ä¸ªå¤„ç†å™¨/çº¿ç¨‹å¯¹æ¯ä¸€ä¸ªblockå…·æœ‰è‡ªå·±çš„çŠ¶æ€\nçŠ¶æ€æœº\n\n\nå¤„äºEçŠ¶æ€æ—¶ï¼Œå¦‚æœæ”¶åˆ°äº†busä¸Šçš„read-missä¿¡å·ï¼Œä¼šå°†è¯¥Pæ”¹ä¸ºSçŠ¶æ€\n\n\n\nDirectory\nlocal node  å‘èµ·è¯·æ±‚çš„å¤„ç†å™¨\nhome node  å¯¹åº”åœ°å€æ‰€åœ¨çš„å¤„ç†å™¨\nremote node æ‹¥æœ‰è¿™ä¸ªå‰¯æœ¬çš„å¤„ç†å™¨\n\nåœ¨homeNodeä¸­å­˜å‚¨ä¸€ä¸ªblockåœ¨ä¸åŒå¤„ç†å™¨/çº¿ç¨‹ä¸­çš„çŠ¶æ€\n\n\n\nå…¶ä¸­çš„ fetch/invalidateå‘ç”Ÿåœ¨ï¼šlocalå‘ç”Ÿäº†write missï¼Œå¹¶ä¸”homeä¸­å¯¹åº”çš„blockä¸ºEçŠ¶æ€ï¼Œå‘ç‹¬å è¯¥blockçš„På‘é€ï½ä¿¡å·ï¼Œç¡®ä¿å°†ä»…åœ¨å¯¹åº”Pä¸­çš„æ•°æ®è¯»å–å†éæ³•åŒ–ï¼ˆå†…å­˜ä¸­æ•°æ®è¿‡æ—¶ï¼‰\n\nè¯»å–ä¹‹åçš„æ•°æ®å…ˆå­˜æ”¾åœ¨äº†homeä¸­ï¼Œç„¶åå†ç”±homeå‘é€data replyç»™localï¼ˆä¸€èˆ¬æ¥è¯´localå†™å…¥äº†æ–°å€¼ï¼Œå¹¶ä¸éœ€è¦è¿™ä¸ªæ—§å€¼ï¼›ä½†æ˜¯å¦‚æœå†™å…¥çš„æ–°å€¼æ˜¯ X+1ï¼Œå°±å¿…é¡»è·å¾—æ­£ç¡®çš„æ—§å€¼äº†ï¼Œå› æ­¤è¿˜æ˜¯æœ‰å¿…è¦çš„ï¼‰\n\n\nwrite missåˆå§‹ï¼š\n\n\nå†™å…¥ï¼š\n\n\nfetch/invalidateåˆå§‹ï¼š\n\n\nè¿‡ç¨‹ï¼š\n\n\n\nå¦‚æœç›®å½•èŠ‚ç‚¹ä¸­è®°å½•çš„çŠ¶æ€æ˜¯Eï¼Œå°±å‘å¯¹åº”çš„å¤„ç†å™¨å‘é€ fetchçš„ä¿¡å·\n\næ ¹æ®cacheå¡«å†™ç›®å½•\n\nå¯¹åº”çš„ç®€å•ä¾‹å­ï¼š\n\n\nå¦ä¸€ä¸ªè¯­è¨€æè¿°çš„ä¾‹å­ï¼ˆç­”æ¡ˆï¼‰ï¼š\n\n\n\n22-23å›å¿†å·çš„æœ€åä¸€é¢˜\n\ncacheå¤±æ•ˆé—®é¢˜På°†è‡ªå·±cacheä¸­çš„block kick outæ—¶ï¼Œéœ€è¦å°†å¯¹åº”çš„homeä¸­çš„sharerä¸­å°†Pè¸¢å‡ºåºåˆ—ï¼Œå¦‚æœåŸæœ¬ä»…æœ‰Pæœ¬èº«ï¼Œå°±éœ€è¦å°†å¯¹åº”çš„çŠ¶æ€æ”¹ä¸ºUï¼Œè¡¨ç¤ºuncached.\n\n\nMESI\nå¦‚æœæ²¡æœ‰ç‰¹åˆ«è¯´æ˜ï¼Œå°±å½“åšMSI\n\n\n\nçŠ¶æ€ï¼š\n\nInvalid: ç¼“å­˜å—æ— æ•ˆï¼Œä¸èƒ½è¢«ä½¿ç”¨ï¼›\nShared: ç¼“å­˜å—æœªè¢«ä¿®æ”¹ï¼Œä¸”å¯èƒ½å­˜åœ¨äºå¤šä¸ªç¼“å­˜ä¸­ï¼Œå†…å­˜ä¸­çš„æ•°æ®æ˜¯æœ€æ–°çš„ï¼›\nModified: ç¼“å­˜è¡Œå·²è¢«ä¿®æ”¹ï¼Œä¸”è¯¥ç¼“å­˜è¡Œæ˜¯å”¯ä¸€çš„æœ‰æ•ˆå‰¯æœ¬ï¼Œå†…å­˜ä¸­çš„æ•°æ®å·²è¿‡æ—¶ï¼›\nExclusiveï¼šç¼“å­˜å—æœªè¢«ä¿®æ”¹ï¼Œä¸”æ˜¯å”¯ä¸€çš„æœ‰æ•ˆå‰¯æœ¬ï¼Œå†…å­˜ä¸­çš„æ•°æ®æ˜¯æœ€æ–°çš„ã€‚\n\nEçš„å­˜åœ¨æ˜¯ä¸ºäº†ä¼˜åŒ–å†™å…¥æ€§èƒ½å’Œå‡å°‘æ€»çº¿æµé‡ï¼Œå…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬ç”¨Eæ¥åŒºåˆ†æŸä¸ªç¼“å­˜å—åªè¢«ä¸€ä¸ªå¤„ç†å™¨è¯»å–ä¸”è¿˜æ²¡æœ‰å†™å…¥çš„çŠ¶æ€ï¼Œæ˜¯ä¸ºäº†åœ¨æ­¤åè¯¥å¤„ç†å™¨å†™å…¥è¯¥ç¼“å­˜æ—¶ï¼Œä¸éœ€è¦åœ¨æ€»çº¿ä¸Šå‘é€Invalidateçš„ä¿¡å·ï¼ˆå› ä¸ºæ²¡æœ‰å…±äº«ç¼“å­˜çš„å…¶ä»–å¤„ç†å™¨ï¼‰\n\nå¦‚æœæ˜¯ä¼ ç»Ÿçš„MSIï¼Œå³ä½¿shareçš„æˆå‘˜åªæœ‰ä¸€ä¸ªï¼Œè¿˜æ˜¯è¦å‘é€ä¿¡å·åˆ°æ€»çº¿ï¼Œè¢«å…¶ä»–çš„å¤„ç†å™¨æ¥æ”¶å¹¶å¤„ç†ï¼Œè¿™å¸¦æ¥äº†é¢å¤–çš„æ—¶é—´å¼€é”€\n\nConsistencySequential consistencyç‰¹å¾ï¼šDelay next memory access until the previous one is completed.\n\nå¯¹æŒ‡ä»¤çš„æ‰§è¡Œæœ‰ç€ä¸¥æ ¼çš„é¡ºåºè¦æ±‚ï¼Œè™½ç„¶ä¿è¯äº†æ­£ç¡®æ€§ï¼Œä½†æ˜¯å»¶æ—¶è¾ƒé«˜\n\n\nç›¸åŒå¤„ç†å™¨å†…éƒ¨çš„å†…å­˜è®¿é—®æ˜¯æœ‰åºçš„\nä¸åŒå¤„ç†å™¨çš„å†…å­˜è®¿é—®æ˜¯äº¤é”™çš„\n\nè¯¾æœ¬çš„ä¾‹å­ï¼š\n\n\nç®€å•çš„è®¡ç®—ï¼š\n\n\nRelaxed Modelsä¸ºäº†é™ä½SCå¸¦æ¥çš„å»¶æ—¶ï¼Œæˆ‘ä»¬é‡‡å– Synchronized program æ¥è®©æŒ‡ä»¤çš„è¯»å†™åœ¨ä¹±åºæ‰§è¡Œä¸­ä¿æŒä¸ä¸²è¡Œæ‰§è¡Œç­‰ä»·çš„æ•ˆæœï¼Œä»¥ä¸‹æ˜¯ä¸åŒç­‰çº§çš„modelï¼š\n\n\n\nä¸‹æ–¹çš„é¡ºåºè¡¨ç¤ºè¯¥æ¨¡å‹åœ¨å‰è€…çš„åŸºç¡€ä¸Šå»é™¤äº†å¯¹åº”çš„é¡ºåºçº¦æŸï¼Œä½†æ˜¯è¦æ±‚è®¿é—®çš„å¯¹è±¡ä¸æ˜¯ç›¸åŒåœ°å€çš„\næ¯”å¦‚åœ¨TSOä¸­ï¼Œ C= ä½œä¸ºå†™æ“ä½œï¼Œå…è®¸å’Œ = D çš„è¯»æ“ä½œä¸€èµ·æ‰§è¡Œï¼Œè§£é™¤äº†W-Rçš„çº¦æŸ\n\njxhè€å¸ˆçš„PPT\né’ˆå¯¹æ ¸å¿ƒçš„è¡¥å……æ‘˜å½•\n\nTomasuloçš„ä¸‰ä¸ªä¸»è¦ä¼˜ç‚¹\n\nThe distribution of the hazard detection logic\nä¿ç•™ç«™å’ŒCDB\nå¦‚æœå¤šæ¡æŒ‡ä»¤åœ¨ç­‰å¾…ä¸€ä¸ªç»“æœ æˆ–è€… ä¸€æ¡æŒ‡ä»¤ç­‰å¾…å¤šä¸ªæ“ä½œæ•°ï¼Œå¯ä»¥åŒæ—¶é€šè¿‡CDBçš„å¹¿æ’­è¯»å–ï¼ˆé¿å…äº†é€šè¿‡å¯„å­˜å™¨è¯»å–ï¼‰\n\n\nThe elimination of stalls for WAW and WAR hazards\noverlap iterations of loopsï¼šå¾ªç¯è¿­ä»£çš„é‡å \nç›¸å½“äºä»HWï¼ˆç¡¬ä»¶ï¼‰ä¸Šå®ç°äº†å¾ªç¯å±•å¼€\n\n\n\n\nè®¡åˆ†æ¿æ— æ³•å®ç° overlap iterations of loops\n\nä¸ºä»€ä¹ˆTomasuloå¯ä»¥å®ç°å¾ªç¯è¿­ä»£çš„é‡å ï¼Ÿ\n\nå¯„å­˜å™¨é‡å‘½å\nä¿ç•™ç«™å…è®¸æŒ‡ä»¤çš„æå‰å‘å°„ä»¥åŠæ—§å€¼çš„å­˜å‚¨ï¼ˆé¿å…äº†WARå†²çªï¼‰\nTomasulo building data flow dependency graph on the fly.\n\nè®¡åˆ†æ¿é˜¶æ®µçš„å›é¡¾\n\nISSUEï¼šå½“ä¸‹é¢çš„æ¡ä»¶åŒæ—¶æ»¡è¶³æ—¶issueï¼š\nå…·æœ‰å¯ç”¨çš„åŠŸèƒ½å•å…ƒ\næ²¡æœ‰ä¸æ­£åœ¨æ‰§è¡Œçš„æŒ‡ä»¤å…·æœ‰ç›¸åŒçš„ç›®æ ‡å¯„å­˜å™¨\næ­¤æ—¶é¿å…äº†ç»“æ„å†²çªå’ŒWAWå†²çª\n\n\nROï¼šå½“ä¸¤ä¸ªæ“ä½œæ•°éƒ½å‡†å¤‡å¥½äº†çš„æ—¶å€™æ‰ä¼šè¯»å–\né¿å…äº†RAWçš„å†²çª\n\n\nEX\nWBï¼šæ­¤æ—¶æ£€æµ‹WARå†²çªå¹¶åœ¨å¿…è¦çš„æ—¶å€™stall\n\nè®¡åˆ†æ¿å’ŒTomasuloçš„å¯¹æ¯”\n\n\nTomasuloæ¶ˆé™¤äº†WAWä¸WARå†²çªï¼›æ²¡æœ‰æ˜¾å¼å¯„å­˜å™¨é‡å‘½åçš„è®¡åˆ†æ¿æ— æ³•æ¶ˆé™¤ï½\nOOOï¼šout of orderï¼Œæ­¤å¤„æŒ‡ä¹±åºå®Œæˆ\n\nCDBçš„é¢å¤–ä¿¡æ¯\n\n\nTODOï¼š ä¸ºä»€ä¹ˆéœ€è¦source addressï¼Ÿ\n\nä½¿å¾—CPI &lt; 1çš„å‡ ç§æ–¹æ³•\n\n\nå‘é‡å¤„ç†ï¼›è¶…æ ‡é‡ï¼›VLIW\n\nè¶…æ ‡é‡ä½¿ç”¨åŸºäºTomasuloçš„ç®—æ³•ï¼Œå¯ä»¥å®ç°ä¹±åºæ‰§è¡Œçš„åŠ¨æ€è°ƒåº¦\nIssue Packetï¼š\n\nä»fetch unitè·å¾—çš„æŒ‡ä»¤ç»„åˆï¼Œå¯ä»¥åœ¨ä¸€ä¸ªå‘¨æœŸå†…åŒæ—¶å‘å°„\nIssueé˜¶æ®µä¹Ÿè¢«æµæ°´çº¿åŒ–ï¼š\nç¬¬ä¸€ä¸ªé˜¶æ®µæ£€æŸ¥å½“å‰packetå¯ä»¥ä¸€æ¬¡æ€§å‘å°„çš„æŒ‡ä»¤æ•°ï¼ˆä¸å­˜åœ¨æ•°æ®å†²çªï¼‰ï¼›\nç¬¬äºŒä¸ªé˜¶æ®µæ£€æŸ¥ä¸Šä¸€æ­¥é€‰ä¸­çš„æŒ‡ä»¤æ˜¯å¦ä¸å·²ç»å‘å°„çš„æŒ‡ä»¤å­˜åœ¨å†²çª\n\n\n\n\nå¯¹äºN-issueçš„å¤šå‘å°„ï¼Œæ¯ä¸ªccå®é™…å‘å°„ 0-Næ¡æŒ‡ä»¤\n\nå¤šå‘å°„å­˜åœ¨çš„é—®é¢˜\n\nå¿…é¡»åœ¨ä¸€ä¸ªccå†…å¤šæ¬¡é‡å‘½åç›¸åŒçš„å¯„å­˜å™¨\n\n\n\n\næ‹“å®½æ€»çº¿\n\nä¸¤ç§å®ç°å¤šå‘å°„çš„æ–¹æ³•\n\n\n\npipeline\nwiden issue logic\n\nåŒå‘å°„çš„ä¾‹å­ä¸å¸¦æŠ•æœºæ‰§è¡Œçš„åŒå‘å°„ï¼š\n\n\nå¸¦æœ‰æŠ•æœºæ‰§è¡Œçš„åŒå‘å°„ï¼š\n\n\nWBä¸ISçš„å¹¶è¡Œæ‰§è¡Œ\n\n\nç„¶è€Œäº‹å®è¯æ˜å¾ˆå°‘ä¼šè€ƒè™‘è¿™ç§æƒ…å†µï¼Ÿé™¤éé¢˜ç›®æ˜ç¡®è¯´æ˜æˆ–è€…ç»™å‡ºå……åˆ†çš„æš—ç¤ºï¼Œå¦åˆ™è®¤ä¸ºè¿˜æ˜¯åœ¨ä¸‹ä¸€ä¸ªccæ‰èƒ½issueåˆ°åŸæœ¬å†²çªçš„FU\n\nGlobal code motionå…¨å±€ä»£ç è°ƒåº¦ï¼šé€šè¿‡è·¨åˆ†æ”¯ç§»åŠ¨æŒ‡ä»¤æ¥æœ‰æ•ˆåœ°è°ƒåº¦å¸¦æœ‰å†…éƒ¨æ§åˆ¶æµçš„å¾ªç¯ä½“ã€‚\nDRAMä¸SRAM\n\nå¤§é¢˜æ•´ç†CH1\nTODO\n\nCH2\ncacheç›¸å…³çš„è®¡ç®—é¢˜å‚è€ƒçŸ¥è¯†ç‚¹æ¢³ç†çš„ch2-cache performance\n\nGlobal / Local Miss Rate\n\nè¯¾æœ¬çš„ä¾‹é¢˜ï¼š\n\n\nåˆ†æï¼š\n\nL1çš„globalå’Œlocalç¼ºå¤±ç‡ç›¸ç­‰ï¼Œéƒ½æ˜¯ 40 / 1000\nL2çš„globalç¼ºå¤±ç‡ä¸º 20 / 1000ï¼Œ localç¼ºå¤±ç‡ä¸º 20 / 40\n\nAMATï¼š\n\n\nAverage stall cycles per instructionï¼š( AMAT - hit time ) x MPI = (5.4-1) x 1.5 = 6.6 cc\næ˜¯å¦æ»¡è¶³æ—¶é—´å’Œç©ºé—´å±€éƒ¨æ€§\n\nåˆ†æï¼šæ ¹æ®ç»™å‡ºçš„cacheå®¹é‡ã€ç»„å…³è”ç­‰ä¿¡æ¯è®¡ç®—blockçš„å¤§å°ï¼Œç„¶åæ¯”è¾ƒblockå¤§å°æ˜¯ä¸æ˜¯å¤§äºç³»ç»Ÿçš„å­—é•¿ï¼ˆå¦‚æœå°äºå°±ä¸æ»¡è¶³ç©ºé—´å±€éƒ¨æ€§ï¼‰\næ­¤å¤„è®¡ç®—å¾—åˆ°blockå¤§å°ä¸º 8KB / 4K = 2B  &lt; 4B\n\nä¼¼ä¹æœ‰cacheå°±ä¸€å®šæ»¡è¶³æ—¶é—´å±€éƒ¨æ€§ï¼Ÿå¦‚æœæŒ‰ç…§byteè®¿é—®çš„è¯ï¼Œèƒ½å¤Ÿå­˜å‚¨æŒ‡å®šçš„wordå°±å¯ä»¥ï¼Ÿ\n\ncacheä¸tagç»™å®šç‰©ç†åœ°å€çš„å®½åº¦ ï¼Œcacheçš„å®¹é‡å’Œç»„å…³è”åº¦å†³å®šäº†tagçš„ä½æ•°ï¼š\nå‡è®¾blockæ˜¯å­—èŠ‚çš„å¤§å°ï¼Œcacheçš„å®¹é‡æ˜¯B, ä¸ºç›´æ¥æ˜ å°„ï¼Œæ®æ­¤è®¡ç®—å¾—åˆ°ï¼š\n\nbyte offset bit = \nindex bit = \næ‰€ä»¥tagçš„ä½æ•°æ˜¯ï¼šåœ°å€ä½æ•°N - n\n\n\n\n\nè™šæ‹Ÿé¡µçš„å®¹é‡å’Œè™šæ‹Ÿåœ°å€çš„ä½å®½åœ¨æ­¤ä¸ºå¹²æ‰°ä¿¡æ¯ï¼›\nå¦‚æœä¸æ˜¯ç›´æ¥æ˜ å°„ï¼Œå°±å…ˆè®¡ç®—ä¸€ä¸ªsetçš„å®¹é‡ï¼Œç„¶åæ®æ­¤è®¡ç®—index\n\nå‡è®¾ç»„å…³è”åº¦æ˜¯  é‚£ä¹ˆï¼š\n\nindex bit = \nå¯¹åº”çš„tagä½æ•° = N - n + i\n\nç”±æ­¤å¯è§ï¼Œé¢˜ç›®ä¸­æ²¡æœ‰ç»™å‡ºçš„blockçš„å®¹é‡æ°å¥½æ˜¯ä¸éœ€è¦çš„è®¡ç®—é‡\ne.g. åŠ å…¥ç»„å…³è”ï¼šä¸€ä¸ª8-wayçš„ä¾‹å­\n\n\nCH3\nå»ºè®®å‚è€ƒè€å¸ˆçš„pptæ¨ä¸€éè®¡åˆ†æ¿å’ŒTomasuloçš„å¡«è¡¨ï¼Œç„¶åè®°ä½ä»€ä¹ˆæ—¶å€™è¦æ¨è¿Ÿä¸€ä¸ªccã€ä»€ä¹ˆæ—¶å€™å¯ä»¥ç›´æ¥æ‰§è¡Œ\n\nå»¶è¿Ÿä¸€ä¸ªccçš„æƒ…å†µ\nè®¡åˆ†æ¿å’ŒTomasuloå­˜åœ¨ç»“æ„å†²çªæ—¶ï¼Œä¸Šä¸€æ¡æŒ‡ä»¤WBä¹‹åçš„ä¸€ä¸ªccä¸‹ä¸€æ¡æŒ‡ä»¤Issue\nè®¡åˆ†æ¿å’ŒTomasuloçš„æŒ‡ä»¤éœ€è¦è¯»å–å¾…å†™å›çš„æ•°æ®æ—¶ï¼Œä¸Šä¸€æ¡æŒ‡ä»¤WBä¹‹åçš„ä¸‹ä¸€ä¸ªå‘¨æœŸåˆ†åˆ«è¿›å…¥RO / EX é˜¶æ®µ\n\nä½†æ˜¯Tomasuloçš„issueé˜Ÿåˆ—é‡Œå¯ä»¥ç›´æ¥åœ¨ä¸Šä¸€æ¡ç»“æŸçš„ccæ¥æ›¿æ‰§è¡Œä¸‹ä¸€æ¡çš„EXï¼š\n\n\nCH4\nrename ã€ string stripå’Œå¾ªç¯çº§åˆ«å¹¶è¡Œéƒ¨åˆ†çš„ä¾‹é¢˜è¯·å‚è€ƒçŸ¥è¯†ç‚¹æ¢³ç†éƒ¨åˆ†\n\nconvoyä¸chain\nè¯¦ç»†å†…å®¹å¯ä»¥å‚è€ƒè‹±æ–‡ç¬¬å…­ç‰ˆçš„p291\n\n\n\nå‚è€ƒè§£ç­”ï¼š\n\n\n\næ­¤å¤„å¿½ç•¥äº†å‘é‡æœºçš„set-upç­‰æ—¶é—´\n\nä¸‹é¢æ˜¯å›å¿†å·ï¼š\n\n\n\nå‚è€ƒç­”æ¡ˆï¼šä¸ªäººè§‚ç‚¹\n\nç¬¬ä¸€é—®ï¼š\n\næŒ‡ä»¤çš„æ‰§è¡Œæ—¶é—´åˆ†ä¸ºï¼šå–æŒ‡+å¯åŠ¨+å‘é‡é•¿åº¦ï¼Œ e.g. ç¬¬ä¸€æ¡vldä¸º 1+4+64 = 69\nä½†æ˜¯åç»­çš„æŒ‡ä»¤çš„å–æŒ‡å¯ä»¥åœ¨å‰ä¸€æ¡æŒ‡ä»¤æ‰§è¡ŒæœŸé—´å®Œæˆï¼Œå› æ­¤æ­¤å¤„çš„vaddå¯ä»¥åœ¨cc=69å¼€å§‹æ‰§è¡Œï¼š69 + 7+64 = 140cc\nåç»­æŒ‡ä»¤åŒç†åˆ†æ\nâ€¦.\n\nç¬¬äºŒé—®ï¼š3ï¼ˆvsdä¸vldå­˜åœ¨ç»“æ„å†²çªï¼‰\nç¬¬ä¸‰é—®ï¼š\n\nä¼°è®¡ï¼š3x64 + 3 + 7 + 10 + 4\nè€ƒè™‘äº†å–æŒ‡æ—¶é—´ä»¥åŠå„ä¸ªconvoyå†…éƒ¨æœ€é•¿çš„å¯åŠ¨æ—¶é—´\n\nblocked ä¸ unblockedHere is a blocked and unblocked version of C code to perform a matrix operation on a 256x256 matrix:\nfor (int i = 0; i &lt; 1024; i += 16) {    for (int j = 0; j &lt; 1024; j += 16) {        for (int m = 0; m &lt; 16; m++) {            for (int n = 0; n &lt; 16; n++) {                output[j + n][i + m] = input[i + m][j + n];            }        }    }}\n\nfor (int i = 0; i &lt; 1024; i++) {    for (int j = 0; j &lt; 1024; j++) {        output[j][i] = input[i][j];    }}\n\nSuppose the size of the element in the matrix is 32 bits and we execute the codes above on a processor with a 2KB fully associative data cache using the least recently used (LRU) replacement strategy. The cache block size is 64 bytes. What is the relative number of cache misses when running the blocked and unblocked version?\nA. 2 : 17\nB. 1 : 8\nC. 1 : 17\nD. 1 : 16\n\nA\nSOLUTIONï¼š\n\n\n\n\nä¹‹æ‰€ä»¥è¯´blocked versionä¸€è½®å¾ªç¯åªä¼šå‘ç”Ÿ32æ¬¡missï¼Œæ˜¯å› ä¸ºè®¡ç®—å¾—åˆ°è¿™ä¸ªcacheæ­£å¥½æœ‰32ä¸ªcache lineï¼Œå› æ­¤åœ¨å†…å±‚å¾ªç¯æ‰€éœ€çš„32ä¸ªblockéƒ½åªéœ€è¦è¯»å–ä¸€æ¬¡ï¼›\nå› æ­¤ï¼Œæˆ‘ä»¬é¦–å…ˆæ ¹æ®é¢˜ç›®ç»™å‡ºçš„cacheå®¹é‡å’Œblockä¿¡æ¯ï¼Œç®—å‡ºindexï¼›ç„¶åç»“åˆå…ƒç´ çš„å¤§å°è®¡ç®—å†…å±‚å¾ªç¯éœ€è¦çš„blockæ•°é‡ï¼Œæ£€æŸ¥æ˜¯å¦å¯ä»¥è¢«cacheå­˜æ”¾\n\nCH 5\nTODO: æ„Ÿè§‰è®°ä¸€ä¸‹ä¾‹é¢˜å°±å·®ä¸å¤šäº†ï¼ˆçŸ¥è¯†ç‚¹æ¢³ç†éƒ¨åˆ†ï¼‰\n\nå°è´´å£«\nprecise exceptionsï¼š\nå®šä¹‰ï¼šOn handling exceptions, if the pipeline can be stopped so that the instruction issued before the faulting instruction complete and those after it can be restarted\n\n\nè®¡åˆ†æ¿çš„WAWå†²çªæ£€æµ‹ï¼šScoreboard Algorithm issue a instruction when no other active instruction has the same destination register to avoid WAW hazard.\nå†™æ›´æ–°ä¹Ÿå°±æ˜¯å†™å¹¿æ’­ï¼Œä¸å†™å¤±æ•ˆæ„æˆäº†å¸¸ç”¨çš„å¤„ç†ç¼“å­˜ä¸ä¸€è‡´æ€§é—®é¢˜çš„ç­–ç•¥\n\nè¡¥å……å¸¸è§çš„CSRå¸¸è§çš„CSRæœ‰mstatus,mtvec,mepc,mcause,mtvalã€‚è¿™äº›å¯„å­˜å™¨éƒ½å±äºM modeï¼š\n\nmstatusï¼šæœºå™¨æ¨¡å¼ä¸‹çš„çŠ¶æ€å¯„å­˜å™¨ï¼ŒåŒ…å«å¼€å…³ä¸­æ–­çš„MIEã€ä¿å­˜è¿›å…¥å¼‚å¸¸ä¹‹å‰ç‰¹æƒæ¨¡å¼çš„MPPç­‰\nmtvecï¼šå‘ç”Ÿå¼‚å¸¸æ—¶è·³è½¬çš„PCå…¥å£ï¼›\nmepcï¼šå‘ç”Ÿå¼‚å¸¸æ—¶ï¼ŒæŒ‡å‘å¯¼è‡´å¼‚å¸¸çš„æŒ‡ä»¤ï¼›å‘ç”Ÿä¸­æ–­æ—¶ï¼ŒæŒ‡å‘ä¸­æ–­å¤„ç†ååº”è¯¥æ¢å¤çš„ä½ç½®ï¼›\nmcauseï¼šæ ¹æ®å¼‚å¸¸æ¥æºè®¾ç½®\nå¦‚æœæ˜¯è®¿é—®å­˜å‚¨å™¨é€ æˆçš„å¼‚å¸¸ï¼Œå°±å°†å…¶åœ°å€æ›´æ–°åˆ°mtvalï¼›\nå¦‚æœæ˜¯éæ³•æŒ‡ä»¤å¯¼è‡´çš„å¼‚å¸¸ï¼Œå°†æŒ‡ä»¤ç¼–ç æ›´æ–°åˆ°mtvalå¯„å­˜å™¨ä¸­\n\n\nmtvalï¼šåæ˜ å¼•èµ·å½“å‰å¼‚å¸¸çš„å­˜å‚¨å™¨è®¿é—®åœ°å€æˆ–è€…æŒ‡ä»¤ç¼–ç \n\nVIPT\nVirtual Indexed and Physically Tagged Cache\n\nä¹Ÿå°±æ˜¯ä»VAä¸­æå–ä½ä½ä½œä¸ºå®é™…ç‰©ç†åœ°å€å¯¹åº”çš„indexï¼Œç”¨VAçš„é«˜ä½åœ¨TLBä¸­æŸ¥è¯¢å¾—åˆ°ç‰©ç†åœ°å€ï¼Œç„¶åç”¨ç‰©ç†åœ°å€ä¸­çš„tagè¿›è¡Œæ¯”è¾ƒã€‚è¿™ä¸¤ä¸ªæ­¥éª¤åˆ†åˆ«ç§°ä¸º ç¼“å­˜æŸ¥æ‰¾å’Œåœ°å€ç¿»è¯‘ ï¼Œå¯å¹¶è¡Œæ‰§è¡Œ\nè¿™æ ·åšæ˜¯ä¸ºäº†æ¶ˆé™¤åŒä¹‰è¯é—®é¢˜ï¼š\n\nå¦‚æœé‡‡å–å®Œå…¨çš„è™šæ‹Ÿåœ°å€å¯»å€VIVTï¼Œä¸€ä¸ªç‰©ç†åœ°å€å¯èƒ½å¯¹åº”ä¸åŒçš„è™šæ‹Ÿåœ°å€ï¼Œä»è€Œå¯¼è‡´å…¶å…·æœ‰äº†å¤šä»½çš„æ‹·è´ï¼Œå¸¦æ¥äº†æ•°æ®çš„ä¸ä¸€è‡´æ€§çš„é—®é¢˜\n\nå†™å¤±æ•ˆçš„å†²çªå†™\n\nå¸¦æœ‰æŠ•æœºçš„store\n\nç”±äºå¸¦æœ‰æŠ•æœºçš„Tomasuloåœ¨commitä¹‹å‰éƒ½ä¸ä¼šå®é™…æ›´æ–°å¯„å­˜å™¨æˆ–è€…memï¼Œæ‰€ä»¥ storeæŒ‡ä»¤åœ¨æ­¤ä¹‹å‰ä¸ä¼šå®é™…å‘å†…å­˜ä¸­å†™å…¥æ•°æ®ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨å…¶åœ°å€ç›¸å…³å¯„å­˜å™¨å‡†å¤‡å¥½çš„æ—¶å€™å°±è¿›å…¥Exeé˜¶æ®µï¼ˆåœ°å€è®¡ç®—ï¼‰\n\nå®é™…ä¸Šï¼Œä¸å¸¦æŠ•æœºçš„storeä¹Ÿæ˜¯è¿™æ ·ï¼ˆå‚è§ä¸‹é¢â€œå¤šå‘å°„çš„ä¾‹å­â€ä¸­çš„æ ‡æ³¨ï¼‰\n\nç›¸åº”çš„ï¼Œå½“ storeæŒ‡ä»¤ç»“æŸwrite resultçš„æ—¶å€™å¦‚æœæ­¤æ—¶è¿˜æ²¡æœ‰å‡†å¤‡å¥½æºå¯„å­˜å™¨çš„å€¼ï¼Œå°±ä¼šåœ¨ROBä¸­è®°å½•ï¼ˆå¯¹åº”æŒ‡ä»¤çš„ROBç¼–å·ï¼‰ï¼Œå¹¶åœ¨å¯¹åº”æŒ‡ä»¤å®Œæˆåå‡†å¤‡å¥½commit\n\nç”±äºæ¯æ¡æŒ‡ä»¤éƒ½åªåœ¨ROBæœ‰ç©ºä½çš„æ—¶å€™issueï¼Œå› æ­¤æˆ‘ä»¬ç”¨ROBç¼–å·æ¥æ ‡è®°æ¯ä¸€æ¡æŒ‡ä»¤ï¼ˆç”¨äºæ•°æ®å†²çªæ—¶ç­‰æƒ…å†µï¼‰\n\nå¤šå‘å°„çš„ä¾‹å­\n\nä½œä¸šå¤ç›˜HW1\nèµ„æºå æ¯”ç­‰ä»·äºæ‰€éœ€çš„æ—¶é—´ï¼Œå¯å¹¶è¡ŒåŒ–ç¨‹åº¦æ„å‘³ç€é‡‡å–å¤šæ ¸å¤„ç†çš„æ—¶å€™ï¼Œæœ‰å¤šå°‘çš„æ¯”ä¾‹å¯ä»¥å‚ä¸ä¼˜åŒ–ï¼›\nåˆ©ç”¨èµ„æºå æ¯”åˆ†é…æ ¸æ•°ï¼Œåº”å½“å‘ä¸‹å–æ•´ï¼Œé¿å…æ•´ä½“çš„æ ¸æ•°è¶…å‡ºæ€»æ ¸æ•°\nè®¡ç®—æ•´ä½“åŠ é€Ÿæ¯”çš„æ—¶å€™ï¼Œå…ˆåˆ†åˆ«è®¡ç®—å¯¹åº”çš„æ—¶é—´ï¼Œç„¶ååˆ©ç”¨å¹¶è¡Œå‰åçš„æ€»æ—¶é—´æ¥è®¡ç®—åŠ é€Ÿæ¯”\nç”±æ­¤è®¡ç®—å¾—å‡ºçš„æ€»æ—¶é—´ï¼Œå¯ä»¥ç”¨äºé‡æ–°åˆ†é…æ‰€éœ€çš„è®¡ç®—èµ„æº\n\n\n\nHW2åŠŸè€—è®¡ç®—\n\nansï¼š\n\n\n\næ³¨æ„åˆ†åˆ«è®¡ç®—é™æ€åŠŸè€—å’Œè®¿é—®åŠŸè€—ï¼Œå‰è€…éœ€è¦å…ˆè®¡ç®—å¯¹åº”çš„æ—¶é—´\n\nHW3\nB.5 æ¶‰åŠcacheã€AMATå’ŒCPIçš„è®¡ç®—ï¼Œå¯ä»¥å‚è€ƒä½œä¸šçš„è§£ç­”\n\n\nå…¶ä»–æ²¡æœ‰ä»€ä¹ˆé—®é¢˜\n\nHW4\nGFLOPï¼šä»¥Gä¸ºå•ä½ï¼Œæ‰§è¡Œçš„æµ®ç‚¹æ•°æ“ä½œ\n\n\nå…¶ä»–æ²¡æœ‰ä»€ä¹ˆé—®é¢˜\n\nTODOç¡¬ä»¶åŸè¯­éƒ¨åˆ†\nTODOï¼š5.3pptçš„18/40å¼€å§‹æ²¡æœ‰è®°å½•ï¼ˆå­¦æ— ä½™åŠ›ï¼‰\n\n","categories":["è¯¾ç¨‹ç¬”è®°"],"tags":["è®¡ç®—æœºç³»ç»Ÿ","CSè¯¾ç¨‹"]},{"title":"JavaScript","url":"/2025/01/09/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/JavaScript/","content":"\nJavaScriptæ˜¯ä¸€ç§è½»é‡çº§ã€è§£é‡Šå‹ã€é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€. ä½œä¸ºå‰ç«¯ä¸‰ä»¶å¥—ä¹‹ä¸€ä»¥åŠTSçš„åŸºç¡€, JSè¯­è¨€ç»†èŠ‚ååˆ†éš¾åš¼. æœ¬æ–‡åœ¨ã€Œæ–™ç†çš„åŠ æŠ¤ã€ä¸‹, å°½å¯èƒ½å°†JSå¤„ç†å¾—æ›´åŠ å¯å£ä¸€äº›)\n\nåˆ›å»ºJSä»£ç å—å˜é‡var or let?varå…ˆäºletçš„äº§ç”Ÿ, åè€…æ˜¯ç°ä»£ç‰ˆæœ¬çš„JSä¸­æ–°çš„å…³é”®å­—.\nä½¿ç”¨var, å¯ä»¥å¯¹ä¸€ä¸ªå…ˆå‰å·²è¢«å£°æ˜ä¸”åˆå§‹åŒ–çš„å˜é‡é‡æ–°å£°æ˜, è¿™ä¸ä¼šå¸¦æ¥æŠ¥é”™, ä»£ç ä¾æ—§å¯ä»¥å·¥ä½œ. ä½†æ˜¯letå¹¶ä¸é€‚ç”¨.\nmyName = \"Chris\";function logName() {  console.log(myName);}logName(); //è¾“å‡º\"Chris\"var myName = \"Aniya\";logName(); //è¾“å‡º\"Aniya\"\n\né™¤æ­¤ä¹‹å¤–, å¯ä»¥ä½¿ç”¨varå‰åå£°æ˜ç›¸åŒçš„å˜é‡, è¿™å¹¶ä¸ä¼šæŠ¥é”™:\nvar myName = \"Chris\";var myName = \"Bob\";\n\nè€Œletåªèƒ½å£°æ˜ä¸€æ¬¡:\nlet myName = \"Chris\";myName = \"Bob\";\n\nå› æ­¤, åœ¨ä»£ç ç¼–å†™ä¸­åº”å°½é‡å¤šä½¿ç”¨letè€Œévar, è¿™å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ’é™¤æ— æ„ä¸­é‡æ–°å‘½åç›¸åŒå˜é‡è€Œå¯¼è‡´çš„é”™è¯¯.\nå˜é‡å‘½åçš„è§„åˆ™ä¸Cè¯­è¨€ç±»ä¼¼, å»ºè®®ä»¥ å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ ç»„æˆçš„æ ‡è¯†ç¬¦æ¥å‘½åå˜é‡.\n\nä¸å¯ç”¨_å¼€å¤´, å› ä¸ºå¯èƒ½è¢«JSè®¾è®¡ä¸ºç‰¹æ®Šçš„å«ä¹‰;\nä¸å¯ç”¨æ•°å­—å¼€å¤´, å¦åˆ™å¼•å‘é”™è¯¯;\nå¤§å°å†™æ•æ„Ÿ;\nå»ºè®®é‡‡ç”¨ å°å†™é©¼å³°å‘½åæ³• ,å³å°å†™æ•´ä¸ªå‘½åçš„ç¬¬ä¸€ä¸ªå­—æ¯ç„¶åå¤§å†™å‰©ä¸‹å•è¯çš„é¦–å­—ç¬¦;\né¿å…ä½¿ç”¨ä¿ç•™å­—, æ¯”å¦‚var,let,forç­‰.\n\nå˜é‡ç±»å‹let myAge = 20 ;// æ•°å­—let dolphinGoodbye = \"So long and thanks for all the fish\"; // å­—ç¬¦ä¸²let test = 6 &lt; 3; //boolean//æ•°ç»„ç±»å‹let myNameArray = [\"Chris\", \"Bob\", \"Jim\"];let myNumberArray = [10, 15, 40];//å¯¹è±¡ç±»å‹let dog = { name: \"Spot\", breed: \"Dalmatian\" };\n\nå¯¹è±¡ç±»å‹çš„è®¿é—®ä¸ç»“æ„ä½“ç›¸ä¼¼, dog.name;\n\nåœ¨ä¸Šé¢çš„å‡ ç§å˜é‡ç±»å‹ä¸­, æˆ‘ä»¬éƒ½é‡‡ç”¨letå…³é”®å­—å£°æ˜å˜é‡, è¿™ä½“ç°äº†JSæ˜¯ä¸€ç§ åŠ¨æ€ç±»å‹è¯­è¨€ ,å³æ— éœ€æŒ‡å®šå˜é‡åŒ…å«çš„æ•°æ®ç±»å‹.\nåŒæ—¶, è¿™ä¹Ÿæ„å‘³ç€æˆ‘ä»¬å¯ä»¥åƒpythonä¸€æ ·å¯¹åŒä¸€ä¸ªå˜é‡å…ˆåèµ‹å€¼ä¸åŒç±»å‹çš„å€¼:\nlet myNumber = \"500\";typeof myNumber;// è¾“å‡º 'string'myNumber = 500; typeof myNumber;//è¾“å‡º'number'\n\n\nå‡½æ•°\næå‡ è§£é‡Šå™¨åœ¨æ‰§è¡Œä»£ç ä¹‹å‰ï¼Œä¼¼ä¹å°†å‡½æ•°ã€å˜é‡ã€ç±»æˆ–å¯¼å…¥çš„å£°æ˜ç§»åŠ¨åˆ°å…¶ä½œç”¨åŸŸçš„é¡¶éƒ¨çš„è¿‡ç¨‹.\n\nexampleFunction();function exampleFunction() {  console.log(\"å‡½æ•°å†…\");  console.log(x);}\n\nç”±äº æå‡ çš„å­˜åœ¨, ä¸Šè¿°çš„å‡½æ•°è°ƒç”¨ä¸ä¼šå‡ºé”™.\n\né»˜è®¤å‚æ•°åœ¨ç¼–å†™å‡½æ•°æ—¶, å¯ä»¥é€šè¿‡åœ¨å‚æ•°åç§°åæ·»åŠ =, å†æŒ‡å®šé»˜è®¤å€¼, è¿™æ ·å½“è°ƒç”¨å‡½æ•°æ—¶, å¦‚æœæ²¡æœ‰ä¼ å…¥è¯¥å‚æ•°, åˆ™ä½¿ç”¨é»˜è®¤å€¼ã€‚\nfunction greeding(name = \"my friend\") {    console.log(`Hello, ${name}!`);}hello(); //Hello, my friend!hello(\"world\"); //Hello, world!\n\n\n\näº‹ä»¶å¤„ç†å‡½æ•°çš„é»˜è®¤æ¥å—å€¼æ˜¯event:\n&lt;button&gt;onclick&lt;/button&gt;&lt;p&gt;nothing here&lt;/p&gt;&lt;script&gt;btn = document.querySelector(\"button\")para = document.querySelector(\"p\")btn.onclick = click;function click(string){  console.log(\"clicked!\")  para.textContent = string;}&lt;/script&gt;\n\nä¸Šè¿°çš„btnåœ¨ç‚¹å‡»ä¹‹åè°ƒç”¨å‡½æ•°click, è¯¥å‡½æ•°éœ€è¦ä¸€ä¸ªå‚æ•°string, ç”±äºbtn.onclick = click;çš„ç»‘å®šæ–¹å¼, æˆ‘ä»¬æ— æ³•æŒ‡å®šä¼ å‚çš„å€¼, å› æ­¤ç‚¹å‡»ä¹‹åçš„paraçš„å†…å®¹æ˜¾ç¤ºä¸º: [object PointerEvent];\ntextContentæ˜¯å±æ€§è€Œéæ–¹æ³•, å› æ­¤é‡‡ç”¨èµ‹å€¼å®ç°;\n\nbtn.onclick = function click(string) {  console.log(\"clicked!\")  para.textContent = \"You have clicked the button!\";}\n\nå°†ä¸Šè¿°çš„ç»‘å®šæ–¹å¼å¦‚æ­¤æ”¹å†™, å¯ä»¥åœ¨btnå¤–å¯¹stringè¿›è¡Œèµ‹å€¼, ç„¶åç‚¹å‡»æŒ‰é’®å¯ä»¥ä¼ å…¥æŒ‡å®šå‚æ•°ä¾›åç»­å¤„ç†.\n\nç®­å¤´å‡½æ•°åœ¨äº†è§£ç®­å¤´å‡½æ•°çš„ä½œç”¨ä¹‹å‰, éœ€è¦å…ˆä»‹ç» åŒ¿åå‡½æ•°:\nfunction myFunction() {  alert(\"ä½ å¥½\");}// åŒ¿åå‡½æ•°(function () {  alert(\"ä½ å¥½\");});\n\næ­£å¦‚å…¶å, åŒ¿åå‡½æ•°æ²¡æœ‰å‡½æ•°å, ä¸èƒ½è¢«è°ƒç”¨, ä½†å¯ä»¥ä½œä¸ºå‚æ•°ä¼ å…¥å…¶ä»–å‡½æ•°ä¸­.\n\nå¦‚æœæˆ‘ä»¬å¸Œæœ›åœ¨ç›‘å¬æŸä¸ªäº‹ä»¶å‘ç”Ÿæ—¶è°ƒç”¨ç®€å•çš„å‡½æ•°æ¥å¤„ç†, åˆ™å¯ä»¥é€šè¿‡è°ƒç”¨ä¸Šè¿°çš„åŒ¿åå‡½æ•°å®ç°:\nfunction logKey(event) {  console.log(`You pressed \"${event.key}\".`);}textBox.addEventListener(\"keydown\", logKey);\nè¿™éƒ¨åˆ†ä»£ç é€šè¿‡ç›‘å¬htmlå…ƒç´ çš„keydownäº‹ä»¶, è°ƒç”¨å‡½æ•°è¾“å‡ºæŒ‰ä¸‹çš„é”®ç›˜æŒ‰é”®. æˆ‘ä»¬å¯ä»¥é€šè¿‡åŒ¿åå‡½æ•°æ¥ç®€åŒ–ä¹¦å†™:\ntextBox.addEventListener(\"keydown\", function (event) {  console.log(`You pressed \"${event.key}\".`);});\n\nåªéœ€ä¼ å…¥å‡½æ•°ä½“, è€Œä¸éœ€è¦å‡½æ•°å, å°±å¯ä»¥å®ç°ç›‘å¬äº‹ä»¶å¹¶è°ƒç”¨å‡½æ•°çš„åŠŸèƒ½.\n\nè€Œç®­å¤´å‡½æ•°åˆ™æ˜¯åœ¨æ­¤æƒ…å†µä¸‹æ›´ç®€æ´çš„å‡½æ•°å®šä¹‰æ–¹å¼:\ntextBox.addEventListener(\"keydown\", (event) =&gt; {  console.log(`You pressed \"${event.key}\".`);});//å¦‚æœå‡½æ•°åªæ¥å—ä¸€ä¸ªå‚æ•°, ä¹Ÿå¯ä»¥çœç•¥å‚æ•°å‘¨å›´çš„æ‹¬å·textBox.addEventListener(\"keydown\", event =&gt; {  console.log(`You pressed \"${event.key}\".`);});\n\nå¦‚æœåªåŒ…å«ä¸€è¡Œçš„return,åˆ™å¯ä»¥å¿½ç•¥{}å’Œreturnå…³é”®å­—:\nconst originals = [1, 2, 3];const doubled = originals.map(item =&gt; item * 2);console.log(doubled); // [2, 4, 6]\n\nitem =&gt; item * 2ç­‰ä»·äº:\n\nfunction doubleItem(item) {  return item * 2;}\n\nä¸€ä¸ªå®ä¾‹&lt;input id=\"textBox\" type=\"text\" /&gt;&lt;div id=\"output\"&gt;&lt;/div&gt;\nconst textBox = document.querySelector(\"#textBox\");const output = document.querySelector(\"#output\");textBox.addEventListener(\"keydown\", (event) =&gt; {  output.textContent = `You pressed \"${event.key}\".`;});\né€šè¿‡ç›‘å¬è¾“å…¥æ¡†çš„keydownäº‹ä»¶, è¾“å‡ºæŒ‰ä¸‹çš„é”®ç›˜æŒ‰é”®.\nå‡½æ•°ä½œç”¨åŸŸå’Œå†²çªä½œç”¨åŸŸ æŒ‡å½“å‰çš„æ‰§è¡Œä¸Šä¸‹æ–‡, åœ¨å…¶ä¸­çš„å€¼å’Œè¡¨è¾¾å¼å¯ä»¥è¢«è®¿é—®. \n\nå…¨å±€ä½œç”¨åŸŸ: è„šæœ¬æ¨¡å¼è¿è¡Œæ‰€æœ‰ä»£ç çš„é»˜è®¤ä½œç”¨åŸŸ;\næ¨¡å—ä½œç”¨åŸŸ: æ¨¡å—æ¨¡å¼ä¸­è¿è¡Œä»£ç çš„ä½œç”¨åŸŸ;\nå‡½æ•°ä½œç”¨åŸŸ: ç”±å‡½æ•°åˆ›å»ºçš„ä½œç”¨åŸŸ\n\nå’ŒCè¯­è¨€ç›¸ä¼¼, åœ¨å‡½æ•°å¤–éƒ¨letå®šä¹‰çš„å˜é‡, ä»¥åŠconstå®šä¹‰çš„å¸¸é‡å¯ä»¥åœ¨å‡½æ•°å†…éƒ¨è®¿é—®.\nå¦‚æœHTMLè°ƒç”¨äº†å¤šä¸ªå¤–éƒ¨JSæ–‡ä»¶, å…¶ä¸­å…·æœ‰ç›¸åŒçš„å‡½æ•°å, é‚£ä¹ˆåªèƒ½è®¿é—®çš„ç¬¬ä¸€ä¸ªå‡½æ•°, ç¬¬äºŒä¸ªå‡½æ•°å°†è¢«å¿½ç•¥:\n&lt;!-- Excerpt from my HTML --&gt;&lt;script src=\"first.js\"&gt;&lt;/script&gt;&lt;script src=\"second.js\"&gt;&lt;/script&gt;&lt;script&gt;  greeting();&lt;/script&gt;\n\nå¦‚æœä¸¤ä¸ªJSæ–‡ä»¶éƒ½å®šä¹‰äº†greetingå‡½æ•°, åˆ™åªæœ‰ç¬¬ä¸€ä¸ªæ–‡ä»¶ä¸­çš„å‡½æ•°æ‰ä¼šè¢«è°ƒç”¨.\n\næ•°æ®ç±»å‹æ•°å­—å’Œæ“ä½œç¬¦å¤§éƒ¨åˆ†ä¸Cè¯­è¨€ç›¸åŒ, æ¦‚æ‹¬éœ€è¦æ³¨æ„çš„å·®å¼‚:\n\nJSå½“ä¸­åªæœ‰ä¸€ç§æ•°å­—ç±»å‹ â€“ number, å¯¹äºæ•´å‹æˆ–è€…æµ®ç‚¹æ•°çš„åˆå§‹åŒ–å¾—åˆ°çš„é‡, ç”±typeofå‡å¾—åˆ°number;\nç®—æœ¯è¿ç®—ç¬¦: æ±‚å¹‚ä¸º**;\nå¸¸é‡æ— æ³•ä½¿ç”¨è‡ªå¢æˆ–è‡ªå‡,å¥½åƒä¹Ÿæ˜¯Cè¯­è¨€çš„ å¿˜äº†\n===è¡¨ç¤ºä¸¥æ ¼ç­‰äº, !==è¡¨ç¤ºä¸ç­‰äº;\nåŒæ—¶å­˜åœ¨==å’Œ!=æ¥åˆ¤æ–­æ˜¯å¦ç›¸ç­‰, ä½†æ˜¯å®ƒä»¬åªæ˜¯æµ‹è¯• å€¼ æ˜¯å¦ç›¸ç­‰, ä¼šå¿½ç•¥æ•°æ®ç±»å‹çš„å·®å¼‚; è€Œä¸Šè¿°çš„æ¯”è¾ƒä¼šåŒæ—¶æ¯”è¾ƒæ•°æ®ç±»å‹. å› æ­¤æ¨èä½¿ç”¨===å’Œ!==æ¥é¿å…ç±»å‹ä¸ä¸€è‡´çš„é”™è¯¯.\n\n\n\nå­—ç¬¦ä¸²åˆ›å»ºå­—ç¬¦ä¸²\nlet myString = \"A string\";const constString = myString;console.log(constString);//A string\nå¯ä»¥ä½¿ç”¨å•å¼•å·,åŒå¼•å·å’Œåå¼•å·æ¥åŒ…è£¹å­—ç¬¦ä¸², ä½†æ˜¯å¿…é¡»ç¡®ä¿å­—ç¬¦ä¸²çš„å¼€å¤´å’Œç»“å°¾ä½¿ç”¨ç›¸åŒçš„å­—ç¬¦:\nconst single = 'å•å¼•å·';const double = \"åŒå¼•å·\";const backtick = `åå¼•å·`;\n\nåå¼•å·åŒ…è£¹çš„å­—ç¬¦ä¸²ç§°ä¸ºæ¨¡æ¿å­—ç¬¦ä¸², å¤§å¤šæ•°æƒ…å†µä¸‹,å®ƒä¸å…¶ä»–ä¸¤ç§å­—ç¬¦ä¸²ç±»ä¼¼, ä½†æ˜¯å…·æœ‰ç‰¹æ®Šçš„å±æ€§:\n\nå¯ä»¥åµŒå…¥ JavaScript;\nå¯ä»¥å£°æ˜å¤šè¡Œçš„æ¨¡æ¿å­—é¢é‡.\n\nå­—ç¬¦ä¸²çš„æ‹¼æ¥å­—ç¬¦ä¸²çš„æ‹¼æ¥æœ‰ä¸¤ç§æ–¹æ³•, æˆ‘ä»¬å…ˆä»‹ç»ä¸Šè¿°æåˆ°çš„æ¨¡æ¿å­—ç¬¦ä¸²ä¸­çš„ ä¸²è”æ³•:\nconst name = \"å…‹é‡Œæ–¯\";const greeting = `ä½ å¥½ï¼Œ${name}`;console.log(greeting); // \"ä½ å¥½ï¼Œå…‹é‡Œæ–¯\"\n\nåœ¨æ¨¡æ¿å­—é¢é‡ä¸­ç”¨${}åŒ…è£…JSçš„å˜é‡æˆ–è€…è¡¨è¾¾å¼.\n\nconst one = \"ä½ å¥½ï¼Œ\";const two = \"è¯·é—®æœ€è¿‘å¦‚ä½•ï¼Ÿ\";const joined = `${one}${two}`;console.log(joined); // \"ä½ å¥½ï¼Œè¯·é—®æœ€è¿‘å¦‚ä½•ï¼Ÿ\"\n\nè¿æ¥2ä¸ªå˜é‡.\n\nconst song = \"é’èŠ±ç“·\";const score = 9;const highestScore = 10;const output = `æˆ‘å–œæ¬¢æ­Œæ›²ã€Š${song}ã€‹ã€‚æˆ‘ç»™å®ƒæ‰“äº† ${  (score / highestScore) * 100} åˆ†ã€‚`;console.log(output); // \"æˆ‘å–œæ¬¢æ­Œæ›²ã€Šé’èŠ±ç“·ã€‹ã€‚æˆ‘ç»™å®ƒæ‰“äº† 90 åˆ†ã€‚\"\n\nåœ¨æ¨¡æ¿å­—é¢é‡çš„${}å†…éƒ¨åŒ…å«è¡¨è¾¾å¼.\n\n\né™¤æ­¤ä¹‹å¤–,å¯¹äºæ™®é€šçš„å­—ç¬¦ä¸²(ä½¿ç”¨å•å¼•å·æˆ–è€…åŒå¼•å·å¾—åˆ°çš„å­—ç¬¦ä¸²), æˆ‘ä»¬å¯ä»¥ä½¿ç”¨`+`ç›´æ¥è¿æ¥:\nconst greeting = \"ä½ å¥½\";const name = \"å…‹é‡Œæ–¯\";console.log(greeting + \"ï¼Œ\" + name); // \"ä½ å¥½ï¼Œå…‹é‡Œæ–¯\"\n\nå¤šè¡Œå­—ç¬¦ä¸²æ¨¡æ¿å­—ç¬¦ä¸²ä¼šä¿ç•™æºä»£ç ä¸­çš„æ¢è¡Œç¬¦ï¼Œå› æ­¤å¯ä»¥ç¼–å†™è·¨è¶Šå¤šè¡Œçš„å­—ç¬¦ä¸²:\nconst newline = `ç»ˆäºæœ‰ä¸€å¤©ï¼Œä½ çŸ¥é“äº†å¿…é¡»åšçš„äº‹æƒ…ï¼Œè€Œä¸”å¼€å§‹â€¦â€¦`;console.log(newline);/*ç»ˆäºæœ‰ä¸€å¤©ï¼Œä½ çŸ¥é“äº†å¿…é¡»åšçš„äº‹æƒ…ï¼Œè€Œä¸”å¼€å§‹â€¦â€¦*/\n\nå¦‚æœå¸Œæœ›ç”¨æ™®é€šçš„å­—ç¬¦ä¸²å¾—åˆ°ç­‰æ•ˆçš„è¾“å‡º, å¿…é¡»åœ¨å­—ç¬¦ä¸²ä¸­åŒ…å«\\n,è€Œéç›´æ¥è·¨è¡Œ:\nconst newline = \"ç»ˆäºæœ‰ä¸€å¤©ï¼Œ\\nä½ çŸ¥é“äº†å¿…é¡»åšçš„äº‹æƒ…ï¼Œè€Œä¸”å¼€å§‹â€¦â€¦\";console.log(newline);/*ç»ˆäºæœ‰ä¸€å¤©ï¼Œä½ çŸ¥é“äº†å¿…é¡»åšçš„äº‹æƒ…ï¼Œè€Œä¸”å¼€å§‹â€¦â€¦*/\n\næ˜¾ç¤ºå¼•å·\nè½¬ä¹‰  é€šè¿‡åœ¨ç¬¦å·å‰åŠ ä¸Šåæ–œæ \\, å¯ä»¥è½¬ä¹‰å­—ç¬¦ä¸²ä¸­çš„ç‰¹æ®Šå­—ç¬¦,åŒ…æ‹¬å­—ç¬¦ä¸²ä¸­çš„å¼•å·:\n\nconst bigmouth = 'I\\'ve got no right to take my placeâ€¦';\n\næ¢ç”¨å…¶ä»–å­—ç¬¦: åœ¨å­—é¢é‡å†…ç”¨ä¸åŒäºåŒ…è£¹å­—ç¬¦ä¸²çš„å¼•å·:\n\nconst goodQuotes1 = 'She said \"I think so!\"';const goodQuotes2 = `She said \"I'm not going in there!\"`;\n\n\nå¸¸ç”¨æ–¹æ³•å¯¹äºå­—ç¬¦ä¸²å¯¹è±¡å®ä¾‹,å…¶å¸¸ç”¨çš„æ–¹æ³•:\n\n.length: è·å–å­—ç¬¦ä¸²çš„é•¿åº¦;\n[]: è¿”å›å­—ç¬¦ä¸²ä¸­å¯¹åº”ç´¢å¼•çš„å­—ç¬¦, ç´¢å¼•åŒæ ·ä»0å¼€å§‹;\n.indexOf(\"\"): æŸ¥æ‰¾å­å­—ç¬¦ä¸²\ninput: å¸Œæœ›æŸ¥æ‰¾çš„å­å­—ç¬¦ä¸²;\noutput: å­å­—ç¬¦ä¸²å¼€å§‹çš„ä¸‹æ ‡(å¦‚æœä¸å­˜åœ¨åˆ™è¿”å›-1);\n\n\n.slice(indedxStart, indexEnd): æˆªå–å­—ç¬¦ä¸²\ninput: èµ·å§‹ä¸‹æ ‡, ç»“æŸä¸‹æ ‡(ä¸åŒ…å«è¯¥ä¸‹æ ‡). å¦‚æœä¸å­˜åœ¨ç»“æŸä¸‹æ ‡åˆ™æå–ä¹‹åå‰©ä½™çš„å…¨éƒ¨å­—ç¬¦;\noutput: æˆªå–çš„å­å­—ç¬¦ä¸²;\n\n\n\næ›´å¤šçš„sliceçŸ¥è¯†:\n\næ ‡å‡†åŒ–è´Ÿå€¼ å¦‚æœç´¢å¼•æ˜¯ä¸ªè´Ÿæ•°, å–index+str.lengthè¿›è¡Œæ ‡å‡†åŒ–;\nå¦‚æœindexStartå¤§äºstr.length, è¿”å›ç©ºå­—ç¬¦ä¸²;\nå¦‚æœæ ‡å‡†åŒ–è´Ÿå€¼ä¹‹å, indexStartå¤§äºindexEnd, ä¹Ÿè¿”å›ç©ºå­—ç¬¦ä¸²;\n\n\n.toLowerCase() &amp; .toUpperCase(): è½¬æ¢å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰å­—ç¬¦ä¸ºå°å†™æˆ–å¤§å†™;\n.replace(original, new): æ›¿æ¢å­—ç¬¦ä¸²ä¸­originalå­å­—ç¬¦ä¸²ä¸ºnew;\næ­¤æ—¶ä¸ä¼šç›´æ¥æ”¹å˜åŸå­—ç¬¦ä¸²çš„å€¼, è€Œæ˜¯è¿”å›ä¸€ä¸ªä¿®æ”¹ä¹‹åçš„å­—ç¬¦ä¸². å› æ­¤, å¦‚æœæƒ³è¦å°†åŸæ¥çš„å€¼æ›¿æ¢, éœ€è¦ç”¨ä¸Šè¿°æ–¹æ³•å¾—åˆ°çš„å€¼å»èµ‹å€¼åŸæ¥çš„å­—ç¬¦ä¸².\n\n\n\nCasesåˆ©ç”¨ indexOf å’Œ slice æ–¹æ³•, è·å–æ–°å­—ç¬¦ä¸²:\n\ninput: \"str3\"ä¸‰ä½é•¿å­—ç¬¦ä¸²+\"...\"(æ— å…³å­—ç¬¦ä¸²)+\";\"+strLast(å‰©ä½™å­—ç¬¦ä¸²);\noutput: \"str3\"+\";\"+strLast\n\nvar stations = ['MAN675847583748sjt567654;Manchester Piccadilly',                'GNF576746573fhdg4737dh4;Greenfield',                'LIV5hg65hd737456236dch46dg4;Liverpool Lime Street',                'SYB4f65hf75f736463;Stalybridge',                'HUD5767ghtyfyr4536dh45dg45dg3;Huddersfield'];for(var i = 0; i &lt; stations.length; i++){    var input = stations[i];    var str3 = input.slice(0,3);    var strLast = input.slice(input.indexOf(\";\")+1); //indexOfè·å–;ä½ç½®    var output = str3 + \";\" + strLast;}\n\n\né€šè¿‡ indexOf æ ¹æ®å­å­—ç¬¦ä¸²ç­›é€‰å­—ç¬¦ä¸²æ•°ç»„:\n\ninput: å¯èƒ½åŒ…å« Christmas çš„å­—ç¬¦ä¸²æ•°ç»„;\noutput: åŒ…å« Christmas çš„å­—ç¬¦ä¸²æ•°ç»„;\n\nvar list = document.querySelector('.output ul');list.innerHTML = '';var greetings = ['Happy Birthday!',                 'Merry Christmas my love',                 'A happy Christmas to all the family',                 'You\\'re all I want for Christmas',                 'Get well soon'];for(var i = 0; i &lt; greetings.length; i++) {  var input = greetings[i];  if(greetings[i].indexOf('Christmas') !== -1) {    var result = input;    var listItem = document.createElement('li');    listItem.textContent = result;    list.appendChild(listItem);  }}\n\næ•°å­—ä¸å­—ç¬¦ä¸²ç›¸äº’è½¬æ¢éå¸¸ç¥å¥‡, åœ¨JSå½“ä¸­, æ•°å­—å’Œå­—ç¬¦ä¸²å¯ä»¥ç›´æ¥é€šè¿‡å‡½æ•°Number()å’ŒString()è¿›è¡Œè½¬æ¢, ä¸Cè¯­è¨€ä¸åŒ.\nconst myString = \"123\";const myNum = Number(myString);console.log(typeof myNum);// numberconsole.log(myNum);// 123\n\nconst myNum2 = 123;const myString2 = String(myNum2);console.log(typeof myString2);// stringconsole.log(myString2);// \"123\"\n\nå¯¹äºæµ®ç‚¹æ•°åŒæ ·æˆç«‹.\n\nå‰åæ‹¼æ¥ä½¿ç”¨+å°†å­—ç¬¦ä¸²ç±»å‹å’Œæ•°å­—ç±»å‹çš„å˜é‡orå¸¸é‡ç›´æ¥æ‹¼æ¥, å¾—åˆ°çš„æ˜¯ä»¥ç©ºæ ¼ç›¸éš”çš„å­—ç¬¦ä¸²:\nconst name = \"Front \";const number = 242;const combine = name + number;console.log(combine); //Front 242console.log(typeof(combine));  //string\n\næ•°ç»„\nå­˜å‚¨ä»»æ„ç±»å‹å…ƒç´ â€“å­—ç¬¦ä¸²ï¼Œæ•°å­—ï¼Œå¯¹è±¡ï¼Œå˜é‡ï¼Œå¦ä¸€ä¸ªæ•°ç»„;\nå¯ä»¥ æ··åˆ å…ƒç´ ç±»å‹:\n\nlet random = [\"tree\", 795, [0, 1, 2]];\n\nåƒè®¿é—®å­—ç¬¦ä¸²ä¸€æ ·, åˆ©ç”¨ç´¢å¼•è®¿é—®æ•°ç»„å…ƒç´ ;\nå¤šç»´æ•°ç»„ åŒ…å«æ•°ç»„çš„æ•°ç»„ç»“æ„ç§°ä¸º~\n\nsplit()\nä½œç”¨: å°†ä¸€ä¸ªå­—ç¬¦ä¸²æ ¹æ®ç»™å®šçš„å­—ç¬¦åˆ†éš”ä¸ºå­—ç¬¦ä¸²æ•°ç»„;\n\nlet myData = \"Manchester,London,Liverpool,Birmingham,Leeds,Carlisle\";let myArray = myData.split(\",\");console.log(myArray); // [\"Manchester\", \"London\", \"Liverpool\", \"Birmingham\", \"Leeds\", \"Carlisle\"]\n\njoin()splitçš„åå‘æ“ä½œ, ç»™å‡ºåˆ†éš”ç¬¦å·, å°†æ•°ç»„çš„å­—ç¬¦ä¸²æ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²:\nlet myNewString = myArray.join(\",\");myNewString;\n\ntoString()ä¸joinæ–¹æ³•ç›¸ä¼¼, ä½†æ˜¯æ— æ³•è‡ªå®šä¹‰åˆ†éš”ç¬¦, é»˜è®¤ä¸º,:\nlet dogNames = [\"Rocket\", \"Flash\", \"Bella\", \"Slugger\"];dogNames.toString(); //Rocket,Flash,Bella,Slugger\n\npush &amp; poppush()æ–¹æ³•å¯ä»¥å°†1æˆ–å¤šä¸ªå…ƒç´ æ·»åŠ åˆ°æ•°ç»„çš„ æœ«å°¾:\n\nå°†ä¼šç›´æ¥æ”¹å†™åŸæ¥çš„æ•°ç»„,ä¸éœ€è¦é‡æ–°èµ‹å€¼;\nè¯¥æ–¹æ³•å…·æœ‰è¿”å›å€¼, ä¸”è¿”å›çš„æ˜¯æ›´æ–°ä¹‹åçš„æ•°ç»„é•¿åº¦(åŒ…å«å…ƒç´ çš„ä¸ªæ•°);\n\nlet myArray = [1, 2, 3];let newLength = myArray.push(4, 5,\"string\");console.log(myArray); // [1, 2, 3, 4, 5, \"string\"]console.log(newLength); // 6\n\nä½¿ç”¨.pop()ä»æ•°ç»„ä¸­åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ :\nmyArray.pop(); //\"string\"console.log(myArray); // [1, 2, 3, 4, 5]\n\næ–¹æ³•è°ƒç”¨è¿”å›å€¼å°±æ˜¯åˆ é™¤çš„å…ƒç´ æœ¬èº«;\nç›´æ¥å¯¹åŸå§‹æ•°ç»„æ“ä½œå¹¶èµ‹å€¼, ä¸éœ€è¦å¦å¤–çš„èµ‹å€¼æ“ä½œ;\n\n\nshift &amp; unshift:åœ¨åŠŸèƒ½ä¸Šåˆ†åˆ«ä¸pushå’Œpopç›¸åŒ, ä½†æ˜¯ä½œç”¨äºæ•°ç»„çš„å¼€å§‹ä½ç½®.\n\næ¡ä»¶è¯­å¥JSçš„æ¡ä»¶è¯­å¥ä¸Cè¯­è¨€ååˆ†ç›¸ä¼¼, åœ¨æ­¤ä»…ç»™å‡ºå®˜æ–¹æ–‡æ¡£çš„ä¸€äº›ä¾‹å­:\nå¤©æ°”é¢„æŠ¥&lt;label for=\"weather\"&gt;é€‰æ‹©ä»Šå¤©çš„å¤©æ°”ï¼š&lt;/label&gt;&lt;select id=\"weather\"&gt;  &lt;option value=\"\"&gt;--ä½œå‡ºé€‰æ‹©--&lt;/option&gt;  &lt;option value=\"sunny\"&gt;æ™´å¤©&lt;/option&gt;  &lt;option value=\"rainy\"&gt;é›¨å¤©&lt;/option&gt;  &lt;option value=\"snowing\"&gt;é›ªå¤©&lt;/option&gt;  &lt;option value=\"overcast\"&gt;é˜´å¤©&lt;/option&gt;&lt;/select&gt;&lt;p&gt;&lt;/p&gt;\n\nlableå½“ä¸­çš„foræ ‡ç­¾ä¸selectæ ‡ç­¾çš„idå±æ€§å¯¹åº”, ç”¨äºå…³è”ä¸¤ä¸ªæ ‡ç­¾.\n\nconst select = document.querySelector(\"select\");const para = document.querySelector(\"p\");select.addEventListener(\"change\", setWeather);function setWeather() {  const choice = select.value;  switch (choice) {    case \"sunny\":      para.textContent = \"é˜³å…‰æ˜åªšã€‚ç©¿ä¸ŠçŸ­è£¤å§ï¼å»æµ·æ»©ï¼Œæˆ–å…¬å›­ï¼Œåƒä¸ªå†°æ·‡æ·‹ã€‚\";      break;    case \"rainy\":      para.textContent = \"å¤–é¢ä¸‹ç€é›¨ï¼›å¸¦ä¸Šé›¨è¡£å’Œé›¨ä¼ï¼Œä¸è¦åœ¨å¤–é¢å‘†å¤ªä¹…ã€‚\";      break;    case \"snowing\":      para.textContent =        \"å¤§é›ªçº·é£ï¼Œå¤©å¯’åœ°å†»ï¼æœ€å¥½å‘†åœ¨å®¶é‡Œå–æ¯çƒ­å·§å…‹åŠ›ï¼Œæˆ–è€…å»å †ä¸ªé›ªäººã€‚\";      break;    case \"overcast\":      para.textContent =        \"è™½ç„¶æ²¡æœ‰ä¸‹é›¨ï¼Œä½†å¤©ç©ºç°è’™è’™çš„ï¼Œéšæ—¶éƒ½å¯èƒ½å˜å¤©ï¼Œæ‰€ä»¥è¦å¸¦ä¸€ä»¶é›¨è¡£ä»¥é˜²ä¸‡ä¸€ã€‚\";      break;    default:      para.textContent = \"\";  }}\n\n\né€šè¿‡querySelectoræ–¹æ³•è·å–selectå’Œpæ ‡ç­¾;\nç„¶åä¸ºselectæ ‡ç­¾æ·»åŠ äº‹ä»¶ç›‘å¬å™¨, å½“å†…å®¹æ”¹å˜æ—¶è§¦å‘ change äº‹ä»¶, åŒæ—¶è°ƒç”¨setWeatherå‡½æ•°;\nè¿›è€Œé€šè¿‡ switch è¯­å¥å¤„ç†ä¸åŒå¤©æ°”çš„æƒ…å†µ, å¹¶è®¾ç½®ç›¸åº”çš„æ–‡å­—å†…å®¹;åœ¨çº¿ç½‘é¡µç¤ºä¾‹:simple-switch\n\n\näº‹ä»¶ä»‹ç»ä»€ä¹ˆæ˜¯äº‹ä»¶? \n\nç”¨æˆ·é€‰æ‹©ã€ç‚¹å‡»æˆ–è€…å…‰æ ‡æ‚¬åœåœ¨æŸä¸€å…ƒç´ ;\nç”¨æˆ·åœ¨é”®ç›˜ä¸­æŒ‰ä¸‹æŸä¸ªæŒ‰é”®;\nç½‘é¡µç»“æŸåŠ è½½;\nâ€¦\n\näº‹ä»¶å¤„ç†å™¨ ä¸ºäº†å“åº”äº‹ä»¶, æˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä»½JSä»£ç å—ç”¨äºåœ¨äº‹ä»¶å‘ç”Ÿä¹‹åè¿è¡Œ. è¿™æ ·çš„ä»£ç å—ç§°ä¹‹ä¸º~.\nå¤„ç†ç‚¹å‡»äº‹ä»¶ä»¥ç‚¹å‡»äº‹ä»¶ä¸ºä¾‹, ä»‹ç»htmlä¸jså¦‚ä½•è¿›è¡Œäº‹ä»¶å¤„ç†çš„äº¤äº’:\n&lt;button&gt; æ”¹å˜é¢œè‰² &lt;/button&gt;\nconst btn = document.querySelector(\"button\");function random(number){  return Math.floor(Math.random()*(number+1));  }btn.addEventListener(\"click\", ()=&gt;{  const rndCol = `rgb(${random(255)},${random(255)},${random(255)})`;  document.body.style.backgroundColor = rndCol;})\n\nMath.random()æ–¹æ³•ç”Ÿæˆä¸€ä¸ªä»‹äº[0,1)ä¹‹é—´çš„éšæœºæ•°;\n*(number+1)ä¹‹ååˆ©ç”¨å‘ä¸‹å–æ•´çš„æ–¹æ³•Math.floor()å°†å…¶è½¬æ¢ä¸ºæ•´æ•°, èŒƒå›´ä¸º[0,number];\nå‡å¦‚è¾“å…¥çš„numberä¸º4, åˆ™random(4)çš„ç»“æœå¯èƒ½ä¸º0, 1, 2, 3, 4ä¸­çš„ä¸€ä¸ª;å‡è®¾è¾“å…¥çš„numberä¸º3.6, åˆ™è¾“å‡ºçš„ç»“æœè¿˜æ˜¯0~4ä¸­çš„æ•´æ•°.\n\n\nrndCol = `rgb(${random(255)},${random(255)},${random(255)}) é‡‡ç”¨çš„æ˜¯åœ¨æ¨¡æ¿å­—ç¬¦ä¸²å†…éƒ¨ä½¿ç”¨${}è°ƒç”¨å‡½æ•°å˜é‡çš„æ–¹æ³•.\n\naddEventListener()adEventListeneræ–¹æ³•å·²ç»åœ¨ä¹‹å‰çš„ä¾‹å­ä¸­å‡ºç°è¿‡, ç°åœ¨å…·ä½“ä»‹ç»å…¶ä½œç”¨å’Œè¯­æ³•.\né€šè¿‡EventTarget.adddEventListener()çš„æ–¹æ³•, å°†æŒ‡å®šçš„ç›‘å¬å™¨æ³¨å†Œåˆ°å¯¹è±¡ä¸Š, å…·ä½“çš„è¯­æ³•å¦‚ä¸‹:\naddEventListener(type, listener);addEventListener(type, listener, options);addEventListener(type, listener, useCapture);\n\ntype: äº‹ä»¶ç±»å‹, å¦‚click, mouseover, mouseout, keydown, keyupç­‰;\nlistener: äº‹ä»¶å¤„ç†å‡½æ•°, è¯¥å‡½æ•°å°†åœ¨äº‹ä»¶å‘ç”Ÿæ—¶è¢«è°ƒç”¨;\nåŒ…æ‹¬ å›è°ƒå‡½æ•° ä»¥åŠ å®ç°äº† EventListener æ¥å£çš„å¯¹è±¡;\n\n\noptions: å¯é€‰å‚æ•°, ç”¨äºé…ç½®äº‹ä»¶ç›‘å¬å™¨çš„è¡Œä¸º;\nå¯ä»¥ä¸ºå•ä¸ªäº‹ä»¶æ·»åŠ å¤šä¸ªäº‹ä»¶ç›‘å¬å™¨.\n\n\n\nlistenerå›è°ƒå‡½æ•° ç®€å•æ¥è¯´, ~æŒ‡çš„æ˜¯å½“æŸä¸ªäº‹ä»¶å‘ç”Ÿæ—¶è¢«è°ƒç”¨çš„ä¸€æ®µä»£ç .\n\næ˜¯ä¸€ä¸ªå‡½æ•°, ä½†æ˜¯åªæœ‰ç­‰åˆ°ç‰¹å®šçš„äº‹ä»¶å‘ç”Ÿæ—¶æ‰ä¼šæ‰§è¡Œ.\n\nå®ç°äº† EventListener æ¥å£çš„å¯¹è±¡:\n\nç‰¹ç‚¹: ä»¥å¯¹è±¡ä½œä¸ºlistener, å¯¹è±¡ä¸­å…·æœ‰åä¸ºhandleEvent()çš„æ–¹æ³•;\nä½œç”¨: \nå°†äº‹ä»¶å¤„ç†å°è£…åˆ°ä¸€ä¸ªå¯¹è±¡å½“ä¸­, å¯ä»¥æ›´å¥½åœ°ç»„ç»‡ä»£ç ;\nä¾¿äºåœ¨å¯¹è±¡ä¸­ä¿å­˜æ›´å¤šçš„çŠ¶æ€ä¿¡æ¯;\n\n\n\nconst listenerObject = {    count: 0,    handleEvent(event) {        this.count++;        console.log(`äº‹ä»¶ç±»å‹æ˜¯ï¼š${event.type}ï¼Œå·²è§¦å‘ ${this.count} æ¬¡`);    }};const button = document.querySelector('button');button.addEventListener('click', listenerObject);\n\noptionsä¸€ä¸ªæŒ‡å®šæœ‰å…³ listener å±æ€§çš„å¯é€‰å‚æ•°å¯¹è±¡.\nCapture\nå«ä¹‰:\n\nä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤º listener ä¼šåœ¨è¯¥ç±»å‹çš„äº‹ä»¶æ•è·é˜¶æ®µä¼ æ’­åˆ°è¯¥ EventTarget æ—¶è§¦å‘;\né»˜è®¤ä¸ºfalse, è¡¨ç¤ºåªæœ‰åœ¨å†’æ³¡é˜¶æ®µæ‰è§¦å‘.\n\n\nåŒºåˆ«:\n\ncaptureå’ŒuseCaptureå®é™…ä¸ŠæŒ‡çš„éƒ½æ˜¯ ç›‘å¬å™¨æ˜¯å¦åœ¨æ•è·é˜¶æ®µè§¦å‘ çš„å¸ƒå°”å€¼.\næ•è·é˜¶æ®µ: ä»æœ€å¤–å±‚çš„å…ƒç´ å¼€å§‹, é€å±‚å‘å†…æ•è·äº‹ä»¶, ç›´åˆ°äº‹ä»¶åˆ°è¾¾ç›®æ ‡å…ƒç´ .\n\n\nåæ¥DOMçš„è§„èŒƒæ›´æ–°æ—¶å¼•å…¥äº†optionså‚æ•°, æ­¤åcaptureå–ä»£äº†useCaptureçš„ä½œç”¨.\nå¦‚æœaddEventListenerçš„ç¬¬ä¸‰ä¸ªå‚æ•°ä¸æŒ‡å®šå¯¹è±¡, åªæœ‰å¸ƒå°”å€¼, é‚£ä¹ˆé»˜è®¤æ˜¯åœ¨è®¾ç½®useCapture\n\n\n\n\nå¯ä»¥å…ˆæŸ¥çœ‹äº‹ä»¶ä¼ æ’­çš„é˜¶æ®µæ¥è¾…åŠ©ç†è§£ä¸åŒçš„é˜¶æ®µ.\n\nOnce\nå«ä¹‰:\nä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤º listener åœ¨æ·»åŠ ä¹‹åæœ€å¤šåªè°ƒç”¨ä¸€æ¬¡;\né»˜è®¤ä¸ºfalse, è¡¨ç¤ºå¯ä»¥å¤šæ¬¡è°ƒç”¨.\n\n\ne.g.\n\nchild.addEventListener('click', () =&gt; {    console.log('å­å…ƒç´  - ç›®æ ‡é˜¶æ®µ');},{once: true});\n\nonceå±æ€§è¢«è®¾ç½®ä¸ºtrue, å½“è°ƒç”¨ä¸€æ¬¡ä¹‹åäº‹ä»¶ç›‘å¬å™¨ä¼šè¢«è‡ªåŠ¨æ¸…é™¤. å› æ­¤åªæœ‰ç¬¬ä¸€æ¬¡çš„ç‚¹å‡»æ‰ä¼šconsole.\n\nPassive\nå«ä¹‰:\n\nä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè®¾ç½®ä¸º true æ—¶ï¼Œè¡¨ç¤º listener æ°¸è¿œä¸ä¼šè°ƒç”¨ preventDefault();\n\n\nä½œç”¨:\n\næ˜ç¡®ä¸ä¼šåœ¨listenerä¸­ä¸ä¼šè°ƒç”¨preventDefault()æ–¹æ³•, å³ä¸ä¼šé˜»æ­¢æµè§ˆå™¨çš„é»˜è®¤è¡Œä¸º;\næ­¤æ—¶, æµè§ˆå™¨å¯ä»¥ç›´æ¥æ¸²æŸ“é»˜è®¤è¡Œä¸ºçš„ç»“æœ, æ— éœ€ç­‰å¾…listenerçš„æ‰§è¡Œä¸é»˜è®¤è¡Œä¸ºçš„æ£€æŸ¥, ä»è€Œæé«˜äº†æ€§èƒ½.\n\n\nNotice:\n\nå¦‚æœè®¾ç½®passiveä¸ºtrue, åˆ™listenerå½“ä¸­ä¸å¯å‡ºç°preventDefault()æ–¹æ³•, å¦åˆ™ä¼šæŠ¥é”™.\n\n\n\ne.g.\ndocument.addEventListener('wheel',()=&gt;{\tevent.preventDefault();  console.log(\"scrolling\");},{passive: false});\n\nwheeläº‹ä»¶çš„é»˜è®¤è¡Œä¸ºæ˜¯æ»šåŠ¨é¡µé¢;\nevent.preventDefault();è¡¨ç¤ºä¼šé˜»æ­¢é¼ æ ‡æ»šåŠ¨å¸¦æ¥çš„é¡µé¢æ»šåŠ¨;\n\ndocument.addEventListener('wheel',()=&gt;{  console.log(\"scrolling\");},{passive: true});\n\næ˜ç¡®ä¸ä¼šé˜»æ­¢é»˜è®¤è¡Œä¸º, æµè§ˆå™¨å¯ä»¥ç›´æ¥æ¸²æŸ“é¡µé¢çš„æ»šåŠ¨æ•ˆæœ, å› æ­¤æé«˜äº†æ˜¾ç¤ºçš„æ•ˆæœ.\n\ndocument.addEventListener('wheel',()=&gt;{  event.preventDefault();  console.log(\"scrolling\");},{passive: true});\n\npassiveçš„è®¾ç½®ä¸listenerå†…éƒ¨çŸ›ç›¾, å°†ä¼šæŠ¥é”™.\n\nSignalç”¨äºæœ‰æ¡ä»¶åœ°ç§»é™¤äº‹ä»¶ç›‘å¬å™¨, å…·ä½“ä½¿ç”¨å‚è§å¯è¢«ç§»é™¤çš„ç›‘å¬å™¨.\näº‹ä»¶ä¼ æ’­çš„é˜¶æ®µ\næ•è·é˜¶æ®µ : äº‹ä»¶ä»æ ¹èŠ‚ç‚¹å¼€å§‹å‘ç›®æ ‡èŠ‚ç‚¹ä¼ æ’­;\ne.g. ç‚¹å‡»äº‹ä»¶ä»documentå¼€å§‹ä¼ æ’­, ç»è¿‡html,bodyç›´åˆ°ç›®æ ‡å…ƒç´ .\n\n\nç›®æ ‡é˜¶æ®µé˜¶æ®µ : äº‹ä»¶åˆ°è¾¾ç›®æ ‡å…ƒç´ ;\nå†’æ³¡é˜¶æ®µ : äº‹ä»¶ä»ç›®æ ‡å…ƒç´ å¼€å§‹æ²¿ç€DOMæ ‘å‘ä¸Šä¼ æ’­.\n\nCase&lt;div id=\"parent\"&gt;  parent  &lt;div id=\"child\"&gt;child&lt;/div&gt;&lt;/div&gt;\nconst parent = document.querySelector('#parent');const child = document.querySelector('#child');parent.addEventListener('click', () =&gt; {    console.log('çˆ¶å…ƒç´  - å†’æ³¡é˜¶æ®µ');});parent.addEventListener('click', () =&gt; {    console.log('çˆ¶å…ƒç´  - æ•è·é˜¶æ®µ');}, { capture: true });child.addEventListener('click', () =&gt; {    console.log('å­å…ƒç´  - ç›®æ ‡é˜¶æ®µ');});\nä¸Šè¿°çš„childè¢«åŒ…è£¹åœ¨parentå†…éƒ¨.\n\nå½“ç‚¹å‡»parentæ—¶å°†ä¼šæ˜¾ç¤º:\n\n\"çˆ¶å…ƒç´  - æ•è·é˜¶æ®µ\"\"çˆ¶å…ƒç´  - å†’æ³¡é˜¶æ®µ\"\n\nç”±äºè®¾ç½®äº†åœ¨æ•è·é˜¶æ®µå°±è§¦å‘, æ‰€ä»¥å…ˆè§¦å‘äº†æ•è·é˜¶æ®µçš„ç›‘å¬å™¨, ç„¶åå†è§¦å‘å†’æ³¡é˜¶æ®µçš„ç›‘å¬å™¨;\n\n\nå½“ç‚¹å‡»childæ—¶å°†ä¼šæ˜¾ç¤º:\n\n\"çˆ¶å…ƒç´  - æ•è·é˜¶æ®µ\"\"å­å…ƒç´  - ç›®æ ‡é˜¶æ®µ\"\"çˆ¶å…ƒç´  - å†’æ³¡é˜¶æ®µ\"\n\nchildæ˜¯æ•´ä¸ªäº‹ä»¶æµçš„ç›®æ ‡å…ƒç´ , æ‰€ä»¥è§¦å‘æ—¶æœºä»‹äºäºŒè€…ä¹‹é—´.\n\nNotice\nå¦‚æœå°†divæ¢æˆbutton, åˆ™ç‚¹å‡»childæ—¶å¯èƒ½åªä¼šæ˜¾ç¤º ç›®æ ‡ é˜¶æ®µçš„è¾“å‡º.\n\nè¿™æ˜¯å› ä¸º, ä¸åŒæµè§ˆå™¨å¯¹äºbuttonå…ƒç´ çš„é»˜è®¤è¡Œä¸ºä¸åŒ, å¯èƒ½é»˜è®¤é˜»æ­¢äº†æ•è·é˜¶æ®µå’Œå†’æ³¡é˜¶æ®µ\n\n\nevent.stopPropagation();åŠ å…¥è¯¥å’’è¯­ä»£ç å¯ä»¥åœ¨æ­¤åœæ­¢äº‹ä»¶çš„ä¼ æ’­, æ¯”å¦‚å¯ä»¥åœ¨ä¸Šè¿°çš„æ•è·é˜¶æ®µç›‘å¬å™¨åŠ å…¥è¯¥ä»£ç :\n\n\nparent.addEventListener('click', () =&gt; {    console.log('çˆ¶å…ƒç´  - æ•è·é˜¶æ®µ');    event.stopPropagation();}, { capture: true });\n\næ­¤æ—¶, ç‚¹å‡»parentæ—¶, åªä¼šè§¦å‘æ•è·é˜¶æ®µçš„ç›‘å¬å™¨, ä¸ä¼šè§¦å‘å†’æ³¡é˜¶æ®µçš„ç›‘å¬å™¨.\n\nå¯è¢«ç§»é™¤çš„ç›‘å¬å™¨&lt;table id=\"outside\"&gt;  &lt;tr&gt;    &lt;td id=\"t1\"&gt;one&lt;/td&gt;  &lt;/tr&gt;  &lt;tr&gt;    &lt;td id=\"t2\"&gt;two&lt;/td&gt;  &lt;/tr&gt;&lt;/table&gt;\n// ä¸º table æ·»åŠ å¯è¢«ç§»é™¤çš„äº‹ä»¶ç›‘å¬å™¨const controller = new AbortController();const el = document.getElementById(\"outside\");el.addEventListener(\"click\", modifyText, { signal: controller.signal });// æ”¹å˜ t2 å†…å®¹çš„å‡½æ•°function modifyText() {  const t2 = document.getElementById(\"t2\");  if (t2.firstChild.nodeValue === \"three\") {    t2.firstChild.nodeValue = \"two\";  } else {    t2.firstChild.nodeValue = \"three\";    controller.abort(); // å½“å€¼å˜ä¸º \"three\" åï¼Œç§»é™¤ç›‘å¬å™¨  }}\n\n\nAbortControlleræ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°, ç”¨äºåˆ›å»ºä¸€ä¸ªå¯è¢«ç§»é™¤çš„äº‹ä»¶ç›‘å¬å™¨çš„æ§åˆ¶å™¨;\nsignalå±æ€§æ˜¯ä¸€ä¸ªAbortSignalå¯¹è±¡, ç”¨äºæ§åˆ¶ç›‘å¬å™¨çš„ç§»é™¤;\ncontroller.abort()æ–¹æ³•ç”¨äºç§»é™¤ç›‘å¬å™¨;\nå½“t2çš„å†…å®¹å˜ä¸ºâ€threeâ€æ—¶, ç§»é™¤ç›‘å¬å™¨, ä½¿å¾—modifyTextå‡½æ•°ä¸å†æ‰§è¡Œ. æ­¤å, ç‚¹å‡»t2ä¸ä¼šè§¦å‘modifyTextå‡½æ•°.\n\n\nå…·ä½“çš„æ„é€ æ­¥éª¤:\n\nåˆ›å»ºä¸€ä¸ªAbortControllerå®ä¾‹: const controller = new AbortController();\nåœ¨äº‹ä»¶ç›‘å¬å™¨å†…çš„å‚æ•°ä¸­æ·»åŠ signal: controller.signalé€‰é¡¹;\nåœ¨éœ€è¦ç§»é™¤ç›‘å¬å™¨çš„åœ°æ–¹è°ƒç”¨controller.abort()æ–¹æ³•;\n\n\næˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨removeEventListener()æ–¹æ³•æ¥ç§»é™¤äº‹ä»¶ç›‘å¬å™¨:\nremoveEventListener(type, listener);removeEventListener(type, listener, options);removeEventListener(type, listener, useCapture);\n\n\n\nNotices:\nå¦‚æœåŒä¸€ä¸ªå¯¹è±¡ä¸Šå­˜åœ¨2ä¸ªäº‹ä»¶ç›‘å¬å™¨, ä¸”ä»…åœ¨useCaptureå‚æ•°å­˜åœ¨å·®å¼‚, é‚£ä¹ˆéœ€è¦å…ˆå2æ¬¡è°ƒç”¨removeEventListener()æ–¹æ³•æ‰èƒ½å®Œå…¨ç§»é™¤å…¶äº‹ä»¶ç›‘å¬å™¨;\nå¦‚æœæ— æ³•åŒ¹é…å½“å‰æ³¨å†Œçš„äº‹ä»¶ç›‘å¬å™¨, é‚£ä¹ˆè¯¥å‡½æ•°å°†ä¸ä¼šèµ·ä»»ä½•ä½œç”¨;\ntype,listenerå‚æ•°å¿…é¡»å®Œå…¨åŒ¹é…æ‰èƒ½ç§»é™¤äº‹ä»¶ç›‘å¬å™¨;\nå¯¹äºoptionså‚æ•°:\nå­—æ®µç›¸åŒ: ä¸€å®šå¯ä»¥ç§»é™¤;\nå­—æ®µä¸åŒ: éœ€è¦ä¸é»˜è®¤å€¼falseåŒ¹é…æ‰å¯ä»¥ç§»é™¤.\n\n\n\n\n\nelement.addEventListener(\"mousedown\", handleMouseDown, { passive: true });element.removeEventListener(\"mousedown\", handleMouseDown, { passive: true }); // æˆåŠŸelement.removeEventListener(\"mousedown\", handleMouseDown, { capture: false }); // æˆåŠŸelement.removeEventListener(\"mousedown\", handleMouseDown, { capture: true }); // å¤±è´¥element.removeEventListener(\"mousedown\", handleMouseDown, { passive: false }); // æˆåŠŸelement.removeEventListener(\"mousedown\", handleMouseDown, false); // æˆåŠŸelement.removeEventListener(\"mousedown\", handleMouseDown, true); // å¤±è´¥\n\n\næ·»åŠ ä¸ç§»é™¤çš„ç»“åˆä½¿ç”¨:\nconst body = document.querySelector(\"body\");const clickTarget = document.getElementById(\"click-target\");const mouseOverTarget = document.getElementById(\"mouse-over-target\");let toggle = false;function makeBackgroundYellow() {  body.style.backgroundColor = toggle ? \"white\" : \"yellow\";  toggle = !toggle;}clickTarget.addEventListener(\"click\", makeBackgroundYellow, false);mouseOverTarget.addEventListener(\"mouseover\", () =&gt; {  clickTarget.removeEventListener(\"click\", makeBackgroundYellow, false);});\n\n\nä½¿ç”¨åŒ¿åå‡½æ•°åœ¨ä¸Šè¿°htmlä¾‹å­ä¸‹:\n// æ”¹å˜ t2 å†…å®¹çš„å‡½æ•°function modifyText(new_text) {  const t2 = document.getElementById(\"t2\");  t2.firstChild.nodeValue = new_text;}// ç”¨åŒ¿åå‡½æ•°ä¸º table æ·»åŠ äº‹ä»¶ç›‘å¬å™¨const el = document.getElementById(\"outside\");el.addEventListener(  \"click\",  function () {    modifyText(\"four\");  },  false,);\né€šè¿‡åŒ¿åå‡½æ•°å°è£…ä»£ç , å°†å‚æ•°ä¼ å…¥å‡½æ•°modifyText, ä½¿å¾—å‡½æ•°å¯ä»¥è¢«è°ƒç”¨.\nä½¿ç”¨ç®­å¤´å‡½æ•°// æ”¹å˜ t2 å†…å®¹çš„å‡½æ•°function modifyText(new_text) {  var t2 = document.getElementById(\"t2\");  t2.firstChild.nodeValue = new_text;}// ç”¨ç®­å¤´å‡½æ•°ä¸º table æ·»åŠ äº‹ä»¶ç›‘å¬å™¨const el = document.getElementById(\"outside\");el.addEventListener(  \"click\",  () =&gt; {    modifyText(\"four\");  },  false,);\né€šè¿‡=&gt;{}å½¢å¼çš„ç®­å¤´å‡½æ•°ç®€åŒ–ä»£ç ä¹¦å†™.\n\næ¯”è¾ƒåŒ¿åä¸ç®­å¤´åŒ¿åå‡½æ•°ä¸ç®­å¤´å‡½æ•°åœ¨æ­¤å¤„çš„åº”ç”¨åŸºæœ¬ç›¸åŒ, ä½†æ˜¯åœ¨thisçš„æŒ‡å‘ä¸Šæœ‰æ‰€ä¸åŒ:\n\nåŒ¿åå‡½æ•°ä¸å…¶ä»–æ™®é€šçš„JSå‡½æ•°:thisæŒ‡å‘è°ƒç”¨å®ƒçš„å¯¹è±¡ä¹‹ä½œç”¨åŸŸ(å¦‚æœæ²¡æœ‰ç›´æ¥è°ƒç”¨å…³ç³», é»˜è®¤ä¸ºå…¨å±€å¯¹è±¡, ä¸”ä¸¥æ ¼æ¨¡å¼ä¸‹ä¸ºundefined);\n\nfunction sayHello() {  console.log(this); // åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œthis æŒ‡å‘ window}sayHello();\n\n\nç®­å¤´å‡½æ•°çš„thisç»§æ‰¿è‡ªå¤–éƒ¨ä½œç”¨åŸŸ, å³è°ƒç”¨è¯¥æ–¹æ³•çš„å¯¹è±¡.\n\nconst obj = {  name: \"ZJU\",  greet: function () {    console.log(this.name); // this æŒ‡å‘ obj  },};obj.greet(); // è¾“å‡ºï¼šZJU\n\n\ne.g.\n\nconst obj = {  name: \"ZJU\",  getNameWithAnonymous: function () {    return function () {      console.log(this.name);    };  },  getNameWithArrow: function () {    return () =&gt; {      console.log(this.name);    };  },};const anonymousFn = obj.getNameWithAnonymous();anonymousFn(); // è¾“å‡ºï¼šundefinedconst arrowFn = obj.getNameWithArrow();arrowFn(); // è¾“å‡ºï¼šZJU\n\nè¿›ä¸€æ­¥å®Œå–„.\n\näº‹ä»¶å¯¹è±¡äº‹ä»¶å¯¹è±¡ åœ¨äº‹ä»¶å¤„ç†å‡½æ•°çš„å†…éƒ¨, ä»¥å›ºå®šæŒ‡å®šåç§°å‡ºç°çš„å‚æ•°, ä¾‹å¦‚event,e,evt. å®ƒè¢«è‡ªåŠ¨ä¼ é€’ç»™äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œä»¥æä¾›é¢å¤–çš„åŠŸèƒ½å’Œä¿¡æ¯ã€‚\ne.targetå§‹ç»ˆæ˜¯å¯¹ äº‹ä»¶åˆšåˆšå‘ç”Ÿçš„å…ƒç´  çš„å¼•ç”¨\nè¡¨è¾¾å¼å’Œè¿ç®—ç¬¦new() ç”¨æ¥åˆ›å»ºå¯¹è±¡å®ä¾‹çš„ä¸€ä¸ªå…³é”®å­—. \n\nä½œç”¨: è°ƒç”¨ ä¸€ä¸ª æ„é€ å‡½æ•°, å¹¶è¿”å›ä¸€ä¸ªç”±è¯¥æ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡å®ä¾‹.\n\nè¯­æ³•new constructornew constructor()new constructor(arg1)new constructor(arg1, arg2)new constructor(arg1, arg2, /* â€¦, */ argN)\n\nå¦‚æœæ²¡æœ‰æŒ‡å®šå‚æ•°, é»˜è®¤ä¸ºåœ¨ä¸å¸¦å‚æ•°çš„æƒ…å†µä¸‹è°ƒç”¨æ„é€ å‡½æ•°. å³new foo ç­‰ä»·äº new foo();\næ„é€ å‡½æ•°å†…éƒ¨çš„thiså°†è¢«ç»‘å®šåˆ°æ–°å»ºçš„å¯¹è±¡å®ä¾‹ä¸Š;\n\n\ne.g.\n\nfunction Car(color, brand) {  this.color = color;   // å°† color èµ‹å€¼ç»™æ–°å¯¹è±¡  this.brand = brand;   // å°† brand èµ‹å€¼ç»™æ–°å¯¹è±¡}const myCar = new Car(\"red\", \"Toyota\");console.log(myCar.color); // è¾“å‡º \"red\"console.log(myCar.brand); // è¾“å‡º \"Toyota\"\n\nä½¿ç”¨new()çš„æ­¥éª¤:\n\nå®šä¹‰æ„é€ å‡½æ•°;\nä½¿ç”¨new()å¹¶ä¼ å…¥æ„é€ å‡½æ•°çš„å‚æ•°;\nå°†è¿”å›çš„å¯¹è±¡å®ä¾‹èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡;\n\næ–°å¢å±æ€§\nä¸ºå·²ç»å®šä¹‰çš„å¯¹è±¡å®ä¾‹ç›´æ¥æ–°å¢å±æ€§, ä½†æ˜¯ä¸ä¼šå½±å“å…¶ä»–ç›¸åŒç±»å‹çš„å¯¹è±¡å’Œæ„é€ å‡½æ•°æœ¬èº«:\n\ncar1.color = \"black\" //ä¸ºcar1æ–°å¢colorå±æ€§\n\n\n\næ·»åŠ å…±äº«å±æ€§åˆ°æ„é€ å‡½æ•°ä¸­çš„prototype:\n\nfunction Car() {}car1 = new Car();car2 = new Car();console.log(car1.color); // undefinedCar.prototype.color = \"åŸè‰²\";console.log(car1.color); // 'åŸè‰²'car1.color = \"é»‘è‰²\";console.log(car1.color); // 'é»‘è‰²'console.log(Object.getPrototypeOf(car1).color); // 'åŸè‰²'console.log(Object.getPrototypeOf(car2).color); // 'åŸè‰²'console.log(car1.color); // 'é»‘è‰²'console.log(car2.color); // 'åŸè‰²'\n\n\næ­¤å¤„çš„æ„é€ å‡½æ•°åä¸ºCar, å› æ­¤é€šè¿‡Car.prototypeå¯ä»¥è®¿é—®åˆ°æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡;\ngetPrototypeOf è¡¨ç¤ºè·å–å¯¹è±¡çš„åŸå‹å¯¹è±¡, å› æ­¤æ­¤å¤„å‡ä¸ºæœ€åˆå®šä¹‰çš„ åŸè‰².\n\n\nnew.targetå‡½æ•°é€šè¿‡new.targetå±æ€§å¯ä»¥åˆ¤æ–­æ˜¯å¦é€šè¿‡newå…³é”®å­—è°ƒç”¨, å³æ„é€ .\n\nå¦‚æœå‡½æ•°æ˜¯æ­£å¸¸è°ƒç”¨, åˆ™è¿”å›undefined;\n\nå¦‚æœå‡½æ•°æ˜¯é€šè¿‡newè°ƒç”¨, è¿”å›è¢«è°ƒç”¨çš„æ„é€ å‡½æ•°.\n\ne.g.\n\n\nfunction Car(color) {  if (!new.target) {    // ä»¥å‡½æ•°çš„å½¢å¼è¢«è°ƒç”¨ã€‚    return `${color}è½¦`;  }  // é€šè¿‡ new è¢«è°ƒç”¨ã€‚  this.color = color;}const a = Car(\"çº¢\"); // a æ˜¯â€œçº¢è½¦â€const b = new Car(\"çº¢\"); // b æ˜¯ `Car { color: \"çº¢\" }`\n\nå¯¹è±¡ç±»å‹ä¸å®ä¾‹å¯¹è±¡ç±»å‹ é€šè¿‡æ„é€ å‡½æ•°å¯ä»¥åˆ›å»ºä¸€ä¸ªå¯¹è±¡ç±»å‹:\nfunction Car(make, model, year) {  this.make = make;  this.model = model;  this.year = year;}\n\nå¯¹è±¡å®ä¾‹ é€šè¿‡ä½¿ç”¨new()æ–¹æ³•, ç”±å¯¹è±¡ç±»å‹æ„é€ ä¸€ä¸ªå¯¹è±¡å®ä¾‹:\nconst myCar = new Car(\"é¹°ç‰Œ\", \"Talon TSi\", 1993);\n\nç±»ä¸newåœ¨JSå½“ä¸­, ç±» å¿…é¡» é€šè¿‡newè°ƒç”¨.\n\nå¯ä»¥ä¼˜å…ˆé˜…è¯»ç±»ç›¸å…³çš„çŸ¥è¯†\n\n\ne.g.\n\nclass Animal {  //æ„é€ å‡½æ•°  constructor(name) {    this.name = name;  }  //å®ä¾‹æ–¹æ³•  greet() {    console.log(`ä½ å¥½ï¼Œæˆ‘çš„åå­—æ˜¯${this.name}`);  }}\nå¯¹äºä¸Šè¿°çš„ç±», å¿…é¡»ä½¿ç”¨å¦‚ä¸‹çš„è°ƒç”¨æ–¹å¼:\nconst animal = new Animal(\"Dog\"); // æ­£å¸¸\nè€Œä¸‹é¢è¿™æ ·ç±»ä¼¼äºæ™®é€šå‡½æ•°çš„è°ƒç”¨æ–¹å¼ä¼šæŠ›å‡ºé”™è¯¯:\nAnimal(\"Cat\"); // TypeError:  Class constructor Animal cannot be invoked without 'new'\n\n\nåœ¨ä½¿ç”¨æ­£ç¡®æ–¹æ³•å¾—åˆ°ç±»çš„å®ä¾‹å¯¹è±¡ä¹‹å, å¯ä»¥ç”¨è®¿é—®å±æ€§çš„æ–¹å¼æ¥è°ƒç”¨å®ä¾‹æ–¹æ³•:\nanimal.greet(); // è¾“å‡º \"ä½ å¥½ï¼Œæˆ‘çš„åå­—æ˜¯Dog\"\n\n\nä¸‹é¢ç»™å‡ºä¸æ™®é€šå‡½æ•°çš„åŒºåˆ«:\nfunction Car(model) {  this.model = model;}const car = new Car(\"Toyota\"); // æ­£å¸¸Car(\"Honda\"); // ä¸æŠ›å‡ºé”™è¯¯ï¼Œä½† this ä¼šæŒ‡å‘å…¨å±€å¯¹è±¡.const anotherCar = Car(\"cat\"); //æ­¤æ—¶å…¨å±€å¯¹è±¡ä¸‹çš„modelå€¼ä¸º \"cat\", è¦†ç›–äº†ä¸Šä¸€è¡Œçš„å®šä¹‰.\næ€»ç»“:\n\nä»¥æ„é€ å‡½æ•°å½¢å¼å‘ˆç°çš„æ™®é€šå‡½æ•°, å¯ä»¥è¢«ç›´æ¥è°ƒç”¨, ä½†æ˜¯æ­¤æ—¶å†…éƒ¨çš„å‚æ•°èµ‹å€¼ç»™äº†å…¨å±€å¯¹è±¡;\nå¦‚æœä»¥newæ–¹æ³•æ„é€ å¾—åˆ°å¯¹è±¡å®ä¾‹, ä¾æ—§æ­£å¸¸.\n\n\nè¡¥å……é»˜è®¤è¡Œä¸ºé»˜è®¤è¡Œä¸º æ˜¯æŒ‡æµè§ˆå™¨åœ¨æŸäº›äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œè‡ªåŠ¨æ‰§è¡Œçš„å†…ç½®æ“ä½œ, æ˜¯æµè§ˆå™¨çš„â€œé»˜è®¤ååº”â€.\n\næ¯”å¦‚å­˜åœ¨ä»¥ä¸‹çš„é»˜è®¤è¡Œä¸º:\næ»šåŠ¨äº‹ä»¶ï¼šè§¦æ‘¸å±ä¸Šæ»‘åŠ¨æ‰‹æŒ‡ï¼Œé¡µé¢ä¼šæ»šåŠ¨;\næ‹–æ‹½æ–‡ä»¶åˆ°æµè§ˆå™¨ï¼šæµè§ˆå™¨ä¼šå°è¯•åŠ è½½æ–‡ä»¶;\nç‚¹å‡»é“¾æ¥ (&lt;a href=\"...\"&gt;)ï¼šè·³è½¬åˆ°æŒ‡å®šçš„ URL;\n\n\n\né˜»æ­¢é»˜è®¤è¡Œä¸º ä½¿ç”¨ event.preventDefault() æ–¹æ³•å¯ä»¥é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸º.\n\ne.g: é˜»æ­¢é“¾æ¥è·³è½¬\n\ndocument.querySelector('a').addEventListener('click', function(event) {    event.preventDefault(); // é˜»æ­¢ç‚¹å‡»é“¾æ¥æ—¶çš„é»˜è®¤è¡Œä¸º    console.log('é“¾æ¥è¢«ç‚¹å‡»ï¼Œä½†æ²¡æœ‰è·³è½¬');});\n\n\nä½œç”¨:\né€šè¿‡é˜»æ­¢é»˜è®¤è¡Œä¸º, å¯ä»¥å®ç°è‡ªå®šä¹‰é€»è¾‘.\n\n\n\nthis\nthiså¯ä»¥è§†ä½œå‡½æ•°çš„ä¸€ä¸ªéšå‚æ•°, æ˜¯åœ¨å‡½æ•°è¢«æ‰§è¡Œæ—¶åˆ›å»ºçš„ç»‘å®š;\nthis æŒ‡å‘çš„æ˜¯å½“å‰å‡½æ•°çš„è°ƒç”¨è€…ï¼Œè€Œä¸æ˜¯å‡½æ•°å†…éƒ¨å®šä¹‰çš„å˜é‡.\n\n\n\n\ne.g.\n\nconst obj = {    a: \"a in the obj\",    b: \"b in the obj\",    f: function() {        const b = \"b in the function\"; // å‡½æ•°ä½œç”¨åŸŸ        console.log(this.b); // è®¿é—® this.b    }};const b = \"b outside of the func\";obj.f();\n\næ­¤å¤„çš„f\n\nå‡½æ•°ä¸Šä¸‹æ–‡ä¸­çš„this\nthiså‚æ•°çš„å€¼å–å†³äºå‡½æ•°å¦‚ä½•è¢«è°ƒç”¨, è€Œä¸æ˜¯å‡½æ•°å¦‚ä½•è¢«å®šä¹‰.\n\n// å¯¹è±¡å¯ä»¥ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ç»™ 'call' æˆ– 'apply'ï¼Œ// å¹¶ä¸” 'this' å°†è¢«ç»‘å®šåˆ°å®ƒã€‚const obj = { a: \"Custom\" };// ä½¿ç”¨ var å£°æ˜çš„å˜é‡æˆä¸º 'globalThis' çš„å±æ€§ã€‚var a = \"Global\";function whatsThis() {  return this.a; // 'this' å–å†³äºå‡½æ•°å¦‚ä½•è¢«è°ƒç”¨}whatsThis(); // 'Global'; åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œ'this' å‚æ•°é»˜è®¤ä¸º 'globalThis'obj.whatsThis = whatsThis;obj.whatsThis(); // 'Custom'; 'this' å‚æ•°è¢«ç»‘å®šåˆ° obj\n\nåŒæ ·æ˜¯è°ƒç”¨å‡½æ•°whatsThis(), ä½†æ˜¯thiså‚æ•°è¢«ç»‘å®šåˆ°ä¸åŒçš„å¯¹è±¡ä¸Š, å¯¼è‡´è¿”å›å€¼ä¸åŒ;\nåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹, thiså‚æ•°é»˜è®¤æŒ‡å‘globalThis, å³å…¨å±€å¯¹è±¡;\nå¯¹äºå…¸å‹å‡½æ•°, thisæŒ‡å‘å‡½æ•°è®¿é—®çš„å¯¹è±¡;\n\n\ne.g.\n\nconst obj = {    b: \"b in the obj\",    f: function() {        const b = \"b in the function\"; // å‡½æ•°ä½œç”¨åŸŸ        console.log(this.b); // è®¿é—® this.b    }};const b = \"b outside of the func\";obj.f();\n\næ­¤å¤„fä½œä¸ºobjå¯¹è±¡çš„æ–¹æ³•è¢«è°ƒç”¨, å› æ­¤æ™®é€šå‡½æ•°çš„thisæŒ‡å‘obj.\n\n\ne.g. ç›´æ¥è°ƒç”¨çš„æ™®é€šå‡½æ•°thisæŒ‡å‘å…¨å±€:\n\nconst obj = {    a: \"a in the obj\",    f: function() {        const funcA = function () { return this.a }; // æ™®é€šå‡½æ•°ï¼Œthis ç”±è°ƒç”¨æ–¹å¼å†³å®š        console.log(funcA()); // è®¿é—® this.a    }};var a = \"a in the global\";obj.f(); // \"a in the global\"\n\n\næ­¤å¤„çš„funcAå¹¶æ²¡æœ‰ç±»ä¼¼äºä½œä¸ºå¯¹è±¡çš„å±æ€§è°ƒç”¨(obj.funcA()), å› æ­¤å…¶thisæŒ‡å‘å…¨å±€ä½œç”¨åŸŸ(window), è¾“å‡ºundefined, è€Œæ˜¯ç›´æ¥è°ƒç”¨çš„å½¢å¼, å› æ­¤å…¶thisæŒ‡å‘å…¨å±€ä½œç”¨åŸŸ.\n\n\nå¯¹thisä¼ å€¼ä½¿ç”¨call()ä»¥åŠapply()æ–¹æ³•å¯ä»¥å°†thisç»‘å®šåˆ°å…¶ä»–å¯¹è±¡ä¸Š.\ncall()\nå½¢å¼: func.call(thisArg, arg1, arg2, ...)\ne.g:\n\nfunction add(c, d) {  return this.a + this.b + c + d;}const o = { a: 1, b: 3 };// ç¬¬ä¸€ä¸ªå‚æ•°è¢«ç»‘å®šåˆ°éšå¼çš„ 'this' å‚æ•°ï¼›// å‰©ä½™çš„å‚æ•°è¢«ç»‘å®šåˆ°å‘½åå‚æ•°ã€‚add.call(o, 5, 7); // 16\n\napply()\nå½¢å¼: func.apply(thisArg, [argsArray])\ne.g:\n\nfunction add(c, d) {  return this.a + this.b + c + d;}const o = { a: 1, b: 3 };// ç¬¬ä¸€ä¸ªå‚æ•°è¢«ç»‘å®šåˆ°éšå¼çš„ 'this' å‚æ•°ï¼›// ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå…¶æˆå‘˜è¢«ç»‘å®šåˆ°å‘½åå‚æ•°ã€‚add.apply(o, [10, 20]); // 34\n\nbind()\nå½¢å¼: f.bind(someObject);\nä½œç”¨: \nåˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°(éœ€è¦é‡æ–°èµ‹å€¼), å…·æœ‰ä¸fç›¸åŒçš„å‡½æ•°ä½“å’Œä½œç”¨åŸŸ;\næ–°å‡½æ•°çš„thisè¢« æ°¸ä¹…åœ° ç»‘å®šåˆ°someObject, ä¸éšè°ƒç”¨æ–¹å¼çš„å˜åŒ–è€Œå˜åŒ–.\n\n\né™åˆ¶: \nbindæ— æ³•å¤šæ¬¡ç”Ÿæ•ˆ. å³å¯¹å‡½æ•°fbindå¾—åˆ°çš„g, æ— æ³•ç»§ç»­ç”¨bindå¾—åˆ°æœŸæœ›çš„h;\n\n\ne.g. å¤šæ¬¡bind:\n\nfunction f() {  return this.a;}const g = f.bind({ b: \"azerty\" });console.log(g()); // undefinedconst h = g.bind({ a: \"yoo\" }); // bind åªèƒ½ç”Ÿæ•ˆä¸€æ¬¡ï¼console.log(h()); // undefinedconst o = { a: 37, f, g, h };console.log(o.a, o.f(), o.g(), o.h()); // 37 37 undefined undefined\n\n\nç”±äºbindåªèƒ½å¯¹ä¸€ä¸ªåŸå§‹å‡½æ•°ä½œç”¨, å› æ­¤ç”±få¾—åˆ°çš„gæ— æ³•ç»§ç»­ç”±bindç»‘å®šthiså¾—åˆ°æœŸæœ›çš„h, æ­¤å¤„hçš„thisä¾æ—§æ˜¯{b: \"azerty\"}, å› æ­¤åœ¨è¾“å‡ºå¯¹è±¡aæ—¶æ˜¾ç¤ºundefined;\no.f()çš„è°ƒç”¨æ˜¯æ™®é€šå‡½æ•°çš„è°ƒç”¨, å› æ­¤å…¶thisç»§æ‰¿è‡ªå¯¹è±¡o, è¾“å‡º37;\n\n\n\ne.g. å¯¹è±¡\n\nfunction f() {  return this.a + \" \" + this.c;}const g = f.bind({ b: \"azerty\" , c:\"ccc\"});console.log(g()); // \"undefined ccc\"const h = g.bind({ a: \"yoo\" }); // bind åªèƒ½ç”Ÿæ•ˆä¸€æ¬¡ï¼console.log(h()); // \"undefined ccc\"const o = { a: 37, f, g, h };console.log(o.a, o.f(), o.g(), o.h()); // 37 37 azerty azerty\n\n\nbindç»‘å®šçš„thisæ˜¯æ°¸ä¹…è¦†ç›–, è€Œéç®€å•å åŠ ;\nç”±äºbindç»‘å®šçš„thisä¸éšè€…è°ƒç”¨æ–¹å¼çš„å˜åŒ–è€Œå˜åŒ–, å› æ­¤å³ä½¿å¤„äºå¯¹è±¡oå½“ä¸­, g,hä¾æ—§ä¸ä¼šè¾“å‡ºoä¸­çš„a.\n\n\nç®­å¤´å‡½æ•°ä¸­çš„thisä½¿ç”¨ call()ã€apply() æˆ– bind() è°ƒç”¨ç®­å¤´å‡½æ•°æ—¶ï¼Œä¼ å…¥çš„ this å€¼ä¼šè¢«å¿½ç•¥ï¼Œä½†å…¶ä»–å‚æ•°ä»ç„¶ä¼šæ­£å¸¸ä¼ é€’ã€‚\næ™®é€šå‡½æ•°:\nconst a = \"a in the global\";const foo = function () {return this.a};const obj = { a: \"a in the obj\", f: foo};console.log(obj.f()); // \"a in the obj\"\n\ncall()ã€ apply()ã€ bind() æ— æ³•æ”¹å˜ç®­å¤´å‡½æ•°çš„this(ä½†æ˜¯callä¸applyçš„å…¶ä»–å‚æ•°å¯ä»¥æ­£å¸¸ä¼ é€’:\nconst foo = ()=&gt; this.a;const obj = { a: \"a in the obj\", f: foo.bind({a:\"a in the bind\"}) // æ˜¾å¼ç»‘å®š this åˆ° obj, ä½†æ˜¯æ— æ³•ç”Ÿæ•ˆ};console.log(obj.f()); // undefined\n\næ¢æˆæ™®é€šå‡½æ•°åˆ™è¾“å‡ºa in the obj.\n\n\nå…¨å±€ä½œç”¨åŸŸ\n\nvar a = \"a in the global\";const foo1 = () =&gt; this.a;const obj = {\ta: \"a in the obj\",\tf: ()=&gt; a};console.log(obj.f());\n\nä½œç”¨åŸŸä½œç”¨åŸŸ æŒ‡å½“å‰çš„æ‰§è¡Œä¸Šä¸‹æ–‡, åœ¨å…¶ä¸­çš„å€¼å’Œè¡¨è¾¾å¼å¯ä»¥è¢«è®¿é—®. \n\nå…¨å±€ä½œç”¨åŸŸ: è„šæœ¬æ¨¡å¼è¿è¡Œæ‰€æœ‰ä»£ç çš„é»˜è®¤ä½œç”¨åŸŸ;\næ¨¡å—ä½œç”¨åŸŸ: æ¨¡å—æ¨¡å¼ä¸­è¿è¡Œä»£ç çš„ä½œç”¨åŸŸ;\nå‡½æ•°ä½œç”¨åŸŸ: ç”±å‡½æ•°åˆ›å»ºçš„ä½œç”¨åŸŸ\nå—çº§ä½œç”¨åŸŸ: ç”±letæˆ–constå£°æ˜çš„å˜é‡çš„ä½œç”¨åŸŸ.(å¯¹äºvaræ— æ•ˆ);\n\n{  var x = 1;}console.log(x); // 1{  const x = 1;}console.log(x); // undefined\n\nNotices:\n\nå¯¹è±¡æœ¬èº«å¹¶ä¸ä¼šåˆ›å»ºä½œç”¨åŸŸ, åªæ˜¯ä¸€ä¸ªé”®å€¼å¯¹çš„é›†åˆ;\nç®­å¤´å‡½æ•°ä¹Ÿä¸ä¼šåˆ›å»ºè‡ªå·±çš„ä½œç”¨åŸŸ, è€Œæ˜¯ ç»§æ‰¿ å¤–å±‚ä½œç”¨åŸŸä¸­çš„this;\n\nå˜é‡ä¸ä½œç”¨åŸŸ\nvaråœ¨å…¨å±€ä½œç”¨åŸŸä¸­å£°æ˜æ—¶ä¼šæˆä¸º å…¨å±€å¯¹è±¡ (windowæˆ–global)çš„å±æ€§;\nletå’Œconstå³ä½¿åœ¨å…¨å±€ä½œç”¨åŸŸä¸­å£°æ˜, ä¹Ÿä¸ä¼šæˆä¸ºå…¨å±€å¯¹è±¡çš„å±æ€§;\n\nvar a = \"1\";let b = \"2\";window.a; // \"1\"window.b; // undefined\n\nå› æ­¤, å»ºè®®åœ¨å…¨å±€ä½œç”¨åŸŸä¸­ä¸è¦ä½¿ç”¨varå£°æ˜å˜é‡, è€Œä½¿ç”¨letæˆ–constå£°æ˜å˜é‡. ä»è€Œé¿å…å¯¼è‡´æ„å¤–çš„è¦†ç›–å’Œå†²çª.\n\nå‡½æ•°ä¸ä½œç”¨åŸŸæ™®é€šå‡½æ•°æ™®é€šå‡½æ•°å’ŒåŒ¿åå‡½æ•°çš„ä½œç”¨åŸŸç»§æ‰¿è‡ªå…¶å®šä¹‰æ—¶çš„ä½œç”¨åŸŸ.\nconst obj = {    a: \"a in the obj\",    insideObj: {        g: function() {            return this.a; // æ™®é€šå‡½æ•°ï¼Œthis åŠ¨æ€ç»‘å®šåˆ° insideObj        }    },    f: function() {        return this.a; // æ™®é€šå‡½æ•°ï¼Œthis åŠ¨æ€ç»‘å®šåˆ° obj    }};console.log(obj.f());        // \"a in the obj\"console.log(obj.insideObj.g()); // undefinedï¼Œå› ä¸º insideObj ä¸­æ²¡æœ‰ a\n\nç®­å¤´å‡½æ•°e.g. ç®­å¤´å‡½æ•°ç»§æ‰¿å¤–å±‚ä½œç”¨åŸŸ:\nvar a = \"a in the global\";const obj = {    a: \"a in the obj\",    insideObj: {        g: () =&gt; this.a    },    f: () =&gt; this.a};console.log(obj.f());        // \"a in the global\"console.log(obj.insideObj.g()); //\"a in the global\"\nç”±äºå¯¹è±¡ä¸ä¼šåˆ›å»ºä½œç”¨åŸŸ, å› æ­¤æ­¤å¤„çš„ç®­å¤´å‡½æ•°çš„thisç»§æ‰¿äº†å¤–å±‚ä½œç”¨åŸŸ(window)çš„this, ä¸”varåˆ›å»ºçš„å˜é‡å­˜åœ¨äºå…¨å±€ä½œç”¨åŸŸä¸­.\nè¯­æ³•ç³–è¯­æ³•ç³– ä¸€ç§è®©ä»£ç æ›´ç®€æ´ã€æ›´æ˜“è¯»çš„è¯­æ³•å½¢å¼.\n\næœ¬è´¨ä¸Šæ²¡æœ‰å¢åŠ è¯­è¨€çš„åŠŸèƒ½, è€Œæ˜¯å¯¹å·²æœ‰åŠŸèƒ½çš„ åŒ…è£… æˆ–è€…ä¼˜åŒ–;\nå¯è¯»æ€§æå‡: è®©ä»£ç æ›´å¡« ä½¿å¾—ä»£ç æ›´åŠ å®¹æ˜“ç†è§£å’Œä¹¦å†™;\nåº•å±‚å®ç°: å®è´¨ä¸Šä¾æ—§ç”¨åŸºç¡€çš„è¯­æ³•å®ç°.\n\nç±»ç±» class æ˜¯ ES6 å¼•å…¥çš„è¯­æ³•ç³–, å®ƒæä¾›äº†é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ç®€æ´è¯­æ³•. æœ¬è´¨ä¸Šæ˜¯å¯¹åŸå‹ç»§æ‰¿prototypeçš„å°è£….\nä½¿ç”¨classçš„å†™æ³•:\nclass Person {  constructor(name) {    this.name = name;  }  greet() {    console.log(`Hello, my name is ${this.name}`);  }}const person = new Person(\"Alice\");person.greet(); // è¾“å‡ºï¼šHello, my name is Alice\n\nç­‰ä»·çš„åŸå‹å†™æ³•:\nfunction Person(name) {  this.name = name;}Person.prototype.greet = function() {  console.log(`Hello, my name is ${this.name}`);};const person = new Person(\"Alice\");person.greet(); // è¾“å‡ºï¼šHello, my name is Alice\n\nç®­å¤´å‡½æ•°ç®­å¤´å‡½æ•°ç®€åŒ–äº†å‡½æ•°å®šä¹‰çš„ä¹¦å†™, å…¶æœ¬è´¨ä¸Šä¾æ—§æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°, å› æ­¤ä¹Ÿæ˜¯è¯­æ³•ç³–çš„ä¸€ç§.\n\ne.g.\n\n// ä½¿ç”¨ç®­å¤´å‡½æ•°const add = (a, b) =&gt; a + b;// ç­‰ä»·çš„æ™®é€šå‡½æ•°const add = function add(a, b) {  return a + b;}\n\nç»“æ„èµ‹å€¼ç»“æ„èµ‹å€¼ æ‰‹åŠ¨æå–å¯¹è±¡å±æ€§çš„è¯­æ³•ç³–.\n\nä½¿ç”¨ç»“æ„èµ‹å€¼:\n\nconst person = {name:\"Zhuo\", gender:\"male\"};const {name, gender} = person;\n\n\nç­‰ä»·çš„åŸå‹å†™æ³•:\n\nconst person = {name:\"Zhuo\", gender:\"male\"};const name = person.name;const gender = person.gender;\n\nèµ‹å€¼è§„åˆ™ç»“æ„èµ‹å€¼æ—¶, åŸºäº å±æ€§ååŒ¹é… è€Œéé¡ºåº.å› æ­¤, å¯¹è±¡ç»“æ„çš„{}å†…éƒ¨å±æ€§å¿…é¡»å’Œ å¯¹è±¡çš„å±æ€§å ç›¸å¯¹åº”.\né”™è¯¯çš„ç¤ºä¾‹:\nconst person = { name: \"Alice\", age: 25 };const { a, b } = person;console.log(a); // è¾“å‡ºï¼šundefinedconsole.log(b); // è¾“å‡ºï¼šundefined\n\né‡å‘½åå±æ€§çš„å†™æ³•:\nconst person = { name: \"Alice\", age: 25 };const { name: a, age: b } = person;console.log(a); // è¾“å‡ºï¼šAliceconsole.log(b); // è¾“å‡ºï¼š25\n\næ‰‹åŠ¨èµ‹å€¼: å¯¹äºç»“æ„å¯¹è±¡ä¸­ä¸å­˜åœ¨çš„å±æ€§, å¯ä»¥é‡‡å–æ™®é€šèµ‹å€¼çš„æ–¹å¼ä¸ç»“æ„èµ‹å€¼ç›¸ç»“åˆ:\nconst person = { name: \"Alice\" };const { name, age = 30 } = person;console.log(name); // è¾“å‡ºï¼šAliceconsole.log(age);  // è¾“å‡ºï¼š30 ï¼ˆå› ä¸º person ä¸­æ²¡æœ‰ age å±æ€§ï¼Œæ‰€ä»¥ä½¿ç”¨äº†é»˜è®¤å€¼ï¼‰\næ•°ç»„çš„ç»“æ„èµ‹å€¼ä¸Šè¿°è®¨è®ºçš„ç»“æ„èµ‹å€¼éƒ½æ˜¯å¯¹ å¯¹è±¡ çš„ç»“æ„èµ‹å€¼, å¯¹äºæ•°ç»„åŒæ ·å¯ä»¥ç»“æ„èµ‹å€¼, ä¸”èµ‹å€¼è§„åˆ™ä¸å¯¹è±¡ç›¸åâ€”â€” åŸºäºé¡ºåºèµ‹å€¼:\nconst arr = [\"Alice\", 25];const [a, b] = arr;console.log(a); // è¾“å‡ºï¼šAliceconsole.log(b); // è¾“å‡ºï¼š25\n","categories":["å­¦ä¹ ç¬”è®°"],"tags":["å‰ç«¯","JS"]},{"title":"å¯†ç å­¦å¤ä¹ ","url":"/2025/06/25/%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/%E5%AF%86%E7%A0%81%E5%AD%A6%E5%A4%8D%E4%B9%A0/","content":"\nä»»è¯¾è€å¸ˆï¼šç™½æ´ªæ¬¢\n\nå‰æœŸçŸ¥è¯†æ•°å­¦åŸºç¡€gcdç›¸å…³å®šç†è®¾a,bä¸ºæ•´æ•°ä¸”è‡³å°‘æœ‰ä¸€ä¸ªä¸ä¸º0, ä»¤d = gcd(a,b), åˆ™ä¸€å®šå­˜åœ¨æ•´æ•°x, y æœ‰:\n\n\nç‰¹åˆ«çš„,å½“a,bäº’ç´ æ—¶ä¸€å®šå­˜åœ¨æ•´æ•°xï¼Œyä½¿å¾— ä¸Šè¿°çš„å³å¼ä¸º1æˆç«‹\n\næ‰©å±•æ¬§å‡ é‡Œå¾—æ³•å¯¹äºä¸€ä¸ªæ•´æ•°aæ¥è¯´ï¼Œå¦‚æœå®ƒå­˜åœ¨æ¨¡nçš„ä¹˜æ³•é€†å…ƒ , é‚£ä¹ˆè¿™ä¸€å……åˆ†å¿…è¦æ¡ä»¶æ˜¯ï¼Œ aä¸næ˜¯äº’ç´ çš„\n\n\nç´ æ•°ç›¸å…³çš„å®šç†ä»»æ„å¤§äº0çš„æ•´æ•°  éƒ½èƒ½å”¯ä¸€åˆ†è§£æˆç´ æ•°çš„ä¹˜ç§¯ï¼š\n\nå¤å…¸å¯†ç \né¢‘ç‡åˆ†æè¡¨å¯ä»¥å¯¹ä»˜å•è¡¨å¯†ç \nä»¿å°„å¯†ç \nä»¥åŠ å¯†ä¸ºä¾‹ï¼š\n\n\n\nVigenereVigenereæ˜¯ä¸€ç§å¤šè¡¨ç®€å•åŠ æ³•å¯†ç .\n\næ˜æ–‡ä¸º m1,m2â€¦mp; å¯†é’¥ä¸º k1,k2â€¦kq\nå½“qå°äºpæ—¶, é‡å¤ä½¿ç”¨å¯†é’¥;\nåŠ å¯†: \nè§£å¯†: \n\nEnigmaæµç¨‹å›¾ï¼š\n\n\nHashå‡½æ•°MD5ä½¿ç”¨ï½åŠ å¯†çš„è¿‡ç¨‹ä¹Ÿè¢«ç§°ä½œç”Ÿæˆæ‘˜è¦çš„è¿‡ç¨‹ï¼Œç›¸å½“äºæœ‰æŸå‹ç¼©\n\næŠ¥æ–‡çš„é•¿åº¦å›ºå®šä¸º128ä½\n\nmd5æ˜¯ä¸€ç§å•å‘å‡½æ•°ï¼Œæ„å‘³ç€å¯èƒ½æœ‰å¤šä¸ªè¾“å…¥å¯¹åº”ç›¸åŒçš„è¾“å‡º\n\nå¦‚æœä¸åŒçš„æŠ¥æ–‡è®¡ç®—å¾—åˆ°çš„æ‘˜è¦ç›¸åŒï¼Œå°±ç§°ä¸ºå‘ç”Ÿäº†ç¢°æ’ collision\n\nåˆ†å—ä¸å¡«å……\nå¦‚æœæœ€åä¸€å—çš„å¤§å°æ­£å¥½æ˜¯64å­—èŠ‚ï¼Œè¿˜éœ€è¦é¢å¤–å¡«å……ä¸€å—\n1å­—èŠ‚çš„ 0x80ä»¥åŠ8å­—èŠ‚çš„ count æ˜¯ä¸€å®šè¦å¡«å……çš„\næŒ‰ç…§æœ€åä¸€å—çš„å¤§å°ï¼Œåˆ†ä¸ºå°äº56ä¸ä»‹äº56å’Œ63å­—èŠ‚ä¹‹é—´2ç§æƒ…å†µ\n\næºä»£ç åˆ†æç»“æ„ä½“\ntypedef struct _MD5_CTX{   ulong32  state[4]; /* 128ä½æ‘˜è¦ */   ulong32  count[2]; /* å·²å¤„ç†çš„æŠ¥æ–‡çš„äºŒè¿›åˆ¶ä½æ•°,æœ€å¤§å€¼=2^64-1 */   unsigned char  data[64]; /* 64å­—èŠ‚messageå— */} MD5_CTX;\n\n\næ­¤å¤„çš„countè®¡æ•°çš„æ˜¯æ¯”ç‰¹ä½è€Œä¸æ˜¯å­—èŠ‚ï¼å› æ­¤é€šè¿‡ä¸‹é¢çš„æ–¹å¼è®¡ç®—å­—èŠ‚æ•°ï¼š\nbytes_left = (MD5_ctx-&gt;count[0] &gt;&gt; 3) &amp; 0x3F;\n\n&amp;0x3F ç­‰ä»·äº %64 ä¹Ÿå°±æ˜¯ å’Œ n-bitçš„1è¿›è¡Œä¸è®¡ç®—ï¼Œç›¸å½“äº mod \n\nUpdate\næ¯æ¬¡ä¸æ–­å‘å…¶ä¸­æ·»åŠ æ–°æ•°æ®ï¼Œæ·»åŠ å‰éœ€è¦è¡¥å……çš„å­—èŠ‚æ•°å¦‚æœå°äºbuf_lenï¼Œè¯´æ˜å¯ä»¥è¡¥é½ä¸º1ä¸ªblockæ¥å¤„ç†ï¼Œå¦åˆ™è¿›å…¥elseåˆ†æ”¯ç›´æ¥èµ‹å€¼\nFinalint Final_MD5(MD5_CTX *MD5_ctx){   ulong32 bytes_left, pad_len;   unsigned char total_bits[8];   // unsigned char * è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢, ä½¿å¾—8â€œä½â€å®é™…ä¸Šå¾—åˆ°çš„æ˜¯64bits, ä¹Ÿå°±æ˜¯è®¡æ•°çš„å…¨éƒ¨å†…å®¹.      memcpy(total_bits, (unsigned char *)MD5_ctx-&gt;count, 8); // total_bits=                                                           // å·²å¤„ç†çš„æŠ¥æ–‡çš„äºŒè¿›åˆ¶ä½æ•°                                                           // (å«dataä¸­å‰©ä½™çš„å­—èŠ‚)                                                           // åé¢è¡¥å……çš„pad_stuffåŠ                                                           // total_bitsæœ¬èº«ä¸è®¡åœ¨å†…   bytes_left = (MD5_ctx-&gt;count[0] &gt;&gt; 3) &amp; 0x3F;   pad_len = (bytes_left &lt; 56) ? (56 - bytes_left) :                (64 - bytes_left + 56); // bytes_left==56æ—¶, è¦è¡¥8+56=64å­—èŠ‚                                       // bytes_left==57æ—¶, è¦è¡¥7+56=63å­—èŠ‚   Update_MD5(MD5_ctx, pad_stuff, pad_len); // æŠŠpad_stuffåŠ åˆ°dataä¸­è®¡ç®—   Update_MD5(MD5_ctx, total_bits, 8); // æŠŠtotal_bitsåŠ åˆ°dataä¸­è®¡ç®—   return 0;}\n\n\næ³¨æ„ pad_lenåœ¨æ­¤å¤„å°±æ˜¯å¡«å……å€¼çš„å­—èŠ‚æ•°ï¼ŒæŒ‰ç…§æœ€åä¸€ä¸ªå—çš„å­—èŠ‚æ•°çš„56åˆ’åˆ†\ncountä¸­ï¼Œä¸åŒ…å«å¡«å……å€¼å’Œæœ¬èº«ï¼Œåªæ˜¯è®¡æ•°å¤„ç†çš„å­—èŠ‚æ•°\n\nå½©è™¹è¡¨ç ´è§£MD5ä»¥4ä¸ªå¤§å†™å­—æ¯çš„å½©è™¹è¡¨ä¸ºä¾‹:\n\nç”Ÿæˆéšæœºæ•° n  [0, ], å¾—åˆ°å¯¹åº”çš„å­—æ¯ \n\næ¯”å¦‚ AAAA å¯¹åº” 0\n\n\nè®¡ç®— \n\næ¯æ¬¡å°†å¾—åˆ°çš„ å–æ¨¡å¾—åˆ°ä¸Šè¿°çš„ , å¾ªç¯è®¡ç®—, å¾—åˆ°æœ€åçš„ä¸€ä¸ª ;\nè®°å½•å¾ªç¯åºåˆ—åˆå§‹çš„ nä¸æœ€åçš„ m.\n\n\nå¾ªç¯ä¸Šè¿°æ“ä½œ k æ¬¡, å¾—åˆ° kå¯¹çš„å€¼å­˜å…¥æ•°æ®åº“, ç„¶åç”¨æŠ¥æ–‡  åœ¨æ•°æ®åº“å½“ä¸­æ£€ç´¢ m.\n\nå¦‚æœç«‹å³æ‰¾åˆ°, è¯´æ˜æ˜¯è¿™å¯¹é”®å€¼å¯¹çš„ , ä½¿ç”¨ é‡æ–°è®¡ç®—å³å¯.\n\nå¦‚æœåœ¨æ•°æ®åº“ä¸­æ‰¾ä¸åˆ°  çš„å€¼, ä½œä»¥ä¸‹çš„æ“ä½œ\n\nå¦‚æœæ­¤æ—¶çš„  åœ¨æ•°æ®åº“ä¸­å­˜åœ¨, é‚£ä¹ˆè¯´æ˜æ­¤æ—¶çš„  å°±æ˜¯é‚£ä¸€å¯¹ nä¸mè®¡ç®—åºåˆ—ä¸­çš„ æ‰€å¯¹åº”çš„  .\n\nå¦‚æœç»§ç»­æ‰¾ä¸åˆ°, é‚£ä¹ˆå°±å¾ªç¯ä¸Šè¿°çš„æ­¥éª¤.\n\n\n\nNOTICEï¼š\n\nç”Ÿæˆä¸€ä¸ªéšæœºæ•°çš„ä¹‹åï¼Œè®¡ç®—å…¶MD5å€¼ , ç„¶åå°†å…¶èµ‹å€¼ç»™ ï¼ˆæ³¨æ„éœ€è¦å–æ¨¡å¤„ç†ï¼‰ï¼Œè¿­ä»£è®¡ç®—ï¼Œ ç›´è‡³ç´¢å¼•ä¸º100ï¼Œ å› æ­¤æœ€åä¸€ä¸ªéšæœºæ•°è®¡ç®—å¾—åˆ°çš„é“¾ä¸Šæœ‰101ä¸ªMD5å€¼\næ•°æ®åº“ä¸­åªå­˜å‚¨ä¸€å¼€å§‹çš„éšæœºæ•°ï¼ˆä¸ºäº†å¼€å§‹è®¡ç®—ï¼‰ï¼Œä»¥åŠé“¾å°¾çš„MD5å€¼ï¼ˆä¸ºäº†æŸ¥è¯¢æ¯”è¾ƒï¼‰\nå¦‚æœåˆå§‹çš„100ä¸ªmd5çš„å€¼ä¸­å­˜åœ¨å¯¹åº”çš„ï¼Œå°±è®¤ä¸ºæ˜æ–‡æ˜¯å¯¹åº”çš„ (ç„¶åè½¬æ¢ä¸ºå­—æ¯ç»„åˆ)ï¼›\nå¦‚æœä¸€å¼€å§‹æŸ¥è¯¢ä¸åˆ°ï¼Œå°±æŒ‰ç…§ä¸‹é¢çš„è¯´æ³•ç»§ç»­è®¡ç®—ï¼š\n\n\n\n\næ³¨æ„ï¼Œæ˜¯å‘å‰è¿­ä»£ï¼Œä¹Ÿå°±æ˜¯è¯´å­˜å‚¨çš„éƒ½æ˜¯0å’Œ100ï¼Œæ¯”è¾ƒçš„éƒ½æ˜¯idx=100çš„md5å€¼\n\nSHA\nsha-1å¾—åˆ°çš„hashå€¼æ˜¯160ä½ = 20 å­—èŠ‚\nä½¿ç”¨5ä¸ª32ä½å¯„å­˜å™¨\n\n\nï½ä¹Ÿæ˜¯åˆ†å—è®¡ç®—ï¼Œæ¯å—64å­—èŠ‚ï¼Œä¸è¶³64å­—èŠ‚æ—¶æŒ‰ç…§ä¸md5ç›¸åŒçš„æ–¹æ³•å¡«å……\n\nç»“æ„ä½“typedef struct _SHA1_CTX {   ulong state[5];    // 5ä¸ª32ä½å¯„å­˜å™¨ï¼Œå¯¹åº”A,B,C,D,E   struct {ulong hi, lo;} length;  // 64ä½æ¶ˆæ¯é•¿åº¦è®¡æ•°å™¨   uchar data[64];    // 512ä½çš„æ¶ˆæ¯å—} SHA1_CTX;\n\nROL\nå¾ªç¯å·¦ç§»\n\nstatic ulong ROL(ulong x, int number) /* left circular shift number bits */{   return (x &lt;&lt; number) | (x &gt;&gt; (32 - number));}\n\n\nåœ¨ä½ä½è¿›è¡Œæˆ–è¿ç®—ï¼Œè¡¥å……ä¹‹å‰ç§»å‡ºçš„ä½\n\n\nBigEndian å°†bufä¸­çš„longè½¬æ¢æˆå¤§ç«¯çš„å­˜å‚¨æ ¼å¼\nfinalä¸­ï¼šBigEndian(digest, 20); /*[%] æ³¨æ„SHA1çš„hashå€¼å…±5ä¸ªstate, æ¯ä¸ªstateä¸ºulongç±»å‹,       è¾“å‡ºçš„æ—¶å€™,ä¸å¯ä»¥æŠŠ5ä¸ªstateå½“ä½œè¿ç»­çš„20ä¸ªå­—èŠ‚å¹¶ä»¥      å­—èŠ‚ä¸ºå•ä½æŒ‰ä»å·¦åˆ°å³é¡ºåºè¾“å‡º, è€Œåº”è¯¥ä»¥ulongä¸ºå•ä½      åˆ†5æ¬¡è¾“å‡º. è¿™æ˜¯å› ä¸ºåœ¨Little-Endiançš„æœºå™¨ä¸­, ulong      æ˜¯æŒ‰ä½å­—èŠ‚åœ¨å‰é«˜å­—èŠ‚åœ¨åçš„é¡ºåºå­˜æ”¾åœ¨å†…å­˜ä¸­çš„ , è‹¥      ä»¥å­—èŠ‚ä¸ºå•ä½è¾“å‡ºulong , åˆ™ä»å·¦åˆ°å³è¾“å‡ºçš„4ä¸ªå­—èŠ‚ä¸      ç›´æ¥è¾“å‡ºulongæ‰€å¾—çš„4å­—èŠ‚é¡ºåºåˆšå¥½æ˜¯åçš„.      è¿™é‡Œä¸ºäº†è¾¾åˆ°ä»¥å­—èŠ‚ä¸ºå•ä½æŒ‰ä»å·¦åˆ°å³é¡ºåºè¾“å‡ºçš„ç›®çš„,      ç‰¹åœ°è°ƒç”¨BigEndian()è¿™ä¸ªå‡½æ•°å¯¹æ¯ä¸ªulongæ‰€åŒ…å«çš„4ä¸ª      å­—èŠ‚é¢ å€’é¡ºåº, è¿™æ ·ä¸€æ¥,  digestä¸­åŒ…å«çš„20å­—èŠ‚æ‘˜è¦      å°±å¯ä»¥æŒ‰ä»å·¦åˆ°å³é¡ºåºè¾“å‡ºäº†.*/#endif\n\nåˆ†ç»„å¯†ç å·¥ä½œä¸æµå¯†ç åˆ†ç»„å¯†ç ECB\nç”µå­å¯†ç ç°¿\n\nå°†æ˜æ–‡åˆ†å—, åˆ†åˆ«ç”¨ä¸€ä¸ª keyè¿›è¡ŒåŠ å¯†.\n\nä¼˜ç‚¹:  åŠ å¯†å’Œè§£å¯†éƒ½å¯ä»¥å¹¶è¡Œè¿›è¡Œ.\nç¼ºç‚¹: å—å†…ä¾æ—§å­˜åœ¨å¯èƒ½ç›¸åŒçš„å¯†æ–‡å—.\n\n\n\nCBC\nCipher Block Chaining å¯†æ–‡å—é“¾æ¥æ¨¡å¼\n\nå½“å‰å—çš„å¯†æ–‡ä¸å‰ä¸€å—çš„å¯†æ–‡æœ‰å…³:\n\n\nåŠ å¯†è¿‡ç¨‹åªèƒ½ä¸²è¡Œå¤„ç†ï¼š\n\nè§£å¯†è¿‡ç¨‹å¯ä»¥å¹¶è¡Œå¤„ç†ï¼š\n\nCFB\nCipher feedback å¯†æ–‡åé¦ˆæ¨¡å¼\n\n\n\nåŠ å¯†æµç¨‹ï¼š\n\næ¯æ¬¡åŠ å¯†ä¸€ä¸ªå­—èŠ‚\nå–Xçš„é«˜8ä½ç”¨EåŠ å¯†ï¼Œç„¶åä¸æ˜æ–‡8ä½å¼‚æˆ–\n\n\nç„¶åæ¯å­—èŠ‚åŠ å¯†ç»“æŸä¹‹å, å°† x å·¦ç§»ä¸€ä¸ªå­—èŠ‚, ç„¶åç”¨ c[0]å¡«å……å³ä¾§;\nå¾ªç¯ä¸Šè¿°, æ³¨æ„æ¯æ¬¡éƒ½æ˜¯ç”¨ x[0] è¿›è¡Œå¼‚æˆ–æ“ä½œ.\n\n\nè§£å¯†æµç¨‹ï¼š\n\nä¼˜ç‚¹ï¼š\n\nå¯ä»¥ä»å¯†æ–‡ä¼ è¾“çš„é”™è¯¯ä¸­æ¢å¤\n\n\n\nRC4æ˜¯ä¸€ç§å¯¹ç§°åŠ å¯†ç®—ç®—æ³•ï¼Œä½¿ç”¨ç›¸åŒçš„å¯†é’¥æ¥åŠ å¯†å’Œè§£å¯†\nç»“æ„ä½“typedef struct rc4_key{     unsigned char state[256];  // 256å­—èŠ‚çš„çŠ¶æ€è¡¨     unsigned char x;          // çŠ¶æ€è¡¨ç´¢å¼•x     unsigned char y;          // çŠ¶æ€è¡¨ç´¢å¼•y} rc4_key;\n\nå¯†é’¥åˆå§‹åŒ–void prepare_key(unsigned char *key_data_ptr, int key_data_len, rc4_key *key){   // åˆå§‹åŒ–çŠ¶æ€è¡¨   for(counter = 0; counter &lt; 256; counter++)      state[counter] = counter;      // ä½¿ç”¨å¯†é’¥æ‰“ä¹±çŠ¶æ€è¡¨   for(counter = 0; counter &lt; 256; counter++)   {       index2 = (key_data_ptr[index1] + state[counter] + index2) % 256;       swap_byte(&amp;state[counter], &amp;state[index2]);       index1 = (index1 + 1) % key_data_len;   }}\n\n\nkey_data_ptr ä¸ºç§å­å¯†é’¥ï¼›ä½¿ç”¨å¾ªç¯æ‰“ä¹±state\n\nåŠ å¯†/è§£å¯†å‡½æ•°void rc4(unsigned char *buffer_ptr, int buffer_len, rc4_key *key){   for(counter = 0; counter &lt; buffer_len; counter ++)   {      x = (x + 1) % 256;      y = (state[x] + y) % 256;      swap_byte(&amp;state[x], &amp;state[y]);      xorIndex = (state[x] + state[y]) % 256;      buffer_ptr[counter] ^= state[xorIndex];   }   key-&gt;x = x; /* ä¿å­˜xåŠyè¿™ä¸¤ä¸ªstateçš„ä¸‹æ ‡, ä½¿å¾—ä¸‹æ¬¡rc4()è°ƒç”¨ä¸æœ¬æ¬¡è°ƒç”¨å¯ä»¥è¡”æ¥ */   key-&gt;y = y;}\n\nç¤ºä¾‹main(){   rc4_key k;   char seed_key[] = \"This is RC4 seed key.\";   char plaintext[100] = \"A quick brown fox jumps over the lazy dog.\";      // åˆå§‹åŒ–å¯†é’¥   prepare_key(seed_key, strlen(seed_key), &amp;k);      // åŠ å¯†   rc4(buf, n, &amp;k);      // è§£å¯†ï¼ˆé‡æ–°åˆå§‹åŒ–å¯†é’¥åå†æ¬¡åŠ å¯†ï¼‰   prepare_key(seed_key, strlen(seed_key), &amp;k);   rc4(buf, n, &amp;k);}\n\né‡è¦ç®—æ³•DESåŸºæœ¬ä»‹ç»å…¨ç§°: Data Encryption Standard\næµç¨‹ç¤ºæ„å›¾ï¼š\n\n\n\n\næ˜æ–‡çš„L/Rä¸­äº¤æ›¿åŠ å¯†ï¼Œæ¯è½®æ²¡æœ‰æ”¹å˜çš„éƒ¨åˆ†ä¸Kå‚ä¸è®¡ç®—ï¼Œå°†ç»“æœç”¨äºæ”¹å˜å¦ä¸€éƒ¨åˆ†\n64ä½çš„keyå»é™¤8ä½ï¼ˆç»è¿‡æ‰“ä¹±ï¼‰åå˜ä¸º56ä½çš„Keyï¼Œç„¶åå°†å·¦å³ä¸¤ä¾§åˆ†åˆ«å¾ªç¯å·¦ç§»ï¼Œ16æ¬¡å¾ªç¯è¿­ä»£ä¸­åˆ†åˆ«å¾—åˆ°ä¸€ç»„ï¼Œç„¶ååˆ©ç”¨56-48çš„è¡¨å¾—åˆ°48ä½çš„å€¼\næŸ¥è¯¢sboxå¾—åˆ°32ä½çš„ç»“æœï¼Œä¸Lå¼‚æˆ–\n\n\næ­¥éª¤è§£æåŠ å¯†L[i] = L[i-1] ^ f(K[i], R[i-1]);R[i] = R[i-1]\n\nå…¶ä¸­çš„ fä¸ºï¼š\nlong f(K[i], D[i]){  K48 = shrink ( K[i]);  D48 = expand( D[i]);  return query_sbox(K48 ^ D48);}\n\n\nshrinkè¡¨ç¤ºä»æœ€ä½ä½å¼€å§‹, äº¤æ›¿å–ç”¨1/2æ¬¡ æ¯”å¦‚ 0,0,1,2,2,3â€¦\nä¸ºäº†å°†48ä½çš„æ•°æ®å±•å¼€æˆä¸ºæ•°ç»„, æˆ‘ä»¬å°†48ä½åˆ†ä¸º8ç»„, å„ç»„ä¸º 6bits å¹¶ä¸”ç”¨ unsigned charæ¥è¡¨ç¤º â€”â€” unsigned char s[8].\ns[i]ä»…ä»…ä½¿ç”¨ä½å…­ä½.\nsboxæ°å¥½å¯¹åº”äº†8å¼ è¡¨, ä¾› sè¿›è¡ŒæŸ¥è¯¢, ä¸”æ¯æ¬¡æŸ¥è¯¢è¾“å…¥6ä½çš„è¾“å‡ºæ˜¯4ä½.\nå› æ­¤, 8æ¬¡æŸ¥è¯¢çš„è¿”å›å€¼ä¸€å…±æ˜¯32ä½.\n\n\n\nsboxçš„æŸ¥è¯¢ç”±8ä¸ªä¸€ç»´æ•°ç»„ç»„æˆï¼Œåˆ†åˆ«å¯¹åº”48ä½åˆ†æˆçš„8ç»„æŸ¥è¯¢, å…¶ä¸­æ¯ä¸ªæ•°ç»„éƒ½æ˜¯64ä½, æ¯è¡Œæ˜¯0-15æ„æˆçš„ä¸é‡å¤çš„16ä¸ªæ•°å­—, å…±å››è¡Œ.\n\n\nå¯¹äºæ¯ç»„ä¸­çš„8ä½ï¼Œå®é™…çš„æ•°æ®å­˜å‚¨åœ¨ä½6ä½ä¸­ï¼Œæˆ‘ä»¬ï¼š\n\næå–é¦–å°¾çš„2-bitåˆæˆæŸ¥è¯¢çš„è¡Œå·ï¼›\næå–ä¸­é—´çš„4-bitåˆæˆæŸ¥è¯¢çš„åˆ—å·\n\ndisturbå°†è¾“å…¥çš„64ä½è¿›è¡Œä½é‡æ’ permutation\ntableä¸­64å­—èŠ‚æ˜¯1ï½64çš„æ’åºï¼ˆå› æ­¤å†…éƒ¨çš„æ•°å€¼ä»¥1ä¸ºåŸºæ•°ï¼‰ï¼š\n\nip[0]=58  è¡¨ç¤ºæºæ•°æ®ä¸­çš„ç¬¬58ä½ ( å®é™…æ˜¯ç¬¬58-1=57ä½)è¦è½¬åŒ–æˆç›®æ ‡æ•°æ®ä¸­çš„ç¬¬0+1=1 ä½\n\nvoid disturb(unsigned char table[64], unsigned char s[8], unsigned char t[8]){   int i;   byte_num, bit_num;   /* memset(t, 0, sizeof(t)); é”™è¯¯ */   memset(t, 0, 8); /* æ­£ç¡® */   for(i=0; i&lt;64; i++)   {      byte_num = (table[i]-1) / 8;      bit_num = (table[i]-1) % 8;// å¦‚æœå¯¹åº”çš„ä½æ˜¯0ï¼Œå°±ç›´æ¥è¿›è¡Œä¸‹ä¸€è½®çš„è¿­ä»£ï¼Œå› ä¸ºåˆå§‹åŒ–tçš„å„ä½éƒ½æ˜¯0      if(s[byte_num] &amp; (0x80 &gt;&gt; bit_num)) /* æˆ– if(s[byte_num] &amp; (0x01 &lt;&lt; 7-bit_num)) */         t[i/8] |= 0x80 &gt;&gt; i%8;   }}\n\n\næ¯æ¬¡å¾ªç¯å–å‡ºtableä¸­çš„ä¸€ä¸ªå­—èŠ‚ï¼Œå¹¶ä¸”é€šè¿‡ /8 ä¸ %8çš„è®¡ç®—åˆ†åˆ«å¾—åˆ° byte_num, bit_numï¼›\nä¸€å…±éœ€è¦è¿­ä»£64æ¬¡ï¼Œå› ä¸ºä¸€å…±æœ‰8x8ä½éœ€è¦æ›¿æ¢\n\nä»€ä¹ˆæ—¶å€™æ‰“ä¹±ï¼Ÿ\n\næ˜æ–‡åœ¨åŠ å¯†ä¹‹å‰â€”â€”ip\næ˜æ–‡åŠ å¯†ä¹‹åâ€”â€”fp\nsboxæŸ¥è¯¢ç»“æœçš„32ä½æ•°æ®ï¼‰sbox_perm_table\næ‰“ä¹±ä¹‹åå†ä¸â€œæ˜æ–‡â€å¼‚æˆ–\n\n\n64ä½çš„å¯†é’¥è½¬æ¢ä½56ä½ TODOâ€”â€”key_perm_table\n56ä½çš„å¯†é’¥å¾ªç¯å·¦ç§»ä¹‹åå–ç”¨48ä½ TODO\n\nå¯†é’¥çš„åˆæˆ56 2 48   for (j=0; j&lt;48; j++) /* select bits individually */   {                    /* [%] Select 48 bits from 56 bits.                               j is the target bit number, and                                key_56bit_to_48bit_table[j]-1 is                                the source bit number */      /* check bit that goes to kn[j] */      if (pcr[key_56bit_to_48bit_table[j]-1]) /* [%] pcr[key_56bit_to_48bit_table[j]-1] is SourceBit, j is TargetBit */      {         /* mask it in if it's there */         b = j % 6;                     /*  same as bytebit[b+2] */         kn[i][j/6] |= bytebit[b] &gt;&gt; 2; /* [%] remove the trailing 2 bits                                           j=0    1    2    3    4    5                                  bytebit[b]=0x80 0x40 0x20 0x10 0x08 0x04                               bytebit[b]&gt;&gt;2=0x20 0x10 0x08 0x04 0x02 0x01                                         */      }   } /* [%] for (j=0; j&lt;48; j++) */} /* [%] for (i=0; i&lt;16; i++) */\n\næ­¤å¤„çš„ bytebitä¸ºï¼š\nstatic int bytebit[8] = {/* bit0  bit1  bit2  bit3  bit4  bit5  bit6  bit7 */   0x80, 0x40, 0x20, 0x10, 0x08, 0x04, 0x02, 0x01};\n\nä¹Ÿå°±æ˜¯8bitä¸­ä»æœ€å·¦ä¾§ä¸º1å¼€å§‹ï¼Œä¸æ–­å³ç§»çŸ¥é“æœ€å³ä¾§ä¸º1\nä¸Šè¿°çš„ bytebit[b] &gt;&gt; 2 ç¡®ä¿äº†1åªå¯èƒ½åªå‡ºç°å³ä¾§çš„6ä½ï¼Œå› æ­¤å®ç°äº†é å³å¯¹é½\n6ä¸ªä¸ºä¸€ç»„ï¼Œæ„æˆ8x6ï¼Œiè¡¨ç¤º16è½®è¿­ä»£ä¸­çš„å±‚æ•°\næ“ä½œæ±‡æ€»åˆ©ç”¨ä¸€ç»´idxåœ¨äºŒç»´æ•°ç»„ä¸­ç´¢å¼•\nè¦æ±‚ï¼šç»™å®š1-64èŒƒå›´å†…çš„idxï¼Œåœ¨8x8 i.e. 8ä¸ªå­—èŠ‚ä¸­ç´¢å¼•å¯¹åº”çš„1bitï¼š\nåˆ†æï¼š\n8x8åˆ†åˆ«ç”¨3bitå»ç´¢å¼•\n\n\n\ndisturbä¸­çš„å®ç°\nfor(i=0; i&lt;64; i++){    byte_num = (table[i]-1) / 8;    bit_num = (table[i]-1) % 8;    // å¦‚æœå¯¹åº”çš„ä½æ˜¯0ï¼Œå°±ç›´æ¥è¿›è¡Œä¸‹ä¸€è½®çš„è¿­ä»£ï¼Œå› ä¸ºåˆå§‹åŒ–tçš„å„ä½éƒ½æ˜¯0    if(s[byte_num] &amp; (0x80 &gt;&gt; bit_num)) /* æˆ– if(s[byte_num] &amp; (0x01 &lt;&lt; 7-bit_num)) */        t[i/8] |= 0x80 &gt;&gt; i%8;}\n\n\n/ 8 ç­‰ä»·äº &gt;&gt; 3 ï¼› åŒæ—¶ % 8ç­‰ä»·äº &amp;7\næ³¨æ„åˆ©ç”¨ç»“æœå¯¹äºŒç»´çš„æ•°ç»„è¿›è¡Œèµ‹å€¼ï¼ˆæ­¤å¤„å°±æ˜¯æ›¿æ¢ï¼‰ï¼št[i/8] |= 0x80 &gt;&gt; i % 8\n\nä¸‹é¢çš„å®ç°ä¹Ÿæ˜¯åˆç†çš„ï¼š\nfor (j=0; j&lt;56; j++) /* convert key_perm_table to bits of key */{                    /* [%] j is the target bit number of key */   b = key_perm_table[j] - 1;   /* integer bit location */                                /* [%] b is the source bit number of key, base 0 */   m = b &amp; 7;        /* [%] m = b % 8; */ /* find bit */    pc1m[j]=(key[b&gt;&gt;3] &amp; bytebit[m]) ? 1 : 0; /* find which key byte b is in */                                             /* and which bit of that byte */                                             /* and store 1-bit result */}\n\n\nä¸åŒäºç¬¬ä¸€ä¸ªå®ç°ï¼Œæ­¤å¤„çš„pclmå°±æ˜¯ä¸€ä¸ªä¸€ç»´çš„æ•°ç»„ï¼Œå› æ­¤å¯ä»¥ç›´æ¥èµ‹å€¼ã€‚\n\næ„å»ºåæŸ¥è¡¨å·²çŸ¥sboxæ‰“ä¹±è¡¨ï¼Œéœ€è¦æ ¹æ®è¡¨æ ¼å†…å®¹æ„å»ºåæŸ¥è¡¨\n\nå…ˆéå†å–å€¼èŒƒå›´\nç„¶åéå†å·²çŸ¥è¡¨çš„idxï¼Œç›´åˆ°idxåœ¨å·²çŸ¥è¡¨ä¸­ç´¢å¼•å¾—åˆ°çš„å€¼ä¸å¤–å±‚çš„éå†å€¼ç›¸åŒ\nå°†å¤–å±‚çš„idxä½œä¸ºç´¢å¼•ï¼Œç”¨å†…å±‚è¡¨çš„idxèµ‹å€¼ç»™åæŸ¥è¡¨\n\nfor(p=0; p&lt;32; p++) /* [%] p=SourceBit */{   for(i=0; i&lt;32; i++) /* [%] i=TargetBit */   {      if(sbox_perm_table[i]-1 == p) /* [%] sbox_perm_table[i] ranges within [1,32], so it is base 1, not base 0 */      {         sbox_perm_table_inverse[p] = i; /* [%] fill sbox_perm_table_inverse[p] with TargetBit=i */         break;      }   }}\n\nå¾ªç¯å³ç§»ä¸è¡¥å¿æ–¹æ³•1ï¼šå¾ªç¯å·¦ç§»ä¸å³ç§»ï¼š\n// å¾ªç¯å·¦ç§»nä½ulong ROL(ulong x, int n){  n = n % 32;\treturn (x &lt;&lt; n) | (x &gt;&gt; ( 32 - n));}// å¾ªç¯å³ç§»ulong ROR(ulong x, int n){  n = n % 32;\treturn (x &gt;&gt; n) | (x &lt;&lt; (32 - n));}\n\næ–¹æ³•2ï¼šå¾ªç¯å³ç§»ä¸€ä½çš„å†™æ³•\n// å¾ªç¯å³ç§»ï¼Œå°†rçš„æœ€ä½ä½ç§»åˆ°æœ€é«˜ä½ï¼Œå…¶ä»–ä½å‘å³ç§»åŠ¨ä¸€ä½//  r &amp; 1ç”¨äºåˆ¤æ–­ç§»ä½å‰çš„æœ€ä½ä½æ˜¯å¦ä¸º1ï¼Œå¦‚æœæ˜¯ï¼Œéœ€è¦åœ¨å¾ªç¯å³ç§»çš„ç»“æœè¡¥å¿rt = (r &gt;&gt; 1) | ((r &amp; 1) ? 0x80000000 : 0); /* [%] rt = ROR(rt, 1); */\n\nå¾ªç¯å·¦ç§»\nåˆ†åˆ«å°†å·¦å³ä¸¤ä¾§åˆ†ä¸º28bitè¿›è¡Œå¾ªç¯å·¦ç§»ï¼›\nç”¨ bè¡¨ç¤ºç§»ä½çš„ä½æ•°ï¼Œå°†pclmä¸­çš„ä½èµ‹å€¼ç»™pcræ•°ç»„\næ³¨æ„åœ¨é«˜28ä½ä¸­æ˜¯ (j - 28 + xx) % 28  ç¡®ä¿åŸºæ•°ä¸º1\n\nfor(j=0; j&lt;28; j++) /* [%] left half */{   b = (j+key_rol_steps[i]) % 28;   pcr[j] = pc1m[b];}for(j=28; j&lt;56; j++) /* [%] right half */{   b = 28 + (j-28+key_rol_steps[i]) % 28;   pcr[j] = pc1m[b];}\n\nè½¬æ¢ä¸º16è¿›åˆ¶for(i=0; i&lt;blocks*8; i++) // è½¬åŒ–æˆ 16è¿›åˆ¶å­—ç¬¦ä¸²{sprintf(hex+i*2, \"%02X\", bufout[i]); // 2è¡¨ç¤ºæœ€å°‘2ä½ï¼Œ0è¡¨ç¤ºä¸è¶³å¡«å……0ï¼ŒXè¡¨ç¤ºç”¨å¤§å†™çš„16è¿›åˆ¶è¾“å‡º}\n\nä¸‰é‡DESç”±äºå­˜åœ¨ä¸€ç§ç§°ä¸ºä¸­é€”ç›¸é‡æ”»å‡»ï¼ˆmeet-in-the-middle attackï¼‰çš„æŠ€æœ¯ï¼Œå¯¹åŒé‡DESåŠ å¯†æ„æˆäº†å¨èƒï¼Œå› æ­¤ä¸€èˆ¬ä¸ä½¿ç”¨åŒé‡DESï¼Œè€Œæ˜¯ä¸‰é‡DESæ¥å¤šé‡åŠ å¯†\nç»™å®š3ä¸ªé•¿åº¦ä¸º56æ¯”ç‰¹çš„å¯†é’¥ä¸æ˜æ–‡ ï¼Œå¯†æ–‡ä¸ºï¼š\n\nä¸­é—´çš„å¯†é’¥é‡‡å–è§£å¯†çš„å½¢å¼åŠ å¯†ï¼Œä»…ä»…æ˜¯ä¸ºäº†å¯ä»¥åˆ©ç”¨ä¸‰é‡DESå¯¹å•é‡DESåŠ å¯†çš„æ•°æ®è¿›è¡Œè§£å¯†\nAESæ•´ä½“æµç¨‹\n\nbytesub å­—èŠ‚ä»£æ›¿å˜æ¢\nshiftrows è¡Œç§»ä½å˜æ¢\nmixcolumns åˆ—æ··æ·†å˜æ¢\n\nMixColumn\n\n\næ¯æ¬¡åŠ å¯†æ˜æ–‡çš„ä¸€åˆ—.\n3112ä¸ºåº•,ä¸æ–­å¾ªç¯å·¦ç§»ä¸€ä½å¾—åˆ°å¦ä¸€è¡Œ.\nè®¡ç®—çš„æ—¶å€™æ˜¯å·¦åˆ—å’Œå³åˆ—è¯¸ä½ä¹˜åŠ . å’Œä¼ ç»Ÿçš„çŸ©é˜µä¹˜æ³•æœ‰æ‰€ä¸åŒ.\n\n\nä¹˜æ•°çš„ä½ä½åœ¨å‰, é«˜ä½åœ¨å.\n\nvoid MixColumn(unsigned char *p, unsigned char a[4], int do_mul){   unsigned char b[4];   unsigned char t[4][4];   int j;   for (j = 0; j &lt; 4; j++)   {      get_column(p, j, b);            /* ä»pæ‰€æŒ‡çŸ©é˜µmä¸­æå–ç¬¬jåˆ—, ä¿å­˜åˆ°æ•°ç»„bä¸­. */      if (do_mul)                     /* åœ¨åŠ å¯†æœ€åä¸€è½®ä»¥åŠè§£å¯†ç¬¬ä¸€è½®çš„MixColumnæ­¥éª¤ä¸­ä¸éœ€è¦åšä¹˜æ³•; */         aes_polynomial_mul(a, b, b); /* å…¶ä½™è½®éƒ½è¦åšä¹˜æ³•: b = a*b mod (X^4+1); */      memcpy(t[j], b, 4);             /* æŠŠä¹˜æ³•æ‰€å¾—ç»“æœå¤åˆ¶åˆ°tä¸­ç¬¬jè¡Œ */   }   memcpy(p, t, 4 * 4); /* å¤åˆ¶tä¸­çŸ©é˜µåˆ°p, æ›¿æ¢æ‰pä¸­åŸæœ‰çŸ©é˜µ */}\n\nå¯¹åº”çš„ä¹˜æ³•ï¼š\n// æœ‰é™åŸŸGF(2^8)å¤šé¡¹å¼ä¹˜æ³• mod X^4 + 1void aes_polynomial_mul(unsigned char x[4], unsigned char y[4], unsigned char z[4]){    unsigned char temp[8] = {0};    int i, j;    for (i = 0; i &lt; 4; i++)    {        for (j = 0; j &lt; 4; j++)        {            unsigned char product_coeff = aes_8bit_mul_mod_0x11B(x[3 - i], y[j]);            temp[i + j] ^= product_coeff;        }    }    z[0] = temp[0] ^ temp[4];    z[1] = temp[1] ^ temp[5];    z[2] = temp[2] ^ temp[6];    z[3] = temp[3] ^ temp[7];}\n\n\nç”±äºåŸå…ˆçŸ©é˜µä¸­çš„ä½æ¬¡ç³»æ•°å‡åœ¨å‰ï¼Œæˆ‘ä»¬å¸Œæœ›è®¡ç®—0ï½3æ¬¡ä¹‹é—´ç›¸ä¹˜çš„ç»“æœï¼Œå› æ­¤åœ¨ä¸¤å±‚çš„åµŒå¥—ä¸­ï¼Œé‡‡å– 3-i ä¸  j å¹¶ä¸¾çš„æ–¹å¼ï¼›\niï¼Œjåˆ†åˆ«è¡¨ç¤ºå¯¹åº”çš„é˜¶æ•°\n\nå¯†é’¥ç”Ÿæˆæµç¨‹æ¦‚è¿°ï¼š\n\n4i å½¢å¼æ¯”è¾ƒç‰¹æ®Šï¼Œä¸€ç»„ï¼ˆ4x4å­—èŠ‚ï¼‰çš„keyéƒ½åœ¨å‰è€…çš„åŸºç¡€ä¸Šå¾—åˆ°\n4içš„è®¡ç®—æµç¨‹ï¼š\n4i ç”± 4i-1 ä¸´æ—¶èµ‹å€¼\nå¾ªç¯å·¦ç§»1ä½\nå¸¦å…¥sboxæ›¿æ¢æŸ¥è¯¢\nåˆ©ç”¨4iè®¡ç®—è½®å¸¸æ•°r\né¦–å­—èŠ‚ä¸rå¼‚æˆ–\n4i ä¸ 4(i-1) ä½œå¼‚æˆ–å¾—åˆ°æœ€ç»ˆçš„4I\n\n\n4i+1 =  4i ^ 4(i-1);\n4i+2 = 4i+1 ^ 4(i-1) + 1\nâ€¦\n\npk[0] = pk[-1];     rol_a_row(key + i * 4, 1);     ByteSub(key + i * 4, 4);     r = 1 &lt;&lt; ((i - step) / step);     // rè¾ƒå°çš„æ—¶å€™ç›´æ¥mod     if (r &lt;= 0x80)        r = aes_8bit_mul_mod_0x11B(r, 1);     else        // rè¾ƒå¤§ï¼Œä¸ºäº†é¿å…å¤„ç†å¤§æ•°ï¼Œç­‰ä»·å˜æ¢æ¥ä¼˜åŒ–        r = aes_8bit_mul_mod_0x11B(r / 4, 4);     key[i * 4] ^= r;     pk[0] ^= pk[-step];     for (j = 1; j &lt; step; j++) /* i+jæ˜¯å¯†é’¥kçš„ä¸‹æ ‡, å½“(i+j)%step != 0æ—¶, */     {                          /* k[i+j]åªéœ€åšç®€å•çš„å¼‚æˆ–å¤„ç† */        if (...){}          else /* å½“(i+j)%step != 0æ—¶, k[i+j]åªéœ€åšä»¥ä¸‹å¼‚æˆ–å¤„ç† */           pk[j] = pk[j - step] ^ pk[j - 1];     }     pk += step;\n\n\næœ€åä¸¤ç»„çš„è½®å¸¸æ•°å› ä¸º mod 0x11Bçš„ç¼˜æ•…ä¸çš„å€¼å¹¶ä¸ç›¸ç­‰\n192å’Œ256ä½çš„å¯†é’¥ç”Ÿæˆåœ¨ä¸Šé¢çš„ä»£ç ç‰‡æ®µä¸­è¢«çœç•¥äº†\n\næ“ä½œæ±‡æ€»å†œå¤«ç®—æ³•æ ¸å¿ƒæ€æƒ³ï¼šé€šè¿‡è¢«ä¹˜æ•°çš„å·¦ç§»å’Œä¹˜æ•°çš„å³ç§»ï¼ŒåŒæ—¶æå‰æ±‚æ¨¡æ¥åŠ é€Ÿè®¡ç®—\nint p = 0 ;for(int i = 0; i &lt; 8 &amp;&amp; x &gt; 0 &amp;&amp; y &gt; 0; i++){  if(y &amp; 1){    p ^= x;  }  y &gt;&gt;= 1;  x &lt;&lt;= 1;    // é€šè¿‡è¿­ä»£å®ç°é™¤æ³•æ•ˆæœ.  if(x &gt;= 0x100){    x ^= 0x11B;  /* x = x % 0x11B */  }}\n\n\nGF2çš„å‡æ³•å°±æ˜¯åŠ æ³•ï¼ŒåŠ æ³•ä¹Ÿå°±æ˜¯å¼‚æˆ–ï¼›å¤šæ¬¡å¼‚æˆ–ç›´è‡³ç»“æœå°äº0x100\n\nRSAå±äºå…¬é’¥åŠ å¯†ä½“åˆ¶ï¼ˆéå¯¹ç§°åŠ å¯†ï¼‰\næ•´ä½“çš„æµç¨‹ï¼š\n\né€‰æ‹©ä¸ç­‰çš„ç´ æ•° \nè®¡ç®— \né€‰æ‹©ä¸  äº’ç´ çš„æ•° \nè®¡ç®—åœ¨æ¨¡ä¸‹çš„ä¹˜æ³•é€†å…ƒ \nå…¬å¼€å…¬é’¥ï¼š\nä¿å­˜ç§é’¥ï¼š\n\nåŠ å¯†ä¸è§£å¯†ï¼š\n\nEulerå‡½æ•°\nå®šä¹‰ï¼š ï¼šå°äºnä¸”ä¸näº’ç´ çš„æ•´æ•°çš„ä¸ªæ•°\n\nå¯¹åº”çš„å®šç†ï¼š\n\nç‰¹åˆ«çš„ï¼Œå¦‚æœæ˜¯ç´ æ•°çš„è¯ï¼Œæœ‰  =  ï¼Œæ¨çŸ¥ \n\n\nä¸­å›½å‰©ä½™å®šç†å¯¹äºåŒä½™æ–¹ç¨‹ç»„ï¼š\n\nå…¶ä¸­  ä¸¤ä¸¤ä¹‹é—´äº’ç´ ï¼Œå¹¶ä¸”ä»¤ ï¼š\n\næ­¤æ—¶ï¼Œ æ¨¡ Mçš„å”¯ä¸€è§£ä¸ºï¼š\n\n\nå…¶ä¸­é€†å…ƒå¯ä»¥æ ¹æ®è¾—è½¬ç›¸é™¤æ³•å¾—åˆ°\n\ne.g.\n\n\n\n\nEulerå‡½æ•°çš„æ‹“å±•æ€§è´¨\nä¹˜æ³•æ€§è´¨ï¼š\n$$n_1, n_2 äº’ç´  \\Longrightarrow \\phi(n_1n_2) = \\phi(n_1)\\phi(n_2)$$\n\nä¹˜ç§¯å…¬å¼ï¼š\n\n\nå…¶ä¸­ï¼Œä¸” ä¸ºç´ æ•°ï¼Œ ç”±å¯¹  çš„è´¨å› æ•°åˆ†è§£å¾—åˆ°\n\n\n\ne.g.\n\n\nç­¾ååŠ å¯†ï¼šAå°†ä¸€å°ä¿¡å‘é€ç»™B\n\nAå°†ä¿¡ä»¶å†…å®¹ç”¨Bçš„å…¬é’¥è¿›è¡ŒRSAçš„åŠ å¯†\nBæ”¶åˆ°å†…å®¹åä½¿ç”¨è‡ªå·±çš„ç§é’¥è§£å¯†ï¼Œå¾—åˆ°çš„ç»“æœå°±æ˜¯Aä¿¡ä»¶çš„å†…å®¹\n\nç­¾åï¼šä¸ºäº†éªŒè¯ä¿¡ä»¶å†…å®¹ç¡®å®æ¥è‡ªäºA\n\nAå¯¹ä¿¡ä»¶å†…å®¹è®¡ç®—æ‘˜è¦ï¼Œä»¥MD5ç®—æ³•ä¸ºä¾‹ï¼šM = MD5ï¼ˆLï¼‰\nç„¶åç”¨Açš„ç§é’¥å¯¹MåŠ å¯†ï¼š Mâ€™ = RSAï¼ˆMï¼Œ Açš„ç§é’¥ï¼‰\nAå°†Mâ€™ä¸Lä¸€èµ·å‘é€ç»™B\nBåˆ©ç”¨Açš„å…¬é’¥è®¡ç®— Mâ€˜â€™ = RSAï¼ˆMâ€™ï¼ŒAçš„å…¬é’¥ï¼‰ï¼ŒåŒæ—¶è®¡ç®—MD5ï¼ˆLï¼‰\nå¦‚æœåè€…çš„ç»“æœ = Mâ€˜â€™ï¼Œ è¯´æ˜éªŒè¯æ­£ç¡®\n\n\n\n\næ³¨æ„Aæ— æ³•å¾—åˆ°Bçš„ç§é’¥ï¼Œå› æ­¤æ­¤å¤„RSAåŠ å¯†è§£å¯†æ¶‰åŠçš„éƒ½æ˜¯Açš„å¯†é’¥\n\nECC\nç›´æ¥å‚è€ƒpdfæ–‡æ¡£\n\nå¸¸ç”¨eccå‡½æ•°\n\n\næ³¨æ„0è¡¨ç¤ºè®¡ç®—å¾—åˆ°çš„yæ˜¯å¶æ•°\n\nè¡¥å……AESç®—æ³•çš„æ˜æ–‡é•¿åº¦å’Œå¯†æ–‡é•¿åº¦éƒ½æ˜¯16å­—èŠ‚ï¼Œå¯†é’¥é•¿åº¦åˆ†ä¸º16ã€24ã€32å­—èŠ‚ä¸‰ç§\nè¯·çœ‹è°ƒæ•´åçš„è¡¨æ ¼ï¼Œå…¶ä¸­åŒ…å«äº†ECCç®—æ³•çš„ç‰¹ç‚¹ï¼š\n\n\n\nç®—æ³•\nåŠ å¯†æ¨¡å¼\næ˜æ–‡-å¯†æ–‡é•¿åº¦\nå¯†é’¥å…³ç³»\nå¤‡æ³¨\n\n\n\nDES\nECB, CBC, CFB\næ˜æ–‡64ä½ï¼Œå¯†æ–‡64ä½\n64ä½å¯†é’¥ï¼ˆå®é™…56ä½ç”¨äºåŠ å¯†ï¼Œ8ä½ç”¨äºå¥‡å¶æ ¡éªŒï¼‰\nä¸‰é‡DESæ˜¯ä¸ºäº†å¯¹æŠ—ä¸­é€”ç›¸é‡æ”»å‡»ï¼Œå¢åŠ å®‰å…¨æ€§\n\n\nAES\nECB, CBC, CFB (æœªåœ¨æ–‡ä¸­æ˜ç¡®æåŠï¼Œä½†é€šå¸¸æ”¯æŒ)\næ˜æ–‡16å­—èŠ‚ï¼Œå¯†æ–‡16å­—èŠ‚\nå¯†é’¥é•¿åº¦å¯ä¸º16ã€24ã€32å­—èŠ‚\nå…·æœ‰å­—èŠ‚ä»£æ›¿ã€è¡Œç§»ä½ã€åˆ—æ··æ·†ç­‰å˜æ¢\n\n\nRSA\nä¸é€‚ç”¨ï¼ˆéå¯¹ç§°åŠ å¯†ç®—æ³•ï¼‰\næ˜æ–‡é•¿åº¦éœ€å°äºnï¼Œå¯†æ–‡é•¿åº¦ç­‰äºn\nå…¬é’¥(e,n)ï¼Œç§é’¥(d,n)ï¼› eä¸Ï•(n)äº’ç´ ï¼Œdä¸ºeæ¨¡Ï•(n)çš„ä¹˜æ³•é€†å…ƒ\nåŸºäºå¤§æ•°åˆ†è§£çš„å›°éš¾æ€§ï¼›å¯ç”¨äºåŠ å¯†å’Œæ•°å­—ç­¾å\n\n\nECC\nä¸é€‚ç”¨ï¼ˆéå¯¹ç§°åŠ å¯†ç®—æ³•ï¼‰\nä¸æ‰€é€‰æ¤­åœ†æ›²çº¿å‚æ•°ç›¸å…³\nåŸºäºæ¤­åœ†æ›²çº¿ç¦»æ•£å¯¹æ•°éš¾é¢˜\nç›¸æ¯”RSAï¼Œåœ¨ç›¸åŒå®‰å…¨å¼ºåº¦ä¸‹å¯†é’¥é•¿åº¦æ›´çŸ­ï¼Œè®¡ç®—æ•ˆç‡æ›´é«˜\n\n\nxgcd/** * æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•å®ç° * è®¡ç®—gcd(x,y)ä»¥åŠx mod yçš„ä¹˜æ³•é€†å…ƒ *  * @param x ç¬¬ä¸€ä¸ªæ•´æ•° * @param y ç¬¬äºŒä¸ªæ•´æ•° * @param pinverse ç”¨äºå­˜å‚¨x mod yçš„ä¹˜æ³•é€†å…ƒçš„æŒ‡é’ˆ * @return è¿”å›gcd(x,y) *  * ç¤ºä¾‹: * xgcd(3, 20, &amp;inv)è¿”å›1ï¼Œinvè¢«èµ‹å€¼ä¸º7ï¼Œå› ä¸º3 * 7 â‰¡ 1 mod 20 */int xgcd(int x, int y, int *pinverse){   // åˆå§‹åŒ–æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•æ‰€éœ€çš„å˜é‡   // a1, b1ç”¨äºè·Ÿè¸ªç¬¬ä¸€ä¸ªæ–¹ç¨‹: x = a1*x + b1*y   // a2, b2ç”¨äºè·Ÿè¸ªç¬¬äºŒä¸ªæ–¹ç¨‹: y = a2*x + b2*y   int a1=1, b1=0, a2=0, b2=1;      // qæ˜¯å•†ï¼Œræ˜¯ä½™æ•°   int q, r, t;      // nå’Œold_nç”¨äºè·Ÿè¸ªå½“å‰çš„è¢«é™¤æ•°å’Œé™¤æ•°   int old_n;      // ç¡®ä¿x &lt;= yï¼Œå¦‚æœä¸æ˜¯åˆ™äº¤æ¢å®ƒä»¬   if(x &gt; y)   {      t = x;      x = y;      y = t;   }      // åˆå§‹åŒ–nå’Œr   // nåˆå§‹ä¸ºè¾ƒå¤§çš„æ•°yï¼Œråˆå§‹ä¸ºè¾ƒå°çš„æ•°x   n = y;   r = x;      // å½“ä½™æ•°rä¸ä¸º0æ—¶ç»§ç»­å¾ªç¯   while(r != 0)   {      // è®¡ç®—å•†q = n / r      q = n / r;        // æ›´æ–°a1å’Œa2çš„å€¼      // è¿™æ˜¯æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•çš„æ ¸å¿ƒéƒ¨åˆ†ï¼ŒåŒæ—¶è®¡ç®—ç³»æ•°      t = a1;      a1 = a2;      a2 = t - q*a2;        // æ›´æ–°b1å’Œb2çš„å€¼      t = b1;      b1 = b2;      b2 = t - q*b2;        // æ›´æ–°nå’Œrçš„å€¼ï¼Œè¿›è¡Œä¸‹ä¸€è½®è¿­ä»£      t = n;      n = r;      r = t % r;   }      // æ­¤æ—¶nå°±æ˜¯gcd(x,y)   // ä½†æˆ‘ä»¬éœ€è¦ç¡®ä¿ä¹˜æ³•é€†å…ƒb1åœ¨æ¨¡yä¸‹æ˜¯æ­£æ•°   // å› ä¸ºb1å¯èƒ½æ˜¯è´Ÿæ•°ï¼Œæ‰€ä»¥åŠ ä¸Šyå†å–æ¨¡yç¡®ä¿å®ƒåœ¨[0, y-1]èŒƒå›´å†…   a1 = (a1+y) % y;  // è™½ç„¶a1æ˜¯xçš„ç³»æ•°ï¼Œä½†è¿™é‡Œä¹Ÿç¡®ä¿å®ƒåœ¨æ¨¡yä¸‹   b1 = (b1+y) % y;  // ç¡®ä¿ä¹˜æ³•é€†å…ƒb1æ˜¯æ­£æ•°      // å°†ä¹˜æ³•é€†å…ƒå­˜å…¥æŒ‡é’ˆæŒ‡å‘çš„å˜é‡   *pinverse = b1;      // è¿”å›gcd(x,y)   return n;}\n","categories":["è¯¾ç¨‹ç¬”è®°"],"tags":["CSè¯¾ç¨‹","ä¿¡æ¯å®‰å…¨"]},{"title":"VNCä¸äº‘æœåŠ¡å™¨","url":"/2025/06/28/%E6%9C%8D%E5%8A%A1%E5%99%A8/VNC%E4%B8%8E%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8/","content":"åœ¨ä¸Šå¤šæ™ºèƒ½ä½“çŸ­å­¦æœŸè¯¾ç¨‹çš„æ—¶å€™ï¼Œç¢°åˆ°äº†å®éªŒâ€”â€”â€œåŸºäº IsaacGym çš„ Unitree G1 æœºå™¨äººå¹³åœ°è¡Œèµ°å®éªŒâ€ï¼Œå…¶è¦æ±‚æ˜¯ï¼š\n\nå‰æœŸå‡†å¤‡ï¼šIsaac Gym Preview 4 Release ç›®å‰ä»…æ”¯æŒ Linux æ“ä½œç³»ç»Ÿï¼ˆæœ¬åœ°è¿è¡Œå®‰è£…åŒç³»ç»Ÿï¼Œè¯·å‹¿ä½¿ç”¨ WSLï¼Œç³»ç»Ÿç‰ˆæœ¬æ¨è Ubuntu 20.04&#x2F;22.04ï¼‰\n\næ²¡æƒ³åˆ°åŒæŒç”¨æˆ·è¿˜æ˜¯é€ƒä¸å¼€ç¯å¢ƒçš„é…ç½®ğŸ˜‡ æ•´ä½“ä¸Šçœ‹ï¼Œæœ‰ä¸¤æ¡è§£å†³è·¯å¾„ï¼š\n\nåœ¨windowsä¸Šç‹¬ç«‹å®‰è£…ä¸€ä¸ªUbuntuç³»ç»Ÿ\nç§Ÿç”¨äº‘æœåŠ¡å™¨èµ„æºï¼Œä½†æ˜¯éœ€è¦é…ç½®VNCæ¥å®ç°å¯è§†åŒ–\n\nç»è¿‡çŸ­æš‚çš„è°ƒç ”ï¼Œæˆ‘å‘ç°æ–¹æ¡ˆ1éœ€è¦ä¸ºæ–°ç³»ç»Ÿåˆ’åˆ†æ–°çš„ç£ç›˜åŒºåŸŸï¼ŒåŒæ—¶ä¸‹è½½ä¸å°å®¹é‡çš„ç³»ç»Ÿã€‚è€ƒè™‘åˆ°æˆ‘å¤§æ¦‚ä¸ä¼šä¸€ç›´åœ¨æˆ‘çš„windowsä¸Šç”¨åˆ°è¿™ä¸ªubuntuï¼Œå› æ­¤æˆ‘è½¬è€Œé‡‡å–æ–¹æ¡ˆ2\næ•´ä½“è€Œè¨€ï¼Œæ–¹æ¡ˆ2æ¶‰åŠåˆ°çš„æ­¥éª¤åŒ…æ‹¬ï¼š\n\nå‡†å¤‡äº‘æœåŠ¡å™¨\nå®‰è£…æ¡Œé¢ç¯å¢ƒå’ŒVNCæœåŠ¡å™¨ç«¯\né…ç½®VNC\n\nå‡†å¤‡äº‘æœåŠ¡å™¨åœ¨ä¸€ä¼—æŒ‰æœˆè®¡è´¹çš„äº§å“ä¸­ï¼Œæˆ‘ç»ˆäºæ‰¾åˆ°äº†è…¾è®¯äº‘æœåŠ¡çš„æŒ‰å°æ—¶è®¡è´¹çš„è®¡ç®—èµ„æºâ€”â€”é«˜æ€§èƒ½åº”ç”¨æœåŠ¡:\n\n\né€‰æ‹©åˆé€‚çš„åŸºç¡€ç¯å¢ƒï¼Œå‹¾é€‰â€œæŒ‰é‡è®¡è´¹â€å³å¯\nä¹‹åå¯ä»¥åœ¨è…¾è®¯äº‘-é«˜æ€§èƒ½åº”ç”¨æœåŠ¡ä¸­ç®¡ç†äº‘æœåŠ¡ï¼š\n\n\n\né¦–æ¬¡åˆ›å»ºä¹‹åé»˜è®¤å¼€æœºï¼Œå¹¶ä¸”éœ€è¦â€œé‡ç½®å¯†ç â€æ¥è®¾ç½®ä¸€ä¸ªå¯†ç \n\nä¹‹åï¼Œå¯ä»¥é€šè¿‡sshè¿æ¥æœåŠ¡å™¨ï¼š\nssh ubuntu@&lt;å…¬ç½‘IP&gt;\n\n\nå…¬ç½‘IPå¯èƒ½éšæ—¶é—´å˜åŒ–ï¼Œæ³¨æ„å‚è€ƒæœ€æ–°çš„IP\n\nç„¶åè¾“å…¥ä¹‹å‰è®¾ç½®å¥½çš„å¯†ç å³å¯è¿æ¥\n\n\nå®‰è£…æ¡Œé¢ç¯å¢ƒå’ŒVNCæœåŠ¡ç«¯VNCï¼ˆVirtual Network Computingï¼‰ï¼š\n\nä¸€ç§å›¾å½¢åŒ–è¿œç¨‹æ§åˆ¶åè®®å’Œå·¥å…·ï¼Œå…è®¸ç”¨æˆ·é€šè¿‡ç½‘ç»œè¿œç¨‹è®¿é—®å’Œæ“ä½œå¦ä¸€å°è®¡ç®—æœºçš„æ¡Œé¢ç¯å¢ƒï¼›\nVNCåˆ†ä¸ºæœåŠ¡å™¨ç«¯ï¼ˆVNC Serverï¼‰å’Œå®¢æˆ·ç«¯ï¼ˆVNC Viewerï¼‰ã€‚æœåŠ¡å™¨ç«¯è¿è¡Œåœ¨è¢«æ§è®¾å¤‡ä¸Šï¼Œå®¢æˆ·ç«¯è¿è¡Œåœ¨éœ€è¦è¿œç¨‹è®¿é—®çš„è®¾å¤‡ä¸Š\n\nåœ¨æœåŠ¡å™¨é¢†åŸŸï¼Œå°¤å…¶æ˜¯LinuxæœåŠ¡å™¨ï¼Œé»˜è®¤é€šå¸¸åªæœ‰å‘½ä»¤è¡Œç•Œé¢ã€‚å¦‚æœéœ€è¦å›¾å½¢åŒ–æ¡Œé¢ç¯å¢ƒï¼Œå¯ä»¥å®‰è£…æ¡Œé¢ç¯å¢ƒå¹¶è¿è¡ŒVNC Serverã€‚è¿™æ ·ï¼Œè¿œç¨‹ç”¨æˆ·å°±èƒ½é€šè¿‡VNCå®¢æˆ·ç«¯è®¿é—®æœåŠ¡å™¨çš„å®Œæ•´å›¾å½¢æ¡Œé¢ï¼Œè¿›è¡Œå¯è§†åŒ–æ“ä½œå’Œç®¡ç†ã€‚\nå› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä¹‹å‰çš„äº‘æœåŠ¡å™¨ä¸Šå…ˆåå®‰è£…æ¡Œé¢ç¯å¢ƒä¸VNCæœåŠ¡ç«¯ï¼Œç„¶åé€šè¿‡æœ¬åœ°çš„VNCå®¢æˆ·ç«¯æ¥å¯è§†åŒ–è®¿é—®äº‘æœåŠ¡å™¨ç«¯\nå®‰è£…xfce4\nXfce4ï¼ˆé€šå¸¸ç®€ç§° Xfceï¼‰æ˜¯ä¸€æ¬¾è½»é‡çº§ã€æ˜“äºå®šåˆ¶çš„ Linux&#x2F;Unix æ¡Œé¢ç¯å¢ƒã€‚å®ƒçš„è®¾è®¡ç›®æ ‡æ˜¯å®ç”¨ã€å¿«é€Ÿä¸”èŠ‚çœç³»ç»Ÿèµ„æº\n\né¦–å…ˆï¼Œç¡®ä¿ç³»ç»Ÿæ˜¯æœ€æ–°é…ç½®ï¼š\nsudo apt update\n\nç„¶åï¼Œå®‰è£…è½»é‡çš„æ¡Œé¢ç¯å¢ƒï¼Œæ­¤å¤„ä»¥ xfce4ä¸ºä¾‹ï¼š\nsudo apt install xfce4\n\nå®‰è£…TigerVNCsudo apt install tigervnc-standalone-server\n\n\né€‚ç”¨äº Ubuntu 20.04 LTSåŠä¹‹åçš„ç‰ˆæœ¬\n\né…ç½®VNC Server\nè®¾ç½®å¯†ç ï¼š\nvncpasswd\nå¯åŠ¨VNCæœåŠ¡ï¼š\nvncserver :1\n\n\nè¿™ä¼šåœ¨5901ç«¯å£ç›‘å¬VNCè¿æ¥\n\n\n\nå¦‚æœå¯åŠ¨å¤±è´¥ï¼Œå¾ˆå¯èƒ½æ˜¯vncè„šæœ¬çš„é…ç½®é—®é¢˜â€”â€”~/.vnc/xstartupæŒ‡å®šäº†VNCå¯åŠ¨çš„æ¡Œé¢ç¯å¢ƒã€‚å¦‚æœè„šæœ¬å†…å®¹ä¸ä¹‹å‰ä¸‹è½½çš„æ¡Œé¢ç¯å¢ƒä¸åŒ¹é…ï¼Œå°±æ— æ³•æ­£å¸¸å¯åŠ¨ï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦æ”¹å†™è¯¥æ–‡ä»¶\n\nç”¨nanoæˆ–vimç¼–è¾‘å™¨æ‰“å¼€è„šæœ¬æ–‡ä»¶ï¼š\n\nnano ~/.vnc/xstartup\n\n\nå°†å†…éƒ¨çš„æ–‡ä»¶æ”¹å†™å¦‚ä¸‹ï¼šï¼ˆä»¥æ¡Œé¢ç¯å¢ƒxfce4ä¸ºä¾‹ï¼‰\n\n#!/bin/shunset SESSION_MANAGERunset DBUS_SESSION_BUS_ADDRESSstartxfce4 &amp;\n\n\nç¡®ä¿è„šæœ¬æ–‡ä»¶æœ‰æ‰§è¡Œæƒé™ï¼š\n\nchmod +x ~/.vnc/xstartup\n\n\né‡å¯VNCæœåŠ¡ï¼š\n\nvncserver -kill :1  # å…³é—­å½“å‰VNCä¼šè¯vncserver :1        # é‡æ–°å¯åŠ¨VNCä¼šè¯\n\n\n\næˆ‘ä»¬å¯ä»¥é€šè¿‡å‘½ä»¤ vncserver -list æŸ¥çœ‹å½“å‰çš„VNCå¯¹è¯\nä½¿ç”¨VNCå®¢æˆ·ç«¯è¿æ¥æœåŠ¡å™¨æ­¤å¤„ä»¥realvncä¸ºä¾‹â€”â€”å®˜æ–¹çš„ä¸‹è½½åœ°å€\nå®‰è£…å®Œæ¯•ä¹‹åè¾“å…¥VNC serverçš„ IP:ç«¯å£ï¼š\n\n\nç„¶åæŒ‰ç…§æç¤ºï¼Œè¾“å…¥ä¹‹å‰åœ¨serveråˆå§‹åŒ–çš„æ—¶å€™è®¾ç½®çš„å¯†ç ï¼Œå³å¯è¿æ¥\né€šè¿‡SSHéš§é“å®‰å…¨è¿æ¥æŸ¥çœ‹5901ç«¯å£ç›‘å¬çš„åœ°å€ï¼š\nnetstat -tlnp | grep 5901\n\nå¦‚æœç±»ä¼¼è¾“å‡ºï¼š\n(base) ubuntu@VM-0-5-ubuntu:~$ netstat -tlnp | grep 5901(Not all processes could be identified, non-owned process info will not be shown, you would have to be root to see it all.)tcp        0      0 127.0.0.1:5901          0.0.0.0:*               LISTEN      2583/Xtigervnc    tcp6       0      0 ::1:5901                :::*                    LISTEN      2583/Xtigervnc    (base) ubuntu@VM-0-5-ubuntu:~$ \n\nè¯´æ˜æ­¤æ—¶äº‘æœåŠ¡å™¨ç«¯æ­£åœ¨ç›‘å¬æœ¬æœºçš„ç«¯å£ï¼Œå¯ä»¥å£°æ˜ï¼š\nvncserver :1 -localhost no\n\næ­¤æ—¶å¯ä»¥ç›‘å¬æ‰€æœ‰IPã€‚ä½†æ˜¯è¿™æ ·éœ€è¦åŒæ­¥åœ¨è…¾è®¯äº‘çš„äº‘æœåŠ¡å™¨å¤„æ”¹å†™è§„åˆ™ï¼Œå…è®¸ç›‘å¬æ‰€æœ‰IPï¼Œå­˜åœ¨ä¸€å®šé£é™©\nå¦‚æœæ‹…å¿ƒVNCç«¯å£æš´éœ²åœ¨å…¬ç½‘ä¸å®‰å…¨ï¼Œå¯ä»¥ç”¨SSHéš§é“æ–¹å¼è¿›è¡ŒåŠ å¯†è¿æ¥ï¼š\n\næœ¬åœ°å¼€å¯ç«¯å£è½¬å‘ï¼š\nssh -L 5901:localhost:5901 ç”¨æˆ·å@æœåŠ¡å™¨IP# å¯åŠ¨å¯¹è¯vncserver :1\nå®¢æˆ·ç«¯è¿æ¥æœ¬åœ°ç«¯å£â€”â€”åœ¨viewerä¸­è¾“å…¥ï¼š\nlocalhost:5901\n\n\n\nè‡³æ­¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æœ¬åœ°çš„VNC clientæ¥æ“ä½œå›¾å½¢åŒ–çš„äº‘æœåŠ¡å™¨ ğŸ‰\né™„å½•å¯èƒ½é‡åˆ°çš„é—®é¢˜ä½¿ç”¨æµè§ˆå™¨æŸ¥çœ‹å®éªŒç»“æœå®éªŒä¸­rlè¿è¡Œçš„ç»“æœåœ¨logsæ–‡ä»¶å¤¹ä¸­å¦‚å›¾æ‰€ç¤ºï¼š\n\n\n\nç¬¬ä¸€ä¸ªæ˜¯TensorBoardæ—¥å¿—æ–‡ä»¶ï¼Œç”±æ¡†æ¶è‡ªåŠ¨ç”Ÿæˆï¼Œè®°å½•è®­ç»ƒè¿‡ç¨‹ä¸­çš„å„ç§æŒ‡æ ‡\n\nä¸ºäºŒè¿›åˆ¶å½¢å¼ï¼Œéœ€è¦ä½¿ç”¨ Tensorboard å·¥å…·æŸ¥çœ‹\n# pip install tensorboardtensorboard --logdir=.# æˆ–è€…æŒ‡å®šåç§° tensorboard --logdir=output\n\n\nåç»­ä»¥ ptç»“å°¾çš„æ–‡ä»¶æ˜¯PyTorchæ¨¡å‹æƒé‡æ–‡ä»¶ ï¼Œå³ä¿å­˜çš„ç¥ç»ç½‘ç»œæ¨¡å‹å‚æ•°\n\næ˜¯æ¨¡å‹å¿«ç…§\n\nç”¨PyTorchçš„ torch.load()å‡½æ•°åŠ è½½ï¼Œç”¨äºæµ‹è¯•ã€ç»§ç»­è®­ç»ƒæˆ–æ¨ç†\n# åŠ è½½ptæ¨¡å‹import torchmodel = torch.load(&#x27;xxx.pt&#x27;)\n\n\n\næˆ‘é¦–å…ˆå°è¯•ä½¿ç”¨scpç›´æ¥ä¼ è¾“æ—¥å¿—æ–‡ä»¶åˆ°æœ¬åœ°ï¼Œä½†æ˜¯ä¼ è¾“ä¹‹åä½¿ç”¨ä¸Šè¿°å·¥å…·æŸ¥çœ‹æ—¶æ˜¾ç¤ºï¼š\n\n\n\nå””ï¼Œ æˆ‘ä¹Ÿä¸çŸ¥é“è¿™æ˜¯ä»€ä¹ˆæƒ…å†µï¼Ÿå¯èƒ½æ˜¯ä¼ è¾“è¿‡ç¨‹çš„é—®é¢˜ï¼Ÿ\n\näºæ˜¯ï¼Œæˆ‘å°è¯•ç›´æ¥åœ¨æœåŠ¡å™¨ä¸ŠæŸ¥çœ‹ï¼Œä½†æ˜¯ç¢°åˆ°äº†å¦ä¸€ä¸ªé—®é¢˜â€”â€”è½»é‡çº§çš„æ¡Œé¢ä¼¼ä¹æ²¡æœ‰è‡ªå¸¦çš„æµè§ˆå™¨ï¼Ÿï¼ˆæˆ‘ç‚¹å‡»ä¸‹æ–¹çš„æµè§ˆå™¨ï¼Œå¼¹å‡ºçš„å´æ˜¯Terminalï¼‰ï¼Œäºæ˜¯æœ‰ä¸¤ä¸ªæ–¹æ³•â€”â€”\n\nåœ¨æœåŠ¡å™¨ç«¯å®‰è£…ä¸€ä¸ªæµè§ˆå™¨å¹¶æŸ¥çœ‹ï¼š\n# å‡è®¾åœ¨6006ç«¯å£sudo apt install chromium-browserchromium-browser http://localhost:6006\n\nä½¿ç”¨ä¹‹å‰æåˆ°è¿‡çš„SSHéš§é“çš„æ–¹æ³•ï¼Œå°†6006ç«¯å£æ˜ å°„åˆ°æœ¬åœ°ï¼š\nssh -L 6006:localhost:6006 user@server\n\næ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥åœ¨æœ¬åœ°æŸ¥çœ‹æ—¥å¿—ï¼š\n\n\nä½¿ç”¨è®­ç»ƒå®Œæ¯•çš„æ¨¡å‹æ‰§è¡Œplayæ–‡ä»¶ï¼š\n\nå‡è®¾éœ€è¦ä½¿ç”¨çš„æ¨¡å‹å¿«ç…§è·¯å¾„ä¸ºï¼šlegged_gym/logs/rough_g1/Jul02_14-13-57_rough_g1/model_350.pt\n\npython legged_gym/legged_gym/scripts/play.py \\    --task=g1 \\    --sim_device=cuda:0 \\    --rl_device=cuda:0 \\    --experiment_name=rough_g1 \\    --load_run=Jul02_14-13-57_rough_g1 \\    --checkpoint=350 \\    --num_envs=1\n\n\n\nä»ä¸€ä¸ªæ¨¡å‹å¿«ç…§ç»§ç»­è®­ç»ƒæ‰§è¡Œtrainæ–‡ä»¶ï¼š\n\nå‡è®¾ä½¿ç”¨çš„æ¨¡å‹å¿«ç…§ä¸ä¹‹å‰çš„ç›¸åŒ\n\npython legged_gym/legged_gym/scripts/train.py \\    --task=g1 \\    --rl_device=cuda:0 \\    --sim_device=cuda:0 \\    --headless \\    --resume \\    --experiment_name=rough_g1 \\    --load_run=Jul02_14-13-57_rough_g1 \\    --checkpoint=350\n\n\né€šè¿‡ --resume å‚æ•°æŒ‡å®šç»§ç»­è®­ç»ƒ, \n\næ–°çš„æ—¥å¿—å°†ä¼šåœ¨æŒ‡å®šçš„experiment_nameç›®å½•ä¸‹ç”Ÿæˆ\nå¸¸ç”¨çš„VNC serverå‘½ä»¤# å¯åŠ¨å¯¹è¯ï¼Œé»˜è®¤ç›‘å¬æœ¬åœ°vncserver :1# å¯åŠ¨å¹¶ç›‘å¬æ‰€æœ‰IPï¼ˆä¸å®‰å…¨ï¼‰vncserver :1 -localhost no# åœæ­¢VNCå¯¹è¯vncserver -kill :1# è®¾ç½®å¯†ç vncpasswd# æŸ¥çœ‹å½“å‰å¯¹è¯vncserver -list# ç»“æŸå½“å‰æ‰€æœ‰å¯¹è¯pkill Xtigervnc\n\n\n\nå‚è€ƒèµ„æ–™\nhttps://blog.csdn.net/weixin_44262492/article/details/128365248\nhttps://blog.csdn.net/yinjl123/article/details/136853195\n\n","categories":["é€šç”¨æŠ€èƒ½"],"tags":["ssh","æœåŠ¡å™¨"]},{"title":"æˆ‘ä»¬èƒ½å¤Ÿåœ¨æ¢¦å¢ƒçª¥æ¢çœŸå®çš„æœ¬æˆ‘å—","url":"/2025/06/29/%E9%9A%8F%E7%AC%94/%E6%A2%A6%E5%A2%83%E4%B8%8E%E6%BD%9C%E6%84%8F%E8%AF%86/","content":"\n\n  b8b5ab35f1ad034c1820e574536071ac19a50b5e21d0a897237fa3e1427ac2eaa294e37f5f4b1cee98ebde9c75388976796d30f42fb5b9985ed468696d50ffbf750481b709c18e901bf71f1acb93e8dafa7c49cae9aa02ab4bbe2e22782e674d608b6dbd9b40684023d6dfe0055f9822c99a9ee09e9f4647c9e261779e16e67cfc514700153da434145c77be7d3659167f675a0ee20d5da9775aeff72ebbbd3f36b5c0cd9dcd7f794a521d8536600cd996d32dd751117b962ef19c7ccc2b2e482fadac8646a59c2535e4387a189b9aabcf3b02f7cc7c39d8503c3b91510d0b12147e0336533a4ad7b5c83a48a45003c2664d0d366441aaaa76d79b6b323cf31d540c4b06a06a6d58545e33544118c146f93d3e2f601b8d4392808f032696c97d41b6dbfb637fda9b9dfaf51a97f7e1f5d0375f9edfa489b7314c485e01778c11c02c2eae9ca098206e59ddfd76b0cc9bee8ad9bd1280f4b7e663ccc39bfd1b824372e481df9685278df7f20297e5a737735d068c155c56b3f9e82bd51a96e57a1a611b1d9d50e44f693d44d30bf73c40956dd97267b0fc64890787fc91a4d22f267c062ea3b8c2410ca3edf07a4a9474de112801ccea69e03c9a407b4ef1a1e5d6fe085806cc17f605b044c31e15dd758cae85e1f90e7a73df5600c25c07d4b5b3eed34f696ac52d8fc20f3e9e921c39a0c4e1ad39d7f7e82ef3c07a650bc19880843a5af2e1ca5aee007e8bfcb13cc87482c14b75c2b59a18a1db232382f53ef15b122514059e161c30cb3af4b640795eb475c6490814d19d401a8563b870c545e2a55ddd3a809636c09abb4192e135b2ea18b66fa55ba3cfaa856c2ab4359b08463693ddcdbe743f1d7c7fd4dcbf922500070189eab508e967226d3ae39b7633a0da8cd845348ec4a78a9a00b6747e40d26409d05c570bab30875a2cf96c9a64d691ef59a78046becea821f0d4932c421362bc3c23c2b409d12abb163ce97589077aa24ce4bcaa46af78f3e36a396cf454e66490701d7891c2c1b40467f1541881c432225fd595bda4d2ed56a44ad2eb4a3236a2b31118e0b5e3ebd4551e8bb9ee3629a55c60c585a3a43f19d3aba8b6cd16cadadfd0e53874730999cf8cd555e0ac6d8a4e11d6b9398b24190f2ac311d7ce2073e0443a81f796dd5bf7fade08fb20bbacbd099e0960fe1556d1dd8e124f49470c9ca4393a35946e4b221dc0751d7a0a2f4f9515faac644d0f277bc5836bd32a3cacc4909a37755b88d49f3e6e6d5dcf8adb88d82513e25f9f815b5c218ad1a08dfd5413200064d753d0828b9a6817bbdb82f8a67116cb30d8df181f8cbd1ccf589d050d0dc8385f26e55510b0febce09d97f98e2d4bd98a766a63fafc913abb222b1593430675c1f3a5c5ccbef497c9948540c9c5de84171dacd154ac00d94245664a8c9715beeb666ff5ae0287ea522bb04472d29296e3789ccf131e212fb2c37406480f23a1180cbf50dbdba176de5d59097f935c5ac867c77f1375b9309553e07348cfded36d880cc7977f8d9e871777e621b1fc172e859aa6932801fa2298d6bddd6b61f620864ef48f602bf98781382b2d2a47c9c2eaed23b2fba74e32dca3defa5eeb164ae50a0f98c08c8bf49748682820481fbdde4c86fe267b6f9ddbc41ff8e4402f2e8e34b7712fbc68b194becd019dd764b0f6d330255e2c28aaec027cbe452e2f24b2c758e89f1a7b0d1f34758f5dfab3c6da9feeaf3e43c2725d6d04ae7831c129aabf5fad441ccae85d002dfd2a12c2f3fd417d8ae7a2028967a7c2cbb728a0d1e9e3884e913b68cc8b0005a1c5bd0dbc8e511f2cd1f32c502c20bfe11614aa0ed4d3f20a86a234c2a4f203db38ea5e7914d2a638e60ad2a30106022dfa0e085460b78b5e44ba9cfbaddba82d9a1efd8076242ce497064eb7dd7f29fc3af5520844c27a7f7b000f5b8fc8201d8aaba4106d9b06bcd1ea6f54ecf4dd347ffd4958eca5608b5914d0f7840a3b2b0d41ee1c9b43fe859858f04b7eb758763e8194f942a755aadfd9a57c27c9547ab149b312325b9c9eb5534ab6e1b8225eb60f926368628b917ee692f68594007d6dffebe5749544ceb0f3f4162a883f622b5d63e84ca40f7d9abfe9ccd929f7aa68efd773884855e6da99a58584371c5c511927696a19ade4e1f39527008514431b9f22a47ae990cf690b97ab051e516615cc21e5c39e5598428851c1f1342af3f1abea7d5bb8dcbf09ec346a35c3c5a3b46228d09076a6d0a3e95319e3d9a97c9a28e62911803e8335b93dd9ef6dbcabc8d9fcf06396349c55d53b1e21e49309129b84f0292a096cf0c0048ac34ef6cd398f8a965b8a9f0c788718e5e6dab3c63b4e793279cda44750929294f0ca14aace41b7d9f3b5fd77be8161b693bdfbbaad889b95dee9fc67b9a0249594afcadaa37b908de91a42acf13cfaa77553f024429f2c9cd78134d53c8736ccfffddf95de0ae82e901bd0cb2b25d3ad19a266bdc0b3587e26aabff9a4680b1051674447cd5c671beaf9c2496b1ca21e94848d03b18e631d56bcb5288e7077621b9f9dc3dc42b5abd5986c6cef92276108a6612f047c3a6050977692e24de7e653879830ba35c97aa500b620a176a351140c4574ca1920bc8a5cd9b06acec228a181b9775be9a3f46f8bbd7213bf2dede35f0d69e65e4e1512d0dece7d550d8ab7cd133ce08ba0aa512e1f0a5730c85d6612f623dd92b7effbea8b62f206518361d804165f5f34b9566953de4cd262823246e9d6625a1b537cf6e3038f2ee1fef0327863ef28037fd9bbc91c975075a2109fff26e2765c97e9fa18659a39328b4e49aa4cfb708bde489bb1630223cf703ca68071baf3d815fe21bd8afdb457ea99e0889ee09eaa9ed396f7c20d330b99bb0a18f19b6acad98460986eee949a9342726eed9afbdf86f98a9b2920c1ab4ed05f767d44094717ccc758746f4187fa11502ae9bbdbe2975e98bf7e6892eaf2c4677cd5a3ee63510ec6aa02e0ea573774f9ec5a84645381b45a642203ab2ff9a024b4857de1d76b693189118512bba41a1c302376fb5d292e10cd66b4aeb00df6f12dc24997b9152c53e13b32ff0c810cd92703cc47b3d9ffb78daee598fcac2d1c5c4f9e31cc1dce8258579e625efbcd09c13de14b1903d483a70567f678a4fd6acac84427410843cfbe8648ac65b77aa9543d19781e4dc774e5a9dd739c779f7088758d54f71d3903da38c0eea3130d380197e00524373ec328c2e8a0e77f75ada61c147206688cad7273eccf3df7f19e947205216260b302932bb1af6d1c12ac47d4b225287131450e780d5568555b84652624e4cddae9c578293a7463760f353e30797e18fbba80892701043d67767bdd76a29dca65cf9d8af13b24d377d243c5ea112e6d607fdd4d81f1d3287af0d0ac78aee42c87f995aff3bf357c0e026ebab29ea6892a434c2b21c6e4dc55ff1d11e6f13eb7bc04f1bd8005bd18a79ef0355e5ec9e526cbee194d42a456e501d2941575ce23892ea8ffedd12a5d7d83897710cbaadb8ec87dad76ba009e7dcd5eca6824f58c7a2eda87c4b46b89e726ea694523f387015ac0f17a83b1d2bac37e4aa8cac364de44f5e853c390d09a309461ceb959842809ef5ed5e367077b8ea4b9c9f35f6d75259b013ba578654338feb3bf3658dc6febe11e08c55d70ffa7b446e059f185071a46f54019064cd554e46f37c7c337fb795b6a554d1e731548e890dafaf6eb7a9084da200fee710b2c0b95a893263faf28aab0906bf4c536a688787e7724370ef9ca0e6092de29713b0ca53793d90b26ecf14de1d5f8e592cef5ec844540b36421ac2b6a237156cfd1c4a9692d69dafb833d1b3e2cc3edefc585f6f2e118e3241a4302760c5a00b44d87375b4ef94950b5bfac06b47f551e72057b5953dea15c5246c99699e070e423c83b86656f928a6aac0fbf6bbcd82c5e7d9b48bd94c797a8f879985ffed20ea1c60f3ce90d5f153e1128c47b5475af9b2901dbc8ce83e2ea71fc176a7637472fef46d8a4907cd886cefb0418d392f8bf06e617064af9174678bd74bc1533abe1c30b79a3d6253a7231b6a07c967adc896f1c35ef69cf9db9f3e9ef55cfc8ff0436a7c078116cd38f221abdb9e6c3c483747ed3b30cea57a4821b2a33e9d2d4a5c2b63ba5e54975cfc5189a7cc1e02856fdc0a85d7ddbbc1ff3867c7c2646c6ec72bd3f741d74aada8b43fa66893099aaa9a5ae2c864cc016b078b83f65b2ed22cc0f1619f85505cf4bbdfad8ed4038997ce6c6cd237f04ba6aba03cafd4e24e64df6e86b472389b8a80097422c708ea3d75691ddf7f4de564adac1ef0ed0d320b311a3fa0b116ec66e14dff9f1798ee081a906c9b63042c4c42c6b58b897ebabf9531c2d64d8f1fc8b6726a63c716a8d77cb9de3a1d2177723a079462a55525425c2d6e88b05b6faf6a426d1b15a5e64477e77976f302a98ba3af7e04429a27bdf4325c3ef514edfa7a77f511a468680df228bce4c9386354c4ad092361387c68a0aa73ff2b61c600438973e735ecc94f3ee81daa2ca69169f0a98f93bf2f730a754f528e16fed77a8710fd9f54e1a222ae3a3483b09098a512443ed80b97a581276dae376f2e940844962f4e492f2979ddd0f9879b129aa375ea7c0a07069267e32e0790e14bcd1780419188afc646e481b84e6479f26cb70c147443e62cf78dd6b807037c46154a0c9076c2da73fa43eba75c56ca486e1ae971ddeb22c97b487cb1324ef54324ea3c51b80cb3fa64712f07e3d51cd38a356a9bf1bd1a0d0e7e38fdc6b8cd92254096438aad4f27633da213ebe7a7c49e7cda79be91938742acf45ce709535798ad47a7d0aa768a0fe975c1af980a64dff605823face738d9f115fc563379fb82e48d3faf7d3e5c2ea8da2b13dde0da97130d7f12c28971be9ef7bdc595f0582605bcb03cfc58b00f52a001fc7327e67a60f53eb322700aa72b68fc43e736ccff89619caa66828d47b454864b7385db6496898a181811f8aaaadd98554b8b51b0aafac071ee8e61858091b84cbd7f7f62cedc8545061b50ba2bef28fd38f447aa9ae9e11b63748acbc774efe1a622c6841e57ace8427379c9c8813f32e90bc933a23a04d5aa3faf294f42a3d3c06c529f375e75854c7a62776b29d23c774b575d75a7ca1eb46c82cc20920827c8b1e7f558722e7f7fc775bf467bc76d6a3ec062c892d5d9a38f54a34e45b678fe69cf91a3d33117bb4ea2182f87b5fbade462f39ce353d42367d13e1d5e176df7fe2656c5e1ffa643348b185b719df1e49703e7fe7f775b1e4c3d5764d9739cd8538d9bf900f5d4ada71a956051e8128a49cc31beb3bf316492feafb85dd265625f24b7b26e269f4e45c38ebdd410da2356d4a21f4323a55448a6ae2ec2e7254a02e8d782144ad11be8d33f059b373504a27fd851355ca9a282ef60d0599c0022b5ae3f2a474cadba5b94dfcac86b83cfbe3bc5b2fdf59bacf2fa8185d3d169127e772f7f0a488557ff494a07aa1d7d4149fa7d487807bd3dced229fb252eea793f1ed7137e916ba4f041612854e3156c932e14c3a21519beaed79a289720f62c10e181d11d307ff3e87d5f2469ce241dc22af16c57ce779c5a8a861ad1df455ecae571adef9f0369ac17cc2825d18f5f82272f8680a1a93ce30371449c2f8543a2e170e3f1b1ad63a95216e81e52284bad004867d03e6e4f3e9d7f788fc58ab41bb054937e944b43f1430dd2aa291f9a2f46144064f57cd70a36e044085b4ea79296db86bfc3bb29c5a998e61a9f3c28213704315edfca186a8e905b76063082a890e1da36b1c01e3ace91bdc5a207e22b353afc4563111c5d5dd5658513fad8275b015f8b104520f72d30f0b6fc1ed3b44f0f3560cc0c277f36489357cd0a817b78010a5102bda100d80130a3ae4bc56c73a45cc4cd067022df7386719c2b6b1661858937bf08519c1b7c47edaeccdee8b57ef840492be70a9449062c84a9c701371c8641f5e7758f670f084bd12653b736f5dea00a3fb868c9fa82d07a48f651897c238a9fb0c09dc620b30e6b54cdd3a8b6db9b6285c202b2f54c211439c9a8c0682a28e3063b8b850ad938d0bfa0b6f99bb49e685463c09894c4adaf41aaced417c8b16856cacfbb8e5d1c49dbbb8e3ad7869e811e3f509f180270f89cc4d65f43ff0b96de29282ced16eba193ee882da54fef7100f2c91c0644f4efd79c956e6002db756ad57b8491a3a26a05c8b7d2fc94c9c2280d228a32a9442127f315f98c71a927a18c07753d12af79941f404dbeaa84a764acd94dd2b9d3a1734ba745b910822ca786f02ca7c3c48148f1710cedeb359d93bf1f35fa2df871ce9ba7a23cde8cfdd98bddf59cb87ef32f15914caf5e77ca12b14285cd8691d32ea4dc2eb63b215c3375b2588724ab6872523b4f5a9353eec238869f9951e00e15a6ece371dda2bbb1a90a2d0ee0833c8a6bfdaaa775d2a41945d9c12fc5082022b11806e884d172336fee03736df3747b057a94d32598a9b3adb4a5a86ef12e58df4bd057469c620b1f290198ed4d6183f480a48eda5b0ca094dbe62ba244f3eb31f04a00df252f6d3545cf0a9e30fafa600d05c1f1969a95a49b4a394ad286ebe7d714d4d9fc49c410879b8b56b9f1d8e797fe3b7d4571a7c054299a78163b87f3686b61a782e45b756c560f95d1af76829ff92f928c9ee62dbcd9027bfce4c0acf70ce6f285736cae54c74127977c5a3b82a571ca2ab251d2269ed79db9febd10432cbc73d6986b212f6b0b5520b00f7fe46e32c1896de24af0a553521897839badcb750e6aa2ff59fbc8b201c2c3f1c8c68250900e888bd3bc5e882a3764427bedf7ab2bd9979218260ccfb7b46018a1069cd32f082bbeb8bf6c916c4d522997159bbe321141809f84d2c730390af7c5fb051a8b85010e8c29cfdc6de1b4413951d2436bd67c395762e5b31dbc1986227fc88648a7065b7b5ff73c4ac9d3bc9006e706f1093f8f39c244374455563cf95b16e599adca4d67356516d62681a2d595b2dd1c7ed2276f80bea91ae679761a20a3aff90265fdcc15048ec2fa68404ca81db84bec9fda88e752c57d64463753dbe0be0cdd9e5a7a87c5997159ecf40034aaa1584a8f5df4739c8d5aa4f049ab669192b82bb334570856b6620cf1bc59b92cf3ff0ad7fe6e11eb18ca15e518521dd7d5a0e8d81b73979aca8f5b8b3b444b3b6149babc6c229043304df4de3465c27908102807bdd8196d52bbab377debeb5dab3902a56768a2f0d810925e8eb41a5a2f545727b6182fdbca817e3ec004a3176a582f3be38ebf8733cd4ccc2aac046482c68ad1c798958e26ca9a20451c66e3c55fb02fc1255c62f9b649bf2a10dc5f31d1a8c3814973685ac56071c65df8a80e285cfed09af8492f12d94ee5406747172b4159a262b43282c3a4aea6b5eb11ca360c713f8207ebc8e15f332ee00aa043672806a93eb0bfaf8760cda3c73730dde88fa67e5966341864cd8ea32bf30fc103fcc88986cb1511bd82968b1ffdc997d5cba28bd54675ebf75031b5bef23ce4058169d242231ec90de0b18b09e848b9f08b501ce9614a97af80cbdbca521323c86a9d540af5e0364820ae37edfdc2d0f95433f085f1a361f48fe27b0ea2b115de6c12b65fb995c5260757d06d3b1c89c3b5abf2db2084d54ee011196ea1e486e1be5647a565c5f157ad5b966d5dfc3b72cde7f1b446cbd5b3311b9e38075a6889d1a462579e466311270171e52b3e98eec3c56ef5af64b41aae67f33b8e86e0cf89619b1b0701b8d7bc147db7731ab7f9763f995ce55772c8d808814a5a97d3f35c06408e7844475120cfa6ce228b5148b54b0e20d6f3a4cf59a615f1c95a896411e6fe287ec14b011f007c03484c3097a9e634783c33b4dab27b673e6cd071e60fd0167794f6cbf10d520aa708c36a02b3e07999fc042159a2c5a84734f8398799aee8c478189979f8be6d673e54466caa91440b763efe235409e2f857f49cf1c61e5120c2afabeaa4cdfabae046504dbdd70f82648a436e1a19a57c008e9455c70c1918795db208802a74bd62348c8bc7ae2baf0176d915234570c162d9771455cef568e5059fb4e3768c406ddd52b82aefbcec92c925d3d89c646df844de14368f21943b75b3871e8dad574509d3e6bbddd3f6a148e0c0d07112529906a046f9270bb48dfb3c1ed6fbe77e8628a078f805001c7570fca0be2b7136c1df931a97f259e35edd5042bc86e6a3198a4a27335998bb7fce5eb415689e992a8ec378560787c3cd0ca74e2d13496a3d55b8b7382bce3c793fb71afbf286b3a9362c8ad5610f7e125ef37f647e972418611965c032b89e8f94d91ddd742810139128bdad52696287efab46d8e427683fbe5629259d3d2c7909f8b07c28498ddf320feffb50db2698605cc028a4276929fc10ebaa80a7d8e507d65adb6148107f405dacd5f07f4ca30f4ab1a878092b14c4ef231b4c628e883880e88651878d87275ccc03af4cc2f6354489d729d8719c83472ef8d5c32d2979fffc8154d9520f319ec44df85618c21c8ec34510fa8409b83d92df80abe3f24fad3157dbe737a3dcdef0e91c4d0de54dedfd9cb99fcda8ed57f3f77547ea2514f73ef61a4303f91a6685c1bbc1ffd3d2a7d2599b331d34f0dc232e1d07a7e36000c12305f0647247f3d1ca1619ce598617b45437f73097bb7e54c9adbdb66762d9153fe04b1c69bf54ba1cec4ba04a2c01bb278e0643da581a73dc5f03db381d6eb743d9955179c71d029ef86ce7d122624ed319564def48c5309dae07a76cb613197b4ca716a548feb63652d3915ef4cde80783272610f80d6100ce9c9627ce861627bc4ce61d01377644c22c639b640366c2b2b003bbe90d00e038ce2495e788ac933d19f7a424d3c3394f5fc35cf42a4341dbd26623f03bb66447c985f05a25930d2ba2894593426904d5c3a0ce2ad18d66b9372c81375feda1537f9f11eab00c22446e3c457d42608fa43f5dffbf01be6961126343644b0c72f7c3a28c47d034b502c6b415bd744817dd5158a325e91fcf918b9e6bf8124f544e11e6fda24ec0d8e0f6cf6661697787479509dd9d3f5a0cf53f216f3a0c6558284344350eb4a47609845531cc2b3f7fbe891e73531cacdd709501368f38f0a4e126411ca933d89104022ea5b6c042c72798af4fb4260401f899b8e5a3398db431049937811bdfc3a3f1d27fc51673f7b021cd72e8630ded1f1fd44c67750c7896712032824599fc11f60ecae501cf431aab980f6e88797845163ffec065223f63130e4d5aac73391ae37a79657ca6eca79b93725f082babe11dd8f60f01e17b6c61be568fe43ef9a7cc1ea4d5abee501e686429c10d48455cc396f9b79c8614155f8416f53ce358d06cbc02799935fadb7b8ebf42ec9bc94c8b97b0e54285b466c7d51a6b1fdac33b7d46439e8bd6c38baead999e1a42d96b7486b21d2ce1f21686835b21c7f756dd00ca2cbdb14292c705f58498ccb3861ea9909ff3d8ca96216bf77b8dc0d0f72dc117f1da4fb345a4b9553e5cbba7446f10425f48af03e39caa83424000cb5c5f6465e8842eb3d3cbb528530e5abca6872bcffffd9820410ef02925b3e332cd25fdec7253b41a152f897ebc3da757d560918e352c00da43d68be72c243477aabf26f8efccb4e49b30437a86ad898c39cd72303cb10c2b04248149a4fdaa9e10ca0aaea5bcbd275f354f9746e90090f85a6ff99b476a6326dc151cde756bcd77217bf689e6e03f70c762fedade424fc1d7eebeb62ef9b8a9d21c2525a03e0a91f04c1ddc2af5b9d5cf7234f6fde136691fab91c7bd4e9a714b69c6cbf19335f47d54abed32ee4d12a2c94f3aa6e091ffb55d61f3c68f0939868950675bcdffe1eb6fa5e0f43049d8eaca951fce47bfbdd621da3eefa07c2a42fe9d592019a47948f4a45c03b007c34ab1b169d0ef1d8e26c0cec5513fa1c79f6b001cd5fecc926c38656f12ab3cc2afca4dca5aac09698d63a9ea659c3046d45ab8946c5800c67fd84108d7f3d2e7668fd95fd8b4f0866f2ef8f4528237d198c2e665566e4810f5c72dc79121428738e933cd7641d8ee76e2e95337d3b84a2adf300e799f9dee80dfa3b7e8022dd876d45280773c320068e1dd207e21cc9aff42b517cad13d198527252aaca2241d78dad990ce74dd82a92c6c4abe77a98e3894a9a1031cc3bc3c3f63a52dc73942270274970e7d1fa195bfdc2ed6d171ba0debe433698b8f74a5071fd77834dae8df274c1a3475d4838b585590014f35cc393b6fd6651ba48457bcb2052382462de7cfa29807234619477f5616e27ad2d964cd777eb33a7a62af99794a3ce805a99b3dee35409441e00cd08220f1f12a1d087c443b352c7ea5bec3a563ddc7ed2a97ddac0c891d200de7baa178f98f40f50f04d485129c83d3f53708c2bdbae4c549c1c37c9e07061d15c583330ebace9c64c459b17d33be69999b365bd1bf48d8ce28cc70a992e518f6fbde4e0000801707f45d67d1829bf0fc924b5308bad97dcbc5fec2435cae253a870db661e7887ff601937138c4a32b389800e1cc46f508707f3821d89bf335c9de5053a719c4bbaba1bac4328f13e963adb479bd9df9ac49d00f66763bbc9c39de65d11a9bae45f6132dcf7816ad43a1aba66765d66b82089c6a34c277bcf9d77da2ad982e5991a784d45238d86b1c2d76780501f6b5ff1499ae73ab2b2c8b7b5d58cb1a9f15e4458a3a853132233b31fe1780451ded18c50c05f5aaa90f6eb3ab2837bec841bebe344e14021fb0adec1eb5d49e7e7fd2fdafc3101fbd43d92fb8d222a36832bab2f8c619b5fcfcc2d11037b7550d83bf0949c4d1b521405e4fa7d6339e720c217c5565a4a86dca463ea4144475a3c47769c18ad67bd20d8e1f6aca2b6b5d3a933c928f551a1220dd7a45703f3419514767d9d6349fd95a021aa728c8cad879d457bfaea71a9cc9a4a54ff44d860c3050c8e1e92cf148e41c4da57f7bd63be9d5c4145c676581dbc111d2755c5fb1b76e2ad3a7b10fafc37ad5f85f536c859af840631baa6e3fe03d944293672a4b87441a74e1713abf3c38f07580243c8f8acf15aa6c1523a26e76a006e63d92578ff2fe57cf17edb78c701331680ecab241b335117c0af78887341d3d7dc12d729a33b303f6e84da800f6845104868ed3b1dff8451beb173ab792fc5f6a718f22ef84be71e725339d44d9a3163719ebea204d14a6e96237845182e2af98a2b6b1d0f7764fb1d2de7cbb80536c8a7b0c90335ab22b5d20cd1e06fae0dd9560a504981790b3a0ac42cee055e30d05ac25152aba684bfa79d72e4d1089518334bb8ea1ec8cce00f80638c2a04aa6e5037848ad5f383173ee0d4785d99470b60dcdbc2f39c9c04f8dc47058bfa71dbf2a717c2465fb310e11168d3a45771fb450a2acedde151f931e582a7fbfd11d670b4d9ece321198d64b121d49253b77fb2b76399a2a20141868ef68bd6677309ad0646937e4e4187590e1a85469eec8927aa64f7b19bcc0a240b90f30d5182b610d75a2dcc1675d7cb9ad52ee101aaa63b28d6e0bf49e55ea3d07c3715d3567cfc4b714dae5503a3538d97904cbe1894d5ead6870ccf3460e97450f5b187fd633a222941bfbcb18dba083002d3459d8a432052470aa807f9f579462d20572c330afe3a8b6b56425dc094dfe550dcb331bcf94196edd43ac404488b815d2adffac6ce18dd9ad8b17fbc0f5682435685392db5fc51e041f104843dd9ae159027f9748c65fb35ca887eab0e8dd79a076f42b611d5c9ce82d9df0d1cf4bbf381a29f29e79a19335137cb85e84fd934465cac622457c87c40b96d1e20ebbd44c1b82dab66709b3c5b172c6d01c5dde31c3593774969eceabd52fa66617fedefd5cc7f92cdb39b0f17f5ab5f63d012ff3f07b231d7818d3cbbf162e903b274a7a8b44a554bffea7e4b5e9d71af63bfa6eb04f6e13d3a0b1170589f7763c85989dc7b99ee53deef80dd945b67f094e6bf466e3ef1e3cacb5e45bef388c0ee0abd15d06cee12c3554db0850ba60844ba7eb0fe01ecedd22d13f31c87f6ce2911408eac529939a9b9decbd8784923602e54725c3cc0d37ff72a7b97eac654cf42b29f6a0169c178e79815a42e29d106f04cf835e1a717af9f21185799a32e83a2ad51b70c80ace864c7ae26ff41338da3d26cda8cef8c1c1fc514c6057802b2cb9955bf640d2b373e70b67209c46394ca6ce795103a1a1dde6796da90cef01ee96e18f4dbbb9fea2a9f3428e1f706d48cec9dcf52fcc81c7ccb8f3591edaf5f3f89b0638b82515b03b6217798dded5c75cfa1651b2837328ce10b989c629a28a3c96dd18d9e2ad9988afd7795eaa88670b63c4a697a7c928e692c3870a43de556839aff1ccd7a4ec25e1c8237edec8c4240b9a0eb7ebd47bf4035fdbf2d2b2f8c089becf5d3b84a6c241637a8c5e5655d1a693c17d420303b5529da6698671798e8fe3b0d738326c0726d2957c18877af78df9af5a1852127309e446ddeeccc68af04f072da36a1887748610f81e88956ffc599c322386cc0e2cbca50679260add6f74250288d642b357cdc947c270fc55a7f12df74a634fe92aa8dec0023e871ba5ec427bf8d40af500d3b622af91e160771ac412a2e7e04a40f9ce6e52b47face7a2f5ce450e7b4cfaef0c73efe5b0ed945bd975005fb43914483172ad3bc23c3bcf1d90664e286cd2ae98bfe2657a8c17213de923c6918a669fa381068663ed8fdec98cc294d4ac4ddaa2b541801d2da43f586eed28db245412276fc908e069272fbee11f9d838fdb944f45855fc0e91540168e86bb5997e13edbf2e1edfc1079efdd4cf96aa1a3e928397781a55e04b321491d7290c991ef236326a4772338eb760094463e55af5d72fbfb352da3c6b365a565a6b59c78c87d47742a58915919e3d569b944896dbb5ffbb3d333d2cbecdfcd32b452792724c8f00f49a4d01d657845999e5728877dd4397449f2daa95d7b4d8c9028ce40e3869a91611d5161836d841975768a35fda52cd591a1b3e51d45d88cc151c0da7a11e1321244fd2674e16f5cbe57e4e9f19668f2a98b47222e6f2b4721376980fe1a126a6493d4ab8d1711cc73dad162c037f77092fb775e6f394d70332a9ec2df5c82d39c18645d09acdcbe4ba1cbf481bbcca9a0947b834a6919678a2e015f5967f6fd066ab68588a36fe844f9764e2e0bfc4590a35b360745de937378ee8de457e8c8bd40074513d62a20af1f52387ec2f4da2a87eda502deaa3032ef7db9738517ab72ad608bdf143592c1a4008583ef00542c5ae454463f565847c6e2e9adf75599cc18b87cfc12ea137ec111e8501282b2429f2770feaf185555b9137441912acea709cb533248d9f848ef1db0630e8c76381ca97071ccc938de8e9ad01f83b60c7f8b2fd04baf1cd973b8a0dc2017964156dfac2db4ed8fe476a07f1e9dfda02e7e3a3ff06bc13d8450cff08164c3f88c5712c9c39e44acacdc2cca5ab6b45e4705e9d18e53a7a84e195b33af69f91624486a1605b7faad65dbc3e39092068620d8a32efe270680abb16ba7f3734d7353b4c17a4973b4b1ec6437aca9f2377ba2f3b3b3cad47d34ce334287e95eb21ff352e02b1921e53ecf3dd8e961c67bd6af85aa4c02ebf908bd40dd7094a1f38a38c528a4e77ab3cf3ac5cfdad0c192bb7fa2c3e0dc167f78f1acb672b85ec6870cf24e6537f1b39d36a15a60498f5d9\n  \n    \n      \n      \n        Hey, password is required here.\n      \n    \n  \n\n\n\nimport {initHBE} from \"/js/plugins/hbe.js\";\n  console.log(\"hexo-blog-encrypt: loaded.\");\n    initHBE();\n\n","categories":["éšç¬”"],"tags":["å¿ƒç†å­¦","ç¥ç»ç§‘å­¦","æ½œæ„è¯†"]},{"title":"oopå¤ä¹ ","url":"/2025/06/21/%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/oop%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0/","content":"\nä»»è¯¾è€å¸ˆï¼šç¿æº\n\nçŸ¥è¯†ç‚¹å›é¡¾\nendï¼ˆï¼‰è¿”å›çš„æ˜¯å®¹å™¨æœ€åä¸€ä¸ªä½ç½®çš„ä¸‹ä¸€ä¸ªä½ç½®çš„è¿­ä»£å™¨\n\nstring::nposæ˜¯ size_tç±»å‹çš„æœ€å¤§å€¼;\n\nto_stringå°†æ•°å­—è½¬æ¢æˆå­—ç¬¦ä¸²:\nint num = 123;string str = to_string(num);\nstoiå°†å­—ç¬¦ä¸²è½¬æ¢æˆæ•´æ•°\n\nå‚æ•°çš„é»˜è®¤å€¼åªèƒ½ä»å³åˆ°å·¦ç»™å‡ºï¼›é»˜è®¤å€¼åªèƒ½å‡ºç°åœ¨å‡½æ•°çš„åŸå‹æˆ–è€…å°†å®šä¹‰å’Œå£°æ˜æ”¾åœ¨ä¸€èµ·ï¼Œè€Œä¸èƒ½åœ¨åˆ†ç¦»çš„å®šä¹‰ä¸­å£°æ˜\n\nåˆ—è¡¨åˆå§‹åŒ–æ˜¯æŒ‰æˆå‘˜çš„å£°æ˜é¡ºåºæ‰§è¡Œçš„ï¼Œå’Œæˆå‘˜åœ¨åˆ—è¡¨ä¸­çš„é¡ºåºæ— å…³ã€‚\n\n\nå®éªŒæ“ä½œæˆªå–å­—ç¬¦ä¸²ç”¨é‚®ç®±åœ°å€çš„æˆªå–ï¼Œè¯´æ˜ rfindä¸ strç­‰æ–¹æ³•çš„ä½¿ç”¨ï¼š\nstring email = \"user.name@example.com\";// è·å–ç”¨æˆ·åçš„éƒ¨åˆ†int atPos = email.find('@');string username = email.substr(0, atPos); // result: \"user.name\"// è·å–åŸŸåéƒ¨åˆ†string domain =  email.substr(atPos + 1); // result: \"example.com\"// è·å–é¡¶çº§åŸŸå(æœ€åä¸€ä¸ª.ä¹‹åçš„éƒ¨åˆ†)int lastDotPos = email.rfind('.');string topLevelDomain = email.substr(lastDotPos + 1); // result: \"com\"\n\nStreamæ–‡ä»¶æµ\nä¸€ä¸ªç®€å•çš„è¾“å…¥/è¾“å‡ºï¼šæµ\n\n#include &lt;fstream&gt;  // éœ€è¦åŒ…å«è¿™ä¸ªå¤´æ–‡ä»¶using namespace std;// æ–‡ä»¶è¾“å‡ºï¼ˆå†™å…¥æ–‡ä»¶ï¼‰ofstream outFile(\"output.txt\");outFile &lt;&lt; \"Hello World\" &lt;&lt; endl;outFile.close();// æ–‡ä»¶è¾“å…¥ï¼ˆè¯»å–æ–‡ä»¶ï¼‰ifstream inFile(\"input.txt\"); string line;getline(inFile, line);inFile.close();\n\n\ngetline()å‡½æ•°å¯ä»¥æ˜¾å¼æŒ‡å®šç»ˆæ­¢ç¬¦ï¼ˆç¬¬ä¸‰ä¸ªå‚æ•°ï¼‰ï¼Œé»˜è®¤ä¸º \\nä¹Ÿå°±æ˜¯æ¢è¡Œç¬¦ã€‚å¹¶ä¸”ä¼šå°†ç»ˆæ­¢ç¬¦ä¸¢å¼ƒ\n\nä½æˆ–è¿ç®—ç¬¦æŒ‡å®šæ¨¡å¼å¯ä»¥ä½¿ç”¨ ï½œæ¥æŒ‡å®šå¤šä¸ªæ¨¡å¼ï¼š\n// ç»„åˆä½¿ç”¨æ‰“å¼€æ¨¡å¼ofstream outFile(\"test.txt\", ios::out | ios::app);\n\nå­—ç¬¦ä¸²æµå­—ç¬¦ä¸²æµçš„ä½œç”¨åŸç†ï¼š\n\nä½œç”¨: å°†å­—ç¬¦ä¸²è½¬æ¢æˆä¸€ä¸ªç±»ä¼¼äºè¾“å…¥æµçš„å¯¹è±¡;\nå†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªå­—ç¬¦ä¸²å’Œä¸€ä¸ªä½ç½®æŒ‡é’ˆ;\næ¯æ¬¡è¯»å–æ—¶, ä½ç½®æŒ‡é’ˆå‘åç§»åŠ¨, ä¸”è‡ªåŠ¨è·³è¿‡ç©ºç™½å­—ç¬¦.\n\nstringstreamè¡¨ç¤ºåŒå‘å­—ç¬¦ä¸²æµ\nå­—ç¬¦ä¸²åˆ†è¯æˆ‘ä»¬å¯ä»¥å°†å­—ç¬¦ä¸²è½¬æ¢æˆå­—ç¬¦ä¸²æµï¼Œæ¥å®ç°å­—ç¬¦ä¸²çš„åˆ†è¯ï¼š\n#include &lt;string&gt;#include &lt;iostream&gt;#include &lt;sstream&gt;...string name(\"xiao ming\");istringstream is(name);string token;while(is &gt;&gt; token)\tcout &lt;&lt; token &lt;&lt; endl;\n\n\næŒ‰ç…§ç©ºç™½å­—ç¬¦i.e. ç©ºæ ¼ã€\\t, \\næ¥åˆ†è¯\n\nå­—ç¬¦ä¸²çš„æ‹¼æ¥#include &lt;sstream&gt;#include &lt;string&gt;#include &lt;iostream&gt;using namespace std;int main() {    ostringstream oss;    string name = \"Alice\";    int age = 25;      oss &lt;&lt; \"Name: \" &lt;&lt; name &lt;&lt; \", Age: \" &lt;&lt; age;    string result = oss.str();    cout &lt;&lt; result &lt;&lt; endl;}\n\nOutput:\nName: Alice, Age: 25\n\n\né€šè¿‡ .str()æ–¹æ³•å¯ä»¥å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²ç±»å‹, ä»è€Œæ ¼å¼åŒ–è¾“å‡º.\n.str(\"\")æ–¹æ³•å¯ä»¥æ¸…ç©ºå­—ç¬¦ä¸²æµ:\n\nSTLfor-eachä»¥æ›´ç®€å•çš„æ–¹å¼éå†å®¹å™¨å†…å…ƒç´ :\nstd::map&lt;std::string, double&gt; price;// Assume we've inserted a lot of name-price pairsfor(auto [key, value]: price){    std::cout &lt;&lt; key &lt;&lt; \": \" &lt;&lt; value &lt;&lt; std::endl;}\n\nmaplower_boundä½¿ç”¨ï½å‡½æ•°å¯ä»¥æŸ¥æ‰¾ä¸å°äºæŸä¸ªå€¼çš„ç¬¬ä¸€ä¸ªé”®ï¼š\nstd::map&lt;long long, int&gt; tags{{10, 1}, {100, 2}, {1000, 3}, {10000, 4}, {10000000000, 10}};std::map&lt;long long, int&gt;::iterator it = tags.lower_bound(2000);std::cout &lt;&lt; it-&gt;first &lt;&lt; \" \" &lt;&lt; it-&gt;second &lt;&lt; std::endl; // it should be \"10000 4\"it++;std::cout &lt;&lt; it-&gt;first &lt;&lt; \" \" &lt;&lt; it-&gt;second &lt;&lt; std::endl; // it should be \"10000000000 10\"\n\nclassincludeæœºåˆ¶#include è¯­å¥çš„ä½œç”¨æ˜¯å°†æŸä¸ªæ–‡ä»¶æ’å…¥åˆ°è¯­å¥æ‰€åœ¨ä½ç½®ã€‚æ ¹æ®æœç´¢çš„é¡ºåºï¼Œå¯ä»¥åˆ’åˆ†ä¸åŒçš„ç”¨æ³•ã€‚\n\n#include \"xx.h\"ï¼šå…ˆæœç´¢å½“å‰æ–‡ä»¶å¤¹ï¼Œå†æœç´¢ç³»ç»Ÿåº“\n#include &lt;xx.h&gt;ï¼šæœç´¢ç³»ç»Ÿåº“\n#include &lt;xx&gt;ï¼šæœç´¢ç³»ç»Ÿåº“\n\næ³¨æ„æƒé™çš„ç®¡ç†æ˜¯é’ˆå¯¹äºç±»çš„ï¼ŒåŒä¸€ç±»çš„ä¸åŒå¯¹è±¡å¯ä»¥åœ¨å…¶æˆå‘˜å‡½æ•°å†…ä»»æ„è®¿é—®åˆ«çš„æˆå‘˜\nå‹å…ƒä¸å…·æœ‰ä¼ é€’æ€§ï¼š\n\nfriend class+ä¸€ä¸ªç±»åï¼Œå¯ä»¥æŒ‡å®šå‹å…ƒç±»\nfriend+ä¸€ä¸ªå‡½æ•°çš„å£°æ˜ï¼ŒæŒ‡å®šå‹å…ƒå‡½æ•°\n\nç”Ÿå‘½å‘¨æœŸï¼š\n\nmainå¤–çš„ç±»çš„å¯¹è±¡ï¼ˆi.e. å…¨å±€ä½œç”¨åŸŸï¼‰ï¼Œå…¶æ„é€ å‡½æ•°è°ƒç”¨çš„æ—¶é—´æ—©äº mainå‡½æ•°ï¼›å…¶ææ„å‡½æ•°çš„è°ƒç”¨ä¹Ÿåœ¨ mainå‡½æ•°è¿”å›ä¹‹å\n\né™æ€é™æ€æŒ‡çš„æ˜¯ï¼š\n\nç©ºé—´çš„é™æ€\nå—é™çš„è®¿é—®\né™æ€å±€éƒ¨å˜é‡åœ¨ç¬¬ä¸€æ¬¡é‡åˆ°çš„æ—¶å€™åˆå§‹åŒ–\né™æ€æˆå‘˜å˜é‡åœ¨ .hæ–‡ä»¶ä¸­çš„å£°æ˜æœ‰ staticæ ‡ç­¾ï¼Œä½†æ˜¯åœ¨ .cpp ä¸­ä¸åº”è¯¥æœ‰ï½æ ‡ç­¾ï¼›å¦åˆ™æ— æ³•è¢«å…¶ä»–æ–‡ä»¶ä¸­ä½¿ç”¨ã€‚ é™æ€æˆå‘˜å‡½æ•°åŒç†\n\nä¸¤ç§è®¿é—®é™æ€å†…å®¹çš„æ–¹å¼ï¼š\n&lt;class name&gt;::&lt;static member&gt;&lt;object name&gt;.&lt;static member&gt;\n\nå¼•ç”¨ä¸€èˆ¬çš„å­—é¢é‡éƒ½æ˜¯å³å€¼ï¼Œä½†æ˜¯å­—ç¬¦ä¸²æ˜¯ä¾‹å¤–ï¼Œå› ä¸ºå­—ç¬¦ä¸²å®é™…ä¸Šå­˜å‚¨åœ¨é™æ€å†…å­˜åŒº\nä¸€èˆ¬æ¥è¯´ï¼Œå·¦å€¼å¼•ç”¨ä¸èƒ½ç»‘å®šå³å€¼ï¼Œä½†æ˜¯å¸¸é‡å·¦å€¼å¼•ç”¨å¯ä»¥ç»‘å®šå³å€¼ï¼Œå› ä¸ºå¸¸é‡çš„ç‰¹æ€§ç¡®å®šäº†ä¸ä¼šå¯¹å³å€¼è¿›è¡Œä¿®æ”¹\n\nä½†æ˜¯å¦‚æœåŒæ—¶å­˜åœ¨å³å€¼å¼•ç”¨ï¼Œå³å€¼ä½œä¸ºå‚æ•°æ—¶è¿˜æ˜¯ä¼šä¼˜å…ˆé‡è½½å³å€¼å¼•ç”¨çš„ç‰ˆæœ¬\n\nè§„èŒƒï¼š\n\nä¸å…è®¸å®šä¹‰å¼•ç”¨çš„å¼•ç”¨ï¼›\n\nä¸å…è®¸å®šä¹‰å¼•ç”¨çš„æ•°ç»„ï¼›\n\nå¼•ç”¨ä¸æ˜¯å•ç‹¬å­˜åœ¨çš„å¯¹è±¡ï¼Œæ— æ³•æŒ‰ç…§æ•°ç»„å­˜å‚¨\n\n\nä¸å…è®¸å®šä¹‰æŒ‡å‘å¼•ç”¨çš„æŒ‡é’ˆ\n\næŒ‡é’ˆå¿…é¡»æŒ‡å‘å¯¹è±¡ï¼Œè€Œå¼•ç”¨ä¸æ˜¯å¯¹è±¡\n\n\n\nå¸¸é‡ä½¿ç”¨ constæ ‡è®°å£°æ˜ä¸ºå¸¸é‡\nå¸¸é‡å¯ä»¥ç›´æ¥è®©ç¼–è¯‘å™¨å°è¯•æ›¿æ¢ï¼š\nconst int bufsize = 1 &lt;&lt; 10;const int index[] = {1, 2, 3, 4};int f[bufsize]; // Ok: f[1024]int f[index[3]]; // Error\n\nä½†æ˜¯éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼šå¯¹è±¡çš„å¸¸é‡ä¸æ˜¯ç¼–è¯‘å™¨å¸¸é‡ï¼ i.e.\nclass Array{    const int size = 10;    int array[size]; // Errorï¼};\n\n\nå¯ä»¥ä½¿ç”¨æšä¸¾æˆ–è€… staticæ¥è§£å†³ä¸Šè¿°çš„é—®é¢˜ï¼š\nenum {size = 10};static const int size = 10;\nå¸¸é‡å’ŒæŒ‡é’ˆï¼›\n\nconst *pè¡¨ç¤ºä¸èƒ½é€šè¿‡æŒ‡é’ˆæ”¹å˜æŒ‡å‘çš„å¯¹è±¡å†…å®¹ï¼›\n* const pè¡¨ç¤ºä¸èƒ½æ”¹å˜æŒ‡é’ˆçš„æŒ‡å‘ä½ç½®\n\n\nä¸éœ€è¦å…³æ³¨ç±»å‹ä¸ *çš„ä½ç½®å…³ç³»\n\nå­—ç¬¦æŒ‡é’ˆå’Œå­—ç¬¦æ•°ç»„ï¼›\nchar *sp = \"Hello World!\"; // å­—ç¬¦æŒ‡é’ˆå¯ä»¥ç§»åŠ¨ï¼Œä¸èƒ½ä¿®æ”¹char array[] = \"Hello World!\"; // å­—ç¬¦æ•°ç»„ä¸èƒ½ç§»åŠ¨ï¼Œå¯ä»¥ä¿®æ”¹array[0] = 'h' ; // åˆæ³•array = 'hello'; // éæ³•ï¼sp = 'world'; // åˆæ³•\n\n\nå®é™…ä¸Šï¼Œchar *spå°±æ˜¯ const char *spï¼Œæ‰€ä»¥ä¸èƒ½æ”¹å˜å­—ç¬¦ä¸²çš„å€¼ï¼Œä½†æ˜¯å¯ä»¥æ”¹å˜spçš„æŒ‡å‘\nè€Œå­—ç¬¦ä¸²æ•°ç»„çš„æ•°ç»„åæ˜¯æ ˆä¸­çš„å›ºå®šåœ°å€ï¼Œæ— æ³•ç§»åŠ¨ï¼Œä½†æ˜¯å¯ä»¥ä¿®æ”¹\n\næ³¨æ„åŒºåˆ†å¸¸é‡å‡½æ•°å’Œè¿”å›å€¼çš„å¸¸é‡ï¼š\nint getName(int id) const; // å¸¸é‡å‡½æ•°ï¼Œæ— æ³•æ”¹å˜æˆå‘˜å˜é‡ï¼Œå¸¸é‡å¯¹è±¡åªèƒ½è°ƒç”¨è‡ªå·±çš„å¸¸é‡æˆå‘˜å‡½æ•°ï¼ˆä¸é™æ€æˆå‘˜å‡½æ•°ï¼‰const int getAge(int id); // é™åˆ¶äº†è¿”å›å€¼æ˜¯ä¸€ä¸ªå¸¸é‡\n\ndeleteæ³¨æ„ []æ­é…çš„ä½¿ç”¨ï¼š\nint *p = new int[10];...delete [] p;\n\nInside classä»£ç†æ„é€ å¯ä»¥åœ¨ä¸€ä¸ªæ„é€ å‡½æ•°ä¸­è°ƒç”¨å¦ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå‡å°‘ä»£ç çš„é‡å¤ï¼š\nclass sorted{public:    sorted(){}    sorted(int _x){        x = _x &gt; 0? _x: 10;    }    sorted(int _x, int _z): sorted(_x){        z = _z &gt; 0 &amp;&amp; _z &lt; x? _z: 1;    }    sorted(int _x, int _y, int _z): sorted(_x, _z){        y = _y &lt; x &amp;&amp; _y &gt; z? _y: 5;    }private:    int x, y, z;};\n\nå†…è”å‡½æ•°é€šè¿‡ inlineå…³é”®å­—ï¼Œå»ºè®®ç¼–è¯‘å™¨å°†å‡½æ•°è°ƒç”¨å¤„æ›¿æ¢ä¸ºå‡½æ•°ä½“ä»£ç æœ¬èº« ï¼Œä»è€Œé¿å…å‡½æ•°è°ƒç”¨å¼€é”€ã€‚\n\næ˜¯å¦ä½œä¸ºå†…è”å‡½æ•°ï¼Œå®é™…ä¸Šç”±ç¼–è¯‘å™¨æ‰€å†³å®š\n\nå†…è”å‡½æ•°å¿…é¡»æä¾›å®Œæ•´çš„å‡½æ•°å®šä¹‰\n\ni.e. å†…è”å‡½æ•°çš„å£°æ˜å¿…éœ€ä¼´éšå®ç°ï¼ˆåœ¨åŒä¸€ä¸ªå¤´æ–‡ä»¶ä¸­å³å¯ï¼ŒäºŒè€…å¯ä»¥åˆ†ç¦»ï¼‰\n\nç»„åˆä¸ç»§æ‰¿ç»„åˆç»„åˆçš„å¯¹è±¡åˆ†ä¸ºå®Œå…¨åŒ…å«å’Œå¼•ç”¨åŒ…å«ï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨å¼•ç”¨åŒ…å«å‘¢ï¼Ÿ\n\né€»è¾‘ä¸Šå­å¯¹è±¡åº”è¯¥åœ¨å¯¹è±¡çš„å¤–éƒ¨ï¼›\nå­å¯¹è±¡çš„å¤§å°ä¸ç¡®å®š\nå­å¯¹è±¡çš„ç©ºé—´åº”è¯¥åœ¨è¿è¡Œæ—¶è¢«åˆ†é…æˆ–è€…é“¾æ¥\n\nå‘½åç©ºé—´namespace sp1{    void f();    void g();}namespace sp2{    void f();    void g();}// No terminating end colon!namespace alias = sp1;void f();void g();int main(){    sp1::f();    sp2::f();    ::f();    f();// the same as ::f()    alias::f();// the same as sp1::f()    return 0;}\n\n\n\nå¯ä»¥ä¸ºå‘½åç©ºé—´å£°æ˜åˆ«åï¼›\nå‘½åç©ºé—´çš„æœ«å°¾æ²¡æœ‰åˆ†å· ï¼›\n\n\nusingä½¿ç”¨ usingå¯ä»¥åœ¨å½“å‰çš„ä½œç”¨åŸŸå¼•å…¥å…¶ä»–çš„å‘½åç©ºé—´çš„æˆå‘˜ã€å‡½æ•°ï¼š\n\nusing &lt;namespace&gt;::&lt;member&gt; å¼•å…¥éƒ¨åˆ†çš„æˆå‘˜\nusing namespace &lt;namespace&gt; å¼•å…¥è¯¥å‘½åç©ºé—´çš„å…¨éƒ¨æˆå‘˜\n\ne.g.\nusing std::cin; // åªå¼•å…¥ cinusing namespace std; // å¼•å…¥stdçš„æ‰€æœ‰æˆå‘˜\n\n\nå¦‚æœå¼•å…¥åŒåçš„å¯¹è±¡æˆ–è€…å‡½æ•°ï¼Œå°†ä¼šå¯¼è‡´ç¼–è¯‘å™¨é“¾æ¥å¤±è´¥\n\nç»§æ‰¿çˆ¶ç±»çš„ææ„å‡½æ•°æ›´æ™šè°ƒç”¨\nçˆ¶ç±»çš„ç§æœ‰æˆå‘˜å˜é‡åœ¨å­ç±»çš„å¯¹è±¡ä¸­ä¾æ—§å­˜åœ¨ï¼Œä½†æ˜¯ä¸å¯ç›´æ¥è®¿é—®ï¼ˆåªèƒ½é€šè¿‡çˆ¶ç±»æ–¹æ³•æ¥é—´æ¥è®¿é—®ï¼‰\nçˆ¶ç±»çš„å—ä¿æŠ¤æˆå‘˜å¯ä»¥è¢«å­ç±»è®¿é—®ï¼Œä½†æ˜¯æ— æ³•è¢«å¤–ç•Œè®¿é—®\néå…¬å¼€çš„ç»§æ‰¿class B: protected A{    ...  };class B: private A{//default    ...};\n\n\nå¦‚æœå®šä¹‰ protected ç»§æ‰¿ï¼Œåªæœ‰å­ç±»åŠå…¶æ´¾ç”Ÿç±»å¯ä»¥è°ƒç”¨çˆ¶ç±»æ–¹æ³•ï¼Œå¤–éƒ¨æ˜¯ä¸å¯ä»¥çš„ã€‚\nå¦‚æœå®šä¹‰ private ç»§æ‰¿ï¼Œåªæœ‰å­ç±»æœ¬èº«å¯ä»¥è°ƒç”¨çˆ¶ç±»æ–¹æ³•ã€‚\n\né™æ€æˆå‘˜çš„ç»§æ‰¿çˆ¶ç±»çš„é™æ€æˆå‘˜ä¸ä¼šåœ¨å­ç±»ä¸­å…·æœ‰è‡ªå·±çš„å‰¯æœ¬ï¼Œå­ç±»å’Œçˆ¶ç±»å…±äº«ä¸€ä¸ªé™æ€æˆå‘˜ï¼\nä»¥ä¸‹ä»‹ç»usingç›¸å…³çš„å‡ ä¸ªé—®é¢˜ï¼š\nname hidingå¦‚æœå­ç±»é‡è½½äº†çˆ¶ç±»çš„å‡½æ•°ï¼Œçˆ¶ç±»çš„åŒåå‡½æ•°å°†ä¼šå¤±æ•ˆï¼Œæ— æ³•ç›´æ¥è°ƒç”¨ï¼Œéœ€è¦ä½¿ç”¨ usingæ¥å£°æ˜ï¼š\ne.g.\nclass Base{  public:   \tvoid f(double){      cout &lt;&lt; \"double\\n\" &lt;&lt; endl;    }};class Derived : Base{  public:  \tusing Base::f; // å°†åŸºç±»ä¸­çš„ç§æœ‰å‡½æ•°æœ¬åœ°ä½¿ç”¨  \tvoid f(int){      cout &lt;&lt; \"int\\n\"&lt;&lt;endl;    }};\n\né»˜è®¤å‚æ•°çš„é‡è½½ä¼ é€’åœ¨cppä¸­, é»˜è®¤å‚æ•°å€¼ç»‘å®šåœ¨å‡½æ•°å£°æ˜çš„ä½œç”¨åŸŸä¸Š, è€Œä¸æ˜¯å‡½æ•°æœ¬èº«! è¿™æ˜¯ä¸ºäº†é¿å… å¤šé‡ç»§æ‰¿æ—¶å‚æ•°å€¼äº§ç”Ÿå†²çªæˆ–äºŒä¹‰æ€§ ã€‚\n\né»˜è®¤å‚æ•°æ˜¯é™æ€ç»‘å®šï¼ˆç¼–è¯‘æœŸè¡Œä¸ºï¼‰ï¼Œå®ƒå¿…é¡»æ¸…æ¥šåœ°çŸ¥é“å–å“ªä¸ªä½œç”¨åŸŸçš„å€¼.\n\ne.g.\nclass A {public:    void f(int a = 3, double b = 2.0);};class B : public A {public:    using A::f;         // âœ… æ­¤æ—¶é»˜è®¤å‚æ•°ä»å¯è§    void f(int a);      // âŒ é‡è½½åï¼Œè¿™ä¸ªç‰ˆæœ¬æ²¡æœ‰é»˜è®¤å‚æ•°};\n\nå­ç±»é‡å†™çˆ¶ç±»å‡½æ•°å¦‚æœå­ç±»ç›´æ¥é‡å†™äº†çˆ¶ç±»çš„å‡½æ•°ï¼Œä½†æ˜¯çˆ¶ç±»ä¸­çš„åŒåå‡½æ•°æœ¬èº«å…·æœ‰é‡è½½çš„ç‰ˆæœ¬ï¼Œé‚£ä¹ˆä¹Ÿéœ€è¦ä½¿ç”¨ usingæ¥å£°æ˜ï¼š\n#include &lt;iostream&gt;class Base{public:    // åŸºç±»ä¸­çš„é‡è½½å‡½æ•°    void display(int x)    {        std::cout &lt;&lt; \"Base display(int): \" &lt;&lt; x &lt;&lt; std::endl;    }    void display(double x)    {        std::cout &lt;&lt; \"Base display(double): \" &lt;&lt; x &lt;&lt; std::endl;    }};class Derived : public Base{public:    // å­ç±»é‡æ–°å®šä¹‰äº†åŸºç±»çš„ display(int)    void display(int x)    {        std::cout &lt;&lt; \"Derived display(int): \" &lt;&lt; x &lt;&lt; std::endl;    }    using Base::display;};int main(){    Derived d;    d.display(5); // è°ƒç”¨ Derived çš„ display(int)    d.Base::display(5.5); // æˆ–è€…d.display(5.5);    return 0;}\n\nå¤šæ€\næˆ‘ä»¬åº”å½“å°†æ‰€æœ‰ç±»çš„ææ„å‡½æ•°éƒ½è®¾ç½®ä¸ºè™šææ„å‡½æ•°ï¼Œå› ä¸ºæ¯ä¸ªç±»éƒ½æœ‰æˆä¸ºçˆ¶ç±»çš„å¯èƒ½\n\nclass Base {public:    virtual ~Base() {        cout &lt;&lt; \"Base Destructor\" &lt;&lt; endl;    }};class Derived : public Base {public:    ~Derived() {        cout &lt;&lt; \"Derived Destructor\" &lt;&lt; endl;    }};\n\n\nå­ç±»å’Œçˆ¶ç±»çš„ææ„å‡½æ•°å…ˆåè°ƒç”¨\n\n\nvptråœ¨æ„é€ çš„æ—¶å€™ç¡®å®šï¼Œè™šç»§æ‰¿çš„å­ç±»åœ¨è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°æ—¶ï¼Œé»˜è®¤è°ƒç”¨çˆ¶ç±»çš„æˆå‘˜å‡½æ•°\nclass A {public:    A() {        f();    }    virtual void f() {        cout &lt;&lt; \"A::f()\";    }};class B : public A {public:    B() {        f();    }    void f() {        cout &lt;&lt; \"B::f()\";    }};B temp;\n\nè™šå‡½æ•°çš„è§„èŒƒæ³¨æ„ virtualä¸ overrideçš„æ­é…ï¼š\nclass Animal {public:    virtual void speak() {        cout &lt;&lt; \"Animal speaks\" &lt;&lt; endl;    }};class Dog : public Animal {public:    void speak() override {        cout &lt;&lt; \"Dog barks\" &lt;&lt; endl;    }};\n\n\noverrideæ˜¯ä¸ºäº†è®©ç¼–è¯‘å™¨æ£€æŸ¥è¯¥å‡½æ•°åœ¨çˆ¶ç±»ä¸­æ˜¯è™šå‡½æ•°ï¼Œä½†ä¸æ˜¯å¿…é¡»çš„\n\n\nvtableæ˜¯ç±»çº§åˆ«çš„, æ‰€æœ‰è¯¥ç±»çš„å¯¹è±¡å…±äº«ä¸€ä¸ªvtable;\nvptræ˜¯å¯¹è±¡çº§åˆ«çš„, éšå«äºå„ä¸ªå¯¹è±¡å½“ä¸­.å¹¶ä¸”åœ¨å†…å­˜çš„å¼€å¤´\n\næŠ½è±¡ç±»æŠ½è±¡ç±»ï¼šè‡³å°‘åŒ…å«ä¸€ä¸ªçº¯è™šå‡½æ•°çš„ç±»æ˜¯ï½\nclass Shape {public:    // çº¯è™šå‡½æ•°ï¼Œå­ç±»å¿…é¡»å®ç°    virtual void draw() = 0;};\n\n\nçº¯è™šå‡½æ•°ç±»ä¼¼äºåè®®ï¼Œè¦æ±‚å­ç±»å¿…é¡»å®ç°\nåªæœ‰å®Œæˆäº†æ‰€æœ‰çº¯è™šå‡½æ•°å®šä¹‰çš„ã€æŠ½è±¡ç±»çš„å­ç±»ï¼Œæ‰èƒ½å¤Ÿå®ä¾‹åŒ–\n\næ¥å£ç±» Interface Classï¼š\n\næ¯”æŠ½è±¡ç±»æ›´åŠ æŠ½è±¡ï¼‰\nåªå®šä¹‰æ¥å£, ä¸æä¾›å®ç°çš„æŠ½è±¡ç±»\næ‰€æœ‰çš„æˆå‘˜å‡½æ•°éƒ½æ˜¯çº¯è™šå‡½æ•°;\nä¸€èˆ¬ä¸åŒ…å«ä»»ä½•æ•°æ®æˆå‘˜.\n\nè±å½¢ç»§æ‰¿ä¸è™šç»§æ‰¿åœ¨ç»§æ‰¿æ—¶æ·»åŠ  virtual å…³é”®å­—å®ç°,å­ç±»ä¸­ä¸å­˜åœ¨çˆ¶ç±»çš„å¯¹è±¡ï¼Œè€Œæ˜¯ä¿æœ‰çˆ¶ç±»çš„æŒ‡é’ˆã€‚\nclass A{public:    int value;    void ptr()    {        cout &lt;&lt; \"value: \" &lt;&lt; value &lt;&lt; endl;    }};class B : virtual public A {};class C : virtual public A {};class D : public B, public C {};\n\nä¸Šè¿°çš„è™šç»§æ‰¿ç¡®ä¿äº†Bï¼ŒCåªä¼šæ‹¥æœ‰Açš„ä¸€ä»½valueï¼Œä»è€Œé¿å…äº†ä»Dçš„å¯¹è±¡è®¿é—® valueæ—¶å­˜åœ¨çš„äºŒä¹‰æ€§\n\nå¹¶éæ‰€æœ‰çš„è±å½¢ç»§æ‰¿éƒ½ä¼šå› ä¸ºäºŒä¹‰æ€§çš„è®¿é—®è€Œå¯¼è‡´è®¿é—®çš„é—®é¢˜ï¼\n\nTODOï¼šæ£€æŸ¥ä»€ä¹ˆæ—¶å€™æ²¡æœ‰äºŒä¹‰æ€§ï¼Ÿ\nç”±äºè™šç»§æ‰¿å¸¦æ¥çš„æ˜¯â€œå…±äº«â€çš„åŸºç±»å¯¹è±¡ï¼Œæ‰€ä»¥ï¼š\n\nè™šåŸºç±»çš„æ„é€  å¿…é¡»ç”±æœ€åº•å±‚æ´¾ç”Ÿç±»è´Ÿè´£\næ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°ä¸­è¦æ˜¾å¼åˆå§‹åŒ–è™šåŸºç±»\n\nCopy &amp; Move\næ‹·è´æ„é€ å‡½æ•°çš„ç­¾åï¼šT::T(const T&amp;)\né»˜è®¤çš„æ‹·è´æ„é€ å‡½æ•°çš„æŒ‡é’ˆç±»å‹æˆå‘˜æ˜¯ç›´æ¥èµ‹å€¼çš„ï¼Œä¹Ÿå°±æ˜¯å…±äº«åŒä¸€åœ°å€\nå› æ­¤æˆ‘ä»¬éœ€è¦æ˜¾å¼å®šä¹‰ç±»çš„æ‹·è´æ„é€ å‡½æ•°ï¼Œé¿å…ä¾èµ–é»˜è®¤çš„ï½\né»˜è®¤æ‹·è´æ„é€ ä¸­ï¼Œæˆå‘˜å¯¹è±¡ä¹Ÿä¼šè°ƒç”¨è‡ªå·±çš„æ‹·è´æ„é€ å‡½æ•°\n\n\n\næ‹·è´æ„é€ å‡½æ•°çš„è°ƒç”¨æ—¶æœº\næŒ‰å€¼ä¼ é€’å‚æ•°æ—¶ï¼šå½“å¯¹è±¡ä½œä¸ºå‚æ•°æŒ‰å€¼ä¼ é€’ç»™å‡½æ•°æ—¶void func(MyClass obj); // è°ƒç”¨æ—¶ä¼šè§¦å‘æ‹·è´æ„é€ \nå¯¹è±¡åˆå§‹åŒ–æ—¶ï¼šMyClass a;MyClass b = a;    // åˆå§‹åŒ–ï¼Œè°ƒç”¨æ‹·è´æ„é€ å‡½æ•°MyClass c(a);     // åˆå§‹åŒ–ï¼Œè°ƒç”¨æ‹·è´æ„é€ å‡½æ•°\nå‡½æ•°è¿”å›å¯¹è±¡æ—¶ï¼šMyClass func() {    MyClass obj;    return obj;   // å¯èƒ½è§¦å‘æ‹·è´æ„é€ ï¼ˆå–å†³äºç¼–è¯‘å™¨ä¼˜åŒ–ï¼‰}\n\nä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š\nStringHolder(const StringHolder &amp;other)    {        if (other.data)        {            data = new char[strlen(other.data) + 1];            strcpy(data, other.data);            std::cout &lt;&lt; \"æ·±æ‹·è´æ„é€ å‡½æ•°: ä¸º\\\"\" &lt;&lt; data &lt;&lt; \"\\\"åˆ†é…æ–°å†…å­˜\" &lt;&lt; std::endl;        }        else        {            data = nullptr;            std::cout &lt;&lt; \"æ·±æ‹·è´æ„é€ å‡½æ•°: å¤åˆ¶ç©ºå­—ç¬¦ä¸²\" &lt;&lt; std::endl;        }    }\n\nå³å€¼å¼•ç”¨ä¸¤ç§å¯ä»¥åŒæ—¶è¾“å…¥å·¦å€¼å’Œå³å€¼å¼•ç”¨ä½œä¸ºå‚æ•°çš„æ–¹æ³•:\n\né‡è½½\n// é‡è½½å‡½æ•°ï¼Œåˆ†åˆ«å¤„ç†å·¦å€¼å’Œå³å€¼void process(int&amp; x) {    std::cout &lt;&lt; \"é‡è½½å‡½æ•° - å¤„ç†å·¦å€¼: \" &lt;&lt; x &lt;&lt; std::endl;}void process(int&amp;&amp; x) {    std::cout &lt;&lt; \"é‡è½½å‡½æ•° - å¤„ç†å³å€¼: \" &lt;&lt; x &lt;&lt; std::endl;}\nconst int&amp; x \n// æ¥å—constå·¦å€¼å¼•ç”¨çš„å‡½æ•°ï¼ˆå¯ä»¥æ¥å—å·¦å€¼å’Œå³å€¼ï¼‰void processAny(const int&amp; x) {    std::cout &lt;&lt; \"å¤„ç†ä»»æ„å€¼: \" &lt;&lt; x &lt;&lt; std::endl;}\n\nç§»åŠ¨æ„é€ å‡½æ•°\nç­¾åï¼šT::T(T&amp;&amp; other), ä¹Ÿå°±æ˜¯å°†å³å€¼å¼•ç”¨ä½œä¸ºå‚æ•°çš„æ„é€ å‡½æ•°\nç”¨äºâ€çªƒå–â€å³å°†é”€æ¯çš„å¯¹è±¡çš„èµ„æºï¼Œé¿å…ä¸å¿…è¦çš„æ·±æ‹·è´\né€šå¸¸å°†æºå¯¹è±¡çš„æŒ‡é’ˆæˆå‘˜ç½®ä¸º nullptrï¼Œé˜²æ­¢èµ„æºè¢«é”™è¯¯é‡Šæ”¾. å…¶ä»–æˆå‘˜è®¾ç½®ä¸ºé›¶å€¼\n\nä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š\nclass DynamicArray{private:    int *m_array;    size_t m_size;...}// ç§»åŠ¨æ„é€ å‡½æ•°DynamicArray(DynamicArray &amp;&amp;other) noexcept : m_array(other.m_array), m_size(other.m_size)    {        // \"çªƒå–\"otherçš„èµ„æºï¼Œå¹¶å°†otherç½®ä¸ºå®‰å…¨çŠ¶æ€        other.m_array = nullptr;        other.m_size = 0;        std::cout &lt;&lt; \"ç§»åŠ¨æ„é€ å‡½æ•°: ç§»åŠ¨å¤§å°ä¸º\" &lt;&lt; m_size &lt;&lt; \"çš„æ•°ç»„\" &lt;&lt; std::endl;    }\n\n\nnoexceptæ ‡è®°è¡¨ç¤ºä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼›\næ ‡å‡†åº“å®¹å™¨åœ¨è¿›è¡Œå…ƒç´ ç§»åŠ¨æ—¶ä¼šä¼˜å…ˆé€‰æ‹©ä¸ä¼šæŠ›å¼‚å¸¸çš„ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œå¦‚æœä¸å­˜åœ¨ï½ä¼šé€€è€Œæ±‚å…¶æ¬¡é€‰æ‹©æ‹·è´æ„é€ å‡½æ•°ï¼ˆæ›´æ…¢ï¼‰ã€‚\n\nmoveå¦‚æœå¯¹è±¡ä¸æ˜¯å³å€¼å¼•ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ std::moveæ¥æ˜¾å¼è°ƒç”¨ç§»åŠ¨æ„é€ å‡½æ•°ï¼š\nvector&lt;int&gt; v1{1, 2, 3, 4};vector&lt;int&gt; v2 = v1; // v2 æ˜¯ v1 çš„å‰¯æœ¬vector&lt;int&gt; v3 = std::move(v1); // è°ƒç”¨ç§»åŠ¨æ„é€ å‡½æ•°\n\nåˆå§‹åŒ–çš„æ–¹å¼C++11æä¾›äº†å¤šç§åˆå§‹åŒ–å¯¹è±¡çš„æ–¹å¼ï¼š\n\nå°æ‹¬å·åˆå§‹åŒ–ï¼šMyClass obj(arg1, arg2);\n\nç­‰å·åˆå§‹åŒ–ï¼šMyClass obj = value;\n\nå¤§æ‹¬å·åˆå§‹åŒ–ï¼ˆç»Ÿä¸€åˆå§‹åŒ–ï¼‰ï¼šMyClass obj{arg1, arg2};\n\nåˆ—è¡¨åˆå§‹åŒ–ï¼š\nint arr[] = {1, 2, 3};MyClass* ptr = new MyClass{arg1, arg2};\n\nåŸºæœ¬ç±»å‹çš„åˆå§‹åŒ–// åŸºæœ¬ç±»å‹çš„åˆå§‹åŒ–æ–¹å¼int a = 10;             // ç­‰å·åˆå§‹åŒ–int b(20);              // å°æ‹¬å·åˆå§‹åŒ–int c{30};              // å¤§æ‹¬å·åˆå§‹åŒ–ï¼ˆC++11ï¼‰int d = {40};           // ç­‰å·+å¤§æ‹¬å·åˆå§‹åŒ–ï¼ˆC++11ï¼‰int arr1[] = {1, 2, 3}; // æ•°ç»„åˆå§‹åŒ–int arr2[]{4, 5, 6};    // æ•°ç»„å¤§æ‹¬å·åˆå§‹åŒ–ï¼ˆC++11ï¼‰\n\nå¯¹è±¡çš„åˆå§‹åŒ–// å¯¹è±¡çš„åˆå§‹åŒ–æ–¹å¼Person p1(\"å¼ ä¸‰\", 25);          // å°æ‹¬å·åˆå§‹åŒ–Person p2 = Person(\"æå››\", 30); // ç­‰å·+ä¸´æ—¶å¯¹è±¡åˆå§‹åŒ–Person p3{\"ç‹äº”\", 35};          // å¤§æ‹¬å·åˆå§‹åŒ–ï¼ˆC++11ï¼‰Person p4 = {\"èµµå…­\", 40};       // ç­‰å·+å¤§æ‹¬å·åˆå§‹åŒ–ï¼ˆC++11ï¼‰\n\n\nåŠ¨æ€åˆ†é…å¯¹è±¡çš„åˆå§‹åŒ–\n// åŠ¨æ€åˆ†é…å¯¹è±¡çš„åˆå§‹åŒ–æ–¹å¼Person *pp1 = new Person(\"åŠ¨æ€å¼ ä¸‰\", 25); // ä¼ ç»ŸnewPerson *pp2 = new Person{\"åŠ¨æ€æå››\", 30}; // å¤§æ‹¬å·åˆå§‹åŒ–ï¼ˆC++11ï¼‰\n\nç»Ÿä¸€åˆå§‹åŒ–å¯¹äºç®€å•çš„ç±»æˆ–è€…å®¹å™¨å†…éƒ¨çš„ç±»ï¼Œæˆ‘ä»¬å¯ä»¥ä¸å†™æ„é€ å‡½æ•°ï¼Œè€Œæ˜¯ç”¨èŠ±æ‹¬å·è¿›è¡Œ ç»Ÿä¸€åˆå§‹åŒ– ã€‚\nå¦‚æœç±»æ²¡æœ‰æ„é€ å‡½æ•°ï¼Œå‚æ•°åº”æŒ‰ç…§æˆå‘˜çš„å£°æ˜é¡ºåºç»™å‡ºï¼›å¦‚æœæœ‰ï¼Œå‚æ•°åº”æŒ‰ç…§æ„é€ å‡½æ•°çš„å‚æ•°é¡ºåºç»™å‡ºã€‚\nclass Test{    int a, b;};Test t{0, 0};Test *pt = new Test{1, 2};int *a = new int[3]{1, 2, 0};vector&lt;string&gt; vec = { \"first\", \"second\", \"third\"};\n\næ“ä½œç¬¦é‡è½½è¿ç®—ç¬¦é‡è½½æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªä»¥ operatorå…³é”®å­—ä¸ºå‰ç¼€ï¼Œåè·Ÿè¿ç®—ç¬¦çš„ç‰¹æ®Šå‡½æ•°\n\nèµ‹å€¼è¿ç®—ç¬¦é¦–å…ˆè¦æ£€æŸ¥æ˜¯å¦ä¸ºè‡ªèµ‹å€¼\nå¿…é¡»åœ¨ç±»æˆ–è€…æšä¸¾ç±»ä¸Šå®šä¹‰\nç±»å†…æˆå‘˜å‡½æ•°çš„é‡è½½å°†ç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸ºéšå¼çš„ thisä¼ é€’ï¼Œæ“ä½œç¬¦å·¦ç«¯çš„ç±»å‹å†³å®šäº†ä½¿ç”¨çš„æ“ä½œç¬¦çš„ç±»å‹\n3+a1éæ³• if a1æ— æ³•è½¬æ¢ä¸º int\n\n\n\næˆå‘˜å‡½æ•°ä¸è‡ªç”±å‡½æ•°\n=, (), [], -&gt;, -&gt;* å¿…é¡»æ˜¯æˆå‘˜å‡½æ•°\nå•ç›®è¿ç®—ç¬¦åº”è¯¥å£°æ˜ä¸ºæˆå‘˜ï¼›\näºŒç›®è¿ç®—ç¬¦åº”è¯¥å£°æ˜ä¸ºè‡ªç”±å‡½æ•°\n\næ— æ³•é‡è½½çš„è¿ç®—ç¬¦. .* :: ?:sizeof typeidstatic_cast dynamic_cast const_castreinterpret_cast\n\nå‚æ•°ä¼ é€’ä¸è¿”å›ç±»å‹\n+ - * / % ^ &amp; | ~ è¿”å›æ–°çš„å¯¹è±¡\nconst Tp operator X(const Tp &amp; l, const Tp &amp; r);\n\n\nå¸ƒå°”è¿ç®—ï¼Œè¿”å› boolç±»å‹\n[ ] è¿”å›å¯ä»¥ä¿®æ”¹çš„å¼•ç”¨ï¼Œç±»ä¼¼äºæ•°ç»„çš„èµ‹å€¼\nTp &amp; operator X(int index);\n\n\n= += *= /= &lt;&lt;= &gt;&gt;= è¿”å›å¯ä»¥ä¿®æ”¹çš„å¼•ç”¨ï¼Œç¡®ä¿é“¾å¼æ“ä½œ\nTp &amp; operator X(const Tp &amp;l, const Tp &amp;r);\n\n\n\nå‰ç¼€è‡ªå¢å’Œåç¼€è‡ªå¢éœ€è¦åŒºåˆ†ï¼Œåœ¨åç¼€è‡ªå¢çš„å‚æ•°åˆ—è¡¨ä¸­æ·»åŠ  intå³å¯\n// å‰ç¼€è‡ªå¢è¿”å›å¼•ç”¨const Integer&amp; Integer::operator++(){    *this += 1;    return *this;}// åç¼€è‡ªå¢è¿”å›å¯¹è±¡const Integer Integer::operator++(int){// just leave the parameter unnamed    Integer old(*this);    ++(*this);    return old;}\n\næ¯”è¾ƒè¿ç®—ç¬¦è€ƒè™‘å®ç°åŸºç¡€çš„ == ä¸ &lt; ï¼Œå…¶ä½™çš„æ¯”è¾ƒé‡è½½åœ¨ä¸Šè¿°çš„åŸºç¡€ä¸Šé€šè¿‡ ! è¿ç®—å®ç°ï¼Œä¾¿äºç›´æ¥è¿ç§»\næµè¿ç®—istream&amp; operator&gt;&gt;(istream&amp; is, _Tp&amp; obj){    // read obj from is    return is;}ostream&amp; operator&lt;&lt;(ostream&amp; os, const _Tp&amp; obj){    // output obj in os    return os;}ostream&amp; tab(ostream&amp; os){// manipulator    return os &lt;&lt; '\\t';}\n\n\nè¾“å‡ºæµè¿ç®—ç¬¦çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸èƒ½æ˜¯ constï¼Œå› ä¸ºè¾“å‡ºä¼šä¿®æ”¹æµ\nè¾“å…¥æµè¿ç®—ç¬¦çš„ç¬¬äºŒä¸ªå‚æ•°ä¸èƒ½æ˜¯ constï¼Œå› ä¸ºéœ€è¦ä¿®æ”¹å¯¹è±¡\né€šå¸¸éœ€è¦å£°æ˜ä¸ºå‹å…ƒä»¥è®¿é—®ç§æœ‰æˆå‘˜\n\nèµ‹å€¼è¿ç®—ç¬¦_Tp&amp; _Tp::operator=(const _Tp&amp; rhs){    if(this != &amp;rhs){        size = rhs.size;        delete[] p;        p = new int[size];        for(int i = 0 ; i &lt; size; ++i)            p[i] = rhs.p[i];    }    return *this;}\n\n\né¦–å…ˆæ£€æŸ¥æ˜¯å¦ä¸ºè‡ªèµ‹å€¼\n\nå¦‚æœä¸å¸Œæœ›è¿›è¡Œèµ‹å€¼è¿ç®—ï¼Œå°†ä¸Šè¿°çš„ = é‡è½½å£°æ˜ä¸º privateï¼Œå¹¶ä¸”æ— éœ€å®ç°ã€‚\n\nè¿™æ˜¯å› ä¸º a = b;  // å®é™…ç­‰ä»·äºï¼ša.operator=(b)ï¼Œ å‘èµ·è°ƒç”¨çš„æ˜¯å½“å‰ä»£ç ç‰‡æ®µæ‰€åœ¨çš„ä½œç”¨åŸŸï¼Œå¦‚æœä¸æ˜¯ç±»å†…å‡½æ•°ï¼Œé‚£ä¹ˆå°±æ˜¯éæ³•çš„\n\néšå¼è½¬æ¢1. æ„é€ å‡½æ•°è½¬æ¢ï¼šä»å…¶ä»–ç±»å‹åˆ°å½“å‰ç±»å‹\nclass PathName {    string name;public:    PathName(const string&amp; s) : name(s) {}  // stringåˆ°PathNameçš„è½¬æ¢};string abc(\"abc\");PathName xyz = abc;  // éšå¼è½¬æ¢ï¼šabc =&gt; PathName\n\n2.è½¬æ¢è¿ç®—ç¬¦ï¼šä»å½“å‰ç±»å‹åˆ°å…¶ä»–ç±»å‹\n\noperator &lt;typename&gt; {}å…³é”®å­—\n\nclass Rational {public:    operator double() const {  // Rationalåˆ°doubleçš„è½¬æ¢        return numerator_ / (double)denominator_;    }};Rational r(1, 3);double d = r;  // éšå¼è½¬æ¢ï¼šr =&gt; double\n\nå¯ä»¥ä½¿ç”¨ explicitå…³é”®å­—è¦æ±‚æ˜¾å¼è½¬æ¢ï¼š\nexplicit operator double() const;double d = (double)r;  // å¿…é¡»æ˜¾å¼è½¬æ¢\n\næ˜¾å¼è½¬æ¢\næ„é€ å‡½æ•°çš„æ˜¾å¼è½¬æ¢\n\n// å¦‚æœæƒ³è¦å¼ºåˆ¶æ˜¾å¼è½¬æ¢ï¼Œåº”è¯¥è¿™æ ·å£°æ˜ï¼šexplicit Rational(double value) {    const int PRECISION = 10000;    numerator = static_cast&lt;int&gt;(value * PRECISION);    denominator = PRECISION;    simplify();}Rational r1 = 3.14;        // é”™è¯¯ï¼šä¸å…è®¸éšå¼è½¬æ¢Rational r2(2.5);          // æ­£ç¡®ï¼šæ˜¾å¼æ„é€ Rational r3 = Rational(3.14); // æ­£ç¡®ï¼šæ˜¾å¼è½¬æ¢\n\n\nç±»å‹è½¬æ¢è¿ç®—ç¬¦çš„æ˜¾å¼è½¬æ¢\n\nexplicit operator double() const;double d = (double)r;  // æ˜¾å¼è½¬æ¢ or double(r)double d2 = static_cast&lt;double&gt;(r2);  // æ˜¾å¼è½¬æ¢\n\nè½¬æ¢ä¼˜å…ˆçº§å¦‚æœåŒæ—¶å­˜åœ¨ä¸¤ç§æ–¹å‘çš„è½¬æ¢ï¼Œå°†ä¼˜å…ˆé‡‡å–æ„é€ å‡½æ•°çš„è½¬æ¢æ–¹å¼\n\nå¯ä»¥é€šè¿‡å£°æ˜å…¶ä¸­çš„ä¸€ç§æƒ…å†µå¿…é¡»æ˜¾å¼è°ƒç”¨æ¥å¹¶å­˜ï¼›æ¯”å¦‚å¿…é¡»æ˜¾å¼è°ƒç”¨æ„é€ å‡½æ•°çš„è½¬æ¢ï¼Œé‚£ä¹ˆä¸‹é¢çš„æƒ…å†µå°†ä¼šè°ƒç”¨æ„é€ å‡½æ•°å°†Aè½¬æ¢åˆ°Bçš„å¯¹è±¡ï¼š\nclass B{public:    B();    explicit B(A); // ä»Aåˆ°Bçš„æ˜¾å¼æ„é€ å‡½æ•°};void functionTakingB(B thing){    cout &lt;&lt; \"OK\" &lt;&lt; std::endl;}functionTakingB(static_cast&lt;B&gt;(a));\nè½¬æ¢è¿ç®—ç¬¦C++ ä¸­æœ‰å››ä¸ªè½¬æ¢è¿ç®—ç¬¦ Cast Operatorï¼š\n\nstatic_castï¼š\n\nåŸºæœ¬ç±»å‹çš„è½¬æ¢\nå­ç±»å‘çˆ¶ç±»çš„æŒ‡é’ˆ/å¼•ç”¨çš„è½¬æ¢\nvoidä¸å…¶ä»–ç±»å‹æŒ‡é’ˆçš„è½¬æ¢\n\n\ndynamic_castï¼šdown-castï¼Œå®‰å…¨\n\nçˆ¶ç±»å‘å­ç±»çš„æŒ‡é’ˆ/å¼•ç”¨çš„è½¬æ¢ï¼Œä¸ä¸€å®šæ€»æ˜¯å®‰å…¨ï¼ˆè¦æ±‚åŸæœ¬æŒ‡å‘çš„å¯¹è±¡å°±æ˜¯å­ç±»å¯¹è±¡ï¼‰\nè¦æ±‚åŸºç±»ä¸­è‡³å°‘å­˜åœ¨ä¸€ä¸ªè™šå‡½æ•°ï¼ˆå› æ­¤å…·æœ‰ vptrï¼Œä»è€Œå¯ä»¥é€šè¿‡ä¸åŒç±»çš„ vptrè¿›è¡Œç±»çš„åŒºåˆ†ï¼‰\nBase* basePtr = new Derived();\nDerived* derivedPtr = dynamic_cast&lt;Derived*&gt;(basePtr);\n\nif(derivedPtr){\n...\n}\n\n* `const_cast`ï¼šä¿®æ”¹ `const` å±æ€§  * ```cpp    const int a = 10;    int *b = const_cast&lt;int*&gt;(&amp;a);    *b = 20; // è½¬æ¢ä¹‹åå¯ä»¥ä¿®æ”¹value\n\n&gt; ä½†æ˜¯æ›´åŠ å¸¸è§çš„æ˜¯å°†éconstç±»å‹çš„å±æ€§ä¿®æ”¹ä¸º `const`ï¼›åŸæœ¬æ˜¯å¸¸é‡ç±»å‹çš„å±æ€§å¯èƒ½è¢«ç¼–è¯‘å™¨å­˜å‚¨åœ¨åªè¯»å†…å­˜åŒºåŸŸï¼Œå¦‚æœç¼–è¯‘å™¨æ²¡æœ‰åœ¨ `const_cast`çš„è½¬æ¢ä¸­è¿›è¡Œä¼˜åŒ–ï¼Œå¯èƒ½å¯¼è‡´è¿è¡Œé—®é¢˜ï¼Ÿ\n&gt;\n\n\n\n\nreinterpret_castï¼šå¿½ç•¥ç±»å‹æ£€æŸ¥ï¼Œå¼ºåˆ¶è½¬æ¢ï¼Œä½å®‰å…¨æ€§\n\n\nTemplateä¸€ä¸ªæ¨¡æ¿å®Œå…¨éƒ½æ˜¯å£°æ˜ï¼Œåº”è¯¥åªæœ‰ .hï¼Œè€Œä¸å«æœ‰ .cpp\n\nå¿…é¡»éƒ½æ”¾åœ¨å¤´æ–‡ä»¶çš„å®ç°åŒ…å«:\n\nå‡½æ•°æ¨¡æ¿;\ninlineå‡½æ•°\nå¸¦æœ‰defaultå‚æ•°çš„å£°æ˜.\nç±»æ¨¡æ¿çš„æˆå‘˜å‡½æ•°\n\n\nå‡½æ•°æ¨¡æ¿å‚æ•°åŒ¹é…#include &lt;algorithm&gt;#include &lt;iostream&gt; int add(int x, int y){    return x + y;} template&lt;typename _Tp&gt;_Tp add(_Tp x, _Tp y){    return x + y;} signed main(int argc, char **argv){    std::cout &lt;&lt; add(1, 2) &lt;&lt; std::endl;     std::cout &lt;&lt; add(1.1, 2.2) &lt;&lt; std::endl;    return 0;}/* T add(int, int) å’Œ T double add&lt;double&gt;(double, double) */\n\n\nå¦‚æœæœ‰åŸç”Ÿçš„å®Œå…¨åŒ¹é…çš„å‡½æ•°ï¼Œä¼˜å…ˆä½¿ç”¨åŸç”Ÿå‡½æ•°ï¼Œä¾‹å¦‚ add(1, 2) è°ƒç”¨ add(int, int)ã€‚\nå…¶æ¬¡ï¼Œå¦‚æœæœ‰æ¨¡æ¿èƒ½å®Œå…¨åŒ¹é…çš„å‡½æ•°ï¼Œä½¿ç”¨æ¨¡æ¿ç”Ÿæˆå‡½æ•°ï¼Œä¾‹å¦‚ add(1.1, 2.2) è°ƒç”¨ add&lt;double&gt;(dobule, double)ã€‚\nå†å…¶æ¬¡ï¼Œå°è¯•ä½¿ç”¨ç±»å‹è½¬æ¢æ¥åŒ¹é…å…¶ä»–åŸç”Ÿå‡½æ•°ã€‚ä½†æ˜¯ï¼Œç±»å‹è½¬æ¢ä¸èƒ½ç”¨äºåŒ¹é…æ¨¡æ¿ï¼Œä¾‹å¦‚ add(1, 2.2)ã€‚\n\nç±»æ¨¡æ¿ç®€å•çš„ç¤ºä¾‹ï¼š\ntemplate&lt;typename T&gt;class Vector{public:    Vector(int s):size(s){        content = new T[size];    }    virtual ~Vector(){        delete[] content;    }    T&amp; operator[](int p){        return content[p];    }private:    T* content;    int size;};\n\nExceptionå¼‚å¸¸çš„ç±»å‹å¦‚ä½•å®šä¹‰ï¼Ÿ\n\n// å¼‚å¸¸å¯¹è±¡çš„å®šä¹‰class DivisionError {private:    string message;public:    DivisionError(const string&amp; msg) : message(msg) {        cout &lt;&lt; \"åˆ›å»ºDivisionErrorå¼‚å¸¸å¯¹è±¡\" &lt;&lt; endl;    }      ~DivisionError() {        cout &lt;&lt; \"é”€æ¯DivisionErrorå¼‚å¸¸å¯¹è±¡\" &lt;&lt; endl;    }      string what() const {        return message;    }};// å†…å±‚å‡½æ•°double divide(double a, double b) {    cout &lt;&lt; \"è¿›å…¥divideå‡½æ•°\" &lt;&lt; endl;    Resource r(\"divideå‡½æ•°çš„å±€éƒ¨èµ„æº\");      if (b == 0) {        throw DivisionError(\"é™¤æ•°ä¸èƒ½ä¸ºé›¶\");    }      cout &lt;&lt; \"divideå‡½æ•°æ­£å¸¸è¿”å›\" &lt;&lt; endl;    return a / b;}\næ‰§è¡Œæµç¨‹ï¼š\n\né€šè¿‡ throw åˆ›å»ºå¯¹åº”çš„å¼‚å¸¸å¯¹è±¡\nå°†å¼‚å¸¸æ‰€åœ¨çš„å†…å±‚å‡½æ•°çš„èµ„æºé‡Šæ”¾ï¼›\nå†è¢«å¤–å±‚çš„ catch æ‰€æ•è·\n\nåœ¨ catchå—ä¸­å¯ä»¥é€šè¿‡ throw;å†æ¬¡æŠ›å‡ºå½“å‰çš„å¼‚å¸¸\nè‡ªå®šä¹‰å¼‚å¸¸ç±»æ—¶ï¼Œé€šå¸¸åº”è¯¥ç»§æ‰¿è‡ª std::exceptionæˆ–å…¶æ´¾ç”Ÿç±»\nå¼‚å¸¸è§„èŒƒåœ¨å‡½æ•°åŸå‹ä¸­å£°æ˜å¯èƒ½è¿”å›çš„å¼‚å¸¸ç±»å‹ï¼š\nvoid print(Document&amp; p) throw(PrintOffLine, BadDocument);void goodguy() throw();// throw no exceptions, until C++11void alloc() throw(...);// can throw any exceptionvoid abc() noexcept;// throw no exceptions, since C++11\n\n\nå¦‚æœå‡½æ•°è¿”å›äº†è§„èŒƒä¹‹å¤–çš„å¼‚å¸¸ï¼Œå°†è°ƒç”¨ std::unexpected()å¤„ç†ï¼ˆé»˜è®¤è°ƒç”¨ std::terminate()ç»ˆæ­¢ç¨‹åºï¼‰\n\nnoexceptä¹Ÿå¯ä»¥ä½œä¸ºè¿ç®—ç¬¦ä½¿ç”¨ï¼Œæ£€æŸ¥è¡¨è¾¾å¼æ˜¯å¦å£°æ˜ä¸ºä¸æŠ›å‡ºå¼‚å¸¸ï¼š\nbool willNotThrow = noexcept(func());  // æ£€æŸ¥func()æ˜¯å¦å£°æ˜ä¸ºnoexcept\n\nå±‚æ¬¡ç»“æ„std::exceptionâ”œâ”€â”€ std::logic_errorâ”‚   â”œâ”€â”€ std::invalid_argumentâ”‚   â”œâ”€â”€ std::domain_errorâ”‚   â”œâ”€â”€ std::length_errorâ”‚   â”œâ”€â”€ std::out_of_rangeâ”‚   â””â”€â”€ std::future_errorâ”œâ”€â”€ std::runtime_errorâ”‚   â”œâ”€â”€ std::range_errorâ”‚   â”œâ”€â”€ std::overflow_errorâ”‚   â”œâ”€â”€ std::underflow_errorâ”‚   â””â”€â”€ std::system_errorâ”œâ”€â”€ std::bad_allocâ”œâ”€â”€ std::bad_castâ”œâ”€â”€ std::bad_typeidâ”œâ”€â”€ std::bad_exceptionâ””â”€â”€ std::bad_function_call\n\n\næ•°ç»„çš„ .atå¯ä»¥è‡ªåŠ¨æŠ›å‡ºæ•°ç»„è®¿é—®å¼‚å¸¸çš„ range_errorï¼›\nå®¹å™¨çš„ resizeæ–¹æ³•å¯ä»¥è‡ªåŠ¨æŠ›å‡ºé•¿åº¦å¼‚å¸¸ length_errorï¼›\n\næ„é€ ä¸ææ„ææ„å‡½æ•°åº”è¯¥é¿å…æŠ›å‡ºå¼‚å¸¸ï¼Œå¦åˆ™ä¼šå¯¼è‡´ç³»ç»Ÿè°ƒç”¨ std::terminate()\nç”±äºåœ¨ try-catchä¸­ï¼Œå¦‚æœå‘ç”Ÿäº†å¼‚å¸¸ï¼Œæœ¬åœ°å˜é‡å°†è‡ªåŠ¨è°ƒç”¨è‡ªå·±çš„ææ„å‡½æ•°ï¼Œæ­¤æ—¶å¦‚æœå­˜åœ¨ newç”³è¯·çš„ç©ºé—´èµ„æºï¼Œå°†å¯¼è‡´å…¶æ— æ³•æŒ‡å‘æ­£ç¡®çš„åœ°å€\nå› æ­¤ï¼Œæˆ‘ä»¬é‡‡å–ä¸¤é˜¶æ®µçš„æ„é€ ç¡®ä¿æ„é€ å‡½æ•°ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼š\n\nåœ¨æ„é€ å‡½æ•°å†…å¯¹åŸºæœ¬å˜é‡èµ‹å€¼\nåœ¨ init()å‡½æ•°ä¸­æ˜¾å¼ç”³è¯·å†…å­˜ç©ºé—´\n\nclass Widget {public:    Widget() : initialized(false) {        // åªåšæœ€å°çš„åˆå§‹åŒ–ï¼š ä¸å­˜åœ¨æŠ›å‡ºå¼‚å¸¸çš„å¯èƒ½    }      bool initialize() {        try {            // æ‰§è¡Œå¯èƒ½å¤±è´¥çš„åˆå§‹åŒ–æ“ä½œ            initialized = true;            return true;        } catch (...) {            return false;        }    }      void use() {        if (!initialized) {            throw std::runtime_error(\"å¯¹è±¡æœªåˆå§‹åŒ–\");        }        // ä½¿ç”¨å¯¹è±¡    }  private:    bool initialized;};\n\n\nçŸ¥è¯†è’¸é¦\nå°†ä¸ªäººå°è±¡æ¯”è¾ƒæµ…çš„éƒ¨åˆ†é‡æ–°æ‘˜äº†ä¸€é\n\n\nå­—ç¬¦æŒ‡é’ˆä¸å­—ç¬¦æ•°ç»„\n\nchar *sp = \"Hello World!\"; // å­—ç¬¦æŒ‡é’ˆå¯ä»¥ç§»åŠ¨ï¼Œä¸èƒ½ä¿®æ”¹char array[] = \"Hello World!\"; // å­—ç¬¦æ•°ç»„ä¸èƒ½ç§»åŠ¨ï¼Œå¯ä»¥ä¿®æ”¹array[0] = 'h' ; // åˆæ³•array = 'hello'; // éæ³•ï¼sp = 'world'; // åˆæ³•\n\n\nå®é™…ä¸Šï¼Œchar *spå°±æ˜¯ const char *spï¼Œæ‰€ä»¥ä¸èƒ½æ”¹å˜å­—ç¬¦ä¸²çš„å€¼ï¼Œä½†æ˜¯å¯ä»¥æ”¹å˜spçš„æŒ‡å‘\nè€Œå­—ç¬¦ä¸²æ•°ç»„çš„æ•°ç»„åæ˜¯æ ˆä¸­çš„å›ºå®šåœ°å€ï¼Œæ— æ³•ç§»åŠ¨ï¼Œä½†æ˜¯å¯ä»¥ä¿®æ”¹\n\n\nä¸åŒæ–‡ä»¶ä¹‹é—´çš„å…¨å±€å˜é‡, åˆå§‹åŒ–çš„å‰åé¡ºåºç”±é“¾æ¥å™¨éšæœºå†³å®š. æ­¤æ—¶éœ€è¦ç¡®ä¿å®ƒä»¬ä¹‹é—´æ²¡æœ‰åˆå§‹åŒ–çš„ä¾èµ–.\n\nè¿”å›ç±»å‹çš„å¸¸é‡\nconst int* f();// åªèƒ½å°†å‡½æ•°çš„è¿”å›å€¼èµ‹å€¼ç»™ä¸€ä¸ª const int*\n\nvptrçš„å¤§å°å¦‚æœçˆ¶ç±»å…·æœ‰ virtualä¹Ÿå°±æ˜¯è™šå‡½æ•°ï¼Œå­ç±»ç»§æ‰¿ä¹‹åä¹Ÿä¼šå¾—åˆ°ä¸€ä¸ªè™šå‡½æ•°è¡¨ï¼Œå¯¹åº”æœ‰ä¸€ä¸ªvptræŒ‡é’ˆæŒ‡å‘è‡ªå·±çš„è™šå‡½æ•°è¡¨ï¼š\n\nåœ¨64ä½çš„æœºå™¨ä¸‹ï¼Œä¸€ä¸ªvptræŒ‡é’ˆçš„å¤§å°æ˜¯8å­—èŠ‚\næ™®é€šå‡½æ•°ä¸å æ®ç±»çš„å¤§å°ï¼Œå› ä¸ºå‡½æ•°åœ°å€å­˜æ”¾åœ¨å…¨å±€ç©ºé—´\nå¦‚æœç±»å†…æ²¡æœ‰æˆå‘˜å˜é‡ï¼Œä¹Ÿæ²¡æœ‰è™šå‡½æ•°ï¼Œé‚£ä¹ˆå¤§å°å°±æ˜¯1ï¼ˆå‘Šè¯‰ç¼–è¯‘å™¨è¿™ä¸ªç±»çš„å­˜åœ¨ï¼‰\n\nç¼–è¯‘å™¨çš„å¯¹é½\nC++ ç¼–è¯‘å™¨ä¼šå¯¹ç±»è¿›è¡ŒæŒ‰æœ€å¤§å¯¹é½çš„æˆå‘˜è¿›è¡Œå¯¹é½\n\n#include &lt;iostream&gt;using namespace std;class Nothing {public:    Nothing() {}    int a;    virtual ~Nothing() {}};int main() {    Nothing obj;    cout &lt;&lt; \"Sizeof Nothing: \" &lt;&lt; sizeof(Nothing) &lt;&lt; endl;    cout &lt;&lt; \"Address of obj: \" &lt;&lt; &amp;obj &lt;&lt; endl;    cout &lt;&lt; \"Address of a: \" &lt;&lt; &amp;(obj.a) &lt;&lt; endl;}\n\nå¯¹åº”çš„è¾“å‡ºï¼š\nSizeof Nothing: 16Address of obj: 0x16d57e830Address of a: 0x16d57e838\n\næˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°ä¸¤ä¸ªç°è±¡ï¼š\n\nsize=16è¯´æ˜äº†å¯¹é½ç°è±¡ï¼›\nNothingå¯¹è±¡çš„åœ°å€é¦–å…ˆæ˜¯å…¶vptrï¼Œç„¶åæ˜¯å…¶ä»–çš„æˆå‘˜\n\næœŸæœ«é¢˜é›†\nè¡¥å¤©ä¸“ç”¨æ¥¼\n\nç¨‹åºå¡«ç©ºé¢˜ç›®æ‘˜å½•ç±»æ¨¡æ¿ï¼šArray#include &lt;iostream&gt;using namespace std;template &lt;typename T&gt;class Array {public:    Array() {        data = new T[BLK_SIZE];        next = nullptr ;     }    ~Array() {        delete [] data;        delete next;     }    T&amp; operator[](int i);    void iterate(void (*f)(T&amp;));private:    T  *data; // data of type T    static const int BLK_SIZE=32; // fixed block size    Array *next;  // the next array block};template &lt;typename T&gt;T&amp; Array&lt;T&gt;::operator[](int i) {    if (i &lt; BLK_SIZE) {        return data[i];     } else {        if (next == NULL) {            next = new Array&lt;T&gt;;         }        return (*next)[i-BLK_SIZE];    }}template &lt;typename T&gt;void Array&lt;T&gt;::iterate(void (*f)(T&amp;)) {    for (int i = 0; i &lt; BLK_SIZE; i++) {        f(data[i]);    }    if (next != NULL) {        next-&gt; iterate(f);    }}int main(){    Array&lt;int&gt; a;    int size = 100;    cin &gt;&gt; size;    for (int i = 0; i &lt; size; i++) {        a[i] = i;    }    a.iterate([](int &amp;x) { cout &lt;&lt; x &lt;&lt; endl; });}\n\nå‡½æ•°æ¨¡æ¿ï¼šå†…ç§¯æ­¤å¤„çš„ opæ“ä½œä¹‹å‰æ²¡æœ‰æ¥è§¦è¿‡ï¼Œåˆ©ç”¨çš„æ˜¯æ ‡å‡†åº“æä¾›çš„äºŒå…ƒæ“ä½œï¼š\n#include &lt;functional&gt;#include &lt;iostream&gt;#include &lt;vector&gt;template &lt;class InputIt1, class InputIt2, class T, class BinaryOp1, class BinaryOp2&gt;T inner_product(InputIt1 first1, InputIt1 last1, InputIt2 first2, T init, BinaryOp1 op1, BinaryOp2 op2){  while (first1 != last1)  {    init = op1 (init, op2(*first1, *first2) );    ++first1;\t++first2;  }  return init;} int main(){  std::vector&lt;int&gt; a{0, 1, 2, 3, 4};  std::vector&lt;int&gt; b{5, 4, 2, 3, 1};  int r1 = inner_product(a.begin(), a.end(), b.begin(), 0, std::plus&lt;&gt;(), std::multiplies&lt;&gt;());  std::cout &lt;&lt; \"Inner product of a and b: \" &lt;&lt; r1 &lt;&lt; '\\n';   int r2 = inner_product(a.begin(), a.end(), b.begin(), 0, std::plus&lt;&gt;(), std::equal_to&lt;&gt;());  std::cout &lt;&lt; \"Number of pairwise matches between a and b: \" &lt;&lt;  r2 &lt;&lt; '\\n';}\n\nç±»æ¨¡æ¿çš„å¡«å†™\néå†…è”å®šä¹‰æˆå‘˜å‡½æ•°æ—¶ï¼Œéœ€è¦åœ¨ç±»å‹ä¸å‡½æ•°åä¹‹é—´åŠ ä¸Š &lt;class-name&gt;&lt;T&gt;:: ï¼Œä¸è¦å¿˜è®°äº†å…¶ä¸­çš„ &lt;T&gt;\n\ntemplate &lt;typename T&gt;T&amp; Array&lt;T&gt;::operator[](int i) {    if (i &lt; BLK_SIZE) {        return data[i];     } else {        if (next == NULL) {            next = new Array&lt;T&gt;;         }        return (*next)[i-BLK_SIZE];    }}\n\né•¿è¯çŸ­è¯´æ³¨æ„å‡½æ•°æ¨¡æ¿çš„è¿”å›ç±»å‹ï¼š\n#include &lt;iostream&gt;using namespace std;template&lt;typename T&gt;T func(T x, double y) {    return x + y;}int main() {    cout &lt;&lt; func(2.7, 3) &lt;&lt; endl;    cout &lt;&lt; func(3, 2.7) &lt;&lt; endl;}\n\næ­¤æ—¶ç¬¬äºŒä¸ªè¾“å‡ºä» 5.7 å‘ intè½¬æ¢ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯ 5\nå¦‚æœæ˜¯æ•°ç»„ç©ºé—´çš„ç®¡ç†, æ³¨æ„ new å’Œ  delete éƒ½éœ€è¦å¯¹åº”çš„ []\nå¦‚æœæ²¡æœ‰æ˜¾å¼å®šä¹‰ä»»ä½•çš„æ„é€ å‡½æ•°ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªé»˜è®¤æ„é€ å‡½æ•°\n\nä½†æ˜¯å¦‚æœç¨‹åºå‘˜å®šä¹‰äº†ä»»ä½•çš„æ„é€ å‡½æ•°ï¼ˆæ— è®ºæ˜¯å¦å¸¦æœ‰é»˜è®¤å‚æ•°ï¼‰ï¼Œç¼–è¯‘å™¨å°±ä¸ç”¨è‡ªåŠ¨åˆ›å»ºé»˜è®¤æ„é€ å‡½æ•°\n\nupcastï¼šå°†ä¸€ä¸ªæ´¾ç”Ÿç±»çš„æŒ‡é’ˆæˆ–è€…å¼•ç”¨èµ‹å€¼ç»™åŸºç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨\n\nåŠ¨æ€ç»‘å®šï¼šå‘ç”Ÿupcastä¹‹åï¼Œé€šè¿‡åŸºç±»æŒ‡é’ˆæˆ–å¼•ç”¨è°ƒç”¨è™šå‡½æ•°æ—¶ï¼Œå®é™…è°ƒç”¨çš„æ˜¯æŒ‡é’ˆæˆ–å¼•ç”¨é”æŒ‡å‘çš„å¯¹è±¡çš„è™šå‡½æ•°çš„å®ç°ï¼›è€Œä¸æ˜¯æ ¹æ®æŒ‡é’ˆæˆ–å¼•ç”¨çš„é™æ€ç±»å‹\nå¦‚æœæ­¤æ—¶å‘ç”Ÿäº†ææ„ï¼Œå¦‚æœåŸºç±»çš„ææ„å‡½æ•°æ˜¯è™šå‡½æ•°ï¼Œå°±ä¼šå…ˆåè°ƒç”¨å­ç±»å’Œçˆ¶ç±»çš„ææ„å‡½æ•°ï¼›å¦‚æœçˆ¶ç±»çš„ææ„å‡½æ•°ä¸æ˜¯è™šå‡½æ•°ï¼Œå°±åªä¼šè°ƒç”¨çˆ¶ç±»çš„ææ„å‡½æ•°\nä¸ºäº†ç¡®ä¿å­ç±»çš„èµ„æºå¯ä»¥è¢«é‡Šæ”¾ï¼Œæ€»æ˜¯åº”å½“å°†ç±»çš„ææ„å‡½æ•°ä½œä¸ºè™šææ„å‡½æ•°\n\n\n\nææ„å‡½æ•°ä¸å…è®¸è¢«é‡è½½\n\näº‹å®ä¸Šï¼Œææ„å‡½æ•°çš„åç§°å›ºå®šï¼Œå¹¶ä¸”æ²¡æœ‰å‚æ•°ï¼Œå› æ­¤æ— æ³•é€šè¿‡å‚æ•°åˆ—è¡¨æ¥åŒºåˆ†ä¸åŒçš„éŸ©è‹ç‰ˆæœ¬ï¼Œè‡ªç„¶ä¹Ÿå°±æ— æ³•é‡è½½\n\nC++æ ‡å‡†åªè§„å®šäº†æ•´æ•°ç±»å‹çš„ç›¸å¯¹é¡ºåºï¼š\nsizeof(char) &lt;= sizeof(short) &lt;= sizeof(int) &lt;= sizeof(long) &lt;= sizeof(long long)\n\n\nä¹Ÿå°±æ˜¯è¯´, å¯èƒ½å­˜åœ¨ sizeä¸Š int = longçš„æƒ…å†µ\n\nA program is a bunch of objects telling each other how to do by sending messages\n\næ­¤å¤„çš„æ¶ˆæ¯åœ¨oopä¸­æŒ‡çš„å°±æ˜¯é€šè¿‡è°ƒç”¨å¯¹è±¡å†…éƒ¨çš„æ–¹æ³•\n\nä¸€å¥è¯è¯´ä¸æ¸…æ¥šçš„é‡è½½ä¸å‹å…ƒå‡½æ•°\nå®Œå…¨æ— æ³•é‡è½½çš„ï¼š\n. .* :: ?:sizeof typeidstatic_cast dynamic_cast const_castreinterpret_cast\nåªèƒ½ä½œä¸ºæˆå‘˜å‡½æ•°ï¼ˆæ— æ³•ä½œä¸ºå‹å…ƒå‡½æ•°ï¼‰é‡è½½çš„ï¼š\n=, (), [], -&gt;, -&gt;*\n\n\nä»¥åŠå•ç›®è¿ç®—ç¬¦\n\n\n\nçˆ¶ç±»çš„æ„é€ å‡½æ•°\n\næ„é€ å‡½æ•°ä¸æ™®é€šçš„æˆå‘˜å‡½æ•°ä¸åŒï¼š\n\nå¦‚æœçˆ¶ç±»çš„æ„é€ å‡½æ•°è¢«å£°æ˜ä¸º private çš„ï¼Œå’Œæ™®é€šçš„æˆå‘˜å‡½æ•°ä¸€æ ·â€”â€”åªèƒ½è¢«è‡ªå·±çš„æˆå‘˜å’Œå‹å…ƒå‡½æ•°å¯ä»¥è°ƒç”¨\nå¦‚æœçˆ¶ç±»çš„æ„é€ å‡½æ•°è¢«å£°æ˜ä¸º protected çš„ï¼Œé‚£ä¹ˆåªæœ‰çˆ¶ç±»çš„æˆå‘˜ã€å‹å…ƒä»¥åŠæ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°å¯ä»¥è°ƒç”¨ï¼›\nè¿™æ„å‘³ç€æ­¤æ—¶æ— æ³•ç›´æ¥åœ¨å­ç±»é™¤äº†æ„é€ å‡½æ•°ä¹‹å¤–çš„åœ°æ–¹æ¥ç›´æ¥åˆ›å»ºç‹¬ç«‹çš„çˆ¶ç±»å¯¹è±¡\n\n\n\nC++å¯¹ç¼–ç¨‹èŒƒå¼çš„æ”¯æŒ\n\n\nè¿‡ç¨‹å¼ç¼–ç¨‹çš„ç‰¹æ€§åŒ…æ‹¬ï¼šå‡½æ•°ã€å…¨å±€å˜é‡ã€é¡ºåºæ‰§è¡Œã€é€‰æ‹©ï¼ˆif/else, switchï¼‰ã€å¾ªç¯ç­‰\nCå°±æ˜¯è¿‡ç¨‹å¼ç¼–ç¨‹çš„ä¸€ç§ï¼ŒC++ç»§æ‰¿äº†Cçš„ç‰¹æ€§ï¼Œå› æ­¤å¯¹è¿‡ç¨‹å¼å˜æˆæ”¯æŒè‰¯å¥½\n\n\nå£°æ˜å¼ç¼–ç¨‹æŒ‡çš„æ˜¯â€œåšä»€ä¹ˆâ€è€Œéå¦‚ä½•åšï¼Œæ¯”å¦‚SQLã€HTMLã€Swiftç­‰ã€‚C++å’ŒCæ˜¯å‘½ä»¤å¼è¯­è¨€ï¼Œå…³æ³¨â€œå¦‚ä½•åšâ€\n\n\nå› æ­¤ç­”æ¡ˆé€‰C\n\nå¯¹è±¡åˆ‡ç‰‡C2* pC2 = new C2();cout &lt;&lt; endl;{    C1 a = *pC2; // å‘ç”Ÿäº†å¯¹è±¡åˆ‡ç‰‡ï¼Œåªä¿ç•™äº†åŸºç±»å¯¹è±¡çš„å±æ€§    cout &lt;&lt; endl;}C1* pC1 = pC2;delete pC1; // åŸºç±»çš„ææ„å‡½æ•°æ˜¯virtualçš„ï¼Œæ‰€ä»¥æ­¤å¤„å‘ç”Ÿå¤šæ€ææ„cout &lt;&lt; endl;\n\næ‹·è´åˆå§‹åŒ–ç”¨åŸºæœ¬ç±»å‹çš„å€¼æ¥éšå¼è°ƒç”¨æ„é€ å‡½æ•°ä»¥åˆ›å»ºå¯¹è±¡:\nclass ResId {public:    ResId(int Id);};ResId res = 5;// ç­‰ä»·äº// ResId res(5);// ResId res = ResId(5);\n\nè¿™ä¸ªè¿‡ç¨‹åˆ†ä¸ºä¸¤æ­¥:\n\nç”¨ 5 æ„é€ ä¸€ä¸ªä¸´æ—¶çš„ResIdå¯¹è±¡;\nç”¨è¿™ä¸ªä¸´æ—¶å¯¹è±¡åˆå§‹åŒ–res\n\nå› æ­¤æˆ‘ä»¬æ•´ä½“ä¸Šå¯ä»¥è¯´:\nAn object of class ResId will be created by 5\n\nç¦æ­¢éšå¼çš„æ‹·è´åˆå§‹åŒ–é€šè¿‡å£°æ˜ explicit æ¥ç¦æ­¢ä¸Šè¿°é€šè¿‡å€¼éšå¼è°ƒç”¨æ„é€ å‡½æ•°:\n#include &lt;iostream&gt;class C {public:    explicit C(int) {        std::cout &lt;&lt; \"i\" &lt;&lt; std::endl;    }    C(double) {        std::cout &lt;&lt; \"d\" &lt;&lt; std::endl;    }};int main() {    C c1(7); // åŒ¹é…äº†ç¬¬ä¸€ä¸ªæ„é€ å‡½æ•°    C c2 = 7; // éšå¼æ„é€ , åªèƒ½å°†7è½¬æ¢ä¸ºdouble, ç„¶åè°ƒç”¨ç¬¬äºŒä¸ªæ„é€ å‡½æ•°}\n\nè¾“å‡º:\nid\n\nå­ç±»å¯¹çˆ¶ç±»å‡½æ•°çš„é‡è½½ä¸é‡å†™å­ç±»å¦‚æœé‡è½½æˆ–è€…é‡å†™äº†çˆ¶ç±»çš„åŒåå‡½æ•°ï¼Œå°†æ— æ³•é€šè¿‡å­ç±»çš„å¯¹è±¡è®¿é—®çˆ¶ç±»ä¸­çš„è¿™äº›å‡½æ•°ï¼š\n#include &lt;iostream&gt;using namespace std;class A {public:    void F(int) { cout &lt;&lt; \"A::F(int)\" &lt;&lt; endl; }    void F(double) { cout &lt;&lt; \"A::F(double)\" &lt;&lt; endl; }    void F2(int) { cout &lt;&lt; \"A::F2(int)\" &lt;&lt; endl; }};class B : public A {public:\t  using A::F;    void F(double) { cout &lt;&lt; \"B::F(double)\" &lt;&lt; endl; }};int main() {    B b;    b.F(2.0);    b.F(2);    b.F2(2);}\n\nè¾“å‡ºï¼š\nB::F(double)B::F(double)A::F2(int)\n\nä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨å­ç±»ä¸­å£°æ˜ using A::Fæ¥é‡æ–°è·å¾—è®¿é—®æƒé™ï¼š\nclass B : public A {public:    using A::F;    void F(double) { cout &lt;&lt; \"B::F(double)\" &lt;&lt; endl; }};\n\næ­¤æ—¶çš„è¾“å‡ºä¸ºï¼š\nB::F(double)A::F(int)A::F2(int)\n\né»˜è®¤å‚æ•°çš„é™æ€ç»‘å®š\nè™šå‡½æ•°ï¼šè¿è¡Œæ—¶å¤šæ€ï¼ˆåŠ¨æ€ç»‘å®šï¼‰\né»˜è®¤å‚æ•°ï¼šç¼–è¯‘æ—¶ç¡®å®šï¼ˆé™æ€ç»‘å®šï¼‰\n\n#include &lt;iostream&gt;struct A {    virtual void foo(int a = 1) {        std::cout &lt;&lt; \"A\" &lt;&lt; '\\n' &lt;&lt; a;    }};struct B : A {    virtual void foo(int a = 2) {        std::cout &lt;&lt; \"B\" &lt;&lt; '\\n' &lt;&lt; a;    }};int main() {    A *a = new B;    a-&gt;foo();    delete a;}\n\nè¾“å‡ºï¼š\nB1\n\n\nä¸ºä»€ä¹ˆcppè¦é€‰æ‹©è®©é™æ€å‚æ•°å®ç°é™æ€ç»‘å®šï¼Ÿ\nä¸ºäº†ä¿æŒè¯­è¨€çš„ä¸€è‡´æ€§ä¸å¯é¢„æµ‹æ€§ï¼Œè®¾è®¡è€…è®©é™æ€å‚æ•°ä½œä¸ºç¼–è¯‘æ—¶æœŸè‡ªåŠ¨æ›¿æ¢çš„å€¼ï¼Œé¿å…åœ¨è¿è¡Œè¿‡ç¨‹ä¸­åŠ¨æ€æ›¿æ¢\n\nå‡½æ•°æ¨¡æ¿ä¸æ¨¡æ¿ç‰¹åŒ–æ¨¡æ¿ç‰¹åŒ–ï¼šåœ¨å‡½æ•°æ¨¡æ¿çš„åŸºç¡€ä¸Šï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›å¯¹æŸä¸ªç±»å‹å®ç°ä¸ä¸€æ ·çš„é€»è¾‘ï¼Œå°±å¯ä»¥ä½¿ç”¨ï½\ntemplate&lt;typename T&gt;void f(const T&amp; value) {    std::cout &lt;&lt; \"æ³›å‹æ¨¡æ¿: \" &lt;&lt; value &lt;&lt; std::endl;}// å¯¹intç±»å‹é‡‡å–æ¨¡æ¿ç‰¹åŒ–template&lt;&gt;void f&lt;int&gt;(const int&amp; value) {    std::cout &lt;&lt; \"ç‰¹åŒ–ç‰ˆæœ¬: int ç±»å‹\" &lt;&lt; std::endl;}\n\n\nå› æ­¤ï¼Œæ¨¡æ¿ç‰¹åŒ–å¿…é¡»é¦–å…ˆå­˜åœ¨ä¸€ä¸ªä¸»æ¨¡æ¿\n\næ¨¡æ¿ç‰¹åŒ–çš„ç»“æœæ— æ³•è¢«é‡è½½\n#include &lt;iostream&gt;template&lt;class T&gt; void f(T &amp;i) { std::cout &lt;&lt; 1; }template&lt;&gt; void f(const int &amp;i) { std::cout &lt;&lt; 2; }int main() {    int i = 24;    f(i);}\n\nå°†ä¼šè¾“å‡ºï¼š 1\n\nå¦‚æœæˆ‘ä»¬åªä¿ç•™ void f(const int &amp;i) { std::cout &lt;&lt; 2; }  å‡½æ•°ï¼Œå°†ä¼šè§¦å‘ç±»å‹è½¬æ¢ï¼Œå¯ä»¥è°ƒç”¨\nå¦‚æœæˆ‘ä»¬åªå»é™¤æ¨¡æ¿ç‰¹åŒ–ä¸­çš„ constï¼Œ å°±å¯ä»¥åŒ¹é…ï¼ˆè¾“å‡º 2ï¼‰\n\nå†æ¯”å¦‚ï¼š\ntemplate&lt;typename T&gt;void add(T, T);add(1, 2.2); // âŒ æ¨¡æ¿ä¸èƒ½æ¨å¯¼å‡ºç»Ÿä¸€çš„ Tï¼ˆint vs doubleï¼‰\n\nå¸¸é‡å¯¹è±¡\né™æ€å‡½æ•°åŒæ ·å‚ä¸å‡½æ•°é‡è½½ï¼Œä½†æ˜¯ä¼˜å…ˆåŒ¹é…éé™æ€å‡½æ•°\né™æ€å‡½æ•°ä¸å— consté™åˆ¶â€”â€”å³ä½¿æ²¡æœ‰è¢«å£°æ˜ä¸º constä¹Ÿå¯ä»¥è¢«å¸¸é‡å¯¹è±¡è°ƒç”¨\n\n#include &lt;iostream&gt;using namespace std;class A {public:    static void f(double) {        cout &lt;&lt; \"f(double)\" &lt;&lt; endl;    }    void f(int) {        cout &lt;&lt; \"f(int)\" &lt;&lt; endl;    }};int main() {    const A a;    a.f(3);}\n\nè¾“å‡ºï¼š\nf(double)\n\nå¦‚æœå­˜åœ¨å®Œå…¨åŒ¹é…çš„æ™®é€šå‡½æ•°ï¼Œå°±ä¼šç›´æ¥è°ƒç”¨éé™æ€å‡½æ•°ï¼š\nvoid f(int) const {    cout &lt;&lt; \"f(int) const\" &lt;&lt; endl;}void f(int) {    cout &lt;&lt; \"f(int)\" &lt;&lt; endl;\n\n\næ­¤å¤„çš„ void f(int) const æ— æ³•æ”¹ä¸º void f(double) const, å¦åˆ™ä¸åŒåé™æ€å‡½æ•°çš„å‚æ•°å®Œå…¨ä¸€è‡´\n\nå¼‚å¸¸çš„ catché¡ºåºcatchå—çš„åŒ¹é…æ˜¯ä»ä¸Šåˆ°ä¸‹çš„ï¼Œå› æ­¤åªè¦é‡åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…çš„ï¼Œåç»­çš„åŒ¹é…å°±ä¼šç»“æŸ\n\nå­ç±»çš„å¯¹è±¡å¯ä»¥è¢«çˆ¶ç±»æ•è·\næ³¨æ„æ­¤æ—¶çš„åŠ¨æ€ç»‘å®šâ€”â€”å¦‚æœçˆ¶ç±»å±‚çº§ï¼ˆå¼•ç”¨æˆ–è€…æŒ‡é’ˆï¼‰åœ¨å‰ï¼Œå†…éƒ¨æŠ›å‡ºçš„æ˜¯å­ç±»çš„å¼‚å¸¸å¯¹è±¡ï¼Œæ•æ‰ä¹‹åè°ƒç”¨çš„å‡½æ•°æ˜¯å­ç±»çš„å¯¹è±¡\n\n#include &lt;iostream&gt;using namespace std;class Base {public:    virtual const char* what() const {        return \"Base::what()\";    }    virtual ~Base() {}  // è™šææ„ä¿è¯å¤šæ€å®‰å…¨};class Derived : public Base {public:    const char* what() const override {        return \"Derived::what()\";    }};int main() {    try {        throw Derived();  // æŠ›å‡ºå­ç±»å¯¹è±¡    } catch (const Base&amp; e) {  // ç”¨çˆ¶ç±»å¼•ç”¨æ¥æ”¶        cout &lt;&lt; \"ç”±çˆ¶ç±»å±‚çº§æ•è·åˆ°å¼‚å¸¸: \" &lt;&lt; e.what() &lt;&lt; endl;  // åŠ¨æ€ç»‘å®šè°ƒç”¨å­ç±» what()    } catch (const Derived&amp; e) {        cout &lt;&lt; \"ç”±å­ç±»å±‚çº§æ•è·åˆ°å¼‚å¸¸: \" &lt;&lt; e.what() &lt;&lt; endl;    } catch (...) {        cout &lt;&lt; \"æ•è·åˆ°æœªçŸ¥å¼‚å¸¸\" &lt;&lt; endl;    }    return 0;}\n\nè¾“å‡ºï¼š\nç”±çˆ¶ç±»å±‚çº§æ•è·åˆ°å¼‚å¸¸: Derived::what()\n\n\nå¦‚æœå°† catchå†…éƒ¨æ”¹ä¸ºæ™®é€šçš„å¯¹è±¡ï¼Œå°†ä¼šè¾“å‡º ç”±çˆ¶ç±»å±‚çº§æ•è·åˆ°å¼‚å¸¸: Base::what()\n\nç”±æ­¤å¯è§ï¼Œæˆ‘ä»¬åº”è¯¥éµå¾ªï¼šå°†å­ç±»å¯¹è±¡çš„æ•æ‰æ”¾åœ¨å…¶çˆ¶ç±»ä¹‹å‰ï¼Œæœ€åæ˜¯ catch(...)\n","categories":["è¯¾ç¨‹ç¬”è®°"],"tags":["ç¼–ç¨‹è¯­è¨€","CSè¯¾ç¨‹","é¢å‘å¯¹è±¡ç¼–ç¨‹"]},{"title":"æ•°æ®åº“ç³»ç»Ÿå¤ä¹ ","url":"/2025/06/21/%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0/","content":"\nä»»è¯¾è€å¸ˆï¼šé»„å¿ ä¸œ\n\nçŸ¥è¯†ç‚¹æ¢³ç†DML\nselectå¾—åˆ°çš„ç»“æœé€šè¿‡ distinctå…³é”®å­—æ¥å»é‡\nunion allå¯ä»¥ä¿ç•™å¹¶é›†ä¸­çš„é‡å¤å…ƒç»„\næ³¨æ„ caseä¸ updateç»„åˆä½¿ç”¨æ—¶ï¼Œåˆ†æ®µæ›´æ–°\n\nèšåˆå‡½æ•°&amp;NULLé™¤äº† countä¹‹å¤–çš„èšåˆå‡½æ•°, ä¼šå¿½ç•¥é›†åˆå±æ€§ä¸Šæœ‰ nullçš„å…ƒç»„, è€Œ countåˆ™ä¼šè®¡ç®—åŒ…æ‹¬ç©ºå€¼åœ¨å†…çš„å…ƒç»„ä¸ªæ•°.\nSpecial case: å¦‚æœæ‰€æœ‰çš„èšåˆå±æ€§éƒ½æ˜¯ç©ºå€¼:\n\ncount: è¿”å›0;\nå…¶ä»–èšåˆå‡½æ•°: è¿”å› null.\n\nlateralå¤–å±‚çš„æŸ¥è¯¢å¯ä»¥ç›´æ¥ä½¿ç”¨å†…éƒ¨æŸ¥è¯¢çš„å…³ç³»å, ä½†æ˜¯å†…éƒ¨çš„å­æŸ¥è¯¢æ— æ³•å‘å¤–ç›´æ¥ä½¿ç”¨å…¶é‡å‘½åçš„å…³ç³»å.\nç„¶è€Œ, å¦‚æœåœ¨å­æŸ¥è¯¢çš„å‰é¢å£°æ˜å…³é”®å­— lateralåˆ™å¯ä»¥å®ç°:\nSELECT name, salary, avg_salaryFROM instructor I1,     LATERAL (SELECT avg(salary) AS avg_salary              FROM instructor I2              WHERE I2.dept_name = I1.dept_name) AS AvgDeptSalary;\n\nåµŒå¥—æŸ¥è¯¢é¡ºåºfrom ; where; group by ; having; select; distinct; order by\næ˜ å°„åŸºæ•°çº¦æŸé‡‡å– l...hçš„å½¢å¼æ¥è¡¨ç¤ºå¤æ‚çš„çº¦æŸå…³ç³»ï¼š\n\n0..* è¡¨ç¤ºæœ€å°‘å‚ä¸0æ¬¡, æœ€å¤šæ²¡æœ‰é™åˆ¶, å¯è§ ..å¯¹å¤šçš„å…³ç³», éƒ¨åˆ†å‚ä¸;\n1..1è¡¨ç¤ºæ°å¥½å‚ä¸1æ¬¡, è¡¨ç¤ºä¸€å¯¹..çš„å…³ç³», å®Œå…¨å‚ä¸\n\næ¯”å¦‚ä¸‹é¢çš„å®é™…ä¸Šæ˜¯many-to-oneçš„å…³ç³»ï¼š\n\n\nERæ¨¡å‹å’ŒèŒƒå¼ä»ERæ¨¡å‹å¾—åˆ°schemaä»ERæ¨¡å‹å¾—åˆ°schemaçš„æ ¸å¿ƒè§„åˆ™ï¼š\n\nå…³ç³»ç±»å‹ï¼š\n1:1 ï¼šåœ¨å‚ä¸å…³ç³»çš„å®ä½“ç±»å‹ä¸­ï¼Œé€‰æ‹©ä¸€ä¸ªschemaå¢åŠ ä¸€ä¸ªFKï¼ŒæŒ‡å‘å¦ä¸€ä¸ªå®ä½“å¯¹åº”çš„schemaçš„PKï¼Œä¸éœ€è¦é¢å¤–å»ºæ¨¡ï¼›\n1:N: åœ¨å¤šç«¯å¯¹åº”çš„schemaä¸­ï¼Œå¢åŠ 1ç«¯å¯¹åº”çš„PKä½œä¸ºFKã€‚æ­¤æ—¶ï¼Œå…³ç³»ä¹Ÿè•´å«åœ¨è¿™ä¸ªå¤–é”®çš„çº¦æŸå…³ç³»ä¸­ï¼Œä¸éœ€è¦é¢å¤–å»ºæ¨¡ï¼›\nM:N: æ­¤æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°†å…³ç³»å»ºæ¨¡ä¸ºä¸€ä¸ªæ–°çš„schemaâ€”â€”å°†å‚ä¸å…³ç³»çš„å®ä½“ç±»å‹çš„ä¸»é”®ä½œä¸ºå¤–é”®ï¼Œç„¶ååŠ ä¸Šå…³ç³»æœ¬èº«çš„å±æ€§ï¼Œç»„æˆä¸ºschemaçš„å±æ€§\n\n\nå¼±å®ä½“ç±»å‹ï¼šå¼ºå®ä½“çš„PK + å¼±å®ä½“è‡ªèº«çš„åˆ†è¾¨ç¬¦ = å¯¹åº”schemaçš„ä¸»é”®ï¼Œç„¶åè¡¥å……å¼±å®ä½“çš„å‰©ä½™å±æ€§\nå¤šå€¼å±æ€§ï¼šéœ€è¦ä¸ºå¤šå€¼å±æ€§æ„å»ºä¸€ä¸ªæ–°çš„schema\nå°†å¯¹åº”çš„å®ä½“çš„PKå’Œå¤šå€¼å±æ€§è‡ªèº«ä½œä¸ºschemaçš„PK\n\n\n\nå±æ€§é›†é—­åŒ…æ³¨æ„ï¼Œå±æ€§çš„é—­åŒ…åŒ…æ‹¬è‡ªèº«çš„å±æ€§é›†\nä½œç”¨ï¼š\n\nåˆ¤æ–­æ˜¯å¦ä¸ºä¸»é”®ï¼šå¦‚æœé—­åŒ…åŒ…å«äº†å…³ç³»ä¸­çš„æ‰€æœ‰å±æ€§ï¼Œé‚£ä¹ˆå°±æ˜¯ï½\néªŒè¯å‡½æ•°ä¾èµ–æ˜¯å¦æˆç«‹\nè®¡ç®—æ•´ä¸ªå…³ç³»æ¨¡å¼çš„é—­åŒ…: è®¡ç®—æ¯ä¸€ä¸ªå±æ€§çš„é—­åŒ…\n\næ­£åˆ™è¦†ç›–\nç›®æ ‡ï¼šç®€åŒ–ç»™å‡ºçš„å‡½æ•°ä¾èµ–\nå°è¯•åŒ–ç®€å±æ€§Aæ—¶ï¼Œå¦‚æœå»é™¤çš„æ˜¯ ä¸­çš„ï¼š\nå·¦ä¾§ï¼šåˆ¤æ–­å»é™¤ä¹‹åå·¦ä¾§å‰©ä½™å±æ€§çš„é—­åŒ…æ˜¯å¦åŒ…å«äº†å³ä¾§å±æ€§\nå³ä¾§ï¼šåˆ¤æ–­æ­¤æ—¶çš„å·¦ä¾§å±æ€§é—­åŒ…ä¸­æ˜¯å¦å«æœ‰å»é™¤çš„å±æ€§\n\n\næˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥ç”¨å…¬å¼æ¥è®²è§£ä¸Šè¿°çš„åˆ†æï¼š\nåˆ¤æ–­ä¸­çš„å±æ€§Aæ˜¯å¦å¤šä½™ï¼š\nè®¡ç®—æ˜¯å¦åŒ…å«äº†\n\n\nåˆ¤æ–­ä¸­çš„å±æ€§Aæ˜¯å¦å¤šä½™ï¼š\næ ¹æ®  çš„ä¾èµ–å…³ç³»ï¼Œè®¡ç®— \nå¦‚æœå¯¹åº”çš„å±æ€§é—­åŒ…åŒ…æ‹¬äº†Aï¼Œé‚£ä¹ˆå°±å¯ä»¥å»é™¤\n\n\n\n\n\n\n\nä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´æ˜å¦‚ä½•æ¨å¯¼ï¼š\n\n\nNOTICEï¼š\n\nå®é™…æƒ…å†µä¸‹ï¼Œå¯èƒ½æ¯”è¾ƒéš¾æ¨å¯¼ï¼Œéœ€è¦æ›´å¤šçš„ç»éªŒå’Œçµæ„Ÿï¼‰\nè™½ç„¶æˆ‘ä»¬è¦æ±‚å·¦ä¾§çš„å±æ€§å”¯ä¸€ï¼Œä½†æ˜¯åœ¨æ¨å¯¼çš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½å°è¯•å°†ç±»ä¼¼äº å…ˆæ‹†è§£ä¸ºä¸¤æ¡ï¼Œç„¶ååˆ¤æ–­å…¶ä¸­çš„æŸæ¡å±æ€§æ˜¯å¦å¤šä½™ï¼›æœ€åå°†å·¦ä¾§å±æ€§åˆå¹¶\n\nèŒƒå¼çš„éªŒè¯\nBCNFï¼š\nå¦‚æœFä¸­æ²¡æœ‰è¿èƒŒBCNFåŸåˆ™çš„å‡½æ•°ä¾èµ–ï¼Œé‚£ä¹ˆFçš„é—­åŒ…ä¸­ä¹Ÿæ²¡æœ‰\n\n\n3NFï¼š\næ³¨æ„ï¼Œå±æ€§Aå¯ä»¥æ¥è‡ªä¸åŒçš„CKé›†åˆ\nåªéœ€è¦å¯¹å·²æœ‰çš„FDè¿›è¡Œåˆ¤æ–­\n\n\n\nå­˜å‚¨ç»“æ„\nä¼¼ä¹ä¸æ˜¯ç»å¸¸è€ƒï¼Œäº†è§£æ¦‚å¿µ\n\næ–‡ä»¶ç»“æ„\né¢å‘åˆ—çš„å­˜å‚¨å¯ä»¥åœ¨ç°ä»£CPUä¸­å®ç°å‘é‡å¤„ç†\n\nå®šé•¿ä¸å˜é•¿çš„è®°å½•\nå¦‚æœæ˜¯å®šé•¿è®°å½•ï¼Œä¸ºäº†é¿å…åˆ é™¤è®°å½•æ—¶è°ƒæ•´ç»“æ„çš„è¾ƒå¤§æ—¶é—´æˆæœ¬ï¼Œå¯ä»¥ä¸ºç»´æŠ¤ä¸€ä¸ªç©ºè¡¨ï¼Œå°†åˆ é™¤ä¹‹åçš„ç©ºé—´é€šè¿‡é“¾è¡¨çš„æ–¹å¼è¿æ¥ï¼Œä¹‹åæ’å…¥çš„æ—¶å€™ï¼Œé¦–å…ˆæ’å…¥åˆ°ç©ºè¡¨ä¸­ï¼Œå¦‚æœæ²¡æœ‰ç©ºä½™çš„ä½ç½®ï¼Œå†æ’å…¥åˆ°æ–‡ä»¶çš„æœ«å°¾\n\nå¦‚æœè®°å½•æ˜¯å˜é•¿çš„ï¼Œåœ¨å®šé•¿å’Œå˜é•¿ä¹‹é—´å­˜åœ¨ä¸€ä¸ªç©ºä½å›¾ï¼š\n\nä½æ•° = å˜é•¿è®°å½•çš„ä¸ªæ•°\n\næŸä¸ªè®°å½•ä¸ºç©ºæ—¶ ==&gt; å¯¹åº”çš„bitä¸º 1\n\nå®šé•¿çš„ä¿¡æ¯åŒ…å«ï¼š\n\nå˜é•¿å±æ€§çš„å®šé•¿å±æ€§ä¿¡æ¯ï¼ˆå¼€å§‹çš„åç§»é‡+é•¿åº¦ï¼‰\nå®šé•¿å±æ€§çš„å€¼\n\n\n\n\n\nB+æ ‘ç›¸å…³ç´¢å¼•çš„blockå¤§å°å‡è®¾æŒ‡é’ˆå’Œsearch-keyçš„å¤§å°åˆ†åˆ«æ˜¯aï¼Œb é‚£ä¹ˆblockçš„æ‰‡å‡ºn ( fan-out rate )å°±æ˜¯ï¼š\n\n\næ³¨æ„æœ€å·¦ä¾§å­˜åœ¨ä¸€ä¸ªå•ç‹¬çš„æŒ‡é’ˆï¼Œç„¶åæ˜¯ä¸€ç³»åˆ—çš„é”®å€¼å¯¹ï¼›\næ‰‡å‡ºä¹Ÿå°±æ˜¯B+æ ‘çš„é˜¶æ•°\n\nchildrençš„å…³ç³»\n\n\næ­¤å¤„çš„ nå°±æ˜¯ä¹‹å‰è®¡ç®—å¾—åˆ°çš„æ‰‡å‡ºï¼›\nå¯¹äºå†…éƒ¨èŠ‚ç‚¹ï¼Œæœ€å°å€¼çš„ä¼°è®¡æ˜¯å­©å­è€Œéå…³é”®å­—çš„ä¸ªæ•°ï¼å…³é”®å­—keyçš„ä¸ªæ•°æ˜¯å­©å­æ•°ï¼ˆæŒ‡é’ˆï¼‰- 1\næ³¨æ„å¶å­èŠ‚ç‚¹æ ¹æ®ç´¢å¼•å€¼æŒ‡å‘å¯¹åº”ç‰©ç†åœ°å€çš„è®°å½•ï¼Œæ‰€ä»¥æ˜¯n-1ä¸ªå­©å­\nå¶å­èŠ‚ç‚¹çš„æœ€å³ä¾§çš„æŒ‡é’ˆç”¨äºä¸²è”å¶å­èŠ‚ç‚¹çš„é“¾è¡¨\n\néå¶å­èŠ‚ç‚¹ç±»ä¼¼äºå¤šçº§ã€ç¨€ç–ç´¢å¼•ã€‚\né«˜åº¦çš„ä¼°è®¡\n\n\né«˜åº¦æœ€å¤§ä¼°è®¡å¦‚ä¸Šæ‰€ç¤ºï¼›å½“å¶å­èŠ‚ç‚¹éƒ½æ»¡æ—¶ï¼Œæœ‰æœ€å°é«˜åº¦ .\n\næ“ä½œç›¸å…³åˆ é™¤ï¼š\n\n\nè®¡ç®—é«˜åº¦\n\n\næ ¹èŠ‚ç‚¹æœ€å°‘æœ‰2ä¸ªå­èŠ‚ç‚¹\n\n\nB+æ ‘çš„èŒƒå›´æŸ¥æ‰¾ï¼š\n\nå¦‚æœæ˜¯æŸ¥æ‰¾ &lt;= x, ç›´æ¥ä»ç¬¬ä¸€ä¸ªå¶å­èŠ‚ç‚¹å¼€å§‹æŒ‰ç…§é“¾è¡¨éå†ï¼›\nåä¹‹ï¼Œä»æ ¹èŠ‚ç‚¹å¼€å§‹å¯»æ‰¾ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å¶å­èŠ‚ç‚¹ï¼Œç„¶åéå†åˆ°åº•\n\n\n\nå¦‚æœB+æ ‘çš„ç´¢å¼•æ˜¯å­—ç¬¦ä¸²ç­‰å˜é•¿çš„ï¼Œå¯ä»¥é‡‡å–å‰ç¼€çš„æ–¹å¼æ¥å‹ç¼©ç´¢å¼•é¡¹çš„å¤§å°ï¼Œä»è€Œå¢å¤§æ‰‡å‡ºn\n\n\nbottom-up\nå¦‚æœè®°å½•å·²ç»å­˜åœ¨ï¼Œå¯ä»¥ä»å¶å­èŠ‚ç‚¹å¼€å§‹è‡ªåº•å‘ä¸Šæ„é€ ï¼ˆé¦–å…ˆæ’åºï¼‰\n\n\n\n\nè¿™ç§æŠ€æœ¯ä¹Ÿç”¨åœ¨äº†LSMçš„çš„æ„å»ºä¸Šâ€“å½“åº•å±‚çš„Læ»¡äº†çš„æ—¶å€™ï¼Œå°†å…¶èåˆå¹¶è‡ªåº•å‘ä¸Šæ„å»º\n\n\nå¦‚æœè¦æ‰¹é‡æ’å…¥ï¼Œä¹Ÿå¯ä»¥å…ˆæ’åºç„¶åä¸€èµ·æ’å…¥ï¼Œå¯ä»¥æœ‰æ•ˆå‡å°‘è®¿é—®çš„blockæ•°é‡\n\nTODOï¼šåˆ†ææˆæœ¬çš„ä¼°è®¡\n\n\nå…¶ä»–ç»“æ„LSM\nå°†å¯¹æ•°æ®çš„ä¿®æ”¹å¢é‡ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè¾¾åˆ°ä¸€å®šçš„é™åˆ¶åæ‰¹é‡å†™å…¥ç£ç›˜ï¼Œæå‡äº†å†™æ€§èƒ½ï¼›\nä½†æ˜¯å› æ­¤é™ä½äº†ä¸€å®šçš„è¯»æ€§èƒ½\n\nBuffer Treeä¸ºèŠ‚ç‚¹å¢åŠ å†…éƒ¨çš„ç¼“å†²åŒº:\n\n\n\næ’å…¥: å¦‚æœç¼“å†²åŒºæœ‰ç©ºé—², ä¼˜å…ˆæ’å…¥ç¼“å†²åŒºä¸­;\nå¦‚æœå‘ç”Ÿäº†èŠ‚ç‚¹çš„åˆ†è£‚, æ³¨æ„åŒæ—¶ç®¡ç†ç¼“å†²åŒºçš„è½¬ç§»;\nç¼“å†²åŒºå†…éƒ¨ä¹Ÿæ˜¯æœ‰åºçš„.\n\n\næŸ¥è¯¢: éœ€è¦åœ¨ç¼“å†²åŒºä¸­è¿›ä¸€æ­¥æŸ¥æ‰¾\n\nBitmapå°†Recordæ ‡å·, ç„¶åä¸ºæ¯ä¸ªå±æ€§éƒ½å»ºç«‹ä¸€ä¸ª bitmap, 0è¡¨ç¤ºå¯¹åº”çš„ä½ç½®ä¸æ˜¯å½“å‰çš„å±æ€§, 1 è¡¨ç¤ºç¬¦åˆå½“å‰å±æ€§.\n\nbitmapä½¿å¾—ä¸¤ä¸ªå±æ€§é€šè¿‡ and æ“ä½œå°±æ‰¾åˆ°å¯¹åº”çš„record.\n\n\n\nIndex\né¡ºåºç´¢å¼•åˆ†ä¸ºäº†ç¨ å¯†å’Œç¨€ç–ä¸¤ç±»ï¼Œåè€…åªèƒ½ç”¨äºé¡ºåºæ–‡ä»¶ï¼Œå› ä¸ºåªæœ‰éƒ¨åˆ†çš„search-keyå­˜åœ¨ç´¢å¼•\nå¦‚æœæœç´¢é”®æ²¡æœ‰é‡å¤çš„ï¼Œé‚£ä¹ˆç¨ å¯†çš„é¡ºåºç´¢å¼•å°±åŒ…å«äº†æ‰€æœ‰çš„æœç´¢é”®çš„indexï¼›å¦åˆ™å¯¹äºæ¯ä¸€ä¸ªæœç´¢é”®ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªå¼€å§‹çš„indexï¼Œç„¶åå¯ä»¥çº¿æ€§æœç´¢å¾—åˆ°\n\n\n\n\n\nè¾…åŠ©ç´¢å¼•\ni.e. secondary keyï¼Œ ä¸primary-keyï¼ˆé¡ºåºï¼‰æœ‰æ‰€åŒºåˆ«\n\nå½“æ•°æ®æ–‡ä»¶ä¸­çš„è®°å½•é¡ºåºå’Œç´¢å¼•æ–‡ä»¶ä¸­çš„ç´¢å¼•é¡¹çš„é¡ºåºä¸ä¸€è‡´æ—¶ï¼š\n\n\n\nå¯ä»¥çœ‹åˆ°ï¼Œè¾…åŠ©ç´¢å¼•é¦–å…ˆæŒ‡å‘äº†ä¸€ä¸ªbucketï¼Œbucketä¸­å­˜åœ¨äºŒçº§ç´¢å¼•\n\næ•£åˆ—ç´¢å¼•é€‰æ‹©ç´¢å¼•ï¼Œåˆ©ç”¨å“ˆå¸Œå‡½æ•°è®¡ç®—Kåˆ°Bçš„æ˜ å°„ï¼Œå“ˆå¸Œå€¼ç›¸åŒçš„ç´¢å¼•é¡¹æ”¾åœ¨äº†ä¸€ä¸ªbucketä¸­\n\noverflow chainingï¼šå¦‚æœæŸä¸ªbucketå†…éƒ¨çš„é¡¹å¤ªå¤šäº†ï¼Œç³»ç»Ÿå°†åˆ†é…ä¸€ä¸ªï½ï¼Œç”¨äºå­˜å‚¨é¢å¤–çš„ç´¢å¼•é¡¹ï¼ˆbucketæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªé“¾è¡¨ï¼‰\n\nä¸ºäº†å‡å°‘ä¸Šè¿°æ¡¶æº¢å‡ºå‘ç”Ÿçš„æ¦‚ç‡ï¼Œæˆ‘ä»¬å¯ä»¥å¦‚æ­¤è®¾ç½®æ¡¶çš„æ•°é‡ï¼š\n\n\nå…¶ä¸­ï¼Œåˆ†å­å’Œåˆ†æ¯åˆ†åˆ«è¡¨ç¤ºè®°å½•æ€»æ•°å’Œæ¯ä¸ªæ¡¶çš„è®°å½•æ•°é‡ï¼›dç§°ä¸ºfudge factorï¼Œé€šå¸¸è®¾ç½®ä¸º0.2\n\n\n\nQuery Processing\næ•´ä½“æ€æƒ³: å…ˆé€‰æ‹©ã€å†æŠ•å½±ã€æœ€åè¿æ¥å’Œè¾“å‡º\n\næˆæœ¬ä¼°è®¡ï¼š\n\n\nJoin-coståµŒå¥—å¾ªç¯\n\n\njoinæ–¹å¼\nå—ä¼ è¾“æ¬¡æ•°\nå¯»é“æ¬¡æ•°\nå¤‡æ³¨\n\n\n\nNested-Loop\n\n\n\n\n\nBlock Nested-Loop\n\n\nsçš„blocké¡ºåºå­˜å‚¨ï¼Œå¯¹äºæ¯ä¸ªå¯»é“sçš„blockèµ·ç‚¹ï¼Œç„¶åé¡ºåºè¯»å–\n\n\nIndex Nested-Loop\nTODO\n\næ¡ä»¶ï¼šinneråœ¨è¿æ¥å±æ€§ä¸Šå…·æœ‰index\n\n\n\nåœ¨æœ€å¥½çš„æƒ…å†µä¸‹ï¼ŒåµŒå¥—å’Œå—åµŒå¥—çš„å¾ªç¯ï¼Œå†…å­˜å¯ä»¥è£…ä¸‹ä¸¤ä¸ªå…³ç³»ï¼Œå› æ­¤å—ä¼ è¾“æ¬¡æ•°ä¸ºblockçš„ä¸ªæ•°ï¼Œå¯»é“æ¬¡æ•°å‡ä¸º2\n\nç”±äºä¸Šè¿°çš„è®¡ç®—æ˜¯åŸºäºæ¯æ¬¡éƒ½è¯»å–å¤–å±‚å…³ç³»1ä¸ªblockï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ”¹è¿›ä¸Šè¿°çš„æ–¹æ³•ï¼Œè®©å…¶æ¯æ¬¡è¯»å–M-2ä¸ªblockï¼Œç•™ä¸‹2ä¸ªblockåˆ†åˆ«ç”¨äºè¯»å–sçš„blockå’Œè¾“å‡ºæ‰€ç”¨çš„ç©ºé—´\n\nå…¶ä¸­  ä¸ºå†…å­˜å¤§å°çš„blockå—æ•°ï¼›æ¯æ¬¡è¯»å–rä¸­ä¸€è¿ä¸²çš„blockä¹‹åï¼Œè¯»å–sçš„blockï¼Œå¹¶å°†sçš„recordé€ä¸ªä¸å‰è€…çš„è®°å½•æ¯”è¾ƒ\n\næ­¤æ—¶ï¼Œå—åµŒå¥—çš„å—ä¼ è¾“æ¬¡æ•°å’Œå¯»é“æ¬¡æ•°åˆ†åˆ«ä¸ºï¼š\nä¸\nmerge join\nè¦æ±‚å…³ç³»æŒ‰ç…§è¿æ¥å±æ€§æœ‰åºæ’åˆ—ï¼Œå¦åˆ™ä¼˜å…ˆsort\n\n\nHash join\nåˆ©ç”¨å“ˆå¸Œå‡½æ•°ï¼Œå°†è¿æ¥å±æ€§å…·æœ‰ç›¸åŒå“ˆå¸Œå€¼çš„å…ƒç»„æ”¾åœ¨ä¸€ä¸ªé›†åˆ/åˆ’åˆ†\nå¯¹ä¸¤ä¸ªå…³ç³»åˆ†åˆ«è®¡ç®—å“ˆå¸Œå€¼å¹¶åˆ’åˆ†åï¼Œæˆ‘ä»¬åªéœ€è¦è€ƒè™‘å¯¹åº”åˆ’åˆ†å¯¹,\nä¹‹åï¼Œæˆ‘ä»¬åœ¨ä¸Šè¿°çš„æ¯ä¸ªåˆ’åˆ†å¯¹ï¼Œä½¿ç”¨ç´¢å¼•åµŒå¥—å¾ªç¯è¿æ¥ï¼š\nä¸ºinnerå…³ç³»buildä¸€ä¸ªå“ˆå¸Œç´¢å¼•ï¼Œä»outerå…³ç³»ä¸­probeæŸ¥æ‰¾å¯¹åº”çš„å…ƒç»„\nåˆ†åˆ«ç§°rï¼Œsä¸ºæ¢æµ‹è¾“å…¥å’Œæ„å»ºè¾“å…¥\næ„å»ºå“ˆå¸Œç´¢å¼•çš„å“ˆå¸Œå‡½æ•°å¿…é¡»å’Œç¬¬ä¸€æ­¥çš„å“ˆå¸Œå‡½æ•°ä¸åŒ\n\n\nå¦‚æœæ„å»ºå…³ç³»åŒ…å«ä¸ªå—ï¼Œæ¯ä¸ªåˆ’åˆ†çš„å¤§å°ä¸è¶…è¿‡ï¼Œåˆ™åˆ’åˆ†çš„æ•°é‡è‡³å°‘ä¸º\n\nå®é™…è¿›è¡Œåˆ’åˆ†ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å°†è¾ƒå°çš„å…³ç³»ä½œä¸º build æ‰€ç”¨çš„å…³ç³»;\nå“ˆå¸Œå‡½æ•°çš„å€¼åŸŸå†³å®šäº†åˆ†åŒºnçš„å¤§å°, ä¸ºäº†ä½¿å¾—siå‡èƒ½å­˜æ”¾åœ¨memä¸­,è¦æ±‚ :\n\n\nå…¶ä¸­çš„  è¢«ç§°ä¸ºä¿®æ­£ç³»æ•°, ä¸€èˆ¬è®¾ç½®ä¸º 1. 2\n\né€’å½’åˆ’åˆ†\nRecursive partitioning  required if number of partitions n is greater than number of pages M of memory.\n\nä¸éœ€è¦é€’å½’åˆ’åˆ†çš„æ¡ä»¶:\nè¿‘ä¼¼äº\næˆæœ¬åˆ†æ\n\n\nä¸ºè¾“å…¥å’Œè¾“å‡ºåˆ†é…ç¼“å†²å—ä¸ªæ•°çš„æç¤ºï¼š\ntwo buffer pages are available for each partition during the hash partitioning phase.\næ­¤æ—¶çš„ = 2\n\nå¤–æ’åºcoståˆ†æ:\n\nå—ä¼ è¾“\n\n\n\n\nseek\n\n\n\nç‰©åŒ–ä¸æµæ°´çº¿\nç‰©åŒ–ï¼šæŒ‰ç…§é¡ºåºå¯¹è¡¨è¾¾å¼æ±‚å€¼ï¼Œå°†ä¸­é—´çš„è®¡ç®—ç»“æœç‰©åŒ–ä¸ºä¸´æ—¶å…³ç³»ï¼Œå¹¶ä¸”éœ€è¦å°†ä¸´æ—¶å…³ç³»è¡¨å†™å…¥disk\n\n\n\n\næµæ°´çº¿ï¼šåŒæ—¶å¯¹å¤šä¸ªè¡¨è¾¾æ—¶æ±‚å€¼ï¼Œå°†è¡¨è¾¾å¼çš„è¿ç®—ç»“æœç«‹å³ä¼ å…¥éœ€è¦çš„è¡¨è¾¾å¼ï¼Œæ— éœ€å°†ä¸­é—´ç»“æœå†™å…¥disk\nç”Ÿäº§é©±åŠ¨å‹æµæ°´çº¿.\nä»ä¸‹å¾€ä¸Šä¸»åŠ¨ç”Ÿæˆå…ƒç»„.\n\n\néœ€æ±‚é©±åŠ¨å‹æµæ°´çº¿.\nä»æœ€ä¸Šå±‚çš„è¾“å‡º, é€’å½’è°ƒç”¨ä¸‹å±‚çš„å‡½æ•° next(), ç›´åˆ°æœ€åº•å±‚ä¸º close()\nå‘æµæ°´çº¿é¡¶ç«¯çš„æ“ä½œè¯·æ±‚å…ƒç»„\n\n\n\n\n\nQuery Optimizationä¸»è¦å‚è€ƒpptçš„ä¹ é¢˜\nå¹¶å‘æ§åˆ¶\nå¯ä¸²è¡ŒåŒ–è°ƒåº¦\nå‰é©±å›¾ï¼ˆä¼˜å…ˆå›¾ï¼‰\næ³¨æ„ç»˜åˆ¶éœ€è¦æ ¹æ®ç»™å‡ºçš„scheduleï¼Œä»ä¸Šå¾€ä¸‹çœ‹æ˜¯å¦å­˜åœ¨å†²çª\nå°†äº‹åŠ¡ä½œä¸ºèŠ‚ç‚¹, å­˜åœ¨å†²çªçš„äº‹åŠ¡ä¹‹é—´å»ºç«‹è¾¹,  è¡¨ç¤ºå†²çªä¹‹ä¸­ï¼Œå‰è€…çš„æ“ä½œå…ˆå‘ç”Ÿï¼Œåè€…çš„æ“ä½œåå‘ç”Ÿï¼›\n\n\nrecoverable schedule å¯æ¢å¤è°ƒåº¦\nä¾èµ–äºT1å†™å…¥çš„æ•°æ®çš„T2ï¼Œéœ€è¦åœ¨å‰è€…commitä¹‹åï¼Œåè€…æ‰èƒ½commit\n\n\nCascadeless Schedules æ— çº§è”è°ƒåº¦\næ¯ä¸€å¯¹å­˜åœ¨å†²çªçš„äº‹åŠ¡, å‰è€…äº‹åŠ¡çš„æäº¤å…ˆäºåè€…æ•°æ®å¯¹çš„è¯»å–\næ— çº§è”è°ƒåº¦éƒ½æ˜¯å¯æ¢å¤çš„.\n\n\nç­‰å¾…å›¾\nè¾¹  è¡¨ç¤ºäº‹åŠ¡iæ­£åœ¨ç­‰å¾…åè€…é‡Šæ”¾æœ‰å…³æ•°æ®çš„é”ï¼› å½“åè€…é‡Šæ”¾è¿™ä¸ªé”æ—¶ï¼Œå°†è¿™æ¡è¾¹åˆ é™¤\nå½“ä¸”ä»…å½“ç­‰å¾…å›¾ä¸­å­˜åœ¨ç¯æ—¶ï¼Œç³»ç»Ÿä¸­å°±å‡ºç°äº†æ­»é”\n\n\n\nä¸¤é˜¶æ®µé”åè®®\næ— æ³•ä¿è¯è§£å†³æ­»é”çš„é—®é¢˜\nä½†æ˜¯æŒ‰ç…§æ’åºå…³ç³»æ¥è·å¾—é”å¯ä»¥é¿å…äº§ç”Ÿæ­»é”\nTwo phase locking can not avoid deadlock.To acquire locks in partial order of the data can avoid deadlock.\n\n\nstrict two-phase locking\næ¯ä¸ªäº‹åŠ¡ä¿æŒexclusiveé”ç›´åˆ°ç»“æŸï¼›\nå¯ä»¥è§£å†³çº§è”å›æ»šå’Œä¸å¯æ¢å¤çš„é—®é¢˜\n\n\næ ¹æ®ï½å¾—åˆ°çš„è°ƒåº¦ä¸€å®šæ˜¯å†²çªå¯åºåˆ—åŒ–çš„ï¼Œè¿™æ„å‘³ç€å¦‚æœå‰é©±å›¾å­˜åœ¨ç¯ï¼Œä¸€å®šä¸æ˜¯ç”±ï½å¾—åˆ°çš„è°ƒåº¦\næŒ‰ç…§æ‰€æœ‰äº‹åŠ¡çš„lock point ï¼ˆå½“å‰äº‹åŠ¡å¾—åˆ°æœ€åä¸€ä¸ªlockçš„æ—¶é—´ç‚¹ï¼‰æ’åºï¼Œå³å¯å¾—åˆ°ä¸²è¡ŒåŒ–é¡ºåº\n\n\n\né¿å…æ­»é”å‘ç”Ÿå†²çªçš„é”è¯·æ±‚ä¹‹é—´ï¼š\n\nwait-dieï¼š å¦‚æœåè€…çš„æ—¶é—´æˆ³æ›´å°ï¼Œi.e. æ›´æ—©å¼€å§‹ begin, é‚£ä¹ˆåè€…å¯ä»¥ç­‰å¾…ï¼Œå¦åˆ™å›æ»šåè€…çš„æ“ä½œï¼›\nwound-wait:åä¹‹ï¼Œåè€… beginå¼€å§‹å¾—è¾ƒæ™šæ—¶ï¼Œå¯ä»¥ç­‰å¾…ï¼Œå¦åˆ™å›æ»š &lt;u&gt;å‰è€… &lt;/u&gt;ï¼ˆå‰è€…è¢«åè€…å‡»ä¼¤ï¼‰\n\n\n\né”™è¯¯æ¢å¤æ™®é€šæ¢å¤ç®€å•æµç¨‹\nredoï¼š\næ­£å‘éå†ï¼Œé‡åšï¼›\nå¦‚æœç¢°åˆ°äº†æ–°çš„äº‹åŠ¡å°±å°†å…¶åŠ å…¥undo-list\nå¦‚æœç¢°åˆ°äº†äº‹åŠ¡çš„commit/abortï¼Œå°±å°†å…¶ä»undo-listä¸­ç§»é™¤\n\n\nundoï¼š\nä»æœ«å°¾å¼€å§‹é€†å‘éå†\nundoçš„æ—¶å€™äº§ç”Ÿundoæ—¥å¿—ï¼ˆæ³¨æ„åŒºåˆ†é€»è¾‘æ“ä½œï¼‰\nç¢°åˆ°äº†undo-listä¸­çš„äº‹åŠ¡æ‰undoï¼Œå¹¶ä¸”ç¢°åˆ°äº†å¯¹åº”çš„startå†™å…¥å¯¹åº”çš„abortæ—¥å¿—\næ‰€æœ‰çš„undoäº‹åŠ¡éƒ½å†™å…¥äº†abortåç»“æŸ\n\n\n\ncheckpoint\næ™®é€šçš„checkpointï¼šåœ¨å†™å…¥checkpointçš„logä¹‹å‰ï¼Œæ­¤å‰çš„æ´»è·ƒäº‹åŠ¡åœæ­¢æ›´æ–°ï¼Œç›´åˆ°å°†bufferé‡Œçš„ä¿®æ”¹å…¨éƒ¨flushåˆ°diskï¼Œæ‰å†™å…¥checkpointçš„logè¡¨ç¤ºæ›´æ–°å®Œæ¯•ï¼Œç„¶åç»§ç»­æ‰§è¡Œ\nè¿™æ ·å¯ä»¥ç¡®ä¿ï¼Œåœ¨checkpointä¹‹å‰commitçš„äº‹åŠ¡ï¼Œå…¶æ›´æ–°ä¸€å®šååº”åˆ°äº†diskå½“ä¸­ï¼›\n\n\nfuzzy-checkpointï¼š\nä¸ºäº†é¿å…ä¸Šè¿°çš„é˜»å¡è€Œè®¾è®¡ï¼Œå…è®¸å†™å…¥checkpointçš„logä¹‹åï¼Œå¯ä»¥ç»§ç»­æ‰§è¡Œæ—¥å¿—ï¼ŒåŒæ—¶å°†å…ˆå‰çš„ä¿®æ”¹å†™åˆ°disk\nä½†æ˜¯è¿™æ ·ä¼´éšäº†ä¸€ä¸ªé—®é¢˜ï¼Œå¯èƒ½æœ‰çš„ä¿®æ”¹æ­£åœ¨å†™å…¥å°±å‘ç”Ÿäº†crashï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæœºåˆ¶ç¡®ä¿å¤„ç†è¿™ç§æƒ…å†µï¼›\n\n\nlast-checkpointï¼šå°†æœ€åä¸€ä¸ªå®Œæˆçš„æ£€æŸ¥ç‚¹è®°å½•åœ¨æ—¥å¿—ä¸­çš„ä½ç½®å­˜å‚¨åœ¨ç¡¬ç›˜ä¸Šçš„ä¸€ä¸ªå›ºå®šä½ç½®ï¼Œå³æœ€åæ£€æŸ¥ç‚¹ã€‚ç³»ç»Ÿåœ¨å†™å…¥æ£€æŸ¥ç‚¹è®°å½•æ—¶ä¸ä¼šæ›´æ–°æ­¤ä¿¡æ¯ã€‚ç›¸åï¼Œåœ¨å†™å…¥æ£€æŸ¥ç‚¹è®°å½•ä¹‹å‰ï¼Œå®ƒåˆ›å»ºä¸€ä¸ªåŒ…å«æ‰€æœ‰å·²ä¿®æ”¹ç¼“å­˜å—çš„åˆ—è¡¨ã€‚åªæœ‰å½“åˆ—è¡¨ä¸­çš„æ‰€æœ‰ç¼“å†²åŒºå—éƒ½å·²è¾“å‡ºåˆ°ç£ç›˜åï¼Œæ‰ä¼šæ›´æ–°æœ€åæ£€æŸ¥ç‚¹ä¿¡æ¯ã€‚\n\nundoäº§ç”Ÿçš„æ—¥å¿—åœ¨é€»è¾‘æ“ä½œä¸­ï¼Œå¦‚æœé€»è¾‘æ“ä½œå·²ç»å®Œæˆå’Œé€»è¾‘æ“ä½œæœªå®Œæˆï¼Œé¢ä¸´å›æ»šæ—¶çš„æ—¥å¿—ç±»å‹ä¸åŒï¼š\n\n\n\nä¸ºä»€ä¹ˆéœ€è¦operation-abortçš„ä¿¡å·ï¼Ÿ\nè®©operation-abortçš„ä¿¡å·åœ¨undoé˜¶æ®µè¢«å‘ç°æ—¶ï¼Œç›´æ¥è·³åˆ°å¯¹åº”çš„beginï¼Œé¿å…å·²ç»åœ¨redoæœŸé—´æ‰§è¡Œçš„æ“ä½œè¢«å†æ¬¡æ‰§è¡Œ\n\nAriesæ¢å¤\nä½¿ç”¨LSNæ ‡æ³¨æ—¥å¿—\nä½¿ç”¨dirty page tableé¿å…ä¸å¿…è¦çš„redo\nRecLSNï¼šç¬¬ä¸€æ¬¡å˜æˆè„é¡µå¯¹åº”çš„LSN\n\næµç¨‹\nç›¸æ¯”ä¹‹å‰çš„æ¢å¤ç®—æ³•ï¼Œå¤šäº†ç¬¬ä¸€æ­¥çš„åˆ†æé˜¶æ®µï¼š\nåˆ†ædirty tableï¼Œå–RecLSNçš„æœ€å°å€¼ä½œä¸ºRedoçš„èµ·ç‚¹ï¼ˆå¦‚æœä¸å­˜åœ¨å°±å–checkpointçš„LSNï¼‰\nåˆ†æé˜¶æ®µæœ¬èº«æ˜¯ä»æ£€æŸ¥ç‚¹å¼€å§‹æ­£å‘éå†çš„\nåˆ†æé˜¶æ®µåŒæ ·éœ€è¦æ›´æ–°dirty tableå’Œæ´»è·ƒäº‹åŠ¡è¡¨\nåˆ†æçš„æ—¶å€™ï¼Œåªä¼šåˆ†ælogï¼Œä½†æ˜¯ä¸ä¼šè¯»å–æ•°æ®æ–‡ä»¶pageï¼Œä¹Ÿå°±æ˜¯ä¸ä¼šè¯»å–page\n\n\nredoçš„é˜¶æ®µä¸æ™®é€šæ¢å¤æ•´ä½“ç›¸åŒï¼š\nå‘ç°æ›´æ–°è®°å½•çš„æ—¶å€™ï¼Œå¦‚æœä¸åœ¨è„é¡µè¡¨ä¸­çš„pageä¹‹åˆ—ï¼Œor  æ›´æ–°è®°å½•çš„LSNå°äºé¡µé¢çš„RecLSNï¼Œå°±å¿½ç•¥ï¼›\nå¦åˆ™ï¼Œæˆ‘ä»¬éœ€è¦è¯»å–pageï¼Œç„¶åå†æ¯”è¾ƒpageLSNä¸log LSNï¼›\nå¦‚æœlog LSN å¤§äº é¡µé¢çš„pageLSNå°±redo\n\n\n\n\nundoé˜¶æ®µ\nä¸ºäº†æ’¤é”€undo-listä¸­çš„äº‹åŠ¡ï¼Œåˆ©ç”¨åˆ†æé˜¶æ®µå¾—åˆ°çš„lastLSN(é€‰æ‹©æœ€å¤§å€¼ä½œä¸ºèµ·ç‚¹)ï¼Œå¼€å§‹åå‘éå†é‡åš\né‡åšçš„æ—¶å€™ä¹Ÿä¼šç”Ÿæˆä»…é‡åšæ—¥å¿—çš„CLRï¼Œä½†æ˜¯ä¸åŒä¹‹å¤„åœ¨äºï¼š\nARIESç®—æ³•çš„CLRè¿˜ä¼šåœ¨å­—æ®µUndoNextLSNä¸­è®°å½•è¯¥äº‹åŠ¡å½“å‰LSNçš„prevLSN\nè¿™æ˜¯ä¸ºäº†åº”å¯¹undoè¿‡ç¨‹ä¸­crashæƒ…æ™¯ï¼šå¯ä»¥åˆ©ç”¨CLRçŸ¥é“ä¸‹ä¸€æ¡undoçš„LSNåï¼Œç»§ç»­undo\n\n\nå®é™…ä¸Šåšé¢˜çš„æ—¶å€™ï¼Œå¾€å¾€ä¸ä¼šå‘ˆç°ä¸Šè¿°çš„ xxLSN,è€Œæ˜¯ç±»ä¼¼äºæ™®é€šæ¢å¤çš„ä»…é‡åšæ—¥å¿—ï¼Œç±»ä¼¼äºï¼š&lt;T4, 102.1, 62&gt;&lt;T4, abort&gt;\nç¬¦åˆä¸‹åˆ—æ¡ä»¶çš„è®°å½•å¯ä»¥è·³è¿‡ï¼š\nTODO\n\n\n\n\n\nç®€å•çš„ä¾‹å­æ¼”ç¤ºäº†xxLSNçš„ä½œç”¨ï¼š\n\n\n\nTODOï¼šæ•™æä¸­å£°æ˜äº†è„é¡µè¡¨å‚¨å­˜äº†pageLSNï¼Œå¦‚æœDirtyPageTableå·²ç»åŒ…å«äº†pageLSNï¼Œä¸ºä»€ä¹ˆè¿˜è¦ä»diskä¸­è¯»å–pageå†æ¯”è¾ƒpageLSNå’Œå½“å‰log LSNï¼Ÿ\nå› æ­¤åœ¨redoé˜¶æ®µï¼Œéœ€è¦é¦–å…ˆæ¯”è¾ƒå½“å‰LSNä¸RecLSNï¼Œå¦‚æœå¯èƒ½éœ€è¦ä¿®æ”¹ï¼Œå°±è¯»å–å¯¹åº”pageï¼Œç„¶åæ¯”è¾ƒå…¶pageLSNä¸å½“å‰LSNçš„å¤§å°\n\nè¯¾æœ¬çš„ä¾‹å­æ¼”ç¤ºäº†ç®—æ³•çš„å…·ä½“æµç¨‹ï¼š\n\n\nCLRä¸éœ€è¦å†™abort\nåœ¨äº‹åŠ¡commitçš„æ—¶å€™ï¼Œä¸ä¸€å®šéœ€è¦å°†æ•°æ®éƒ½flushåˆ°å†…å­˜ä¸­\n\näº‹åŠ¡æ€»æ˜¯å¯ä»¥å†™log\nflushçš„æ—¶å€™ï¼Œå…ˆå°†æ—¥å¿—flushåˆ°å†…å­˜ä¸­ï¼Œç„¶åå°†æ•°æ®flushåˆ°å†…å­˜ä¸­\n\nundoäº§ç”Ÿæ—¥å¿—çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯ä¸€æ¡ä¸€æ¡äº§ç”Ÿä»…é‡åšæ—¥å¿—çš„ï¼Œä¸ä¼šä»æœ«ç«¯æ²¿ç€prevLSNç›´æ¥å›æº¯åˆ°æœ€å¼€å§‹ï¼‰æ¯”å¦‚ï¼š\n&lt;T3, 8002.1, 66&gt;&lt;T3, 8002.1, 55&gt;&lt;T3, abort&gt;\n\nä¹ é¢˜SQLç»ƒä¹ \nä½¿ç”¨èšåˆå‡½æ•°æ—¶ä¸ä¸€å®šéœ€è¦ group byï¼›\næ³¨æ„ç¬¦å·ï¼šä¸ç­‰äº &lt;&gt;\n\nç»ƒä¹ 1\n\nä¸»è¦å…³æ³¨ç¬¬å››é¢˜ï¼š\nselect title from movieexceptselect title from moviewhere exists(select *\tfrom comment A, comment B\twhere A.title = movie.title and A.user_name = B.user_name\tand B.titel = 'the avenger'\tand A.grade &lt;= B.grade)\n\n\n\né¢˜ç›®çš„æ„æ€æ˜¯ï¼šæ‰¾å‡ºç»™xxæ‰“åˆ†çš„éƒ½æ¯”ç»™ the avengeræ‰“åˆ†é«˜çš„xxï¼ˆç”µå½±titleï¼‰\nè€ƒè™‘ä½¿ç”¨ exceptï¼Œæ¶‰åŠåˆ°å•è¡¨ä¹‹é—´çš„æ¯”è¾ƒï¼Œå› æ­¤å°†2ä¸ªcommentä½œç¬›å¡å°”ç§¯\nåˆ©ç”¨titleç¡®ä¿ä¸å¤–è¡¨ç›¸è¿æ¥ï¼›åˆ©ç”¨user_nameç¡®ä¿2ä¸ªå†…è¡¨è®¨è®ºçš„æ˜¯åŒä¸€ä¸ªç”¨æˆ·çš„æ‰“åˆ†\n\n\nç»ƒä¹ 2é¢˜ç›®ï¼š\n\n\nç¬¬ä¸€é—®ï¼šå°†ç»™å‡ºçš„SQLæŸ¥è¯¢è½¬æ¢ä¸ºä¸åŒ…å«åµŒå¥—å­æŸ¥è¯¢çš„ç‰ˆæœ¬\nSELECT DISTINCT C.cno, C.name -- ä½¿ç”¨ DISTINCT æ˜¯ä¸ºäº†é¿å…åŒä¸€å¼  CS å¡å› æœ‰å¤šç¬”äº¤æ˜“ç¬¦åˆæ¡ä»¶è€Œè¢«å¤šæ¬¡åˆ—å‡ºFROM card AS CJOIN detail AS D1 ON C.cno = D1.cno -- å°† card ä¸å…¶æ¶ˆè´¹è®°å½• D1 è¿æ¥JOIN detail AS D2 ON D1.cdate = D2.cdate AND D1.pno = D2.pno -- å°† D1 çš„æ¶ˆè´¹è®°å½•ä¸ D2 çš„æ¶ˆè´¹è®°å½•è¿æ¥ï¼Œæ¡ä»¶æ˜¯æ—¶é—´å’Œåœ°ç‚¹ç›¸åŒWHERE C.depart = 'CS' -- è¿‡æ»¤ CS éƒ¨é—¨çš„å¡  AND D2.cno = 'c0002'; -- è¿‡æ»¤ D2ï¼Œä½¿å…¶åªåŒ…å«å¡ 'c0002' çš„æ¶ˆè´¹è®°å½•\n\nç¬¬äºŒé—®ï¼šè½¬æ¢ä¸ºä»£æ•°è¡¨è¾¾å¼ï¼š\n\n\nç¬¬ä¸‰é—®ï¼šç¼–å†™SQLè¯­å¥ï¼Œæ‰¾å‡º2018å¹´ä»…åœ¨ä¸€ä¸ªæ ¡å›­ä¸­ä½¿ç”¨çš„å¡ç‰‡\nselect cnofrom detail natural join poswhere year(detail.cdate) = 2018group by cnohaving count(distinct campus) = 1;\n\n\næ³¨æ„ detailä¸­å°±æœ‰cnoçš„ä¿¡æ¯ï¼Œå› æ­¤ä¸éœ€è¦å’Œcardè¡¨join\n\nç¬¬å››é—®ï¼šå†™ä¸€ä¸ªSQLè¯­å¥ï¼Œæ‰¾å‡º2018å¹´â€œç´«é‡‘æ¸¯â€æ ¡å›­ä¸­å…·æœ‰æœ€å¤§å¡æ¶ˆè´¹æ€»é‡çš„posã€‚\n\nä½¿ç”¨ havingå­å¥çš„ç‰ˆæœ¬\nselect pnofrom detail natural join poswhere pos.campus=â€™ç´«é‡‘æ¸¯â€™ and yearï¼ˆdetail.cdateï¼‰=2018group by pnohaving sum(amount) &gt;= all ( -- æ³¨æ„è¿™é‡Œçš„æ¯”è¾ƒ    select sum(amount)    from detail natural join pos    where pos.campus='ç´«é‡‘æ¸¯' and year(detail.cdate) = 2018    group by pno)\nä¹Ÿå¯ä»¥æ­é… orderå’Œ limit 1ç›´æ¥ç­›é€‰ï¼š\nselect pnofrom detail natural join poswhere pos.campus=â€™ç´«é‡‘æ¸¯â€™ and yearï¼ˆdetail.cdateï¼‰=2018group by pnoorder by sum(amount) desc -- æ³¨æ„è¿™é‡Œæ˜¯ sum(amount)limit 1\n\n\nè¿™ç§æ“ä½œå¸¦æ¥çš„å·®å¼‚æ˜¯ï¼Œå¦‚æœå­˜åœ¨å¤šä¸ªç›¸åŒçš„æœ€å¤§å€¼ï¼Œè¿˜æ˜¯åªä¼šé€‰æ‹©ä¸€ä¸ªï¼Œæ‰€ä»¥æ¯”èµ·ä½¿ç”¨åµŒå¥—å­æŸ¥è¯¢è¿˜æ˜¯æœ‰åŠ£åŠ¿\n\n\n\nç¬¬äº”é—®ï¼šç¼–å†™ä¸€ç³»åˆ—SQLè¯­å¥æ¥å®Œæˆä»¥ä¸‹äº‹åŠ¡ï¼šå¡ç‰‡â€œc0002â€åœ¨posâ€œp001â€å¤„æ¶ˆè´¹20ï¼Œæ—¶é—´ä¸º2018-07-02 08:08:08\nupdate card set balance = balance - 20where cno = 'c0002';insert into detail(cno,pno,cdate,ctime,amount)\tvalues('c0002','p001','2018-07-02','08:08:08',20);commit;\n\n\næ³¨æ„éœ€è¦åŒæ­¥æ›´æ–°cardï¼›\néœ€è¦commit\n\nèŒƒå¼ç›¸å…³æ— æŸåˆ†è§£\nè¯¾æœ¬çš„å®šä¹‰ï¼š\n\n\n\n\nå…·ä½“çš„éªŒè¯ï¼Œå¯ä»¥é‡‡å–è®¡ç®—å±æ€§é—­åŒ…çš„æ–¹å¼æ¥æ¨å¯¼\n\n\nä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š\n\n\n\n\nå¦‚æœåˆ†è§£çš„ç»“æœä¸æ˜¯ä¸¤ä¸ªï¼Œè€Œæ˜¯å¤šä¸ªå…³ç³»ï¼Œå¹¶ä¸”ç»™å‡ºäº†åˆ†è§£çš„è¿‡ç¨‹ï¼ˆå¯èƒ½æ˜¯è‡ªå·±æ¨çš„ï¼‰ï¼Œé‚£ä¹ˆå¯ä»¥æ¯æ¬¡å¯¹ä¸­é—´ç»“æœåˆ¤æ–­ä¸€ä¸‹æ˜¯å¦æ»¡è¶³æ— æŸåˆ†è§£ï¼Œå¦‚æœéƒ½æ»¡è¶³å°±è®¤ä¸ºæ•´ä½“æ˜¯æ— æŸåˆ†è§£çš„ï¼›\n\ndependency-preservingå›é¡¾è¯¾æœ¬çš„å®šä¹‰ï¼š\n\nthe set  of all functional dependencies in  that include only attributes of Ri\nä¹Ÿå³æ˜¯å°†Rè¿›è¡Œåˆ†è§£ä¸ºRiä¹‹å, Fiæ˜¯Fçš„é—­åŒ…ä¸­å­˜åœ¨äºRiç›¸å…³å±æ€§çš„éƒ¨åˆ†.\nå› æ­¤, Fiä¸ä¸€å®šæ˜¯Fçš„éƒ¨åˆ†.\n\næˆ‘ä»¬å®šä¹‰ ä¸Šè¿°çš„  çš„å¹¶é›†ä¸º Fâ€™, å¦‚æœæ»¡è¶³:\n\nä¹Ÿå°±æ˜¯, å¦‚æœFâ€™çš„é—­åŒ…ç­‰äºFçš„é—­åŒ…, åˆ™ç§°ä¸Šè¿°çš„Rçš„åˆ†è§£ä¸º dependency-preserving decomposition\n\nç”±æ­¤å¯è§ï¼Œæˆ‘ä»¬åˆ¤æ–­ä¸€ä¸ªåˆ†è§£æ˜¯å¦ä¸ºä¾èµ–ä¿ç•™çš„åˆ†è§£æ—¶ï¼Œåªéœ€è¦è®¡ç®—å¯¹åº”çš„å¹¶é›†çš„é—­åŒ…ï¼Œç„¶ååˆ¤æ–­æ˜¯å¦ä¸åŸæœ¬çš„Fçš„é—­åŒ…ç›¸ç­‰å³å¯ã€‚\n\nä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼šåˆ¤æ–­ä¸Šè¿°çš„åˆ†è§£æ˜¯å¦ä¸ºï½\n\n\n\n\nä¸Šè¿°çš„F1è¿˜åŒ…å«äº† BC -&gt; A ï¼ˆæ ¹æ®Fæ¡ä»¶ä¸‹çš„å±æ€§é—­åŒ…è®¡ç®—å¾—åˆ°ï¼‰\n\nBCNFåˆ†è§£æ ¹æ®æ— æŸåˆ†è§£çš„å®šä¹‰ï¼Œæ»¡è¶³BCNFèŒƒå¼çš„åˆ†è§£å°±æ»¡è¶³äº†æ— æŸåˆ†è§£çš„è¦æ±‚ã€‚ï¼ˆä½†æ˜¯ä¸ä¸€å®šæ»¡è¶³ä¾èµ–ä¿ç•™ï¼‰\n\nä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼šå°†ä¸Šè¿°çš„ä¾‹å­è½¬æ¢ä¸ºæ— æŸåˆ†è§£çš„BCNFåˆ†è§£\n\n\n\næ³¨æ„ï¼Œåˆ¤æ–­æ˜¯å¦æ»¡è¶³BCNFçš„æ—¶å€™ ,   ä¹Ÿæ¥è‡ªäº ä¸­ï¼Œå‚è€ƒä¸‹é¢çš„å…·ä½“è¯´æ˜ï¼š\n\n\næ»¡è¶³3NFçš„åˆ†è§£3NFåœ¨BCNFçš„åŸºç¡€ä¸Šå¤šäº†ä¸€æ¡ï¼Œä¹Ÿå°±æ˜¯å³ä¾§çš„å±æ€§æ˜¯å€™é€‰é”®çš„éƒ¨åˆ†ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå€ŸåŠ©FDæ¥æ¨å¯¼å€™é€‰é”®æœ‰å“ªäº›ã€‚\næ ‡å‡†çš„åˆ†ææµç¨‹ï¼š\n\nè®¡ç®—Fçš„ä¸€ä¸ªæœ€å°è¦†ç›– F_minã€‚æ»¡è¶³ä¸‰ä¸ªæ¡ä»¶ï¼š\n\nF_min ä¸ F æ˜¯ç­‰ä»·çš„ï¼ˆå³å®ƒä»¬é€»è¾‘è•´å«ç›¸åŒçš„ FD é›†åˆï¼‰ã€‚\nF_min ä¸­æ²¡æœ‰ä»»ä½•å†—ä½™çš„ FDï¼ˆç§»é™¤ä»»ä½•ä¸€æ¡ FD éƒ½ä¼šæ”¹å˜ F_min çš„é—­åŒ…ï¼‰ã€‚\nF_min ä¸­æ¯ä¸ª FD X -&gt; Y çš„å³è¾¹ Y æ˜¯å•å±æ€§çš„ï¼Œä¸”æ²¡æœ‰ä»»ä½•å†—ä½™çš„å±æ€§\n\n\næ ¹æ® F_min æ„å»ºå…³ç³»æ¨¡å¼ï¼š\n\nå¯¹äº F_min ä¸­çš„æ¯ä¸€ä¸ª FD X -&gt; Yï¼Œåˆ›å»ºä¸€ä¸ªå…³ç³»æ¨¡å¼ Riï¼Œå…¶å±æ€§é›†ä¸º X âˆª {Y}ã€‚\n\n\næ£€æŸ¥æ˜¯å¦åŒ…å«åŸå§‹å…³ç³»æ¨¡å¼çš„å€™é€‰ç ã€‚æ£€æŸ¥æ˜¯å¦å­˜åœ¨æŸä¸ª Ri çš„å±æ€§åŒ…å«äº†å€™é€‰é”®\n\nå¦‚æœå­˜åœ¨è¿™æ ·çš„ Riï¼Œåˆ™æ­¥éª¤ 2 ç”Ÿæˆçš„å…³ç³»æ¨¡å¼é›†åˆ {R1, R2, â€¦, Rm} å°±æ˜¯æœ€ç»ˆçš„åˆ†è§£ç»“æœã€‚\nå¦‚æœä¸å­˜åœ¨è¿™æ ·çš„ Riï¼Œåˆ™éœ€è¦é¢å¤–åˆ›å»ºä¸€ä¸ªå…³ç³»æ¨¡å¼ R_{m+1}ï¼Œå…¶å±æ€§é›†å°±æ˜¯ Kã€‚å°†è¿™ä¸ª R_{m+1} åŠ å…¥åˆ°åˆ†è§£ç»“æœä¸­ã€‚\n\n\n\nä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼šå°†ä¸Šè¿°çš„åˆ†è§£è½¬æ¢ä¸ºæ»¡è¶³3NFã€æ— æŸå’Œä¾èµ–ä¿ç•™çš„åˆ†è§£\n\n\n\næ­¤å¤„çš„é¢˜ç›®ç»™å‡ºçš„Få·²ç»æ˜¯æœ€å°è¦†ç›–çš„Fcï¼Œå› æ­¤å¯ä»¥ç›´æ¥ç”¨äºåˆ†è§£\n\nERæ¨¡å‹ç»ƒä¹ æ ¹æ®æè¿°ç»˜åˆ¶ERå›¾\né¢˜å¹²å°†ä¼šç»™å‡ºä¸»è¦çš„å®ä½“é›†ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®æè¿°æ¨å¯¼è•´å«çš„å…³ç³»\nåŒæ—¶éœ€è¦æ³¨æ„å…¶ä¸­çš„æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚å¤šå€¼å’Œå¤åˆç­‰çš„æ ¼å¼\n\nä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š\n\n\nç¬¬ä¸€é—®ï¼šç»˜åˆ¶å¯¹åº”çš„ERå›¾\n\n\n\næ­¤å¤„çš„å¤šå€¼å±æ€§ï¼ˆç”µè¯ï¼‰ç”± {}åŒ…è£¹ã€‚\n\nç”±ERå›¾å¾—åˆ°schema\n\nå¯¹åº”çš„schemaï¼š\n\n\n\næ³¨æ„ï¼šæ­¤å¤„çš„å…³ç³»ä¸­ï¼Œ1å¯¹Nçš„belongæ²¡æœ‰æ–°å»ºschema\nä¿®æ­£ï¼š playerä¸­çš„å±æ€§åº”è¯¥å¢åŠ  team_nameä½œä¸ºteamçš„å¤–é”®\n\nB+æ ‘ç»ƒä¹ è®¡ç®—B+æ ‘çš„é«˜åº¦\né€šè¿‡è®¡ç®—ä¸åŒé«˜åº¦çš„æœ€å€¼ï¼Œæ¥å¾—å‡ºæœ€ç»ˆçš„é«˜åº¦ï¼š\n\n\n\næ­¤å¤„è®¡ç®—blockå¹¶æ²¡æœ‰ä½œç”¨ï¼Œå®é™…ä¸Šæ˜¯æ¯”è¾ƒç´¢å¼•é¡¹ \n\nå…³é”®æ˜¯è®°ä½ï¼š\n\nå¶å­èŠ‚ç‚¹çš„keyèŒƒå›´æ˜¯  ~ \nå†…éƒ¨èŠ‚ç‚¹çš„ï½æ˜¯  ~  ï¼Œ å¹¶ä¸”æ ¹èŠ‚ç‚¹çš„æœ€å°å€¼æ˜¯2\n\n\n\næˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡æ‰‡å‡ºnä»¥åŠç´¢å¼•é¡¹æ¥ç›´æ¥åˆ©ç”¨å¯¹æ•°è®¡ç®—è¿›è¡Œä¼°è®¡\n\n\nå…³é”®æ˜¯ç†è§£å·¦å³ä¸¤ä¾§çš„å«ä¹‰ï¼š\n\nè®¡ç®—æœ€å°é«˜åº¦æ—¶ï¼Œæˆ‘ä»¬è‡ªåº•å‘ä¸Šåœ°æ„å»ºå…¨æ»¡çš„B+æ ‘ï¼Œå…ˆå°†kä¸ªvalueæŒ‰ç…§n-1çš„è§„æ¨¡æ‰“åŒ…ï¼Œç„¶åæ¯å±‚nä¸ªï¼Œå› æ­¤æ˜¯\n\n\n\nå…¶ä¸­å·¦ä¾§æ˜¯è¿­ä»£çš„æ¬¡æ•°ï¼Œå› æ­¤éœ€è¦+1è¡¥å……åº•å±‚çš„å±‚æ•°ï¼›\n\n\nè®¡ç®—æœ€å¤§é«˜åº¦æ—¶ï¼Œæˆ‘ä»¬è‡ªé¡¶å‘ä¸‹åœ°æ„å»ºåŠæ»¡çš„B+æ ‘ï¼Œå¹¶ä¸”åœ¨ä¸€å¼€å§‹å°†æ ¹èŠ‚ç‚¹ç‰¹æ®Šå¤„ç†â€”â€”åªåˆ†é…ä¸¤ä¸ªchildï¼Œæ‰€ä»¥æˆ‘ä»¬ä»ç¬¬äºŒå±‚å¼€å§‹è®¡ç®—ï¼Œéœ€è¦è¿­ä»£çš„æ¬¡æ•°ä¸º ï¼ˆï¼‰, åŒç†éœ€è¦+1å¾—åˆ°ä»ç¬¬äºŒå±‚åˆ°å¶å­å±‚çš„é«˜åº¦æ•°ï¼Œæœ€å+1åŠ å…¥æ ¹èŠ‚ç‚¹çš„é«˜åº¦ï¼š\n\n\n\n\nå¯¹äºä¸Šè¿°çš„æ¨å¯¼ï¼Œæˆ‘ä»¬å¯ä»¥ç»“åˆç¬¬ä¸€ç§æ–¹æ³•æ¥ç»™å‡ºç¬¬äºŒä¸ªè¯æ˜ï¼š\n\nå–å·¦ä¾§è®¡ç®—å¾—åˆ°ï¼š\n\n\nä¸ºäº†æ»¡è¶³ä¸ç­‰å¼çš„æ¡ä»¶ï¼Œåº”å½“å‘ä¸‹å–æ•´\n\nå–å³ä¾§è®¡ç®—å¾—åˆ°ï¼š\n\n\nç›´æ¥åˆ©ç”¨ç»™å®šçš„é«˜åº¦hè®¡ç®—sizeï¼š\nmax:\n\nmin:\n\nç„¶ååˆ©ç”¨é¢˜ç›®ç»™å‡ºçš„ç´¢å¼•é¡¹ä¸ªæ•°å»ºç«‹ä¸ç­‰å¼\n\nå®é™…ä¸Šï¼Œæˆ‘ä»¬åœ¨ä¼°ç®—çš„æ—¶å€™å¯ä»¥å¿½ç•¥å¸¸æ•°çš„å½±å“ï¼Œæ¯”å¦‚ï¼š\n\næ ¹æ®ç´¢å¼•é¡¹ä¼°è®¡èŠ‚ç‚¹æ•°é‡å…³é”®ï¼šåˆ©ç”¨æ‰‡å‡ºnä¼°è®¡æœ€åä¸€å±‚çš„èŠ‚ç‚¹æ•°é‡ï¼Œç„¶åå€’æ¨\n\nä¼°è®¡æœ€å°‘å€¼æ—¶ï¼Œç”±è®¡ç®—å¾—åˆ°å¶å­èŠ‚ç‚¹çš„æ•°é‡Nï¼Œç„¶åé€æ­¥å€’æ¨ ,ç›´åˆ°åŠ æ•°ä¸º1åˆ°è¾¾æ ¹èŠ‚ç‚¹ï¼ˆè¿‡ç¨‹ä¸­çš„è®¡ç®—ç»“æœå‘ä¸Šå–æ•´ï¼Œå› ä¸ºå°æ•°éƒ¨åˆ†çš„èŠ‚ç‚¹æ•°æ— æ³•å†çº³å…¥å…¶ä»–èŠ‚ç‚¹ï¼‰\nä¼°è®¡æœ€å¤§å€¼æ—¶ï¼Œå°†ä¸Šè¿°çš„é™¤æ•°éƒ½æ¢æˆå¯¹åº”çš„æœ€å°å€¼  ä¸ ï¼Œä½†æ˜¯æ³¨æ„å°†æ¯æ¬¡çš„è®¡ç®—ç»“æœå‘ä¸‹å–æ•´ï¼å› ä¸ºå°æ•°éƒ¨åˆ†çš„èŠ‚ç‚¹æ•°è¡¨ç¤ºæ— æ³•æ»¡è¶³æœ€å°‘ä¸ªæ•°çš„è¦æ±‚ï¼Œæ— æ³•ç‹¬ç«‹æ„æˆèŠ‚ç‚¹\n\n\n\n\næ³¨æ„å–æ•´æ–¹å‘çš„å·®å¼‚ï¼šä¼°è®¡æœ€å°‘å‘ä¸Šå–æ•´ï¼›ä¼°è®¡æœ€å¤§å‘ä¸‹å–æ•´\nä¸Šé¢çš„ä¾‹é¢˜ä¸­ï¼Œmaxä¼°è®¡çš„63åº”ä¸º62\n\nè®¡ç®—å—ä¼ è¾“çš„æ¬¡æ•°é¢˜ç›®å¯èƒ½ç»™å‡ºä¸€ä¸ªç°æœ‰çš„B+æ ‘ç»“æ„ä»¥åŠä¸€ç³»åˆ—çš„è®¿é—®æ“ä½œï¼Œç»“åˆä¸€å®šçš„replacerç­–ç•¥ï¼Œè®©æˆ‘ä»¬è®¡ç®—å—ä¼ è¾“çš„æ¬¡æ•°ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼š\n\nå¦‚æœé¢˜ç›®æ˜ç¡®è¯´äº†æ˜¯ blocks transferred to buffer  é‚£ä¹ˆæˆ‘ä»¬å°±ä¸éœ€è¦è€ƒè™‘å°†blockå†™å›åˆ°diskçš„æ¬¡æ•°\n\nä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š\n\n\n\næ³¨æ„æ­¤å¤„å†…éƒ¨èŠ‚ç‚¹çš„æŒ‡é’ˆæ•°å’Œkeyæ•°é‡\n\nåˆ é™¤æ“ä½œä¸€èˆ¬æ¥è¯´ï¼Œåˆ†è£‚æ—¶é»˜è®¤å·¦ä¾§çš„èŠ‚ç‚¹å…ƒç´ ä¸å°‘äºå³ä¾§èŠ‚ç‚¹åŒ…å«çš„å…ƒç´ ä¸ªæ•°ï¼Œå¯èƒ½é¢˜ç›®ä¼šå…·ä½“è¯´æ˜å³ä¾§ä¸å°‘äºå·¦ä¾§ã€‚\n\n\n\né‡ç»„ åˆå¹¶ å‘ç°éœ€è¦åˆ†è£‚\n\nLSMçš„æˆæœ¬ä¼°è®¡é—®é¢˜ï¼š\n\n\nï¼ˆ3ï¼‰å¯¹åº”çš„B+æ ‘ï¼š\n\n\nansï¼š\n\n\n\nTODOï¼šï¼ˆ2ï¼‰æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ\n\n\né¢˜ç›®è¯´maximize size  = 13ï¼Œ æ ¹æ® 1 + 3 + 9 = 13ï¼Œ æ¨çŸ¥æœ€å¤šæœ‰3å±‚é«˜\n\næŸ¥æ‰¾æŸä¸ªindexï¼Œå¯èƒ½çš„èŒƒå›´åˆ†åˆ«æ˜¯ä¸»å­˜ä»¥åŠdiskä¸­çš„ä¸¤æ£µæ ‘ï¼Œåˆ†åˆ«è®¡ç®—å¯¹åº”çš„æˆæœ¬ï¼Œç„¶ååŠ æƒæ±‚å’Œï¼š\n\næ ¹æ®ä¸Šä¸€æ­¥è®¡ç®—å¾—åˆ°çš„B+æ ‘çš„é«˜åº¦ï¼Œå¦‚æœåœ¨ä¸»å­˜ä¸­ï¼Œå—ä¼ è¾“å’Œå¯»é“çš„æˆæœ¬éƒ½æ˜¯0ï¼›å¦‚æœåœ¨ç¬¬ä¸€æ£µæ ‘å°±æ˜¯3+3ï¼Œ åœ¨ç¬¬äºŒæ£µæ ‘å°±æ˜¯å‰é¢æˆæœ¬çš„ä¸¤å€\nå› æ­¤æ•´ä½“æ˜¯ (0 + 3 + 6) / 3 = 3ï¼ˆå—ä¼ è¾“å’Œseekï¼‰\n\n\nä¸ºä»€ä¹ˆä¸éœ€è¦è®¡ç®—ä»å¶å­èŠ‚ç‚¹åˆ°diskçš„é¢å¤–å¯»é“å’Œå—ä¼ è¾“ï¼Ÿ\n\nå› ä¸ºé¢˜ç›®å£°æ˜äº†ï¼šlook up an index entry â€¦.\nè¿™æ„å‘³ç€ï¼Œæˆ‘ä»¬åªéœ€è¦æ£€æŸ¥æŸä¸ªindexæ˜¯å¦åœ¨å¶å­èŠ‚ç‚¹ä¸­åŒ…å«ï¼Œæ‰€ä»¥åªéœ€è¦æŸ¥æ‰¾åˆ°å¶å­èŠ‚ç‚¹å±‚ï¼Œä¸éœ€è¦æ ¹æ®å¶å­èŠ‚ç‚¹ä¸­çš„æŒ‡é’ˆè®¿é—®diskä¸­çš„æ•°æ®é¡µ\n\n\n\næŸ¥è¯¢å¤„ç†ç»ƒä¹ joinçš„æˆæœ¬ä¼°è®¡\nè¿™é‡Œä»€ä¹ˆéƒ½æ²¡æœ‰å“¦ï½\n\næŸ¥è¯¢ä¼˜åŒ–ç»ƒä¹ å¦‚æœé¢˜ç›®åªæ˜¯ç»™å‡ºäº†ä¸¤ä¸ªå…³ç³»ï¼Œè®©æˆ‘ä»¬è®¡ç®—å¯¹åº”çš„joinæˆæœ¬ï¼Œæˆ‘ä»¬åº”è¯¥å…ˆè®¡ç®—å…³ç³»å„è‡ªçš„blockæ•°é‡ï¼Œç„¶åé€‰æ‹©å—è¾ƒå°‘çš„ä½œä¸ºå¤–å±‚å…³ç³»\n\nè¿™æ˜¯å› ä¸ºæ­¤æ—¶å¯¹åº”çš„å—ä¼ è¾“æ¬¡æ•°å’Œå¯»é“æ¬¡æ•°åˆ†åˆ«ä¸ºï¼šä¸\n\nå¦‚æœç»™å‡ºäº†ç¼“å­˜åŒºçš„bufferå¤§å°ï¼Œåº”è¯¥è€ƒè™‘ä½¿ç”¨ä¸Šè¿°çš„è®¡ç®—æ–¹æ³•ï¼Œå¦åˆ™è®¤ä¸ºM = 3å¸¦å…¥å…¬å¼\nä¹ é¢˜1\n\n\nå…·ä½“è§£ç­”å‚è€ƒï¼š\n\n\n\nwhereä¸­åŒ…å«äº†joinçš„æ¡ä»¶, å› æ­¤æ­¤å¤„çš„joinå±æ€§å®é™…ä¸Šæ˜¯ pno å’Œ cdate, è®¡ç®—å¯¹åº”çš„V.\n\nå®é™…ä¸Šæ˜¯ä¸€ç»„å¤åˆçš„å±æ€§, postæœ‰100ä¸ª, cdateæœ‰365ä¸ªå¯èƒ½çš„å–å€¼. å› æ­¤ä¼°è®¡å¯¹åº”çš„å€¼åŸŸç©ºé—´æ˜¯100*365.\n/4å¯¹åº”äº†whereä¸­æœ€åä¸€ä¸ªæ—¶é—´çš„çº¦æŸ, æ˜¯æ•´ä½“çš„1/4.\n\n\n1ä¸ªblockçš„å°ºå¯¸æ˜¯4096bytes, é™¤ä»¥æ¯æ¡è®°å½•çš„å°ºå¯¸, å¾—åˆ°æ¯ä¸ªblockå¯¹åº”çš„è®°å½•æ•°é‡. ç„¶åæ®æ­¤è®¡ç®—tableå¯¹åº”çš„blockæ•°é‡.\n\ncnoçš„bytesæ˜¯5, æ ¹æ®é¢˜æ„==&gt; pointerçš„å¤§å°æ˜¯4bytes, é‚£ä¹ˆæ¯ä¸€å¯¹é”®å€¼å¯¹æ˜¯5+4=9bytes.\n\nè®¡ç®— fan-out-rate n = 455ï¼Œç„¶åæ ¹æ®å…¬å¼ç®—å‡ºé«˜åº¦ä¸º2ï¼ˆæ³¨æ„æ˜¯å»ºç«‹åœ¨cnoçš„ç´¢å¼•ï¼Œä¸åŒçš„cnoæœ‰10000 = Kä¸ªï¼Œæ®æ­¤è®¡ç®—ï¼ï¼‰\n\næ ¹æ®detailçš„è®°å½•æ•°é‡, ä¼°ç®—æ¯ä¸ªcardå¯¹åº”çš„è®°å½•æ•°é‡. ç„¶åæ ¹æ®detailçš„blockçš„å®¹é‡, è®¡ç®—æ¯ä¸ªcardå¯¹åº”çš„è®°å½•çš„blockæ•°é‡.\n\næ ¹æ® V(name,card) = 5000 æˆ‘ä»¬å¯ä»¥çŸ¥é“, å› ä¸ºcardä¸­ä¸€å…±æœ‰10kæ¡è®°å½•, æ‰€ä»¥æ¯ä¸ªåå­—å¹³å‡å¯¹åº”2ä¸ªcard.\nå‚è€ƒ\n\n\n\n\nä¹ é¢˜2\n\nï¼ˆ2ï¼‰ï¼š\n\n\n\nä¼˜åŒ–çš„åˆ†é…æ˜¯ï¼š1å—ç»™è¾“å‡ºï¼Œ1å—ç»™å†…å…³ç³»ï¼Œå‰©ä¸‹éƒ½åˆ†é…ç»™å¤–å…³ç³»\n\nï¼ˆ3ï¼‰ï¼šTODO\n\n\n\nSOLUTIONï¼š\nK = 5000ï¼Œ n = 60ï¼Œè®¡ç®—å¾—åˆ°é«˜åº¦ä¸º 3ï¼ˆç­”æ¡ˆä¸­maxçš„ä¼°è®¡å…¬å¼æœ‰é—®é¢˜ï¼Œå¹¶ä¸”åº”è¯¥æ˜¯å‘ä¸‹å–æ•´ï¼‰\næ³¨æ„æ­¤å¤„é¢˜ç›®è¯´äº†ä¸ºrootå‡†å¤‡äº†ä¸€ä¸ªbufferï¼Œåœ¨æ¯æ¬¡çš„éå†ä¸­åŸæœ¬çš„h+1 = 4çš„æˆæœ¬ å‡å»1æ¬¡ï¼Œåªéœ€è¦åœ¨ä¸€å¼€å§‹å­˜å…¥ï¼ˆæœ€å+1ï¼‰\nå…¬å¼  ä¸­çš„éœ€è¦é™¤ä»¥500ï¼Œå› ä¸ºç¡®å®šäº†directorï¼ˆä¸€å…±æœ‰500ä½ä¸åŒçš„ï½ï¼‰ï¼Œæˆ–è€…æˆ‘ä»¬å¯ä»¥ä»æˆæœ¬ä¼°è®¡çš„è§’åº¦è§£é‡Šï¼š\n\n\nå½’å¹¶æ’åºç»ƒä¹ \n\n\næ­¤å¤„çš„bufferå®¹é‡æ˜¯é’ˆå¯¹äºrunçš„, ä¹Ÿå°±æ˜¯outputå­˜åœ¨2ä¸ªblock; å¯ä»¥è®¡ç®—å¾—åˆ° (10-2) /2  = 4 ,æ¯æ¬¡å°†4ä¸ªrunå½’å¹¶\n\nSOLUTION: å¦‚ä½•è®¡ç®—seek?\nåˆ†æ:\n\næ­¤å¤„ä¸ºæ¯ä¸ªinput row æä¾›äº†  2 buffer blockæ„å‘³ç€æˆ‘ä»¬æ¯æ¬¡seekä¹‹åå¯ä»¥ç›´æ¥è¯»å–2ä¸ªblcokè€Œé1ä¸ª(ä¼˜åŒ–), ä»è€Œå‡å°‘äº†seekçš„æ¬¡æ•°;\nåˆ©ç”¨æ¯æ¬¡å½’å¹¶4ä¸ªruns, å¾—åˆ°æ€»å…±çš„passæ•°é‡\næ³¨æ„é¢˜ç›®è¯´æœ€ç»ˆéœ€è¦å†™å›åˆ°disk\n\nè§£ç­”: (ljmåŒå­¦çš„çè´µæ‰‹ç¨¿)\n\n\n\nå¯ä»¥ç›´æ¥è¿ç”¨å…¬å¼ï¼Œ æ­¤å¤„çš„ = 2,  = 10,   = 160:\n\nå…¶ä¸­åŠ çº¢çš„ï¼Œè¡¨ç¤ºéœ€è¦å†™å›diskçš„é¢å¤–æˆæœ¬ï¼Œå¦‚æœé¢˜ç›®æ²¡æœ‰æ˜ç¡®å£°æ˜ï¼Œå°±ä¸éœ€è¦åŠ å…¥è®¡ç®—\n\nå¹¶å‘æ§åˆ¶ç»ƒä¹ ç»˜åˆ¶å‰é©±å›¾å¯ä»¥æ ¹æ®æ•°æ®é¡¹åˆ†ç»„ï¼Œä»å½“å‰å‘ä¸‹æŸ¥çœ‹ï¼š\nä¹ é¢˜å’Œè§£ç­”ï¼š\n\n\n\nåˆ¤æ–­æ˜¯å¦ä¸ºæ— çº§è”å›æ»šçš„è°ƒåº¦ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦ä¿è¯è¯»å–åœ¨æäº¤ä¹‹åå³å¯ï¼Œæ¯”å¦‚ï¼š\nT1           | T2           | T3-------------|--------------|-------------Read(A)      |              |Read(B)      |              |Write(B)     |              |Commit       |              |             | Read(B)      |             | Read(A)      |             | Write(A)     |             | Commit       |                          | Read(A)\n\nä¸¤é˜¶æ®µé”åè®®æ— æ³•è§£å†³æ­»é”çš„é—®é¢˜\n\nç­‰å¾…å›¾ä¸æ­»é”\n\n\næ³¨æ„é¢˜ç›®è¯´äº†ï¼Œæ­¤æ—¶è¿˜æ²¡æœ‰äº‹åŠ¡é‡Šæ”¾é”ï¼›T3æ²¡æœ‰æŒ‡å‘T1çš„è¾¹ï¼Œå› ä¸ºæ­¤æ—¶T1æ²¡æœ‰å¯¹BæˆåŠŸåŠ é”\n\né”™è¯¯æ¢å¤ç»ƒä¹ è„é¡µè¡¨çš„æ›´æ–°\n\n\nPageID\nPageLSN\nRecLSN\n\n\n\n\nå¦‚æœæœ‰æ–°çš„é¡µé¢è¢«æ›´æ–°äº†ï¼ŒåŠ å…¥è„é¡µè¡¨ï¼ŒåŒæ—¶è®¾ç½®å¯¹åº”çš„PageLSN, RecLSNç­‰äºå½“å‰çš„log LSN\nåªæœ‰flushçš„æ—¶å€™æ‰ä¼šæ¸…é™¤è„é¡µè¡¨ä¸­çš„page entryï¼ˆæˆ‘ä»¬æ— æ³•çŸ¥é“ä»€ä¹ˆæ—¶å€™flushåˆ°diskï¼Œå› æ­¤ä¸€èˆ¬åªå¢ä¸å‡ï¼‰\n\n\n\nè¡¥å……ä¸åŒçš„èŒƒå¼ç¬¬ä¸€èŒƒå¼  è¡¨ä¸­çš„æ¯ä¸ªå­—æ®µéƒ½æ˜¯ä¸å¯å†åˆ†çš„æœ€å°æ•°æ®å•ä½ï¼Œå³å­—æ®µå…·æœ‰åŸå­æ€§ï¼›\n\nå¦‚æœå­˜åœ¨å¤šå€¼å±æ€§ï¼Œéœ€è¦å°†å…¶åˆ†å‰²ä½å¤šä¸ªå•ç‹¬çš„\n\nç¬¬äºŒèŒƒå¼ æ¶ˆé™¤éPKå±æ€§å¯¹äºkeyçš„éƒ¨åˆ†å‡½æ•°ä¾èµ–\n\nA-&gt;B : B ä¾èµ–äºA\nå¦‚æœä¸»é”®æ˜¯å¤åˆçš„ï¼Œç¡®ä¿æ‰€æœ‰éPKå±æ€§å®Œå…¨ä¾èµ–äºæ•´ä¸ªä¸»é”®ï¼Œè€Œä¸æ˜¯ä¸»é”®çš„ä¸€éƒ¨åˆ†\n\nç¬¬ä¸‰èŒƒå¼ æ¶ˆé™¤éPKå¯¹äºkeyçš„ä¼ é€’å‡½æ•°ä¾èµ–\n\nç¡®ä¿æ‰€æœ‰éPKå±æ€§éƒ½ç›´æ¥ä¾èµ–äºPK\n\nBCNFèŒƒå¼ æ¶ˆé™¤PKå¯¹äºkeyçš„éƒ¨åˆ†ä¸ä¼ é€’å‡½æ•°ä¾èµ–\n\nTODOï¼šè¡¥å……ä¸ç†è§£\nSOLUTIONï¼šä¹¦ä¸Šæ²¡æœ‰å•Šï¼Ÿ\n\nColumnar Representationåˆ—å¼å­˜å‚¨åœ¨æ•°æ®æŸ¥è¯¢æ–¹é¢è¡¨ç°æ›´å¥½ï¼Œä½†æ˜¯åœ¨äº‹åŠ¡å¤„ç†æ–¹é¢è¡¨ç°è¾ƒå·®\n\n\n\nhybrid row/column storeï¼š æ”¯æŒè¡Œåˆ—ä¸¤ç§å­˜å‚¨æ–¹å¼çš„æ•°æ®åº“\næ ¹æ®drawback, Reduced cost of tuple deletion and updateçš„è¯´æ³•æ˜¯é”™è¯¯çš„\n\nçº¿æ€§æœç´¢ä¸indexæˆ‘ä»¬æ ¹æ®æ¯”è¾ƒè¿ç®—ç¬¦æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦ä½¿ç”¨indexï¼š\n\n\nå†²çªå¯åºåˆ—åŒ–ä¸2PL\néµå¾ª2PLçš„äº‹åŠ¡è°ƒåº¦ä¸€å®šæ˜¯å†²çªå¯åºåˆ—åŒ–çš„ï¼›\næ‰€æœ‰åœ¨æ ‘åè®®ä¸‹åˆæ³•çš„è°ƒåº¦ä¹Ÿæ˜¯å†²çªå¯åºåˆ—åŒ–çš„\n\n\nä½†æ˜¯æ»¡è¶³å†²çªå¯åºåˆ—åŒ–çš„äº‹åŠ¡è°ƒåº¦ä¸ä¸€å®šéµå¾ªä¸¤é˜¶æ®µé”åè®®\n\n\n\nèŒƒå›´æŸ¥æ‰¾\n\nredo-list\n\n\nabortçš„äº‹åŠ¡ä¹Ÿåº”è¯¥è¢«æ’é™¤åœ¨redo-listä¹‹å¤–\n\nå°è´´å£«\nè®¡ç®—B+æ ‘çš„æ‰‡å‡ºæ—¶ï¼Œé”®çš„å¤§å°æ˜¯æŒ‰ç…§search-keyï¼Œä¹Ÿå°±æ˜¯PKçš„å¤§å°æ¥è®¡ç®—çš„ï¼Œä¸è¦å°†å…³ç³»ä¸­çš„æ‰€æœ‰å±æ€§ç›¸åŠ ğŸ˜‡\nç»˜åˆ¶B+æ ‘çš„ç¤ºæ„å›¾æ—¶ï¼Œè®°å¾—åœ¨å¶å­å±‚è¡¥å……é“¾è¡¨ç»“æ„\nè¿›è¡Œç»“æœé›†å¤§å°ä¼°è®¡æ—¶ï¼Œå‘ç”Ÿåœ¨å€™é€‰é”®ä¸Šçš„ç­‰å€¼æŸ¥æ‰¾ï¼Œç»“æœé›†å¤§å°åº”å½“ä¸º0æˆ–1\nç»™å‡ºè®°å½•æ•°é‡ã€æ¯æ¡è®°å½•çš„sizeä»¥åŠblockçš„å¤§å°æ—¶ï¼Œåº”è¯¥å…ˆè®¡ç®—æ¯ä¸ªblockæ‰€åŒ…å«çš„è®°å½•æ•°é‡ï¼ˆå‘ä¸‹å–æ•´ï¼‰ï¼Œç„¶åè®¡ç®—æ‰€éœ€çš„blockæ•°é‡ï¼ˆå‘ä¸Šå–æ•´ï¼‰\nç›´æ¥åˆ©ç”¨æ€»æ•°é‡è®¡ç®—æ€»å®¹é‡ç„¶åè®¡ç®—blockæ•°é‡æœ‰è¯¯ï¼Œå› ä¸ºè¿™æ ·å¯¼è‡´äº†ä¸åŒblockä¹‹é—´å¯èƒ½å­˜å‚¨äº†åŒä¸€æ¡è®°å½•ï¼ˆçš„éƒ¨åˆ†ï¼‰\n\n\nACIDï¼š\nåŸå­æ€§ (atomicity)\næ¢å¤ç³»ç»Ÿ\n\n\nä¸€è‡´æ€§ (consistencyï¼‰\nç”±ADIå’Œåˆé€‚çš„çº¦æŸæ¡ä»¶ï¼ˆè§¦å‘å™¨ç­‰ï¼‰å®ç°\n\n\néš”ç¦»æ€§ (isolation)\nå¹¶å‘æ§åˆ¶\n\n\næŒä¹…æ€§ (durability)\næ¢å¤ç³»ç»Ÿ\n\n\n\n\nrelationï¼šè¡Œï¼Œ relationshipï¼šè¡¨\nAccess timeï¼š The time it takes from when a read or write request is issued to when data transfer begins\n= seek + rotation time\n\n\nstealç­–ç•¥ï¼šcheckpointä¹‹å‰çš„ä¿®æ”¹éƒ½å·²ç»ååº”åˆ°äº†diskï¼ˆæ— è®ºå¯¹åº”çš„äº‹åŠ¡æ˜¯å¦commitï¼‰\næ— æ³•ç¡®å®šcheckpointä¹‹åå‘ç”Ÿçš„ä¿®æ”¹æ˜¯å¦flushåˆ°äº†disk\n\n\nä¸èƒ½å¯¹è¾…åŠ©ç´¢å¼•ä½¿ç”¨ç¨€ç–çš„ç­–ç•¥ï¼\nè¾…åŠ©ç´¢å¼•å¯¹åº”çš„search-keyä¸€èˆ¬ä¸æ˜¯æ–‡ä»¶æ’åˆ—çš„é¡ºåºï¼›\nå¦‚æœåªæ˜¯å¯¹éƒ¨åˆ†çš„è®°å½•å»ºç«‹è¾…åŠ©ç´¢å¼•ï¼Œé‚£ä¹ˆæ— æ³•é€šè¿‡ç›¸é‚»çš„è¾…åŠ©ç´¢å¼•æ¥indexå¾—åˆ°æ²¡æœ‰å»ºç«‹ç´¢å¼•çš„è®°å½•\nåªèƒ½å¯¹primary/clustering keyä½¿ç”¨ç¨€ç–ç´¢å¼•\n\n\nå› æ­¤æˆ‘ä»¬æœ‰ä¸¤ä¸ªç»“è®ºï¼š\nç¨€ç–ç´¢å¼•åªèƒ½ç”¨äºé¡ºåºæ–‡ä»¶\nè¾…åŠ©ç´¢å¼•åªèƒ½ç”¨äºå¯†é›†ç´¢å¼•\n\n\n\nPPTå›é¡¾\nSimple checkpoint stops all active transactions, write out all the updated pages, and restart transactions after completing\n\nå¯¼è®ºä¸åŸºç¡€æ•°æ®åº“ç³»ç»Ÿçš„ç›®çš„ç›´æ¥å»ºç«‹åœ¨æ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ•°æ®åº“åº”ç”¨å¯¼è‡´ï¼š\n\nData redundancyï¼ˆæ•°æ®å†—ä½™ï¼‰and inconsistencyï¼ˆä¸ä¸€è‡´ï¼‰\nData isolationï¼ˆæ•°æ®å­¤ç«‹ï¼Œæ•°æ®å­¤å²›ï¼‰â€” multiple files and formats\nDifficulty in accessing dataï¼ˆå­˜å–æ•°æ®å›°éš¾ï¼‰\nIntegrity problemsï¼ˆå®Œæ•´æ€§é—®é¢˜ï¼‰\nAtomicity problemsï¼ˆåŸå­æ€§é—®é¢˜ï¼‰\nConcurrent access anomaliesï¼ˆå¹¶å‘è®¿é—®å¼‚å¸¸ï¼‰\nSecurity problemsï¼ˆå®‰å…¨æ€§é—®é¢˜ï¼‰\n\næ•°æ®åº“çš„ç‰¹å¾data persistenceï¼ˆæ•°æ®æŒä¹…æ€§ï¼‰convenience in accessing dataï¼ˆæ•°æ®è®¿é—®ä¾¿åˆ©æ€§ï¼‰data integrityï¼ˆæ•°æ®å®Œæ•´æ€§ï¼‰concurrency control for multiple usersï¼ˆå¤šç”¨æˆ·å¹¶å‘æ§åˆ¶ï¼‰failure recoveryï¼ˆæ•…éšœæ¢å¤ï¼‰security controlï¼ˆå®‰å…¨æ§åˆ¶ï¼‰\nview of dataåˆ†ä¸ºäº†è§†å›¾ã€é€»è¾‘å’Œç‰©ç†æ¨¡å¼ï¼š\n\nè§†å›¾æ¨¡å¼ï¼šéšè—äº†æ•°æ®ç±»å‹çš„ç»†èŠ‚ï¼Œä¹Ÿå¯èƒ½å‡ºäºå®‰å…¨æ€§çš„è€ƒè™‘è€Œéšè—æ•°æ®çš„ä¿¡æ¯ç­‰\né€»è¾‘æ¨¡å¼ï¼šæè¿°æ•°æ®å’Œå…³ç³»\nç‰©ç†æ¨¡å¼ï¼šæè¿°è®°å½•å¦‚ä½•è¢«å­˜å‚¨\n\n\nä¸åŒæ¨¡å¼ä¹‹é—´å­˜åœ¨å¯¹åº”çš„æ˜ å°„ mapping\n\nDDLæ•°æ®å­—å…¸ï¼šDDL compiler generates a set of table templates stored in a data dictionary\næ•°æ®å­—å…¸åŒ…å«äº†å…ƒæ•°æ®ï¼š\n\nschema\nå®Œæ•´æ€§çº¦æŸ\nä¸»é”®\nå‚ç…§å®Œæ•´æ€§\næƒé™\n\nDMLä¸¤ç§æ•°æ®æ“ä½œè¯­è¨€ï¼š\n\nè¿‡ç¨‹å¼ proceduralï¼šæè¿°å¦‚ä½•è·å¾—ä¿¡æ¯\né™ˆè¿°å¼ declaretiveï¼šåªå£°æ˜éœ€è¦çš„æ•°æ®ï¼Œä½†æ˜¯ä¸è¯´æ˜å¦‚ä½•è·å–\n\n\nSQLæ˜¯æµè¡Œçš„ã€é™ˆè¿°å¼çš„è¯­è¨€\n\næ­£å› å¦‚æ­¤ï¼ŒSQLä¸æ”¯æŒç›´æ¥é€šè¿‡networkæ¥äº¤äº’ï¼Œç›¸å…³çš„è®¡ç®—å’Œäº¤äº’éœ€è¦å†™åœ¨å®¿ä¸»è¯­è¨€ host language ä¸­å®ç°\nåº”ç”¨å¯ä»¥é€šè¿‡APIæˆ–è€…åµŒå¥—çš„SQLè¯­å¥æ¥è®¿é—®æ•°æ®åº“ï¼ˆéœ€è¦å®¿ä¸»è¯­è¨€çš„æ”¯æŒï¼‰\n\n\nDBA\næ•°æ®åº“ç®¡ç†å‘˜\n\nDBAçš„æŒ‡è´£ï¼šèŒƒå¼çš„å®šä¹‰ã€æƒé™çš„ç®¡ç†ã€æ—¥å¸¸çš„ç»´æŠ¤ï¼ˆæ ¹æ®è¡¨ç°è¿›è¡Œå¾®è°ƒã€å®šæœŸå°†æ•°æ®å¤‡ä»½ã€ç¡®ä¿å……åˆ†çš„diskç©ºé—´ï¼‰\næ•°æ®åº“ç³»ç»Ÿçš„å†å²NoSQL\nnot only SQL\n\næä¾›äº†ä¸€ç§å­˜å‚¨å’Œæ£€ç´¢æ•°æ®çš„æœºåˆ¶ï¼Œè¿™äº›æ•°æ®ä½¿ç”¨æ¯”ä¼ ç»Ÿå…³ç³»æ•°æ®åº“æ›´æ¾æ•£çš„ä¸€è‡´æ€§æ¨¡å‹ï¼Œä»¥å®ç°æ¨ªå‘æ‰©å±•å’Œæ›´é«˜çš„å¯ç”¨æ€§ã€‚\nå½“æ•°æ®çš„æ€§è´¨ä¸éœ€è¦å…³ç³»æ¨¡å‹æ—¶ï¼ŒNoSQLæ•°æ®åº“ç³»ç»Ÿåœ¨å¤„ç†å¤§é‡æ•°æ®ï¼ˆå°¤å…¶æ˜¯å¤§æ•°æ®ï¼‰æ—¶å¾ˆæœ‰ç”¨ã€‚\nå¸¸ç”¨çš„NoSQL DBMsï¼šMongoDBï¼ŒCassandra, HBase\nNewSQLå¯»æ±‚ä¸ºOLTPå·¥ä½œè´Ÿè½½æä¾›ä¸NoSQLç³»ç»Ÿç›¸åŒçš„å¯æ‰©å±•æ€§èƒ½ï¼ŒåŒæ—¶ä»ç„¶ä¿æŒä¼ ç»Ÿæ•°æ®åº“ç³»ç»ŸNewSQLçš„ACIDä¿è¯ï¼š\nå…³ç³»æ¨¡å‹å‚ç…§å®Œæ•´æ€§ï¼šè¦æ±‚å‚ç…§è¡¨ä¸­çš„å¤–é”®å±æ€§ä¸€å®šåœ¨è¢«å‚ç…§è¡¨ä¸­çš„è‡³å°‘ä¸€ä¸ªå…ƒç»„ä¸­å­˜åœ¨\nUnionè¦æ±‚ï¼š\n\nä¸¤ä¸ªå…³ç³»çš„å±æ€§ä¸ªæ•° arityç›¸åŒï¼›\nå¯¹åº”åˆ—çš„å±æ€§çš„domain / type ä¸€è‡´\n\n\nTODOï¼šå±æ€§ä¸ªæ•°ä¸€è‡´ï¼Ÿ\n\nè¿æ¥\n\nSemijoinåŠè¿æ¥ï¼šåªä¼šå°†æ»¡è¶³è¿æ¥æ¡ä»¶çš„å…ƒç»„ï¼Œä¿ç•™æ¥è‡ªæŒ‡å®šå…³ç³»çš„å±æ€§ï¼Œä¹Ÿå°±æ˜¯åœ¨theta joinçš„ç»“æœå–projection\n\næ¯”å¦‚å·¦åŠè¿æ¥ï¼Œå°†ä¼šå¾—åˆ°å·¦ä¾§å…³ç³»çš„åŒ¹é…å…ƒç»„\n\nnull è¡¨ç¤ºå€¼å¤„äºunknownçŠ¶æ€ æˆ–è€… ä¸å­˜åœ¨\nOuter joinå¤–è¿æ¥ï¼šåœ¨è‡ªç„¶è¿æ¥çš„åŸºç¡€ä¸Šï¼Œä¿ç•™ç‰¹å®šå…³ç³»ä¸åŒ¹é…çš„å…ƒç»„\n\n\nä½¿ç”¨joinsç»„åˆå¤–è¿æ¥\n\nnumericï¼ˆ3,1ï¼‰  æ€»å…±3ä½ï¼Œä¸”å°æ•°ç‚¹å1ä½\n\nnumeric æ˜¯ fixed point numberï¼Œ ä¸æµ®ç‚¹æ•°ç›¸åŒºåˆ†\n\nfloatï¼ˆnï¼‰ è¡¨ç¤ºè‡³å°‘æœ‰nä½\nprimary key declaration on an attribute automatically ensures not null\n\nä¸»é”®è‡ªåŠ¨å…·æœ‰éç©ºçš„çº¦æŸæ¡ä»¶\n\nuniqueä½¿ç”¨ uniqueæ¥æµ‹è¯•å­æŸ¥è¯¢æ˜¯å¦å«æœ‰å¤šä¸ªå…ƒç»„\n\nå½“å­æŸ¥è¯¢è¿”å›çš„å…ƒç»„ä¸ªæ•°æ˜¯0æˆ–è€…1æ—¶ï¼Œ\n\nç®€å•çš„ä¾‹å­ï¼š\n\n\nwithç®€å•çš„ä¾‹å­ï¼š\n\n\n\nå…³é”®è¯ï¼šwith å’Œ  as\n\nuser-defined typestypeå’Œ domainéƒ½æ˜¯ç”¨äºè‡ªå®šä¹‰çš„æ•°æ®ç±»å‹, äºŒè€…ååˆ†ç›¸ä¼¼. åŒºåˆ«åœ¨äº: åè€…å¯ä»¥å£°æ˜çº¦æŸ constraints.\nType\nè¯­æ³•\ncreate type type_nameas data_type[ (precision, scale) ][ not null ][ final | instantiable | abstract ];\n\n\nfinal | instantiable | abstract:\nç”¨äºæŒ‡å®šç±»å‹çš„ç»§æ‰¿å±æ€§ã€‚\n\nfinalï¼šè¡¨ç¤ºè¯¥ç±»å‹ä¸èƒ½è¢«ç»§æ‰¿ã€‚\ninstantiableï¼šè¡¨ç¤ºå¯ä»¥åˆ›å»ºè¯¥ç±»å‹çš„å®ä¾‹ã€‚\nabstractï¼šè¡¨ç¤ºè¯¥ç±»å‹æ˜¯æŠ½è±¡çš„ï¼Œä¸èƒ½åˆ›å»ºå®ä¾‹ã€‚\n\n\n\ne.g.\ncreate type dollarsas numeric(12, 2)final;create table department (    dept_name varchar(20),    building varchar(15),    budget dollars);\n\nDomainå½“æŸäº›åˆ—éœ€è¦é™åˆ¶å…¶å–å€¼èŒƒå›´, ä¹Ÿå°±æ˜¯å…·æœ‰ä¸€å®šçš„çº¦æŸæ¡ä»¶æ—¶, å¦‚æœæ¯æ¬¡åˆ›å»ºç±»ä¼¼çš„åˆ—éƒ½é‡å¤ä¹¦å†™, å·¥ä½œé‡è¾ƒå¤§.\ndomainå¯ä»¥ç†è§£ä¸ºå¯¹æ•°æ®ç±»å‹çš„æ‰©å±•å®šä¹‰ï¼Œå®ƒå…è®¸æˆ‘ä»¬åˆ›å»ºè‡ªå®šä¹‰çš„æ•°æ®ç±»å‹ï¼Œå¹¶ä¸”å¯ä»¥ä¸ºå…¶æŒ‡å®šçº¦æŸæ¡ä»¶ã€‚ä½¿ç”¨ domain å¯ä»¥ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ï¼Œ\n\nåŸºæœ¬è¯­æ³•\n\nCREATE DOMAIN åŸŸå æ•°æ®ç±»å‹[DEFAULT é»˜è®¤å€¼][CONSTRAINT çº¦æŸåç§°][CHECK (çº¦æŸæ¡ä»¶)];\n\n\ne.g.\n\n-- åˆ›å»ºä¸€ä¸ªè¡¨ç¤ºå¹´é¾„çš„åŸŸCREATE DOMAIN age_type INTEGERCONSTRAINT valid_ageCHECK (VALUE &gt;= 0 AND VALUE &lt;= 150);\n\nLarge-Object TypesMySQL BLOB datatypes:\n\nTinyBlob : 0 ~ 255 bytes.\nBlob: 0 ~ 64K bytes.\nMediumBlob : 0 ~ 16M bytes.\nLargeBlob : 0 ~ 4G bytes.\n\n\nä¸Šé™ä»¥çš„è§„æ¨¡é€’å¢\n\nå€™é€‰é”®CKå¯ä»¥ä¸ºnullï¼Œä½†æ˜¯ä¸»é”®PKä¸èƒ½ä¸ºç©º\n\nå› æ­¤ï¼Œuniqueæ„æˆç»„æˆçš„å±æ€§é›†åˆå¯ä»¥ç§°ä¸ºæ„æˆäº†ä¸€ç»„è¶…é”®ï¼Œä½†æ˜¯ä¸èƒ½ç§°ä¸ºCKï¼Œå› ä¸ºCKå¯ä»¥ä¸ºç©º\n\nassertione.g.\ncreate assertion credits_constaint check (    not exists(        select *        from student S        where total_cred &lt;&gt; (            select sum(credits)            from takes natural join course            where takes.ID = S.ID                 and grade is not null                 and grade &lt;&gt; 'F'        )    ))\n\nä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥é˜»æ­¢æ•°æ®åº“å¯¹SQLçš„éšå¼commitï¼š\nset autocommit = 0...commit;\n\næˆæƒå››ç§æƒé™ï¼šå¢åˆ æ”¹æŸ¥\n\ninsertä¸å…è®¸ä¿®æ”¹ç°æœ‰çš„æ•°æ®ï¼›\nupdateä¸å…è®¸åˆ é™¤ç°æœ‰çš„æ•°æ®\n\näº”ç§ä¿®æ”¹æ•°æ®åº“èŒƒå¼çš„æƒé™ï¼š\n\n\n\nèŒƒå¼çš„åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤ï¼Œä»¥åŠindexå’Œviewç›¸å…³çš„æ“ä½œ\n\nAuthorization\næˆäºˆæƒé™ï¼š\n\ngrant &lt;privilege_list&gt; on &lt;relation_name or view_name&gt; to &lt;user_list&gt;\n\nè¿™é‡Œçš„ &lt;user_list&gt;æ—¢å¯ä»¥æ˜¯å…·ä½“çš„ç”¨æˆ·åï¼Œä¹Ÿå¯ä»¥æ˜¯å…³é”®å­— PUBLICï¼ˆè¡¨ç¤ºæˆæƒç»™æ‰€æœ‰ç”¨æˆ·ï¼‰ã€‚\nç‰¹åˆ«åœ°ï¼Œå½“æˆ‘ä»¬éœ€è¦å…è®¸ç”¨æˆ·å…·æœ‰è½¬æˆæƒçš„èƒ½åŠ›æ—¶ï¼Œå¯ä»¥åœ¨æˆæƒè¯­å¥æœ«å°¾æ·»åŠ  WITH GRANT OPTIONå­å¥ã€‚\n\n\n\næƒé™å›æ”¶ï¼š\n\nrevoke &lt;privilege_list&gt; on &lt;relation_name&gt; from &lt;user_list&gt; [restrict|cascade]\n\n\n\nå…¶ä¸­ RESTRICTè¡¨ç¤ºä»…å›æ”¶ç›´æ¥æˆäºˆçš„æƒé™ï¼Œè€Œ CASCADEåˆ™ä¼šåŒæ—¶å›æ”¶è¯¥ç”¨æˆ·è½¬æˆç»™å…¶ä»–ç”¨æˆ·çš„æƒé™(çº§\n\n\nå¯ä»¥åœ¨æƒé™åˆ—è¡¨ä¸­å£°æ˜ all è¡¨ç¤ºå›æ”¶æ‰€æœ‰çš„ç‰¹æƒ;\nå¯ä»¥åœ¨ç”¨æˆ·åˆ—è¡¨å£°æ˜ publicè¡¨ç¤ºå›æ”¶çš„èŒƒå›´æ˜¯æ­£å¸¸è®¿é—®çš„æ™®é€šæˆå‘˜, ä½†æ˜¯ä¸ä¼šå›æ”¶æŒ‡å®šçš„æˆå‘˜çš„ç‰¹æƒ\n\n\n\nå¦‚æœåŒä¸€ä¸ªç”¨æˆ·è¢«ä¸åŒçš„æˆæƒè€…å…ˆåæˆäºˆäº†2æ¬¡ç›¸åŒçš„æƒé™, é‚£ä¹ˆä¸€æ¬¡çš„å›æ”¶æƒé™ä¹‹å, taçš„æƒé™å¯èƒ½ä¾æ—§å­˜åœ¨.\næƒé™çš„ä¾èµ–æ€§: å¦‚æœå›æ”¶çš„æƒé™ä¼šå¯¼è‡´å…·æœ‰ä¾èµ–å…³ç³»çš„æƒé™çš„å¤±æ•ˆ, é‚£ä¹ˆæ¶‰åŠçš„æƒé™ä¹Ÿä¼šè¢«å›æ”¶:\n\nåˆ›å»ºå¤–é”®çº¦æŸçš„æƒé™\ngrant reference (dept_name) on department to Mariano;\n\næ•°æ®åº“è®¾è®¡çš„æµç¨‹\nrequirement specification\nconceptual-designï¼š E-R diagram\nlogical-designï¼šlogical schema\nphysical-designï¼š physical schema\n\nè®¾è®¡èŒƒå¼çš„æ—¶å€™ï¼Œä¸»è¦é¿å…ä¸¤ä¸ªé—®é¢˜ï¼š\n\nredundancy\nincompleteness\n\nentityï¼š an object that exists and is distinguishable from other objects\nä¸‰å…ƒå…³ç³»ä¸ç®­å¤´\n\nArmstrongâ€™s\n\nä»¥åŠå¯¹åº”çš„æ¨è®ºï¼š\n\n\næŒ‰ç…§BCNFåˆ†è§£ï¼š\n\nä¸€å®šæ˜¯æ— æŸåˆ†è§£\nä½†ä¸ä¸€å®šæ˜¯æ»¡è¶³ä¾èµ–ä¿ç•™çš„\n\n\næŒ‰ç…§3NFåˆ†è§£ï¼Œå¯ä»¥åŒæ—¶æ»¡è¶³ä¸Šé¢ä¸¤æ¡\n\nMVDå®šä¹‰\n\nç›¸å…³å®šç†ä¸4NF\nä»»ä½•å‡½æ•°ä¾èµ–ä¸€å®šä¹Ÿæ˜¯å¤šå€¼ä¾èµ–\nDçš„é—­åŒ…D+æ˜¯é€»è¾‘ä¸Šç”±Déšå«çš„æ‰€æœ‰åŠŸèƒ½å’Œå¤šå€¼ä¾èµ–é¡¹çš„é›†åˆï¼›\nå¦‚æœä¸€ä¸ªå…³ç³»èŒƒå¼æ»¡è¶³ä¸‹é¢çš„è¦æ±‚ï¼Œå°±ç§°ä¸ºæ»¡è¶³4NFï¼Œå¯¹äºå‡½æ•°å’Œå¤šå€¼ä¾èµ–Dï¼Œå¦‚æœå…¶D+ä¸­çš„æ‰€æœ‰å¤šå€¼ä¾èµ–éƒ½åªå­˜åœ¨ä¸‹é¢ä¸¤ç§æƒ…å†µä¹‹ä¸€ï¼›\nå¹³å‡¡çš„ï¼ˆå³ä¾§åŒ…å«åœ¨å·¦ä¾§å±æ€§ï¼Œæˆ–è€…äºŒè€…çš„å¹¶é›†æ˜¯Rï¼‰\nå·¦ä¾§å±æ€§æ˜¯Rçš„è¶…é”®\n\n\n\n\n4NFç±»ä¼¼äºæ™®é€šå…³ç³»çš„BCNF\n\nç‰©ç†å­˜å‚¨ç³»ç»Ÿå­˜å‚¨çº§åˆ«\n\nè®¿é—®æ—¶é—´ = å¯»é“æ—¶é—´ + æ—‹è½¬å»¶è¿Ÿ\ndisk-blockè®¿é—®çš„ä¼˜åŒ–ï¼š\n\nbuffering\nprefetch\ndisk-arm-schedulingï¼šä½¿ç”¨ç®—æ³•é‡æ’blockçš„è¯·æ±‚\néæ˜“å¤±æ€§å†™ç¼“å­˜\nnon-volatile RAM: battery backed up RAM or flash memory\n\n\nlog disk æ—¥å¿—ç£ç›˜\n\nFlash storageNAND flash\n\npage-at-a-time read\nåœ¨erasedä¹‹å‰ ä¸€ä¸ªpageåªèƒ½è¢«writeä¸€æ¬¡\n\nSSDï¼šsplid state disk\né€šè¿‡flash translation tableå°†é€»è¾‘é¡µåœ°å€è½¬æ¢æˆç‰©ç†é¡µåœ°å€\nåœ¨åˆ†æ§½é¡µä¸­ï¼Œè®°å½•æŒ‡é’ˆä¸æ˜¯ç›´æ¥æŒ‡å‘è®°å½•ï¼Œè€Œæ˜¯æŒ‡å‘å¯¹åº”entryçš„header\næ–‡ä»¶ä¸­è®°å½•çš„ç»„ç»‡å½¢å¼ï¼š\n\nheapï¼šè®°å½•å¯ä»¥å­˜æ”¾åœ¨æ–‡ä»¶çš„ä»»æ„ä½ç½®ï¼›\nsequentialï¼šæ ¹æ®search-keyçº¿æ€§å­˜å‚¨è®°å½•\nhashingï¼šåˆ©ç”¨å“ˆå¸Œå‡½æ•°è®¡ç®—search-keyï¼Œç„¶åå­˜å‚¨åˆ°å¯¹åº”çš„blockä¸­\nmultitable clustering file organizationï¼šå°†ä¸åŒå…³ç³»çš„è®°å½•å­˜æ”¾åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­\nå¯ä»¥ä¸ºåŒä¸€ä¸ªå…³ç³»çš„è®°å½•ä¹‹é—´å¢åŠ æŒ‡é’ˆï¼Œå½¢æˆpointer chains æŒ‡é’ˆé“¾\n\n\ntable partitioningï¼šå°†ä¸€ä¸ªå…³ç³»ä¸­çš„è®°å½•åˆ†æˆæ›´å°çš„å…³ç³»ï¼Œåˆ†åˆ«å­˜å‚¨\nç›¸å½“äºä¸Šä¸€ç§å½¢å¼çš„å¯¹ç«‹\n\n\ndata dictionary storage\nä¹Ÿç§°ä¸ºsystem catalog\nå­˜å‚¨metadata\n\n\n\n\n\nBuffer-Replacement Policies\nLRU\nToss-immediate strategyï¼šåªè¦ä¸€ä¸ªblockçš„æœ€åä¸€ä¸ªå…ƒç»„çš„æ•°æ®è¢«å¤„ç†ç»“æŸï¼Œå°±é‡Šæ”¾è¿™ä¸ªblock\nMRUï¼šåˆšå¤„ç†ç»“æŸçš„blockæ˜¯æœ€å¯èƒ½è¢«æ›¿æ¢çš„å¯¹è±¡\nclockï¼š\n\n\n\nColumn-Oriented Storage\nä¹Ÿè¢«ç§°ä¸º columnar representation\n\n\n\n\nåˆ—ï¼šå†³ç­–æ”¯æŒï¼›\nè¡Œï¼šäº‹åŠ¡å¤„ç†\n\nORC ä¼˜åŒ–è¡Œåˆ—å­˜å‚¨\n\nApache ORC å’Œ Apache Parquet\næµè¡Œå¤„ç†big-dataçš„åº”ç”¨\n\nç´¢å¼•é¡ºåºæ–‡ä»¶ï¼šæ ¹æ®ä¸»ç´¢å¼•æ’åºçš„æœ‰åºæ–‡ä»¶\nç¨ å¯†ç´¢å¼•â€”â€”å¯¹å»ºç«‹ç´¢å¼•çš„å±æ€§ï¼Œæ¯ä¸€ä¸ªå€¼éƒ½æœ‰è‡ªå·±çš„æŒ‡é’ˆï¼›\n\nç¨€ç–ç´¢å¼•ï¼šåªæœ‰éƒ¨åˆ†search-keyçš„ç´¢å¼•ï¼Œå› æ­¤è¦æ±‚è®°å½•å¿…é¡»æŒ‰ç…§æœç´¢é”®æ¥æ’åº\n\nå¦‚æœä¸»ç´¢å¼•æ— æ³•å­˜å‚¨åœ¨memoryä¸­ï¼Œéœ€è¦å°†diskä¸Šçš„ä¸»ç´¢å¼•çœ‹æˆçº¿æ€§æ–‡ä»¶ï¼Œå»ºç«‹å¤–å±‚çš„ç¨€ç–ç´¢å¼•\nB+å¤æ‚åº¦ä¸å ç”¨ç‡\n\né’ˆå¯¹å†™å¯†é›†å‹çš„B+æ ‘çš„ç­–ç•¥ï¼š\n\nLSM tree\nbuffer tree\næ›´å°‘çš„æŸ¥è¯¢å¼€é”€\n\n\n\n\n\nbitmap indicesï¼š\n\nå–å±æ€§çš„å€¼åŸŸçš„å¤§å°ä½œä¸ºè¡Œæ•°\næœ‰è®°å½•çš„ä¸ªæ•°é‚£ä¹ˆå¤šåˆ—ï¼Œå¦‚æœå¯¹åº”ä½ç½®çš„å±æ€§åŒ¹é…ï¼Œbitå°±æ˜¯1\n\nindex on flash\ntodoï¼šch14-51\n\n\npptçš„A4â€˜æœ‰é—®é¢˜ï¼Œå‚è€ƒä¹¦æœ¬çš„å®šä¹‰\n\nå¦‚æœæŸ¥è¯¢çš„æ¯”è¾ƒæ¡ä»¶æ˜¯ &lt;= ï¼Œå°±ä¸è¦ä½¿ç”¨indexï¼Œç›´æ¥ä½¿ç”¨çº¿æ€§æŸ¥æ‰¾\n\n\nmergeæˆæœ¬æœ€å°åŒ–\n\næ··åˆçš„å½’å¹¶åˆå¹¶\nä½¿ç”¨å‰æï¼š\nç¬¬ä¸€ä¸ªå…³ç³»æ˜¯æœ‰åºçš„ï¼›\nç¬¬äºŒä¸ªå…³ç³»åœ¨è¿æ¥å±æ€§ä¸Šå…·æœ‰B+æ ‘çš„indexï¼Œæ–¹ä¾¿æ ¹æ®å±æ€§æŸ¥æ‰¾\n\n\næµç¨‹æ¦‚è¿°ï¼š\né¡ºåºæ‰«æç¬¬ä¸€ä¸ªå…³ç³»ï¼›\nå¯¹äºç¬¬ä¸€ä¸ªå…³ç³»ä¸­çš„æ¯ä¸€ä¸ªå…ƒç»„ï¼Œåˆ©ç”¨è¿æ¥å±æ€§åœ¨ç¬¬äºŒä¸ªå±æ€§ä¸­ä½¿ç”¨ç´¢å¼•æŸ¥æ‰¾å¾—åˆ°å¯¹åº”çš„å¶å­èŠ‚ç‚¹ï¼Œç„¶åå°†ç¬¬ä¸€ä¸ªå…³ç³»çš„å…ƒç»„åˆå¹¶åˆ°å¶å­èŠ‚ç‚¹ä¸­\næ­¤æ—¶ç¬¬äºŒä¸ªå…³ç³»çš„B+æ ‘å¶å­èŠ‚ç‚¹å…·æœ‰å®é™…ç‰©ç†åœ°å€å’Œç¬¬ä¸€ä¸ªå…³ç³»çš„å…ƒç»„ï¼Œå°†å…¶æŒ‰ç…§è‡ªèº«çš„ç‰©ç†åœ°å€æ’åº\nç„¶åï¼Œæˆ‘ä»¬å¾—åˆ°æŒ‰ç…§åœ°å€æ’åºçš„å¶å­èŠ‚ç‚¹ï¼Œå¯ä»¥é¡ºåºæ‰«æï¼Œç„¶åæ„é€ åˆå¹¶ç»“æœï¼ˆç”¨ç¬¬äºŒä¸ªå…³ç³»çš„å…ƒç»„æ¥æ›¿ä»£ç‰©ç†åœ°å€ï¼‰\n\n\nä¸Šè¿°æµç¨‹çš„å…³é”®å°±åœ¨äºï¼Œé€šè¿‡å…ˆæ ¹æ®ç‰©ç†åœ°å€æ’åºï¼Œç„¶åé¡ºåºæ‰«æï¼Œé™ä½äº†éšæœºè®¿é—®å¯¼è‡´çš„å¤§é‡çš„å¯»é“æ—¶é—´\n\n\n\nä¼°è®¡äº¤é›†çš„æˆæœ¬æ—¶ï¼š\n\nå¦‚æœè¿æ¥å±æ€§æ˜¯å…¶ä¸­çš„å¤–é”®-ä¸»é”®å…³ç³»ï¼Œæˆæœ¬æ˜¯ç¡®å®šçš„â€”â€”å¼•ç”¨å…³ç³»çš„å…ƒç»„æ•°ï¼›\nå¦‚æœæ˜¯å¹³å‡¡çš„å…³ç³»ï¼Œé‚£ä¹ˆå°±åˆ©ç”¨Vè®¡ç®—ï¼Œå–æœ€åä¼°è®¡ç»“æœè¾ƒå°ï¼ˆVè¾ƒå¤§çš„ï¼‰\n\n\n\nå¤–è¿æ¥çš„æˆæœ¬ä¼°è®¡ = è‡ªç„¶è¿æ¥çš„ç»“æœ+å¯¹åº”å±æ€§çš„å…ƒç»„ä¸ªæ•°\ncost-based optimizerä¸ºæ¯ä¸ªæ“ä½œé€‰æ‹©cheapestçš„ç®—æ³•ï¼ˆè´ªå¿ƒï¼‰å¯èƒ½ä¸ä¼šäº§ç”Ÿæœ€ä¼˜çš„æ•´ä½“æ•ˆæœï¼Œæ¯”å¦‚ï¼š\n\nåˆå¹¶è¿æ¥å¯èƒ½æ¯”å“ˆå¸Œè¿æ¥æˆæœ¬æ›´é«˜ï¼Œä½†æ˜¯æœ‰åºçš„è¾“å‡ºå¯èƒ½ä¸ºå¤–å±‚çš„ç®—æ³•æä¾›ä¾¿åˆ©ï¼›\nåµŒå¥—å¾ªç¯å¯ä»¥ä¸ºæµæ°´çº¿æä¾›æœºä¼š\n\nnä¸ªå…³ç³»è¿æ¥æ—¶ï¼Œå…·æœ‰ ç§ä¸åŒçš„è¿æ¥é¡ºåº\n\næˆ‘ä»¬ä¸éœ€è¦ä¸€æ¬¡æ€§å¯¹æ‰€æœ‰çš„å…³ç³»é‡‡å–å¥—ç”¨ä¸Šè¿°çš„å…¬å¼ï¼Œå¯ä»¥é‡‡å–åŠ¨æ€è§„åˆ’çš„æ€æƒ³ï¼š\nä»è¾ƒå°çš„å­é›†å¼€å§‹å–ç”¨ï¼Œè®¡ç®—å°è§„æ¨¡çš„ä¸åŒå…³ç³»çš„æ‰€æœ‰è¿æ¥æˆæœ¬ï¼Œå­˜å‚¨åœ¨æ•°ç»„ä¸­ï¼Œåœ¨è¾ƒå¤§è§„æ¨¡çš„è®¡ç®—ä¸­ç›´æ¥å–ç”¨å³å¯\n\nbest join tree\n\n\nå¤æ‚åº¦ï¼š\n\n\n\næ–¹æ³•\næ—¶é—´å¤æ‚åº¦\nç©ºé—´å¤æ‚åº¦\n\n\n\nåŠ¨æ€è§„åˆ’\n\n\n\n\nonly left-deep trees\n\n\n\n\nå¯å‘å¼ä¼˜åŒ–ç­–ç•¥\n\nPerform selection early(reduces the number of tuples)\nPerform projection early(reduces the number of attributes)\nPerform most restrictive selection and join operations (i.e. with smallest result size) before other similar operations.\nPerform left-deep join order\n\nç‰©åŒ–è§†å›¾çš„å¢é‡æ›´æ–°å¯¹äºé€‰æ‹©, joinå¯ä»¥ç›´æ¥åœ¨åŸæ¥çš„ç»“æœä¸Š:\n\ninsert ==&gt; å¹¶é›†;\ndelete ==&gt; å·®\nå¯¹äºavg, max, minç­‰ç»Ÿè®¡å±æ€§, é‡‡å–ä¹‹å‰çš„ä¸­é—´ç»“æœæ¥è¾…åŠ©å®ç°å¢é‡æ›´æ–°.\næ–¹å·®ä¹Ÿå¯ä»¥ç”¨å¢é‡æ›´æ–°æ¥ç»´æŠ¤.\n\n\nå› æ­¤, åªéœ€è¦ç»´æŠ¤å„ä¸ªå…ƒç´ çš„å’Œ, å¹³æ–¹å’Œ ä»¥åŠè®¡æ•° n, å°±å¯ä»¥å®ç°å¿«é€Ÿçš„å¢é‡æ›´æ–°.\nå¹¶å‘æ§åˆ¶2PL\nä¸¤é˜¶æ®µé”åè®® 2PL å¯ä»¥ä¿è¯å†²çªå¯åºåˆ—åŒ–\n\nå°†äº‹åŠ¡çš„æ‰§è¡Œé¡ºåºæŒ‰ç…§lock pointsæ’åº\nä½†æ˜¯å†²çªå¯åºåˆ—åŒ–çš„è°ƒåº¦ä¸ä¸€å®šæ»¡è¶³2PLåè®®ï¼Œä¹Ÿå°±æ˜¯è¯´2PLä¸æ˜¯å†²çªå¯åºåˆ—åŒ–çš„å¿…è¦æ¡ä»¶\nä¸ä¿è¯æ’é™¤æ­»é”\n\n\nä¸¥æ ¼2PLï¼šäº‹åŠ¡å¿…é¡»ä¿æŒè‡ªèº«çš„exclusive locksç›´åˆ°å…¶commits / aborts\n\nç¡®ä¿å¯æ¢å¤æ€§\né¿å…äº†çº§è”å›æ»š\n\n\nå¼º2PLï¼ˆrigorousï¼‰ï¼šäº‹åŠ¡å¿…é¡»ä¿æŒè‡ªèº«çš„æ‰€æœ‰lockï¼Œç›´åˆ°å…¶commits / aborts\n\nå¯ä»¥æŒ‰ç…§äº‹åŠ¡æäº¤çš„é¡ºåºæ¥æ„å»ºåºåˆ—\n\n\n\nLock Conversions\n\nLock table\nusually implemented as an in-memory hash table indexed on the name of the data item being locked\n\n\næ–°çš„è¯·æ±‚æ·»åŠ åˆ°é˜Ÿåˆ—çš„æœ«å°¾ï¼Œå¹¶ä¸”æ£€æŸ¥æ˜¯å¦ä¸å…ˆå‰çš„lockç›¸åŒï¼Œå¦‚æœç›¸åŒå°±grant\nè¯·æ±‚åˆ é™¤çš„æ—¶å€™åŒæ—¶unlock å¯¹åº”çš„requestsï¼Œå¹¶æ£€æŸ¥pendingçš„lockæ˜¯å¦å¯ä»¥è¢«granted\n\n\n\n\n\nTree Protocolæ˜¯å›¾åè®®çš„ä¸€ç§ï¼Œé€‚ç”¨äºå¯¹æ•°æ®è®¿é—®çš„æ¬¡åºå…·æœ‰ååºç»“æ„ç†è§£çš„æƒ…å†µ\n\nä¸­è¯‘ä¸­ï¼šäº†è§£è®¿é—®ç‰¹å®šçš„æ•°æ®é¡¹ä¹‹å‰å¿…é¡»ç»è¿‡çš„ä¸­é—´èŠ‚ç‚¹\n\n\n\nç‰¹ç‚¹ï¼š\n\næ ‘åè®®å¯ä»¥ä¿è¯å†²çªå¯åºåˆ—åŒ–å¹¶æ’é™¤æ­»é” (deadlock-free)\né¿å…äº†å›æ»š\n\n\nç¼ºç‚¹ï¼š\nä¸èƒ½ä¿è¯æ— çº§è”å’Œå¯æ¢å¤æ€§\nå¯èƒ½ lock more data items than neededï¼Œ ä»è€Œé™ä½äº†å¹¶è¡Œæ€§ï¼ŒåŒæ—¶æé«˜äº†é¢å¤–çš„ç­‰å¾…æ—¶é—´\n\n\n\nSchedules not possible under two-phase locking are possible under tree protocol, and vice versa.\nGranularity Hierarchyä»é«˜åˆ°ä½ï¼Œä»¥æ•´ä¸ªæ•°æ®åº“ç³»ç»Ÿä¸ºæ ¹èŠ‚ç‚¹ï¼Œåˆ†åˆ«åˆ’åˆ†ä¸ºä¸åŒå¤§å°çš„åŒºåŸŸï¼Œç›´åˆ°å¶å­èŠ‚ç‚¹åŒ…å«å•ä¸ªè®°å½•çš„ä¿¡æ¯\nä¸ºäº†åœ¨é«˜å±‚çº§å¿«é€Ÿåˆ¤æ–­åº•å±‚èŠ‚ç‚¹æ˜¯å¦è¢«åŠ äº† S / Xé”å¼•å…¥ intention locksï¼š\n\n\n\nå¦‚æœç›´æ¥åŠ X-lockï¼Œè¡¨ç¤ºå¯ä»¥ç›´æ¥ä¿®æ”¹å†…éƒ¨çš„èŠ‚ç‚¹\n\nå¯¹åº”çš„ç›¸å®¹çŸ©é˜µï¼š\n\n\n\nXä¸ä»»æ„é”éƒ½ä¸ç›¸å®¹ï¼›é™¤äº†ISå’ŒXï¼Œéƒ½åªè·Ÿè‡ªå·±ç›¸å®¹ï¼›ISä¸Xä¹‹å¤–çš„é”ç›¸å®¹\n\nå¯¹äºæ’å…¥å’Œåˆ é™¤è®°å½•ï¼Œå¦‚æœåªæ˜¯åœ¨å¯¹åº”çš„è®°å½•ä¸ŠåŠ é”ï¼Œå¯èƒ½å¯¼è‡´å¹½çµç°è±¡å’Œæ­»é”é—®é¢˜\n\nå¯ä»¥ç›´æ¥åœ¨è¡¨å±‚çº§åŠ é”ï¼Œä½†æ˜¯é™ä½äº†å¹¶è¡Œæ€§\nå¯ä»¥å¼•å…¥è°“è¯é”ï¼Œæ¥å‡†ç¡®åˆ¤æ–­å½±å“çš„è®°å½•èŒƒå›´ï¼Œä½†æ˜¯åœ¨å®ç°ä¸Šæ¯”è¾ƒå›°éš¾\nå¦ä¸€ç§æ›´å¥½çš„è§£å†³æ–¹æ³•æ˜¯ï¼šIndex Locking Protocol\n\nIndex Locking Protocol\n\n\nå¯ä»¥é¿å…å¹½çµç°è±¡çš„å‘ç”Ÿ\n\nä¸€ä¸ªä¾‹å­ï¼š\n\n\n\næ³¨æ„èŒƒå›´æŸ¥è¯¢ï¼Œå¯¼è‡´10æ‰€åœ¨çš„å¶å­èŠ‚ç‚¹ä¹Ÿå…·æœ‰äº†S-lock\n\nä¸Šè¿°çš„ç­–ç•¥ä¼šå°†entire leafç»™lockï¼Œä¸ºäº†æé«˜å¹¶è¡Œæ€§ï¼Œæˆ‘ä»¬å¯ä»¥é’ˆå¯¹æŸä¸ªkeyæ¥lockï¼ŒåŒæ—¶ä¸ºäº†ç¡®ä¿å¯ä»¥å‘ç°æ½œåœ¨çš„å¹½çµç°è±¡ï¼Œéœ€è¦å¼•å…¥ä¸€å®šçš„é™åˆ¶æ¡ä»¶ï¼Œè¿™å°±æ˜¯ï¼šNext-Key Locking\nNext-Key Locking\n\nTODOB+-height\n\nSOLUTIONï¼š\næ­¤å¤„çš„heightç¡®å®æ˜¯ä»1å¼€å§‹çš„ï¼Œæ¯”å¦‚è®¡ç®—maxæ—¶å‰é¢çš„4ä¸ª4æ˜¯n, æœ€åä¸€ä¸ªæ˜¯å¶å­å±‚çš„å¶å­å—å†…éƒ¨çš„n-1ï¼Œæ‰€ä»¥é«˜åº¦ä¸ºh, è®¡ç®—sizeæ—¶å­˜åœ¨çš„å› æ•°ä¸ªæ•°ä¹Ÿæ˜¯h\n","categories":["è¯¾ç¨‹ç¬”è®°"],"tags":["CSè¯¾ç¨‹","sql"]}]